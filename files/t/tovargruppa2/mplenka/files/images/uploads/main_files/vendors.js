/*! For license information please see vendors.js.LICENSE.txt */
(self.webpackChunkwebappx=self.webpackChunkwebappx||[]).push([[96],{92151:function(t){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},47961:function(t,e,r){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i.apply(this,arguments)},n=r(12083),s=r(21209),a=r(82664),o=r(23101),l=r(51788),d={},u={VISA:"visa",MASTERCARD:"mastercard",AMERICAN_EXPRESS:"american-express",DINERS_CLUB:"diners-club",DISCOVER:"discover",JCB:"jcb",UNIONPAY:"unionpay",MAESTRO:"maestro",ELO:"elo",MIR:"mir",HIPER:"hiper",HIPERCARD:"hipercard"},c=[u.VISA,u.MASTERCARD,u.AMERICAN_EXPRESS,u.DINERS_CLUB,u.DISCOVER,u.JCB,u.UNIONPAY,u.MAESTRO,u.ELO,u.MIR,u.HIPER,u.HIPERCARD],h=l.clone(c);function f(t){return d[t]||n[t]}function g(t,e){void 0===e&&(e=!1);var r=h.indexOf(t);if(!e&&-1===r)throw new Error('"'+t+'" is not a supported card type.');return r}function p(t){var e=[];if(!a.isValidInputType(t))return e;if(0===t.length)return h.map((function(t){return l.clone(f(t))}));h.forEach((function(r){var i=f(r);s.addMatchingCardsToResults(t,i,e)}));var r=o.findBestMatch(e);return r?[r]:e}p.getTypeInfo=function(t){return l.clone(f(t))},p.removeCard=function(t){var e=g(t);h.splice(e,1)},p.addCard=function(t){var e=g(t.type,!0);d[t.type]=t,-1===e&&h.push(t.type)},p.updateCard=function(t,e){var r=d[t]||n[t];if(!r)throw new Error('"'+t+"\" is not a recognized type. Use `addCard` instead.'");if(e.type&&r.type!==e.type)throw new Error("Cannot overwrite type parameter.");var s=l.clone(r);s=i(i({},s),e),d[s.type]=s},p.changeOrder=function(t,e){var r=g(t);h.splice(r,1),h.splice(e,0,t)},p.resetModifications=function(){h=l.clone(c),d={}},p.types=u,t.exports=p},21209:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addMatchingCardsToResults=void 0;var i=r(51788),n=r(55256);e.addMatchingCardsToResults=function(t,e,r){var s,a;for(s=0;s<e.patterns.length;s++){var o=e.patterns[s];if(n.matches(t,o)){var l=i.clone(e);a=Array.isArray(o)?String(o[0]).length:String(o).length,t.length>=a&&(l.matchStrength=a),r.push(l);break}}}},12083:function(t){"use strict";t.exports={visa:{niceType:"Visa",type:"visa",patterns:[4],gaps:[4,8,12],lengths:[16,18,19],code:{name:"CVV",size:3}},mastercard:{niceType:"Mastercard",type:"mastercard",patterns:[[51,55],[2221,2229],[223,229],[23,26],[270,271],2720],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},"american-express":{niceType:"American Express",type:"american-express",patterns:[34,37],gaps:[4,10],lengths:[15],code:{name:"CID",size:4}},"diners-club":{niceType:"Diners Club",type:"diners-club",patterns:[[300,305],36,38,39],gaps:[4,10],lengths:[14,16,19],code:{name:"CVV",size:3}},discover:{niceType:"Discover",type:"discover",patterns:[6011,[644,649],65],gaps:[4,8,12],lengths:[16,19],code:{name:"CID",size:3}},jcb:{niceType:"JCB",type:"jcb",patterns:[2131,1800,[3528,3589]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVV",size:3}},unionpay:{niceType:"UnionPay",type:"unionpay",patterns:[620,[624,626],[62100,62182],[62184,62187],[62185,62197],[62200,62205],[622010,622999],622018,[622019,622999],[62207,62209],[622126,622925],[623,626],6270,6272,6276,[627700,627779],[627781,627799],[6282,6289],6291,6292,810,[8110,8131],[8132,8151],[8152,8163],[8164,8171]],gaps:[4,8,12],lengths:[14,15,16,17,18,19],code:{name:"CVN",size:3}},maestro:{niceType:"Maestro",type:"maestro",patterns:[493698,[5e5,504174],[504176,506698],[506779,508999],[56,59],63,67,6],gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:"CVC",size:3}},elo:{niceType:"Elo",type:"elo",patterns:[401178,401179,438935,457631,457632,431274,451416,457393,504175,[506699,506778],[509e3,509999],627780,636297,636368,[650031,650033],[650035,650051],[650405,650439],[650485,650538],[650541,650598],[650700,650718],[650720,650727],[650901,650978],[651652,651679],[655e3,655019],[655021,655058]],gaps:[4,8,12],lengths:[16],code:{name:"CVE",size:3}},mir:{niceType:"Mir",type:"mir",patterns:[[2200,2204]],gaps:[4,8,12],lengths:[16,17,18,19],code:{name:"CVP2",size:3}},hiper:{niceType:"Hiper",type:"hiper",patterns:[637095,63737423,63743358,637568,637599,637609,637612],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}},hipercard:{niceType:"Hipercard",type:"hipercard",patterns:[606282],gaps:[4,8,12],lengths:[16],code:{name:"CVC",size:3}}}},51788:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function(t){return t?JSON.parse(JSON.stringify(t)):null}},23101:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findBestMatch=void 0,e.findBestMatch=function(t){return function(t){var e=t.filter((function(t){return t.matchStrength})).length;return e>0&&e===t.length}(t)?t.reduce((function(t,e){return t?Number(t.matchStrength)<Number(e.matchStrength)?e:t:e})):null}},82664:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isValidInputType=void 0,e.isValidInputType=function(t){return"string"==typeof t||t instanceof String}},55256:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matches=void 0,e.matches=function(t,e){return Array.isArray(e)?function(t,e,r){var i=String(e).length,n=t.substr(0,i),s=parseInt(n,10);return e=parseInt(String(e).substr(0,n.length),10),r=parseInt(String(r).substr(0,n.length),10),s>=e&&s<=r}(t,e[0],e[1]):function(t,e){return(e=String(e)).substring(0,t.length)===t.substring(0,e.length)}(t,e)}},3939:function(t){var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,i=0;r<t.length;r++,i+=8)e[i>>>5]|=t[r]<<24-i%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],i=0;i<t.length;i+=3)for(var n=t[i]<<16|t[i+1]<<8|t[i+2],s=0;s<4;s++)8*i+6*s<=8*t.length?r.push(e.charAt(n>>>6*(3-s)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],i=0,n=0;i<t.length;n=++i%4)0!=n&&r.push((e.indexOf(t.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<2*n|e.indexOf(t.charAt(i))>>>6-2*n);return r}},t.exports=r},42838:function(t){t.exports=function(){"use strict";const{entries:t,setPrototypeOf:e,isFrozen:r,getPrototypeOf:i,getOwnPropertyDescriptor:n}=Object;let{freeze:s,seal:a,create:o}=Object,{apply:l,construct:d}="undefined"!=typeof Reflect&&Reflect;s||(s=function(t){return t}),a||(a=function(t){return t}),l||(l=function(t,e,r){return t.apply(e,r)}),d||(d=function(t,e){return new t(...e)});const u=E(Array.prototype.forEach),c=E(Array.prototype.pop),h=E(Array.prototype.push),f=E(String.prototype.toLowerCase),g=E(String.prototype.toString),p=E(String.prototype.match),m=E(String.prototype.replace),v=E(String.prototype.indexOf),y=E(String.prototype.trim),b=E(RegExp.prototype.test),T=S(TypeError);function E(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return l(t,e,i)}}function S(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return d(t,r)}}function w(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;e&&e(t,null);let s=i.length;for(;s--;){let e=i[s];if("string"==typeof e){const t=n(e);t!==e&&(r(i)||(i[s]=t),e=t)}t[e]=!0}return t}function $(t){for(let e=0;e<t.length;e++)void 0===n(t,e)&&(t[e]=null);return t}function A(e){const r=o(null);for(const[i,s]of t(e))void 0!==n(e,i)&&(Array.isArray(s)?r[i]=$(s):s&&"object"==typeof s&&s.constructor===Object?r[i]=A(s):r[i]=s);return r}function C(t,e){for(;null!==t;){const r=n(t,e);if(r){if(r.get)return E(r.get);if("function"==typeof r.value)return E(r.value)}t=i(t)}function r(t){return console.warn("fallback value for",t),null}return r}const L=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),x=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),k=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),D=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),I=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P=s(["#text"]),_=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),O=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),N=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),F=a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),B=a(/<%[\w\W]*|[\w\W]*%>/gm),U=a(/\${[\w\W]*}/gm),G=a(/^data-[\-\w.\u00B7-\uFFFF]/),j=a(/^aria-[\-\w]+$/),V=a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),H=a(/^(?:\w+script|data):/i),K=a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),z=a(/^html$/i);var q=Object.freeze({__proto__:null,MUSTACHE_EXPR:F,ERB_EXPR:B,TMPLIT_EXPR:U,DATA_ATTR:G,ARIA_ATTR:j,IS_ALLOWED_URI:V,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:K,DOCTYPE_NAME:z});const W=function(){return"undefined"==typeof window?null:window},Y=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let r=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(r=e.getAttribute(i));const n="dompurify"+(r?"#"+r:"");try{return t.createPolicy(n,{createHTML(t){return t},createScriptURL(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+n+" could not be created."),null}};function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W();const r=t=>X(t);if(r.version="3.0.8",r.removed=[],!e||!e.document||9!==e.document.nodeType)return r.isSupported=!1,r;let{document:i}=e;const n=i,a=n.currentScript,{DocumentFragment:l,HTMLTemplateElement:d,Node:E,Element:S,NodeFilter:$,NamedNodeMap:F=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:B,DOMParser:U,trustedTypes:G}=e,j=S.prototype,H=C(j,"cloneNode"),K=C(j,"nextSibling"),Z=C(j,"childNodes"),Q=C(j,"parentNode");if("function"==typeof d){const t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let J,tt="";const{implementation:et,createNodeIterator:rt,createDocumentFragment:it,getElementsByTagName:nt}=i,{importNode:st}=n;let at={};r.isSupported="function"==typeof t&&"function"==typeof Q&&et&&void 0!==et.createHTMLDocument;const{MUSTACHE_EXPR:ot,ERB_EXPR:lt,TMPLIT_EXPR:dt,DATA_ATTR:ut,ARIA_ATTR:ct,IS_SCRIPT_OR_DATA:ht,ATTR_WHITESPACE:ft}=q;let{IS_ALLOWED_URI:gt}=q,pt=null;const mt=w({},[...L,...x,...R,...D,...P]);let vt=null;const yt=w({},[..._,...O,...M,...N]);let bt=Object.seal(o(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Tt=null,Et=null,St=!0,wt=!0,$t=!1,At=!0,Ct=!1,Lt=!1,xt=!1,Rt=!1,kt=!1,Dt=!1,It=!1,Pt=!0,_t=!1;const Ot="user-content-";let Mt=!0,Nt=!1,Ft={},Bt=null;const Ut=w({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Gt=null;const jt=w({},["audio","video","img","source","image","track"]);let Vt=null;const Ht=w({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Kt="http://www.w3.org/1998/Math/MathML",zt="http://www.w3.org/2000/svg",qt="http://www.w3.org/1999/xhtml";let Wt=qt,Yt=!1,Xt=null;const Zt=w({},[Kt,zt,qt],g);let Qt=null;const Jt=["application/xhtml+xml","text/html"],te="text/html";let ee=null,re=null;const ie=i.createElement("form"),ne=function(t){return t instanceof RegExp||t instanceof Function},se=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!re||re!==t){if(t&&"object"==typeof t||(t={}),t=A(t),Qt=-1===Jt.indexOf(t.PARSER_MEDIA_TYPE)?te:t.PARSER_MEDIA_TYPE,ee="application/xhtml+xml"===Qt?g:f,pt="ALLOWED_TAGS"in t?w({},t.ALLOWED_TAGS,ee):mt,vt="ALLOWED_ATTR"in t?w({},t.ALLOWED_ATTR,ee):yt,Xt="ALLOWED_NAMESPACES"in t?w({},t.ALLOWED_NAMESPACES,g):Zt,Vt="ADD_URI_SAFE_ATTR"in t?w(A(Ht),t.ADD_URI_SAFE_ATTR,ee):Ht,Gt="ADD_DATA_URI_TAGS"in t?w(A(jt),t.ADD_DATA_URI_TAGS,ee):jt,Bt="FORBID_CONTENTS"in t?w({},t.FORBID_CONTENTS,ee):Ut,Tt="FORBID_TAGS"in t?w({},t.FORBID_TAGS,ee):{},Et="FORBID_ATTR"in t?w({},t.FORBID_ATTR,ee):{},Ft="USE_PROFILES"in t&&t.USE_PROFILES,St=!1!==t.ALLOW_ARIA_ATTR,wt=!1!==t.ALLOW_DATA_ATTR,$t=t.ALLOW_UNKNOWN_PROTOCOLS||!1,At=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Ct=t.SAFE_FOR_TEMPLATES||!1,Lt=t.WHOLE_DOCUMENT||!1,kt=t.RETURN_DOM||!1,Dt=t.RETURN_DOM_FRAGMENT||!1,It=t.RETURN_TRUSTED_TYPE||!1,Rt=t.FORCE_BODY||!1,Pt=!1!==t.SANITIZE_DOM,_t=t.SANITIZE_NAMED_PROPS||!1,Mt=!1!==t.KEEP_CONTENT,Nt=t.IN_PLACE||!1,gt=t.ALLOWED_URI_REGEXP||V,Wt=t.NAMESPACE||qt,bt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ne(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(bt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ne(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(bt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(bt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ct&&(wt=!1),Dt&&(kt=!0),Ft&&(pt=w({},P),vt=[],!0===Ft.html&&(w(pt,L),w(vt,_)),!0===Ft.svg&&(w(pt,x),w(vt,O),w(vt,N)),!0===Ft.svgFilters&&(w(pt,R),w(vt,O),w(vt,N)),!0===Ft.mathMl&&(w(pt,D),w(vt,M),w(vt,N))),t.ADD_TAGS&&(pt===mt&&(pt=A(pt)),w(pt,t.ADD_TAGS,ee)),t.ADD_ATTR&&(vt===yt&&(vt=A(vt)),w(vt,t.ADD_ATTR,ee)),t.ADD_URI_SAFE_ATTR&&w(Vt,t.ADD_URI_SAFE_ATTR,ee),t.FORBID_CONTENTS&&(Bt===Ut&&(Bt=A(Bt)),w(Bt,t.FORBID_CONTENTS,ee)),Mt&&(pt["#text"]=!0),Lt&&w(pt,["html","head","body"]),pt.table&&(w(pt,["tbody"]),delete Tt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw T('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');J=t.TRUSTED_TYPES_POLICY,tt=J.createHTML("")}else void 0===J&&(J=Y(G,a)),null!==J&&"string"==typeof tt&&(tt=J.createHTML(""));s&&s(t),re=t}},ae=w({},["mi","mo","mn","ms","mtext"]),oe=w({},["foreignobject","desc","title","annotation-xml"]),le=w({},["title","style","font","a","script"]),de=w({},[...x,...R,...k]),ue=w({},[...D,...I]),ce=function(t){let e=Q(t);e&&e.tagName||(e={namespaceURI:Wt,tagName:"template"});const r=f(t.tagName),i=f(e.tagName);return!!Xt[t.namespaceURI]&&(t.namespaceURI===zt?e.namespaceURI===qt?"svg"===r:e.namespaceURI===Kt?"svg"===r&&("annotation-xml"===i||ae[i]):Boolean(de[r]):t.namespaceURI===Kt?e.namespaceURI===qt?"math"===r:e.namespaceURI===zt?"math"===r&&oe[i]:Boolean(ue[r]):t.namespaceURI===qt?!(e.namespaceURI===zt&&!oe[i])&&!(e.namespaceURI===Kt&&!ae[i])&&!ue[r]&&(le[r]||!de[r]):!("application/xhtml+xml"!==Qt||!Xt[t.namespaceURI]))},he=function(t){h(r.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},fe=function(t,e){try{h(r.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){h(r.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!vt[t])if(kt||Dt)try{he(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},ge=function(t){let e=null,r=null;if(Rt)t="<remove></remove>"+t;else{const e=p(t,/^[\r\n\t ]+/);r=e&&e[0]}"application/xhtml+xml"===Qt&&Wt===qt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const n=J?J.createHTML(t):t;if(Wt===qt)try{e=(new U).parseFromString(n,Qt)}catch(t){}if(!e||!e.documentElement){e=et.createDocument(Wt,"template",null);try{e.documentElement.innerHTML=Yt?tt:n}catch(t){}}const s=e.body||e.documentElement;return t&&r&&s.insertBefore(i.createTextNode(r),s.childNodes[0]||null),Wt===qt?nt.call(e,Lt?"html":"body")[0]:Lt?e.documentElement:s},pe=function(t){return rt.call(t.ownerDocument||t,t,$.SHOW_ELEMENT|$.SHOW_COMMENT|$.SHOW_TEXT,null)},me=function(t){return t instanceof B&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof F)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},ve=function(t){return"function"==typeof E&&t instanceof E},ye=function(t,e,i){at[t]&&u(at[t],(t=>{t.call(r,e,i,re)}))},be=function(t){let e=null;if(ye("beforeSanitizeElements",t,null),me(t))return he(t),!0;const i=ee(t.nodeName);if(ye("uponSanitizeElement",t,{tagName:i,allowedTags:pt}),t.hasChildNodes()&&!ve(t.firstElementChild)&&b(/<[/\w]/g,t.innerHTML)&&b(/<[/\w]/g,t.textContent))return he(t),!0;if(!pt[i]||Tt[i]){if(!Tt[i]&&Ee(i)){if(bt.tagNameCheck instanceof RegExp&&b(bt.tagNameCheck,i))return!1;if(bt.tagNameCheck instanceof Function&&bt.tagNameCheck(i))return!1}if(Mt&&!Bt[i]){const e=Q(t)||t.parentNode,r=Z(t)||t.childNodes;if(r&&e)for(let i=r.length-1;i>=0;--i)e.insertBefore(H(r[i],!0),K(t))}return he(t),!0}return t instanceof S&&!ce(t)?(he(t),!0):"noscript"!==i&&"noembed"!==i&&"noframes"!==i||!b(/<\/no(script|embed|frames)/i,t.innerHTML)?(Ct&&3===t.nodeType&&(e=t.textContent,u([ot,lt,dt],(t=>{e=m(e,t," ")})),t.textContent!==e&&(h(r.removed,{element:t.cloneNode()}),t.textContent=e)),ye("afterSanitizeElements",t,null),!1):(he(t),!0)},Te=function(t,e,r){if(Pt&&("id"===e||"name"===e)&&(r in i||r in ie))return!1;if(wt&&!Et[e]&&b(ut,e));else if(St&&b(ct,e));else if(!vt[e]||Et[e]){if(!(Ee(t)&&(bt.tagNameCheck instanceof RegExp&&b(bt.tagNameCheck,t)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(t))&&(bt.attributeNameCheck instanceof RegExp&&b(bt.attributeNameCheck,e)||bt.attributeNameCheck instanceof Function&&bt.attributeNameCheck(e))||"is"===e&&bt.allowCustomizedBuiltInElements&&(bt.tagNameCheck instanceof RegExp&&b(bt.tagNameCheck,r)||bt.tagNameCheck instanceof Function&&bt.tagNameCheck(r))))return!1}else if(Vt[e]);else if(b(gt,m(r,ft,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==v(r,"data:")||!Gt[t])if($t&&!b(ht,m(r,ft,"")));else if(r)return!1;return!0},Ee=function(t){return t.indexOf("-")>0},Se=function(t){ye("beforeSanitizeAttributes",t,null);const{attributes:e}=t;if(!e)return;const i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt};let n=e.length;for(;n--;){const s=e[n],{name:a,namespaceURI:o,value:l}=s,d=ee(a);let h="value"===a?l:y(l);if(i.attrName=d,i.attrValue=h,i.keepAttr=!0,i.forceKeepAttr=void 0,ye("uponSanitizeAttribute",t,i),h=i.attrValue,i.forceKeepAttr)continue;if(fe(a,t),!i.keepAttr)continue;if(!At&&b(/\/>/i,h)){fe(a,t);continue}Ct&&u([ot,lt,dt],(t=>{h=m(h,t," ")}));const f=ee(t.nodeName);if(Te(f,d,h)){if(!_t||"id"!==d&&"name"!==d||(fe(a,t),h=Ot+h),J&&"object"==typeof G&&"function"==typeof G.getAttributeType)if(o);else switch(G.getAttributeType(f,d)){case"TrustedHTML":h=J.createHTML(h);break;case"TrustedScriptURL":h=J.createScriptURL(h)}try{o?t.setAttributeNS(o,a,h):t.setAttribute(a,h),c(r.removed)}catch(t){}}}ye("afterSanitizeAttributes",t,null)},we=function t(e){let r=null;const i=pe(e);for(ye("beforeSanitizeShadowDOM",e,null);r=i.nextNode();)ye("uponSanitizeShadowNode",r,null),be(r)||(r.content instanceof l&&t(r.content),Se(r));ye("afterSanitizeShadowDOM",e,null)};return r.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,s=null,a=null,o=null;if(Yt=!t,Yt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ve(t)){if("function"!=typeof t.toString)throw T("toString is not a function");if("string"!=typeof(t=t.toString()))throw T("dirty is not a string, aborting")}if(!r.isSupported)return t;if(xt||se(e),r.removed=[],"string"==typeof t&&(Nt=!1),Nt){if(t.nodeName){const e=ee(t.nodeName);if(!pt[e]||Tt[e])throw T("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof E)i=ge("\x3c!----\x3e"),s=i.ownerDocument.importNode(t,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?i=s:i.appendChild(s);else{if(!kt&&!Ct&&!Lt&&-1===t.indexOf("<"))return J&&It?J.createHTML(t):t;if(i=ge(t),!i)return kt?null:It?tt:""}i&&Rt&&he(i.firstChild);const d=pe(Nt?t:i);for(;a=d.nextNode();)be(a)||(a.content instanceof l&&we(a.content),Se(a));if(Nt)return t;if(kt){if(Dt)for(o=it.call(i.ownerDocument);i.firstChild;)o.appendChild(i.firstChild);else o=i;return(vt.shadowroot||vt.shadowrootmode)&&(o=st.call(n,o,!0)),o}let c=Lt?i.outerHTML:i.innerHTML;return Lt&&pt["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&b(z,i.ownerDocument.doctype.name)&&(c="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+c),Ct&&u([ot,lt,dt],(t=>{c=m(c,t," ")})),J&&It?J.createHTML(c):c},r.setConfig=function(){se(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),xt=!0},r.clearConfig=function(){re=null,xt=!1},r.isValidAttribute=function(t,e,r){re||se({});const i=ee(t),n=ee(e);return Te(i,n,r)},r.addHook=function(t,e){"function"==typeof e&&(at[t]=at[t]||[],h(at[t],e))},r.removeHook=function(t){if(at[t])return c(at[t])},r.removeHooks=function(t){at[t]&&(at[t]=[])},r.removeAllHooks=function(){at={}},r}return X()}()},87206:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},76110:function(t,e,r){"use strict";r.d(e,{v:function(){return lt}});var i="0123456789abcdefghijklmnopqrstuvwxyz";function n(t){return i.charAt(t)}function s(t,e){return t&e}function a(t,e){return t|e}function o(t,e){return t^e}function l(t,e){return t&~e}function d(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function u(t){for(var e=0;0!=t;)t&=t-1,++e;return e}var c,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f="=";function g(t){var e,r,i="";for(e=0;e+3<=t.length;e+=3)r=parseInt(t.substring(e,e+3),16),i+=h.charAt(r>>6)+h.charAt(63&r);for(e+1==t.length?(r=parseInt(t.substring(e,e+1),16),i+=h.charAt(r<<2)):e+2==t.length&&(r=parseInt(t.substring(e,e+2),16),i+=h.charAt(r>>2)+h.charAt((3&r)<<4));(3&i.length)>0;)i+=f;return i}function p(t){var e,r="",i=0,s=0;for(e=0;e<t.length&&t.charAt(e)!=f;++e){var a=h.indexOf(t.charAt(e));a<0||(0==i?(r+=n(a>>2),s=3&a,i=1):1==i?(r+=n(s<<2|a>>4),s=15&a,i=2):2==i?(r+=n(s),r+=n(a>>2),s=3&a,i=3):(r+=n(s<<2|a>>4),r+=n(15&a),i=0))}return 1==i&&(r+=n(s<<2)),r}var m,v=function(t){var e;if(void 0===c){var r="0123456789ABCDEF",i=" \f\n\r\t \u2028\u2029";for(c={},e=0;e<16;++e)c[r.charAt(e)]=e;for(r=r.toLowerCase(),e=10;e<16;++e)c[r.charAt(e)]=e;for(e=0;e<8;++e)c[i.charAt(e)]=-1}var n=[],s=0,a=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=c[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);s|=o,++a>=2?(n[n.length]=s,s=0,a=0):s<<=4}}if(a)throw new Error("Hex encoding incomplete: 4 bits missing");return n},y={decode:function(t){var e;if(void 0===m){var r="= \f\n\r\t \u2028\u2029";for(m=Object.create(null),e=0;e<64;++e)m["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(m["-"]=62,m._=63,e=0;e<9;++e)m[r.charAt(e)]=-1}var i=[],n=0,s=0;for(e=0;e<t.length;++e){var a=t.charAt(e);if("="==a)break;if(-1!=(a=m[a])){if(void 0===a)throw new Error("Illegal character at offset "+e);n|=a,++s>=4?(i[i.length]=n>>16,i[i.length]=n>>8&255,i[i.length]=255&n,n=0,s=0):n<<=6}}switch(s){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:i[i.length]=n>>10;break;case 3:i[i.length]=n>>16,i[i.length]=n>>8&255}return i},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=y.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return y.decode(t)}},b=1e13,T=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var r,i,n=this.buf,s=n.length;for(r=0;r<s;++r)(i=n[r]*t+e)<b?e=0:i-=(e=0|i/b)*b,n[r]=i;e>0&&(n[r]=e)},t.prototype.sub=function(t){var e,r,i=this.buf,n=i.length;for(e=0;e<n;++e)(r=i[e]-t)<0?(r+=b,t=1):t=0,i[e]=r;for(;0===i[i.length-1];)i.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,r=e[e.length-1].toString(),i=e.length-2;i>=0;--i)r+=(b+e[i]).toString().substring(1);return r},t.prototype.valueOf=function(){for(var t=this.buf,e=0,r=t.length-1;r>=0;--r)e=e*b+t[r];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),E=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,S=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;function w(t,e){return t.length>e&&(t=t.substring(0,e)+"…"),t}var $,A=function(){function t(e,r){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=r)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,r){for(var i="",n=t;n<e;++n)if(i+=this.hexByte(this.get(n)),!0!==r)switch(15&n){case 7:i+="  ";break;case 15:i+="\n";break;default:i+=" "}return i},t.prototype.isASCII=function(t,e){for(var r=t;r<e;++r){var i=this.get(r);if(i<32||i>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var r="",i=t;i<e;++i)r+=String.fromCharCode(this.get(i));return r},t.prototype.parseStringUTF=function(t,e){for(var r="",i=t;i<e;){var n=this.get(i++);r+=n<128?String.fromCharCode(n):n>191&&n<224?String.fromCharCode((31&n)<<6|63&this.get(i++)):String.fromCharCode((15&n)<<12|(63&this.get(i++))<<6|63&this.get(i++))}return r},t.prototype.parseStringBMP=function(t,e){for(var r,i,n="",s=t;s<e;)r=this.get(s++),i=this.get(s++),n+=String.fromCharCode(r<<8|i);return n},t.prototype.parseTime=function(t,e,r){var i=this.parseStringISO(t,e),n=(r?E:S).exec(i);return n?(r&&(n[1]=+n[1],n[1]+=+n[1]<70?2e3:1900),i=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(i+=":"+n[5],n[6]&&(i+=":"+n[6],n[7]&&(i+="."+n[7]))),n[8]&&(i+=" UTC","Z"!=n[8]&&(i+=n[8],n[9]&&(i+=":"+n[9]))),i):"Unrecognized time: "+i},t.prototype.parseInteger=function(t,e){for(var r,i=this.get(t),n=i>127,s=n?255:0,a="";i==s&&++t<e;)i=this.get(t);if(0===(r=e-t))return n?-1:0;if(r>4){for(a=i,r<<=3;0==(128&(+a^s));)a=+a<<1,--r;a="("+r+" bit)\n"}n&&(i-=256);for(var o=new T(i),l=t+1;l<e;++l)o.mulAdd(256,this.get(l));return a+o.toString()},t.prototype.parseBitString=function(t,e,r){for(var i=this.get(t),n="("+((e-t-1<<3)-i)+" bit)\n",s="",a=t+1;a<e;++a){for(var o=this.get(a),l=a==e-1?i:0,d=7;d>=l;--d)s+=o>>d&1?"1":"0";if(s.length>r)return n+w(s,r)}return n+s},t.prototype.parseOctetString=function(t,e,r){if(this.isASCII(t,e))return w(this.parseStringISO(t,e),r);var i=e-t,n="("+i+" byte)\n";i>(r/=2)&&(e=t+r);for(var s=t;s<e;++s)n+=this.hexByte(this.get(s));return i>r&&(n+="…"),n},t.prototype.parseOID=function(t,e,r){for(var i="",n=new T,s=0,a=t;a<e;++a){var o=this.get(a);if(n.mulAdd(128,127&o),s+=7,!(128&o)){if(""===i)if((n=n.simplify())instanceof T)n.sub(80),i="2."+n.toString();else{var l=n<80?n<40?0:1:2;i=l+"."+(n-40*l)}else i+="."+n.toString();if(i.length>r)return w(i,r);n=new T,s=0}}return s>0&&(i+=".incomplete"),i},t}(),C=function(){function t(t,e,r,i,n){if(!(i instanceof L))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=r,this.tag=i,this.sub=n}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),r=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+r,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+r,t);case 6:return this.stream.parseOID(e,e+r,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return w(this.stream.parseStringUTF(e,e+r),t);case 18:case 19:case 20:case 21:case 22:case 26:return w(this.stream.parseStringISO(e,e+r),t);case 30:return w(this.stream.parseStringBMP(e,e+r),t);case 23:case 24:return this.stream.parseTime(e,e+r,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var r=0,i=this.sub.length;r<i;++r)e+=this.sub[r].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),r=127&e;if(r==e)return r;if(r>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===r)return null;e=0;for(var i=0;i<r;++i)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,r=2*this.length;return t.substr(e,r)},t.decode=function(e){var r;r=e instanceof A?e:new A(e,0);var i=new A(r),n=new L(r),s=t.decodeLength(r),a=r.pos,o=a-i.pos,l=null,d=function(){var e=[];if(null!==s){for(var i=a+s;r.pos<i;)e[e.length]=t.decode(r);if(r.pos!=i)throw new Error("Content size is not correct for container starting at offset "+a)}else try{for(;;){var n=t.decode(r);if(n.tag.isEOC())break;e[e.length]=n}s=a-r.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(n.tagConstructed)l=d();else if(n.isUniversal()&&(3==n.tagNumber||4==n.tagNumber))try{if(3==n.tagNumber&&0!=r.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");l=d();for(var u=0;u<l.length;++u)if(l[u].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){l=null}if(null===l){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+a);r.pos=a+Math.abs(s)}return new t(i,o,s,n,l)},t}(),L=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber){var r=new T;do{e=t.get(),r.mulAdd(128,127&e)}while(128&e);this.tagNumber=r.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/x[x.length-1],k=function(){function t(t,e,r){null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,i=(1<<e)-1,s=!1,a="",o=this.t,l=this.DB-o*this.DB%e;if(o-- >0)for(l<this.DB&&(r=this[o]>>l)>0&&(s=!0,a=n(r));o>=0;)l<e?(r=(this[o]&(1<<l)-1)<<e-l,r|=this[--o]>>(l+=this.DB-e)):(r=this[o]>>(l-=e)&i,l<=0&&(l+=this.DB,--o)),r>0&&(s=!0),s&&(a+=n(r));return s?a:"0"},t.prototype.negate=function(){var e=O();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+V(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var r=O();return this.abs().divRemTo(e,null,r),this.s<0&&r.compareTo(t.ZERO)>0&&e.subTo(r,r),r},t.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new I(e):new P(e),this.exp(t,r)},t.prototype.clone=function(){var t=O();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var r,i=this.DB-t*this.DB%8,n=0;if(t-- >0)for(i<this.DB&&(r=this[t]>>i)!=(this.s&this.DM)>>i&&(e[n++]=r|this.s<<this.DB-i);t>=0;)i<8?(r=(this[t]&(1<<i)-1)<<8-i,r|=this[--t]>>(i+=this.DB-8)):(r=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(e[n++]=r);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=O();return this.bitwiseTo(t,s,e),e},t.prototype.or=function(t){var e=O();return this.bitwiseTo(t,a,e),e},t.prototype.xor=function(t){var e=O();return this.bitwiseTo(t,o,e),e},t.prototype.andNot=function(t){var e=O();return this.bitwiseTo(t,l,e),e},t.prototype.not=function(){for(var t=O(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=O();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=O();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+d(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=u(this[r]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,a)},t.prototype.clearBit=function(t){return this.changeBit(t,l)},t.prototype.flipBit=function(t){return this.changeBit(t,o)},t.prototype.add=function(t){var e=O();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=O();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=O();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=O();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=O();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=O(),r=O();return this.divRemTo(t,e,r),[e,r]},t.prototype.modPow=function(t,e){var r,i,n=t.bitLength(),s=j(1);if(n<=0)return s;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new I(e):e.isEven()?new _(e):new P(e);var a=[],o=3,l=r-1,d=(1<<r)-1;if(a[1]=i.convert(this),r>1){var u=O();for(i.sqrTo(a[1],u);o<=d;)a[o]=O(),i.mulTo(u,a[o-2],a[o]),o+=2}var c,h,f=t.t-1,g=!0,p=O();for(n=V(t[f])-1;f>=0;){for(n>=l?c=t[f]>>n-l&d:(c=(t[f]&(1<<n+1)-1)<<l-n,f>0&&(c|=t[f-1]>>this.DB+n-l)),o=r;0==(1&c);)c>>=1,--o;if((n-=o)<0&&(n+=this.DB,--f),g)a[c].copyTo(s),g=!1;else{for(;o>1;)i.sqrTo(s,p),i.sqrTo(p,s),o-=2;o>0?i.sqrTo(s,p):(h=s,s=p,p=h),i.mulTo(p,a[c],s)}for(;f>=0&&0==(t[f]&1<<n);)i.sqrTo(s,p),h=s,s=p,p=h,--n<0&&(n=this.DB-1,--f)}return i.revert(s)},t.prototype.modInverse=function(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;for(var i=e.clone(),n=this.clone(),s=j(1),a=j(0),o=j(0),l=j(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),r?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),r?(o.isEven()&&l.isEven()||(o.addTo(this,o),l.subTo(e,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);i.compareTo(n)>=0?(i.subTo(n,i),r&&s.subTo(o,s),a.subTo(l,a)):(n.subTo(i,n),r&&o.subTo(s,o),l.subTo(a,l))}return 0!=n.compareTo(t.ONE)?t.ZERO:l.compareTo(e)>=0?l.subtract(e):l.signum()<0?(l.addTo(e,l),l.signum()<0?l.add(e):l):l},t.prototype.pow=function(t){return this.exp(t,new D)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},t.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=x[x.length-1]){for(e=0;e<x.length;++e)if(r[0]==x[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<x.length;){for(var i=x[e],n=e+1;n<x.length&&i<R;)i*=x[n++];for(i=r.modInt(i);e<n;)if(i%x[e++]==0)return!1}return r.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,r){var i;if(16==r)i=4;else if(8==r)i=3;else if(256==r)i=8;else if(2==r)i=1;else if(32==r)i=5;else{if(4!=r)return void this.fromRadix(e,r);i=2}this.t=0,this.s=0;for(var n=e.length,s=!1,a=0;--n>=0;){var o=8==i?255&+e[n]:G(e,n);o<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==a?this[this.t++]=o:a+i>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=i)>=this.DB&&(a-=this.DB))}8==i&&0!=(128&+e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var r=t%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM,o=this.t-1;o>=0;--o)e[o+s+1]=this[o]>>i|a,a=(this[o]&n)<<r;for(o=s-1;o>=0;--o)e[o]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var i=t%this.DB,n=this.DB-i,s=(1<<i)-1;e[0]=this[r]>>i;for(var a=r+1;a<this.t;++a)e[a-r-1]|=(this[a]&s)<<n,e[a-r]=this[a]>>i;i>0&&(e[this.t-r-1]|=(this.s&s)<<n),e.t=this.t-r,e.clamp()}},t.prototype.subTo=function(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this[r]-t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t[r],e[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[r++]=this.DV+i:i>0&&(e[r++]=i),e.t=r,e.clamp()},t.prototype.multiplyTo=function(e,r){var i=this.abs(),n=e.abs(),s=i.t;for(r.t=s+n.t;--s>=0;)r[s]=0;for(s=0;s<n.t;++s)r[s+i.t]=i.am(0,n[s],r,s,0,i.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)},t.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,r,i){var n=e.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=r&&r.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=O());var a=O(),o=this.s,l=e.s,d=this.DB-V(n[n.t-1]);d>0?(n.lShiftTo(d,a),s.lShiftTo(d,i)):(n.copyTo(a),s.copyTo(i));var u=a.t,c=a[u-1];if(0!=c){var h=c*(1<<this.F1)+(u>1?a[u-2]>>this.F2:0),f=this.FV/h,g=(1<<this.F1)/h,p=1<<this.F2,m=i.t,v=m-u,y=null==r?O():r;for(a.dlShiftTo(v,y),i.compareTo(y)>=0&&(i[i.t++]=1,i.subTo(y,i)),t.ONE.dlShiftTo(u,y),y.subTo(a,a);a.t<u;)a[a.t++]=0;for(;--v>=0;){var b=i[--m]==c?this.DM:Math.floor(i[m]*f+(i[m-1]+p)*g);if((i[m]+=a.am(0,b,i,v,0,u))<b)for(a.dlShiftTo(v,y),i.subTo(y,i);i[m]<--b;)i.subTo(y,i)}null!=r&&(i.drShiftTo(u,r),o!=l&&t.ZERO.subTo(r,r)),i.t=u,i.clamp(),d>0&&i.rShiftTo(d,i),o<0&&t.ZERO.subTo(i,i)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,r){if(e>4294967295||e<1)return t.ONE;var i=O(),n=O(),s=r.convert(this),a=V(e)-1;for(s.copyTo(i);--a>=0;)if(r.sqrTo(i,n),(e&1<<a)>0)r.mulTo(n,s,i);else{var o=i;i=n,n=o}return r.revert(i)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=j(r),n=O(),s=O(),a="";for(this.divRemTo(i,n,s);n.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,n.divRemTo(i,n,s);return s.intValue().toString(t)+a},t.prototype.fromRadix=function(e,r){this.fromInt(0),null==r&&(r=10);for(var i=this.chunkSize(r),n=Math.pow(r,i),s=!1,a=0,o=0,l=0;l<e.length;++l){var d=G(e,l);d<0?"-"==e.charAt(l)&&0==this.signum()&&(s=!0):(o=r*o+d,++a>=i&&(this.dMultiply(n),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(r,a)),this.dAddOffset(o,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,r,i){if("number"==typeof r)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var n=[],s=7&e;n.length=1+(e>>3),r.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}},t.prototype.bitwiseTo=function(t,e,r){var i,n,s=Math.min(t.t,this.t);for(i=0;i<s;++i)r[i]=e(this[i],t[i]);if(t.t<this.t){for(n=t.s&this.DM,i=s;i<this.t;++i)r[i]=e(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=s;i<t.t;++i)r[i]=e(n,t[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},t.prototype.changeBit=function(e,r){var i=t.ONE.shiftLeft(e);return this.bitwiseTo(i,r,i),i},t.prototype.addTo=function(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this[r]+t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t[r],e[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[r++]=i:i<-1&&(e[r++]=this.DV+i),e.t=r,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(var n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},t.prototype.multiplyUpperTo=function(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r[this.t+i-e]=this.am(e-i,t[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this[i])%t;return r},t.prototype.millerRabin=function(e){var r=this.subtract(t.ONE),i=r.getLowestSetBit();if(i<=0)return!1;var n=r.shiftRight(i);(e=e+1>>1)>x.length&&(e=x.length);for(var s=O(),a=0;a<e;++a){s.fromInt(x[Math.floor(Math.random()*x.length)]);var o=s.modPow(n,this);if(0!=o.compareTo(t.ONE)&&0!=o.compareTo(r)){for(var l=1;l++<i&&0!=o.compareTo(r);)if(0==(o=o.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=o.compareTo(r))return!1}}return!0},t.prototype.square=function(){var t=O();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var r=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(r.compareTo(i)<0){var n=r;r=i,i=n}var s=r.getLowestSetBit(),a=i.getLowestSetBit();if(a<0)e(r);else{s<a&&(a=s),a>0&&(r.rShiftTo(a,r),i.rShiftTo(a,i));var o=function(){(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),r.compareTo(i)>=0?(r.subTo(i,r),r.rShiftTo(1,r)):(i.subTo(r,i),i.rShiftTo(1,i)),r.signum()>0?setTimeout(o,0):(a>0&&i.lShiftTo(a,i),setTimeout((function(){e(i)}),0))};setTimeout(o,10)}},t.prototype.fromNumberAsync=function(e,r,i,n){if("number"==typeof r)if(e<2)this.fromInt(1);else{this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),a,this),this.isEven()&&this.dAddOffset(1,0);var s=this,o=function(){s.dAddOffset(2,0),s.bitLength()>e&&s.subTo(t.ONE.shiftLeft(e-1),s),s.isProbablePrime(r)?setTimeout((function(){n()}),0):setTimeout(o,0)};setTimeout(o,0)}else{var l=[],d=7&e;l.length=1+(e>>3),r.nextBytes(l),d>0?l[0]&=(1<<d)-1:l[0]=0,this.fromString(l,256)}},t}(),D=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),I=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),P=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=O();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(k.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=O();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],i=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,i,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),_=function(){function t(t){this.m=t,this.r2=O(),this.q3=O(),k.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=O();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function O(){return new k(null)}function M(t,e){return new k(t,e)}var N="undefined"!=typeof navigator;N&&"Microsoft Internet Explorer"==navigator.appName?(k.prototype.am=function(t,e,r,i,n,s){for(var a=32767&e,o=e>>15;--s>=0;){var l=32767&this[t],d=this[t++]>>15,u=o*l+d*a;n=((l=a*l+((32767&u)<<15)+r[i]+(1073741823&n))>>>30)+(u>>>15)+o*d+(n>>>30),r[i++]=1073741823&l}return n},$=30):N&&"Netscape"!=navigator.appName?(k.prototype.am=function(t,e,r,i,n,s){for(;--s>=0;){var a=e*this[t++]+r[i]+n;n=Math.floor(a/67108864),r[i++]=67108863&a}return n},$=26):(k.prototype.am=function(t,e,r,i,n,s){for(var a=16383&e,o=e>>14;--s>=0;){var l=16383&this[t],d=this[t++]>>14,u=o*l+d*a;n=((l=a*l+((16383&u)<<14)+r[i]+n)>>28)+(u>>14)+o*d,r[i++]=268435455&l}return n},$=28),k.prototype.DB=$,k.prototype.DM=(1<<$)-1,k.prototype.DV=1<<$;k.prototype.FV=Math.pow(2,52),k.prototype.F1=52-$,k.prototype.F2=2*$-52;var F,B,U=[];for(F="0".charCodeAt(0),B=0;B<=9;++B)U[F++]=B;for(F="a".charCodeAt(0),B=10;B<36;++B)U[F++]=B;for(F="A".charCodeAt(0),B=10;B<36;++B)U[F++]=B;function G(t,e){var r=U[t.charCodeAt(e)];return null==r?-1:r}function j(t){var e=O();return e.fromInt(t),e}function V(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}k.ZERO=j(0),k.ONE=j(1);var H=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,r,i;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,i=this.S[e],this.S[e]=this.S[r],this.S[r]=i;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}();var K,z,q=null;if(null==q){q=[],z=0;var W=void 0;if(window.crypto&&window.crypto.getRandomValues){var Y=new Uint32Array(256);for(window.crypto.getRandomValues(Y),W=0;W<Y.length;++W)q[z++]=255&Y[W]}var X=0,Z=function(t){if((X=X||0)>=256||z>=256)window.removeEventListener?window.removeEventListener("mousemove",Z,!1):window.detachEvent&&window.detachEvent("onmousemove",Z);else try{var e=t.x+t.y;q[z++]=255&e,X+=1}catch(t){}};window.addEventListener?window.addEventListener("mousemove",Z,!1):window.attachEvent&&window.attachEvent("onmousemove",Z)}function Q(){if(null==K){for(K=new H;z<256;){var t=Math.floor(65536*Math.random());q[z++]=255&t}for(K.init(q),z=0;z<q.length;++z)q[z]=0;z=0}return K.next()}var J=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=Q()},t}();var tt=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=M(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=this.n.bitLength()+7>>3,r=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var r=[],i=t.length-1;i>=0&&e>0;){var n=t.charCodeAt(i--);n<128?r[--e]=n:n>127&&n<2048?(r[--e]=63&n|128,r[--e]=n>>6|192):(r[--e]=63&n|128,r[--e]=n>>6&63|128,r[--e]=n>>12|224)}r[--e]=0;for(var s=new J,a=[];e>2;){for(a[0]=0;0==a[0];)s.nextBytes(a);r[--e]=a[0]}return r[--e]=2,r[--e]=0,new k(r)}(t,e);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;for(var n=i.toString(16),s=n.length,a=0;a<2*e-s;a++)n="0"+n;return n},t.prototype.setPrivate=function(t,e,r){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=M(t,16),this.e=parseInt(e,16),this.d=M(r,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,r,i,n,s,a,o){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=M(t,16),this.e=parseInt(e,16),this.d=M(r,16),this.p=M(i,16),this.q=M(n,16),this.dmp1=M(s,16),this.dmq1=M(a,16),this.coeff=M(o,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var r=new J,i=t>>1;this.e=parseInt(e,16);for(var n=new k(e,16);;){for(;this.p=new k(t-i,1,r),0!=this.p.subtract(k.ONE).gcd(n).compareTo(k.ONE)||!this.p.isProbablePrime(10););for(;this.q=new k(i,1,r),0!=this.q.subtract(k.ONE).gcd(n).compareTo(k.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var a=this.p.subtract(k.ONE),o=this.q.subtract(k.ONE),l=a.multiply(o);if(0==l.gcd(n).compareTo(k.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(l),this.dmp1=this.d.mod(a),this.dmq1=this.d.mod(o),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=M(t,16),r=this.doPrivate(e);return null==r?null:function(t,e){var r=t.toByteArray(),i=0;for(;i<r.length&&0==r[i];)++i;if(r.length-i!=e-1||2!=r[i])return null;++i;for(;0!=r[i];)if(++i>=r.length)return null;var n="";for(;++i<r.length;){var s=255&r[i];s<128?n+=String.fromCharCode(s):s>191&&s<224?(n+=String.fromCharCode((31&s)<<6|63&r[i+1]),++i):(n+=String.fromCharCode((15&s)<<12|(63&r[i+1])<<6|63&r[i+2]),i+=2)}return n}(r,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,r){var i=new J,n=t>>1;this.e=parseInt(e,16);var s=new k(e,16),a=this,o=function(){var e=function(){if(a.p.compareTo(a.q)<=0){var t=a.p;a.p=a.q,a.q=t}var e=a.p.subtract(k.ONE),i=a.q.subtract(k.ONE),n=e.multiply(i);0==n.gcd(s).compareTo(k.ONE)?(a.n=a.p.multiply(a.q),a.d=s.modInverse(n),a.dmp1=a.d.mod(e),a.dmq1=a.d.mod(i),a.coeff=a.q.modInverse(a.p),setTimeout((function(){r()}),0)):setTimeout(o,0)},l=function(){a.q=O(),a.q.fromNumberAsync(n,1,i,(function(){a.q.subtract(k.ONE).gcda(s,(function(t){0==t.compareTo(k.ONE)&&a.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(l,0)}))}))},d=function(){a.p=O(),a.p.fromNumberAsync(t-n,1,i,(function(){a.p.subtract(k.ONE).gcda(s,(function(t){0==t.compareTo(k.ONE)&&a.p.isProbablePrime(10)?setTimeout(l,0):setTimeout(d,0)}))}))};setTimeout(d,0)};setTimeout(o,0)},t.prototype.sign=function(t,e,r){var i=function(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var r=e-t.length-6,i="",n=0;n<r;n+=2)i+="ff";return M("0001"+i+"00"+t,16)}((et[r]||"")+e(t).toString(),this.n.bitLength()/4);if(null==i)return null;var n=this.doPrivate(i);if(null==n)return null;var s=n.toString(16);return 0==(1&s.length)?s:"0"+s},t.prototype.verify=function(t,e,r){var i=M(e,16),n=this.doPublic(i);return null==n?null:function(t){for(var e in et)if(et.hasOwnProperty(e)){var r=et[e],i=r.length;if(t.substr(0,i)==r)return t.substr(i)}return t}(n.toString(16).replace(/^1f+00/,""))==r(t).toString()},t}();var et={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"};var rt={};rt.lang={extend:function(t,e,r){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),r){var n;for(n in r)t.prototype[n]=r[n];var s=function(){},a=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(t,e){for(n=0;n<a.length;n+=1){var r=a[n],i=e[r];"function"==typeof i&&i!=Object.prototype[r]&&(t[r]=i)}})}catch(t){}s(t.prototype,r)}}};var it={};void 0!==it.asn1&&it.asn1||(it.asn1={}),it.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var r=e.substr(1).length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var i="",n=0;n<r;n++)i+="f";e=new k(i,16).xor(t).add(k.ONE).toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=it.asn1,r=e.DERBoolean,i=e.DERInteger,n=e.DERBitString,s=e.DEROctetString,a=e.DERNull,o=e.DERObjectIdentifier,l=e.DEREnumerated,d=e.DERUTF8String,u=e.DERNumericString,c=e.DERPrintableString,h=e.DERTeletexString,f=e.DERIA5String,g=e.DERUTCTime,p=e.DERGeneralizedTime,m=e.DERSequence,v=e.DERSet,y=e.DERTaggedObject,b=e.ASN1Util.newObject,T=Object.keys(t);if(1!=T.length)throw"key of param shall be only one.";var E=T[0];if(-1==":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+E+":"))throw"undefined key: "+E;if("bool"==E)return new r(t[E]);if("int"==E)return new i(t[E]);if("bitstr"==E)return new n(t[E]);if("octstr"==E)return new s(t[E]);if("null"==E)return new a(t[E]);if("oid"==E)return new o(t[E]);if("enum"==E)return new l(t[E]);if("utf8str"==E)return new d(t[E]);if("numstr"==E)return new u(t[E]);if("prnstr"==E)return new c(t[E]);if("telstr"==E)return new h(t[E]);if("ia5str"==E)return new f(t[E]);if("utctime"==E)return new g(t[E]);if("gentime"==E)return new p(t[E]);if("seq"==E){for(var S=t[E],w=[],$=0;$<S.length;$++){var A=b(S[$]);w.push(A)}return new m({array:w})}if("set"==E){for(S=t[E],w=[],$=0;$<S.length;$++){A=b(S[$]);w.push(A)}return new v({array:w})}if("tag"==E){var C=t[E];if("[object Array]"===Object.prototype.toString.call(C)&&3==C.length){var L=b(C[2]);return new y({tag:C[0],explicit:C[1],obj:L})}var x={};if(void 0!==C.explicit&&(x.explicit=C.explicit),void 0!==C.tag&&(x.tag=C.tag),void 0===C.obj)throw"obj shall be specified for 'tag'.";return x.obj=b(C.obj),new y(x)}},this.jsonToASN1HEX=function(t){return this.newObject(t).getEncodedHex()}},it.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",r=parseInt(t.substr(0,2),16),i=(e=Math.floor(r/40)+"."+r%40,""),n=2;n<t.length;n+=2){var s=("00000000"+parseInt(t.substr(n,2),16).toString(2)).slice(-8);if(i+=s.substr(1,7),"0"==s.substr(0,1))e=e+"."+new k(i,2).toString(10),i=""}return e},it.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",i=new k(t,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var s="",a=0;a<n;a++)s+="0";i=s+i;for(a=0;a<i.length-1;a+=7){var o=i.substr(a,7);a!=i.length-7&&(o="1"+o),r+=e(parseInt(o,2))}return r};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);i+=e(s),n.splice(0,2);for(var a=0;a<n.length;a++)i+=r(n[a]);return i},it.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n=0,v="+this.hV;var t=this.hV.length/2,e=t.toString(16);if(e.length%2==1&&(e="0"+e),t<128)return e;var r=e.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+t.toString(16);return(128+r).toString(16)+e},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},it.asn1.DERAbstractString=function(t){it.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?this.setString(t):void 0!==t.str?this.setString(t.str):void 0!==t.hex&&this.setStringHex(t.hex))},rt.lang.extend(it.asn1.DERAbstractString,it.asn1.ASN1Object),it.asn1.DERAbstractTime=function(t){it.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){return utc=t.getTime()+6e4*t.getTimezoneOffset(),new Date(utc)},this.formatDate=function(t,e,r){var i=this.zeroPadding,n=this.localDateToUTC(t),s=String(n.getFullYear());"utc"==e&&(s=s.substr(2,2));var a=s+i(String(n.getMonth()+1),2)+i(String(n.getDate()),2)+i(String(n.getHours()),2)+i(String(n.getMinutes()),2)+i(String(n.getSeconds()),2);if(!0===r){var o=n.getMilliseconds();if(0!=o){var l=i(String(o),3);a=a+"."+(l=l.replace(/[0]+$/,""))}}return a+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,r,i,n,s){var a=new Date(Date.UTC(t,e-1,r,i,n,s,0));this.setByDate(a)},this.getFreshValueHex=function(){return this.hV}},rt.lang.extend(it.asn1.DERAbstractTime,it.asn1.ASN1Object),it.asn1.DERAbstractStructured=function(t){it.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,void 0!==t&&void 0!==t.array&&(this.asn1Array=t.array)},rt.lang.extend(it.asn1.DERAbstractStructured,it.asn1.ASN1Object),it.asn1.DERBoolean=function(){it.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},rt.lang.extend(it.asn1.DERBoolean,it.asn1.ASN1Object),it.asn1.DERInteger=function(t){it.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=it.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new k(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.bigint?this.setByBigInteger(t.bigint):void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},rt.lang.extend(it.asn1.DERInteger,it.asn1.ASN1Object),it.asn1.DERBitString=function(t){if(void 0!==t&&void 0!==t.obj){var e=it.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}it.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var r="0"+t;this.hTLV=null,this.isModified=!0,this.hV=r+e},this.setByBinaryString=function(t){var e=8-(t=t.replace(/0+$/,"")).length%8;8==e&&(e=0);for(var r=0;r<=e;r++)t+="0";var i="";for(r=0;r<t.length-1;r+=8){var n=t.substr(r,8),s=parseInt(n,2).toString(16);1==s.length&&(s="0"+s),i+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+i},this.setByBooleanArray=function(t){for(var e="",r=0;r<t.length;r++)1==t[r]?e+="1":e+="0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=!1;return e},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):void 0!==t.hex?this.setHexValueIncludingUnusedBits(t.hex):void 0!==t.bin?this.setByBinaryString(t.bin):void 0!==t.array&&this.setByBooleanArray(t.array))},rt.lang.extend(it.asn1.DERBitString,it.asn1.ASN1Object),it.asn1.DEROctetString=function(t){if(void 0!==t&&void 0!==t.obj){var e=it.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}it.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},rt.lang.extend(it.asn1.DEROctetString,it.asn1.DERAbstractString),it.asn1.DERNull=function(){it.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},rt.lang.extend(it.asn1.DERNull,it.asn1.ASN1Object),it.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},r=function(t){var r="",i=new k(t,10).toString(2),n=7-i.length%7;7==n&&(n=0);for(var s="",a=0;a<n;a++)s+="0";i=s+i;for(a=0;a<i.length-1;a+=7){var o=i.substr(a,7);a!=i.length-7&&(o="1"+o),r+=e(parseInt(o,2))}return r};it.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var i="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);i+=e(s),n.splice(0,2);for(var a=0;a<n.length;a++)i+=r(n[a]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueName=function(t){var e=it.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},rt.lang.extend(it.asn1.DERObjectIdentifier,it.asn1.ASN1Object),it.asn1.DEREnumerated=function(t){it.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=it.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new k(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.int?this.setByInteger(t.int):"number"==typeof t?this.setByInteger(t):void 0!==t.hex&&this.setValueHex(t.hex))},rt.lang.extend(it.asn1.DEREnumerated,it.asn1.ASN1Object),it.asn1.DERUTF8String=function(t){it.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},rt.lang.extend(it.asn1.DERUTF8String,it.asn1.DERAbstractString),it.asn1.DERNumericString=function(t){it.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},rt.lang.extend(it.asn1.DERNumericString,it.asn1.DERAbstractString),it.asn1.DERPrintableString=function(t){it.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},rt.lang.extend(it.asn1.DERPrintableString,it.asn1.DERAbstractString),it.asn1.DERTeletexString=function(t){it.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},rt.lang.extend(it.asn1.DERTeletexString,it.asn1.DERAbstractString),it.asn1.DERIA5String=function(t){it.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},rt.lang.extend(it.asn1.DERIA5String,it.asn1.DERAbstractString),it.asn1.DERUTCTime=function(t){it.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},rt.lang.extend(it.asn1.DERUTCTime,it.asn1.DERAbstractTime),it.asn1.DERGeneralizedTime=function(t){it.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),!0===t.millis&&(this.withMillis=!0))},rt.lang.extend(it.asn1.DERGeneralizedTime,it.asn1.DERAbstractTime),it.asn1.DERSequence=function(t){it.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){t+=this.asn1Array[e].getEncodedHex()}return this.hV=t,this.hV}},rt.lang.extend(it.asn1.DERSequence,it.asn1.DERAbstractStructured),it.asn1.DERSet=function(t){it.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var r=this.asn1Array[e];t.push(r.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},void 0!==t&&void 0!==t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},rt.lang.extend(it.asn1.DERSet,it.asn1.DERAbstractStructured),it.asn1.DERTaggedObject=function(t){it.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,r){this.hT=e,this.isExplicit=t,this.asn1Object=r,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=r.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&(void 0!==t.tag&&(this.hT=t.tag),void 0!==t.explicit&&(this.isExplicit=t.explicit),void 0!==t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},rt.lang.extend(it.asn1.DERTaggedObject,it.asn1.ASN1Object);var nt,st=(nt=function(t,e){return nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},nt(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}nt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),at=function(t){function e(r){var i=t.call(this)||this;return r&&("string"==typeof r?i.parseKey(r):(e.hasPrivateKeyProperty(r)||e.hasPublicKeyProperty(r))&&i.parsePropertiesFrom(r)),i}return st(e,t),e.prototype.parseKey=function(t){try{var e=0,r=0,i=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?v(t):y.unarmor(t),n=C.decode(i);if(3===n.sub.length&&(n=n.sub[2].sub[0]),9===n.sub.length){e=n.sub[1].getHexStringValue(),this.n=M(e,16),r=n.sub[2].getHexStringValue(),this.e=parseInt(r,16);var s=n.sub[3].getHexStringValue();this.d=M(s,16);var a=n.sub[4].getHexStringValue();this.p=M(a,16);var o=n.sub[5].getHexStringValue();this.q=M(o,16);var l=n.sub[6].getHexStringValue();this.dmp1=M(l,16);var d=n.sub[7].getHexStringValue();this.dmq1=M(d,16);var u=n.sub[8].getHexStringValue();this.coeff=M(u,16)}else{if(2!==n.sub.length)return!1;var c=n.sub[1].sub[0];e=c.sub[0].getHexStringValue(),this.n=M(e,16),r=c.sub[1].getHexStringValue(),this.e=parseInt(r,16)}return!0}catch(t){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new it.asn1.DERInteger({int:0}),new it.asn1.DERInteger({bigint:this.n}),new it.asn1.DERInteger({int:this.e}),new it.asn1.DERInteger({bigint:this.d}),new it.asn1.DERInteger({bigint:this.p}),new it.asn1.DERInteger({bigint:this.q}),new it.asn1.DERInteger({bigint:this.dmp1}),new it.asn1.DERInteger({bigint:this.dmq1}),new it.asn1.DERInteger({bigint:this.coeff})]};return new it.asn1.DERSequence(t).getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return g(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new it.asn1.DERSequence({array:[new it.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new it.asn1.DERNull]}),e=new it.asn1.DERSequence({array:[new it.asn1.DERInteger({bigint:this.n}),new it.asn1.DERInteger({int:this.e})]}),r=new it.asn1.DERBitString({hex:"00"+e.getEncodedHex()});return new it.asn1.DERSequence({array:[t,r]}).getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return g(this.getPublicBaseKey())},e.wordwrap=function(t,e){if(!t)return t;var r="(.{1,"+(e=e||64)+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(r,"g")).join("\n")},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----"},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----"},e.hasPublicKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return(t=t||{}).hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(tt),ot="3.2.1",lt=function(){function t(t){void 0===t&&(t={}),t=t||{},this.default_key_size=t.default_key_size?parseInt(t.default_key_size,10):1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new at(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(p(t))}catch(t){return!1}},t.prototype.encrypt=function(t){try{return g(this.getKey().encrypt(t))}catch(t){return!1}},t.prototype.sign=function(t,e,r){try{return g(this.getKey().sign(t,e,r))}catch(t){return!1}},t.prototype.verify=function(t,e,r){try{return this.getKey().verify(t,p(e),r)}catch(t){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new at,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version=ot,t}()},6765:function(t,e,r){"use strict";function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidCharacterError";var n="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new i("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,a=0,o="";n=e.charAt(a++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function s(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(n(t).replace(/(.)/g,(function(t,e){var r=e.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(e)}catch(t){return n(e)}}function a(t){this.message=t}a.prototype=new Error,a.prototype.name="InvalidTokenError",e.A=function(t,e){if("string"!=typeof t)throw new a("Invalid token specified");var r=!0===(e=e||{}).header?0:1;try{return JSON.parse(s(t.split(".")[r]))}catch(t){throw new a("Invalid token specified: "+t.message)}}},73790:function(t,e,r){t.exports=function t(e,r,i){function n(a,o){if(!r[a]){if(!e[a]){if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var d=r[a]={exports:{}};e[a][0].call(d.exports,(function(t){var r=e[a][1][t];return n(r||t)}),d,d.exports,t,e,r,i)}return r[a].exports}for(var s=void 0,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(t,e,i){(function(t){"use strict";var r,i,n=t.MutationObserver||t.WebKitMutationObserver;if(n){var s=0,a=new n(u),o=t.document.createTextNode("");a.observe(o,{characterData:!0}),r=function(){o.data=s=++s%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,r=function(){l.port2.postMessage(0)}}var d=[];function u(){var t,e;i=!0;for(var r=d.length;r;){for(e=d,d=[],t=-1;++t<r;)e[t]();r=d.length}i=!1}function c(t){1!==d.push(t)||i||r()}e.exports=c}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var i=t(1);function n(){}var s={},a=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function d(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==n&&f(this,t)}function u(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function c(t,e,r){i((function(){var i;try{i=e(r)}catch(e){return s.reject(t,e)}i===t?s.reject(t,new TypeError("Cannot resolve promise with itself")):s.resolve(t,i)}))}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var r=!1;function i(e){r||(r=!0,s.reject(t,e))}function n(e){r||(r=!0,s.resolve(t,e))}function a(){e(n,i)}var o=g(a);"error"===o.status&&i(o.value)}function g(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}function p(t){return t instanceof this?t:s.resolve(new this(n),t)}function m(t){var e=new this(n);return s.reject(e,t)}function v(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);for(var a=new Array(r),o=0,l=-1,d=new this(n);++l<r;)u(t[l],l);return d;function u(t,n){function l(t){a[n]=t,++o!==r||i||(i=!0,s.resolve(d,a))}e.resolve(t).then(l,(function(t){i||(i=!0,s.reject(d,t))}))}}function y(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,i=!1;if(!r)return this.resolve([]);for(var a=-1,o=new this(n);++a<r;)l(t[a]);return o;function l(t){e.resolve(t).then((function(t){i||(i=!0,s.resolve(o,t))}),(function(t){i||(i=!0,s.reject(o,t))}))}}e.exports=d,d.prototype.catch=function(t){return this.then(null,t)},d.prototype.then=function(t,e){if("function"!=typeof t&&this.state===o||"function"!=typeof e&&this.state===a)return this;var r=new this.constructor(n);return this.state!==l?c(r,this.state===o?t:e,this.outcome):this.queue.push(new u(r,t,e)),r},u.prototype.callFulfilled=function(t){s.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){c(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){s.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){c(this.promise,this.onRejected,t)},s.resolve=function(t,e){var r=g(h,e);if("error"===r.status)return s.reject(t,r.value);var i=r.value;if(i)f(t,i);else{t.state=o,t.outcome=e;for(var n=-1,a=t.queue.length;++n<a;)t.queue[n].callFulfilled(e)}return t},s.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,i=t.queue.length;++r<i;)t.queue[r].callRejected(e);return t},d.resolve=p,d.reject=m,d.all=v,d.race=y},{1:1}],3:[function(t,e,i){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r.g?r.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}var a=s();function o(){try{if(!a||!a.open)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}function l(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}"undefined"==typeof Promise&&t(3);var d=Promise;function u(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function c(t,e,r){"function"==typeof e&&t.then(e),"function"==typeof r&&t.catch(r)}function h(t){return"string"!=typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",p=void 0,m={},v=Object.prototype.toString,y="readonly",b="readwrite";function T(t){for(var e=t.length,r=new ArrayBuffer(e),i=new Uint8Array(r),n=0;n<e;n++)i[n]=t.charCodeAt(n);return r}function E(t){return new d((function(e){var r=t.transaction(g,b),i=l([""]);r.objectStore(g).put(i,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function S(t){return"boolean"==typeof p?d.resolve(p):E(t).then((function(t){return p=t}))}function w(t){var e=m[t.name],r={};r.promise=new d((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function $(t){var e=m[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function A(t,e){var r=m[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function C(t,e){return new d((function(r,i){if(m[t.name]=m[t.name]||M(),t.db){if(!e)return r(t.db);w(t),t.db.close()}var n=[t.name];e&&n.push(t.version);var s=a.open.apply(a,n);e&&(s.onupgradeneeded=function(e){var r=s.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(g)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),s.onerror=function(t){t.preventDefault(),i(s.error)},s.onsuccess=function(){var e=s.result;e.onversionchange=function(t){t.target.close()},r(e),$(t)}}))}function L(t){return C(t,!1)}function x(t){return C(t,!0)}function R(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),i=t.version<t.db.version,n=t.version>t.db.version;if(i&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),n||r){if(r){var s=t.db.version+1;s>t.version&&(t.version=s)}return!0}return!1}function k(t){return new d((function(e,r){var i=new FileReader;i.onerror=r,i.onloadend=function(r){var i=btoa(r.target.result||"");e({__local_forage_encoded_blob:!0,data:i,type:t.type})},i.readAsBinaryString(t)}))}function D(t){return l([T(atob(t.data))],{type:t.type})}function I(t){return t&&t.__local_forage_encoded_blob}function P(t){var e=this,r=e._initReady().then((function(){var t=m[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return c(r,t,t),r}function _(t){w(t);for(var e=m[t.name],r=e.forages,i=0;i<r.length;i++){var n=r[i];n._dbInfo.db&&(n._dbInfo.db.close(),n._dbInfo.db=null)}return t.db=null,L(t).then((function(e){return t.db=e,R(t)?x(t):e})).then((function(i){t.db=e.db=i;for(var n=0;n<r.length;n++)r[n]._dbInfo.db=i})).catch((function(e){throw A(t,e),e}))}function O(t,e,r,i){void 0===i&&(i=1);try{var n=t.db.transaction(t.storeName,e);r(null,n)}catch(n){if(i>0&&(!t.db||"InvalidStateError"===n.name||"NotFoundError"===n.name))return d.resolve().then((function(){if(!t.db||"NotFoundError"===n.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),x(t)})).then((function(){return _(t).then((function(){O(t,e,r,i-1)}))})).catch(r);r(n)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function N(t){var e=this,r={db:null};if(t)for(var i in t)r[i]=t[i];var n=m[r.name];n||(n=M(),m[r.name]=n),n.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=P);var s=[];function a(){return d.resolve()}for(var o=0;o<n.forages.length;o++){var l=n.forages[o];l!==e&&s.push(l._initReady().catch(a))}var u=n.forages.slice(0);return d.all(s).then((function(){return r.db=n.db,L(r)})).then((function(t){return r.db=t,R(r,e._defaultConfig.version)?x(r):t})).then((function(t){r.db=n.db=t,e._dbInfo=r;for(var i=0;i<u.length;i++){var s=u[i];s!==e&&(s._dbInfo.db=r.db,s._dbInfo.version=r.version)}}))}function F(t,e){var r=this;t=h(t);var i=new d((function(e,i){r.ready().then((function(){O(r._dbInfo,y,(function(n,s){if(n)return i(n);try{var a=s.objectStore(r._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),I(t)&&(t=D(t)),e(t)},a.onerror=function(){i(a.error)}}catch(t){i(t)}}))})).catch(i)}));return u(i,e),i}function B(t,e){var r=this,i=new d((function(e,i){r.ready().then((function(){O(r._dbInfo,y,(function(n,s){if(n)return i(n);try{var a=s.objectStore(r._dbInfo.storeName).openCursor(),o=1;a.onsuccess=function(){var r=a.result;if(r){var i=r.value;I(i)&&(i=D(i));var n=t(i,r.key,o++);void 0!==n?e(n):r.continue()}else e()},a.onerror=function(){i(a.error)}}catch(t){i(t)}}))})).catch(i)}));return u(i,e),i}function U(t,e,r){var i=this;t=h(t);var n=new d((function(r,n){var s;i.ready().then((function(){return s=i._dbInfo,"[object Blob]"===v.call(e)?S(s.db).then((function(t){return t?e:k(e)})):e})).then((function(e){O(i._dbInfo,b,(function(s,a){if(s)return n(s);try{var o=a.objectStore(i._dbInfo.storeName);null===e&&(e=void 0);var l=o.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),r(e)},a.onabort=a.onerror=function(){var t=l.error?l.error:l.transaction.error;n(t)}}catch(t){n(t)}}))})).catch(n)}));return u(n,r),n}function G(t,e){var r=this;t=h(t);var i=new d((function(e,i){r.ready().then((function(){O(r._dbInfo,b,(function(n,s){if(n)return i(n);try{var a=s.objectStore(r._dbInfo.storeName).delete(t);s.oncomplete=function(){e()},s.onerror=function(){i(a.error)},s.onabort=function(){var t=a.error?a.error:a.transaction.error;i(t)}}catch(t){i(t)}}))})).catch(i)}));return u(i,e),i}function j(t){var e=this,r=new d((function(t,r){e.ready().then((function(){O(e._dbInfo,b,(function(i,n){if(i)return r(i);try{var s=n.objectStore(e._dbInfo.storeName).clear();n.oncomplete=function(){t()},n.onabort=n.onerror=function(){var t=s.error?s.error:s.transaction.error;r(t)}}catch(t){r(t)}}))})).catch(r)}));return u(r,t),r}function V(t){var e=this,r=new d((function(t,r){e.ready().then((function(){O(e._dbInfo,y,(function(i,n){if(i)return r(i);try{var s=n.objectStore(e._dbInfo.storeName).count();s.onsuccess=function(){t(s.result)},s.onerror=function(){r(s.error)}}catch(t){r(t)}}))})).catch(r)}));return u(r,t),r}function H(t,e){var r=this,i=new d((function(e,i){t<0?e(null):r.ready().then((function(){O(r._dbInfo,y,(function(n,s){if(n)return i(n);try{var a=s.objectStore(r._dbInfo.storeName),o=!1,l=a.openKeyCursor();l.onsuccess=function(){var r=l.result;r?0===t||o?e(r.key):(o=!0,r.advance(t)):e(null)},l.onerror=function(){i(l.error)}}catch(t){i(t)}}))})).catch(i)}));return u(i,e),i}function K(t){var e=this,r=new d((function(t,r){e.ready().then((function(){O(e._dbInfo,y,(function(i,n){if(i)return r(i);try{var s=n.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];s.onsuccess=function(){var e=s.result;e?(a.push(e.key),e.continue()):t(a)},s.onerror=function(){r(s.error)}}catch(t){r(t)}}))})).catch(r)}));return u(r,t),r}function z(t,e){e=f.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var i,n=this;if(t.name){var s=t.name===r.name&&n._dbInfo.db?d.resolve(n._dbInfo.db):L(t).then((function(e){var r=m[t.name],i=r.forages;r.db=e;for(var n=0;n<i.length;n++)i[n]._dbInfo.db=e;return e}));i=t.storeName?s.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;w(t);var i=m[t.name],n=i.forages;e.close();for(var s=0;s<n.length;s++){var o=n[s];o._dbInfo.db=null,o._dbInfo.version=r}var l=new d((function(e,i){var n=a.open(t.name,r);n.onerror=function(t){n.result.close(),i(t)},n.onupgradeneeded=function(){n.result.deleteObjectStore(t.storeName)},n.onsuccess=function(){var t=n.result;t.close(),e(t)}}));return l.then((function(t){i.db=t;for(var e=0;e<n.length;e++){var r=n[e];r._dbInfo.db=t,$(r._dbInfo)}})).catch((function(e){throw(A(t,e)||d.resolve()).catch((function(){})),e}))}})):s.then((function(e){w(t);var r=m[t.name],i=r.forages;e.close();for(var n=0;n<i.length;n++)i[n]._dbInfo.db=null;var s=new d((function(e,r){var i=a.deleteDatabase(t.name);i.onerror=function(){var t=i.result;t&&t.close(),r(i.error)},i.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},i.onsuccess=function(){var t=i.result;t&&t.close(),e(t)}}));return s.then((function(t){r.db=t;for(var e=0;e<i.length;e++)$(i[e]._dbInfo)})).catch((function(e){throw(A(t,e)||d.resolve()).catch((function(){})),e}))}))}else i=d.reject("Invalid arguments");return u(i,e),i}var q={_driver:"asyncStorage",_initStorage:N,_support:o(),iterate:B,getItem:F,setItem:U,removeItem:G,clear:j,length:V,key:H,keys:K,dropInstance:z};function W(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",Z=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",J=Q.length,tt="arbf",et="blob",rt="si08",it="ui08",nt="uic8",st="si16",at="si32",ot="ur16",lt="ui32",dt="fl32",ut="fl64",ct=J+tt.length,ht=Object.prototype.toString;function ft(t){var e,r,i,n,s,a=.75*t.length,o=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var d=new ArrayBuffer(a),u=new Uint8Array(d);for(e=0;e<o;e+=4)r=Y.indexOf(t[e]),i=Y.indexOf(t[e+1]),n=Y.indexOf(t[e+2]),s=Y.indexOf(t[e+3]),u[l++]=r<<2|i>>4,u[l++]=(15&i)<<4|n>>2,u[l++]=(3&n)<<6|63&s;return d}function gt(t){var e,r=new Uint8Array(t),i="";for(e=0;e<r.length;e+=3)i+=Y[r[e]>>2],i+=Y[(3&r[e])<<4|r[e+1]>>4],i+=Y[(15&r[e+1])<<2|r[e+2]>>6],i+=Y[63&r[e+2]];return r.length%3==2?i=i.substring(0,i.length-1)+"=":r.length%3==1&&(i=i.substring(0,i.length-2)+"=="),i}function pt(t,e){var r="";if(t&&(r=ht.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===ht.call(t.buffer))){var i,n=Q;t instanceof ArrayBuffer?(i=t,n+=tt):(i=t.buffer,"[object Int8Array]"===r?n+=rt:"[object Uint8Array]"===r?n+=it:"[object Uint8ClampedArray]"===r?n+=nt:"[object Int16Array]"===r?n+=st:"[object Uint16Array]"===r?n+=ot:"[object Int32Array]"===r?n+=at:"[object Uint32Array]"===r?n+=lt:"[object Float32Array]"===r?n+=dt:"[object Float64Array]"===r?n+=ut:e(new Error("Failed to get type for BinaryArray"))),e(n+gt(i))}else if("[object Blob]"===r){var s=new FileReader;s.onload=function(){var r=X+t.type+"~"+gt(this.result);e(Q+et+r)},s.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(r){console.error("Couldn't convert value into a JSON string: ",t),e(null,r)}}function mt(t){if(t.substring(0,J)!==Q)return JSON.parse(t);var e,r=t.substring(ct),i=t.substring(J,ct);if(i===et&&Z.test(r)){var n=r.match(Z);e=n[1],r=r.substring(n[0].length)}var s=ft(r);switch(i){case tt:return s;case et:return l([s],{type:e});case rt:return new Int8Array(s);case it:return new Uint8Array(s);case nt:return new Uint8ClampedArray(s);case st:return new Int16Array(s);case ot:return new Uint16Array(s);case at:return new Int32Array(s);case lt:return new Uint32Array(s);case dt:return new Float32Array(s);case ut:return new Float64Array(s);default:throw new Error("Unkown type: "+i)}}var vt={serialize:pt,deserialize:mt,stringToBuffer:ft,bufferToString:gt};function yt(t,e,r,i){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,i)}function bt(t){var e=this,r={db:null};if(t)for(var i in t)r[i]="string"!=typeof t[i]?t[i].toString():t[i];var n=new d((function(t,i){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(t){return i(t)}r.db.transaction((function(n){yt(n,r,(function(){e._dbInfo=r,t()}),(function(t,e){i(e)}))}),i)}));return r.serializer=vt,n}function Tt(t,e,r,i,n,s){t.executeSql(r,i,n,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,o){o.rows.length?s(t,a):yt(t,e,(function(){t.executeSql(r,i,n,s)}),s)}),s):s(t,a)}),s)}function Et(t,e){var r=this;t=h(t);var i=new d((function(e,i){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Tt(r,n,"SELECT * FROM "+n.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var i=r.rows.length?r.rows.item(0).value:null;i&&(i=n.serializer.deserialize(i)),e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return u(i,e),i}function St(t,e){var r=this,i=new d((function(e,i){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Tt(r,n,"SELECT * FROM "+n.storeName,[],(function(r,i){for(var s=i.rows,a=s.length,o=0;o<a;o++){var l=s.item(o),d=l.value;if(d&&(d=n.serializer.deserialize(d)),void 0!==(d=t(d,l.key,o+1)))return void e(d)}e()}),(function(t,e){i(e)}))}))})).catch(i)}));return u(i,e),i}function wt(t,e,r,i){var n=this;t=h(t);var s=new d((function(s,a){n.ready().then((function(){void 0===e&&(e=null);var o=e,l=n._dbInfo;l.serializer.serialize(e,(function(e,d){d?a(d):l.db.transaction((function(r){Tt(r,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){s(o)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(i>0)return void s(wt.apply(n,[t,o,r,i-1]));a(e)}}))}))})).catch(a)}));return u(s,r),s}function $t(t,e,r){return wt.apply(this,[t,e,r,1])}function At(t,e){var r=this;t=h(t);var i=new d((function(e,i){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Tt(r,n,"DELETE FROM "+n.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){i(e)}))}))})).catch(i)}));return u(i,e),i}function Ct(t){var e=this,r=new d((function(t,r){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Tt(e,i,"DELETE FROM "+i.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,t),r}function Lt(t){var e=this,r=new d((function(t,r){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Tt(e,i,"SELECT COUNT(key) as c FROM "+i.storeName,[],(function(e,r){var i=r.rows.item(0).c;t(i)}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,t),r}function xt(t,e){var r=this,i=new d((function(e,i){r.ready().then((function(){var n=r._dbInfo;n.db.transaction((function(r){Tt(r,n,"SELECT key FROM "+n.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var i=r.rows.length?r.rows.item(0).key:null;e(i)}),(function(t,e){i(e)}))}))})).catch(i)}));return u(i,e),i}function Rt(t){var e=this,r=new d((function(t,r){e.ready().then((function(){var i=e._dbInfo;i.db.transaction((function(e){Tt(e,i,"SELECT key FROM "+i.storeName,[],(function(e,r){for(var i=[],n=0;n<r.rows.length;n++)i.push(r.rows.item(n).key);t(i)}),(function(t,e){r(e)}))}))})).catch(r)}));return u(r,t),r}function kt(t){return new d((function(e,r){t.transaction((function(i){i.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,i){for(var n=[],s=0;s<i.rows.length;s++)n.push(i.rows.item(s).name);e({db:t,storeNames:n})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}function Dt(t,e){e=f.apply(this,arguments);var r=this.config();(t="function"!=typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var i,n=this;return u(i=t.name?new d((function(e){var i;i=t.name===r.name?n._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:i,storeNames:[t.storeName]}):e(kt(i))})).then((function(t){return new d((function(e,r){t.db.transaction((function(i){function n(t){return new d((function(e,r){i.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var s=[],a=0,o=t.storeNames.length;a<o;a++)s.push(n(t.storeNames[a]));d.all(s).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):d.reject("Invalid arguments"),e),i}var It={_driver:"webSQLStorage",_initStorage:bt,_support:W(),iterate:St,getItem:Et,setItem:$t,removeItem:At,clear:Ct,length:Lt,key:xt,keys:Rt,dropInstance:Dt};function Pt(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function _t(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function Ot(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}function Mt(){return!Ot()||localStorage.length>0}function Nt(t){var e=this,r={};if(t)for(var i in t)r[i]=t[i];return r.keyPrefix=_t(t,e._defaultConfig),Mt()?(e._dbInfo=r,r.serializer=vt,d.resolve()):d.reject()}function Ft(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var i=localStorage.key(r);0===i.indexOf(t)&&localStorage.removeItem(i)}}));return u(r,t),r}function Bt(t,e){var r=this;t=h(t);var i=r.ready().then((function(){var e=r._dbInfo,i=localStorage.getItem(e.keyPrefix+t);return i&&(i=e.serializer.deserialize(i)),i}));return u(i,e),i}function Ut(t,e){var r=this,i=r.ready().then((function(){for(var e=r._dbInfo,i=e.keyPrefix,n=i.length,s=localStorage.length,a=1,o=0;o<s;o++){var l=localStorage.key(o);if(0===l.indexOf(i)){var d=localStorage.getItem(l);if(d&&(d=e.serializer.deserialize(d)),void 0!==(d=t(d,l.substring(n),a++)))return d}}}));return u(i,e),i}function Gt(t,e){var r=this,i=r.ready().then((function(){var e,i=r._dbInfo;try{e=localStorage.key(t)}catch(t){e=null}return e&&(e=e.substring(i.keyPrefix.length)),e}));return u(i,e),i}function jt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,i=[],n=0;n<r;n++){var s=localStorage.key(n);0===s.indexOf(t.keyPrefix)&&i.push(s.substring(t.keyPrefix.length))}return i}));return u(r,t),r}function Vt(t){var e=this.keys().then((function(t){return t.length}));return u(e,t),e}function Ht(t,e){var r=this;t=h(t);var i=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return u(i,e),i}function Kt(t,e,r){var i=this;t=h(t);var n=i.ready().then((function(){void 0===e&&(e=null);var r=e;return new d((function(n,s){var a=i._dbInfo;a.serializer.serialize(e,(function(e,i){if(i)s(i);else try{localStorage.setItem(a.keyPrefix+t,e),n(r)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||s(t),s(t)}}))}))}));return u(n,r),n}function zt(t,e){if(e=f.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var i,n=this;return i=t.name?new d((function(e){t.storeName?e(_t(t,n._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):d.reject("Invalid arguments"),u(i,e),i}var qt={_driver:"localStorageWrapper",_initStorage:Nt,_support:Pt(),iterate:Ut,getItem:Bt,setItem:Kt,removeItem:Ht,clear:Ft,length:Vt,key:Gt,keys:jt,dropInstance:zt},Wt=function(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)},Yt=function(t,e){for(var r=t.length,i=0;i<r;){if(Wt(t[i],e))return!0;i++}return!1},Xt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Zt={},Qt={},Jt={INDEXEDDB:q,WEBSQL:It,LOCALSTORAGE:qt},te=[Jt.INDEXEDDB._driver,Jt.WEBSQL._driver,Jt.LOCALSTORAGE._driver],ee=["dropInstance"],re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),ie={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ne(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function se(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(Xt(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var ae=function(){function t(e){for(var r in n(this,t),Jt)if(Jt.hasOwnProperty(r)){var i=Jt[r],s=i._driver;this[r]=s,Zt[s]||this.defineDriver(i)}this._defaultConfig=se({},ie),this._config=se({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===(void 0===t?"undefined":i(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"==typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var i=new d((function(e,r){try{var i=t._driver,n=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(n);for(var s=re.concat("_initStorage"),a=0,o=s.length;a<o;a++){var l=s[a];if((!Yt(ee,l)||t[l])&&"function"!=typeof t[l])return void r(n)}var c=function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=d.reject(e);return u(r,arguments[arguments.length-1]),r}},r=0,i=ee.length;r<i;r++){var n=ee[r];t[n]||(t[n]=e(n))}};c();var h=function(r){Zt[i]&&console.info("Redefining LocalForage driver: "+i),Zt[i]=t,Qt[i]=r,e()};"_support"in t?t._support&&"function"==typeof t._support?t._support().then(h,r):h(!!t._support):h(!0)}catch(t){r(t)}}));return c(i,e,r),i},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var i=Zt[t]?d.resolve(Zt[t]):d.reject(new Error("Driver not found."));return c(i,e,r),i},t.prototype.getSerializer=function(t){var e=d.resolve(vt);return c(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return c(r,t,t),r},t.prototype.setDriver=function(t,e,r){var i=this;Xt(t)||(t=[t]);var n=this._getSupportedDrivers(t);function s(){i._config.driver=i.driver()}function a(t){return i._extend(t),s(),i._ready=i._initStorage(i._config),i._ready}function o(t){return function(){var e=0;function r(){for(;e<t.length;){var n=t[e];return e++,i._dbInfo=null,i._ready=null,i.getDriver(n).then(a).catch(r)}s();var o=new Error("No available storage method found.");return i._driverSet=d.reject(o),i._driverSet}return r()}}var l=null!==this._driverSet?this._driverSet.catch((function(){return d.resolve()})):d.resolve();return this._driverSet=l.then((function(){var t=n[0];return i._dbInfo=null,i._ready=null,i.getDriver(t).then((function(t){i._driver=t._driver,s(),i._wrapLibraryMethodsWithReady(),i._initDriver=o(n)}))})).catch((function(){s();var t=new Error("No available storage method found.");return i._driverSet=d.reject(t),i._driverSet})),c(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!Qt[t]},t.prototype._extend=function(t){se(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,i=t.length;r<i;r++){var n=t[r];this.supports(n)&&e.push(n)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=re.length;t<e;t++)ne(this,re[t])},t.prototype.createInstance=function(e){return new t(e)},t}(),oe=new ae;e.exports=oe},{3:3}]},{},[4])(4)},83503:function(t,e,r){var i,n,s,a,o;i=r(3939),n=r(92151).utf8,s=r(87206),a=r(92151).bin,(o=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):n.stringToBytes(t):s(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=i.bytesToWords(t),l=8*t.length,d=1732584193,u=-271733879,c=-1732584194,h=271733878,f=0;f<r.length;f++)r[f]=16711935&(r[f]<<8|r[f]>>>24)|4278255360&(r[f]<<24|r[f]>>>8);r[l>>>5]|=128<<l%32,r[14+(l+64>>>9<<4)]=l;var g=o._ff,p=o._gg,m=o._hh,v=o._ii;for(f=0;f<r.length;f+=16){var y=d,b=u,T=c,E=h;d=g(d,u,c,h,r[f+0],7,-680876936),h=g(h,d,u,c,r[f+1],12,-389564586),c=g(c,h,d,u,r[f+2],17,606105819),u=g(u,c,h,d,r[f+3],22,-1044525330),d=g(d,u,c,h,r[f+4],7,-176418897),h=g(h,d,u,c,r[f+5],12,1200080426),c=g(c,h,d,u,r[f+6],17,-1473231341),u=g(u,c,h,d,r[f+7],22,-45705983),d=g(d,u,c,h,r[f+8],7,1770035416),h=g(h,d,u,c,r[f+9],12,-1958414417),c=g(c,h,d,u,r[f+10],17,-42063),u=g(u,c,h,d,r[f+11],22,-1990404162),d=g(d,u,c,h,r[f+12],7,1804603682),h=g(h,d,u,c,r[f+13],12,-40341101),c=g(c,h,d,u,r[f+14],17,-1502002290),d=p(d,u=g(u,c,h,d,r[f+15],22,1236535329),c,h,r[f+1],5,-165796510),h=p(h,d,u,c,r[f+6],9,-1069501632),c=p(c,h,d,u,r[f+11],14,643717713),u=p(u,c,h,d,r[f+0],20,-373897302),d=p(d,u,c,h,r[f+5],5,-701558691),h=p(h,d,u,c,r[f+10],9,38016083),c=p(c,h,d,u,r[f+15],14,-660478335),u=p(u,c,h,d,r[f+4],20,-405537848),d=p(d,u,c,h,r[f+9],5,568446438),h=p(h,d,u,c,r[f+14],9,-1019803690),c=p(c,h,d,u,r[f+3],14,-187363961),u=p(u,c,h,d,r[f+8],20,1163531501),d=p(d,u,c,h,r[f+13],5,-1444681467),h=p(h,d,u,c,r[f+2],9,-51403784),c=p(c,h,d,u,r[f+7],14,1735328473),d=m(d,u=p(u,c,h,d,r[f+12],20,-1926607734),c,h,r[f+5],4,-378558),h=m(h,d,u,c,r[f+8],11,-2022574463),c=m(c,h,d,u,r[f+11],16,1839030562),u=m(u,c,h,d,r[f+14],23,-35309556),d=m(d,u,c,h,r[f+1],4,-1530992060),h=m(h,d,u,c,r[f+4],11,1272893353),c=m(c,h,d,u,r[f+7],16,-155497632),u=m(u,c,h,d,r[f+10],23,-1094730640),d=m(d,u,c,h,r[f+13],4,681279174),h=m(h,d,u,c,r[f+0],11,-358537222),c=m(c,h,d,u,r[f+3],16,-722521979),u=m(u,c,h,d,r[f+6],23,76029189),d=m(d,u,c,h,r[f+9],4,-640364487),h=m(h,d,u,c,r[f+12],11,-421815835),c=m(c,h,d,u,r[f+15],16,530742520),d=v(d,u=m(u,c,h,d,r[f+2],23,-995338651),c,h,r[f+0],6,-198630844),h=v(h,d,u,c,r[f+7],10,1126891415),c=v(c,h,d,u,r[f+14],15,-1416354905),u=v(u,c,h,d,r[f+5],21,-57434055),d=v(d,u,c,h,r[f+12],6,1700485571),h=v(h,d,u,c,r[f+3],10,-1894986606),c=v(c,h,d,u,r[f+10],15,-1051523),u=v(u,c,h,d,r[f+1],21,-2054922799),d=v(d,u,c,h,r[f+8],6,1873313359),h=v(h,d,u,c,r[f+15],10,-30611744),c=v(c,h,d,u,r[f+6],15,-1560198380),u=v(u,c,h,d,r[f+13],21,1309151649),d=v(d,u,c,h,r[f+4],6,-145523070),h=v(h,d,u,c,r[f+11],10,-1120210379),c=v(c,h,d,u,r[f+2],15,718787259),u=v(u,c,h,d,r[f+9],21,-343485551),d=d+y>>>0,u=u+b>>>0,c=c+T>>>0,h=h+E>>>0}return i.endian([d,u,c,h])})._ff=function(t,e,r,i,n,s,a){var o=t+(e&r|~e&i)+(n>>>0)+a;return(o<<s|o>>>32-s)+e},o._gg=function(t,e,r,i,n,s,a){var o=t+(e&i|r&~i)+(n>>>0)+a;return(o<<s|o>>>32-s)+e},o._hh=function(t,e,r,i,n,s,a){var o=t+(e^r^i)+(n>>>0)+a;return(o<<s|o>>>32-s)+e},o._ii=function(t,e,r,i,n,s,a){var o=t+(r^(e|~i))+(n>>>0)+a;return(o<<s|o>>>32-s)+e},o._blocksize=16,o._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=i.wordsToBytes(o(t,e));return e&&e.asBytes?r:e&&e.asString?a.bytesToString(r):i.bytesToHex(r)}},92566:function(t,e,r){"use strict";r.d(e,{Hn:function(){return Nt}});var i,n,s={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{}},a=window,o=a.console,l=a.navigator,d=a.performance,u=function(){return l.deviceMemory},c=function(){return l.hardwareConcurrency},h=function(){return d&&!!d.getEntriesByType&&!!d.now&&!!d.mark},f="4g",g=!1,p={value:0},m={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},v={value:0},y={value:0},b={},T={isHidden:!1,didChange:!1},E=function(){T.isHidden=!1,document.hidden&&(T.isHidden=document.hidden,T.didChange=!0)},S=function(t,e){try{var r=new PerformanceObserver((function(t){e(t.getEntries())}));return r.observe({type:t,buffered:!0}),r}catch(t){o.warn("Perfume.js:",t)}return null},w=function(){return!!(c()&&c()<=4)||!!(u()&&u()<=4)},$=function(t,e){switch(t){case"slow-2g":case"2g":case"3g":return!0;default:return w()||e}},A=function(t){return parseFloat(t.toFixed(4))},C=function(t){return"number"!=typeof t?null:A(t/Math.pow(1024,2))},L=function(t,e,r,i,n){var o,d=function(){s.analyticsTracker&&(T.isHidden&&!["CLS","INP"].includes(t)||s.analyticsTracker({attribution:i,metricName:t,data:e,navigatorInformation:l?{deviceMemory:u()||0,hardwareConcurrency:c()||0,serviceWorkerStatus:"serviceWorker"in l?l.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:w(),isLowEndExperience:$(f,g)}:{},rating:r,navigationType:n}))};["CLS","INP"].includes(t)?d():(o=d,"requestIdleCallback"in a?a.requestIdleCallback(o,{timeout:3e3}):o())},x=function(t){t.forEach((function(t){if(!("self"!==t.name||t.startTime<p.value)){var e=t.duration-50;e>0&&(v.value+=e,y.value+=e)}}))};!function(t){t.instant="instant",t.quick="quick",t.moderate="moderate",t.slow="slow",t.unavoidable="unavoidable"}(i||(i={}));(n={})[i.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},n[i.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},n[i.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},n[i.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},n[i.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4};var R,k,D,I,P,_={RT:[100,200],TBT:[200,600],NTBT:[200,600]},O=function(t,e){return _[t]?e<=_[t][0]?"good":e<=_[t][1]?"needsImprovement":"poor":null},M=function(t,e,r){Object.keys(e).forEach((function(t){"number"==typeof e[t]&&(e[t]=A(e[t]))})),L(t,e,null,r||{})},N=function(t){var e=t.attribution,r=t.name,i=t.rating,n=t.value,a=t.navigationType;"FCP"===r&&(p.value=n),["FCP","LCP"].includes(r)&&!b[0]&&(b[0]=S("longtask",x)),"FID"===r&&setTimeout((function(){T.didChange||(N({attribution:e,name:"TBT",rating:O("TBT",v.value),value:v.value,navigationType:a}),M("dataConsumption",m.value))}),1e4);var o=A(n);o<=s.maxTime&&o>=0&&L(r,o,i,e,a)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},B=function(t){if("loading"===document.readyState)return"loading";var e=F();if(e){if(t<e.domInteractive)return"loading";if(0===e.domContentLoadedEventStart||t<e.domContentLoadedEventStart)return"dom-interactive";if(0===e.domComplete||t<e.domComplete)return"dom-content-loaded"}return"complete"},U=function(t){var e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},G=function(t,e){var r="";try{for(;t&&9!==t.nodeType;){var i=t,n=i.id?"#"+i.id:U(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(r.length+n.length>(e||100)-1)return r||n;if(r=r?n+">"+r:n,i.id)break;t=i.parentNode}}catch(t){}return r},j=-1,V=function(){return j},H=function(t){addEventListener("pageshow",(function(e){e.persisted&&(j=e.timeStamp,t(e))}),!0)},K=function(){var t=F();return t&&t.activationStart||0},z=function(t,e){var r=F(),i="navigate";return V()>=0?i="back-forward-cache":r&&(document.prerendering||K()>0?i="prerender":document.wasDiscarded?i="restore":r.type&&(i=r.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},q=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return i.observe(Object.assign({type:t,buffered:!0},r||{})),i}}catch(t){}},W=function(t,e,r,i){var n,s;return function(a){e.value>=0&&(a||i)&&((s=e.value-(n||0))||void 0===n)&&(n=e.value,e.delta=s,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,r),t(e))}},Y=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},X=function(t){var e=function(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||t(e)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},Z=function(t){var e=!1;return function(r){e||(t(r),e=!0)}},Q=-1,J=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},tt=function(t){"hidden"===document.visibilityState&&Q>-1&&(Q="visibilitychange"===t.type?t.timeStamp:0,rt())},et=function(){addEventListener("visibilitychange",tt,!0),addEventListener("prerenderingchange",tt,!0)},rt=function(){removeEventListener("visibilitychange",tt,!0),removeEventListener("prerenderingchange",tt,!0)},it=function(){return Q<0&&(Q=J(),et(),H((function(){setTimeout((function(){Q=J(),et()}),0)}))),{get firstHiddenTime(){return Q}}},nt=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},st=[1800,3e3],at=function(t,e){e=e||{},nt((function(){var r,i=it(),n=z("FCP"),s=q("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<i.firstHiddenTime&&(n.value=Math.max(t.startTime-K(),0),n.entries.push(t),r(!0)))}))}));s&&(r=W(t,n,st,e.reportAllChanges),H((function(i){n=z("FCP"),r=W(t,n,st,e.reportAllChanges),Y((function(){n.value=performance.now()-i.timeStamp,r(!0)}))})))}))},ot=[.1,.25],lt={passive:!0,capture:!0},dt=new Date,ut=function(t,e){R||(R=e,k=t,D=new Date,ft(removeEventListener),ct())},ct=function(){if(k>=0&&k<D-dt){var t={entryType:"first-input",name:R.type,target:R.target,cancelable:R.cancelable,startTime:R.timeStamp,processingStart:R.timeStamp+k};I.forEach((function(e){e(t)})),I=[]}},ht=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var r=function(){ut(t,e),n()},i=function(){n()},n=function(){removeEventListener("pointerup",r,lt),removeEventListener("pointercancel",i,lt)};addEventListener("pointerup",r,lt),addEventListener("pointercancel",i,lt)}(e,t):ut(e,t)}},ft=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,ht,lt)}))},gt=[100,300],pt=0,mt=1/0,vt=0,yt=function(t){t.forEach((function(t){t.interactionId&&(mt=Math.min(mt,t.interactionId),vt=Math.max(vt,t.interactionId),pt=vt?(vt-mt)/7+1:0)}))},bt=function(){return P?pt:performance.interactionCount||0},Tt=[200,500],Et=0,St=function(){return bt()-Et},wt=[],$t={},At=function(t){var e=wt[wt.length-1],r=$t[t.interactionId];if(r||wt.length<10||t.duration>e.latency){if(r)r.entries.push(t),r.latency=Math.max(r.latency,t.duration);else{var i={id:t.interactionId,latency:t.duration,entries:[t]};$t[i.id]=i,wt.push(i)}wt.sort((function(t,e){return e.latency-t.latency})),wt.splice(10).forEach((function(t){delete $t[t.id]}))}},Ct=function(t,e){!function(t,e){e=e||{},nt((function(){var r;"interactionCount"in performance||P||(P=q("event",yt,{type:"event",buffered:!0,durationThreshold:0}));var i,n=z("INP"),s=function(t){t.forEach((function(t){t.interactionId&&At(t),"first-input"===t.entryType&&!wt.some((function(e){return e.entries.some((function(e){return t.duration===e.duration&&t.startTime===e.startTime}))}))&&At(t)}));var e,r=(e=Math.min(wt.length-1,Math.floor(St()/50)),wt[e]);r&&r.latency!==n.value&&(n.value=r.latency,n.entries=r.entries,i())},a=q("event",s,{durationThreshold:null!==(r=e.durationThreshold)&&void 0!==r?r:40});i=W(t,n,Tt,e.reportAllChanges),a&&("interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),X((function(){s(a.takeRecords()),n.value<0&&St()>0&&(n.value=0,n.entries=[]),i(!0)})),H((function(){wt=[],Et=bt(),n=z("INP"),i=W(t,n,Tt,e.reportAllChanges)})))}))}((function(e){!function(t){if(t.entries.length){var e=t.entries.sort((function(t,e){return e.duration-t.duration||e.processingEnd-e.processingStart-(t.processingEnd-t.processingStart)}))[0];t.attribution={eventTarget:G(e.target),eventType:e.name,eventTime:e.startTime,eventEntry:e,loadState:B(e.startTime)}}else t.attribution={}}(e),t(e)}),e)},Lt=[2500,4e3],xt={},Rt=[800,1800],kt=function t(e){document.prerendering?nt((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},Dt=function(t,e){e=e||{};var r=z("TTFB"),i=W(t,r,Rt,e.reportAllChanges);kt((function(){var n=F();if(n){var s=n.responseStart;if(s<=0||s>performance.now())return;r.value=Math.max(s-K(),0),r.entries=[n],i(!0),H((function(){r=z("TTFB",0),(i=W(t,r,Rt,e.reportAllChanges))(!0)}))}}))},It=function(t){t.forEach((function(t){t.identifier&&N({attribution:{identifier:t.identifier},name:"ET",rating:null,value:t.startTime})}))},Pt=function(t){t.forEach((function(t){if(s.isResourceTiming&&M("resourceTiming",t),t.decodedBodySize&&t.initiatorType){var e=t.decodedBodySize/1e3;m.value[t.initiatorType]+=e,m.value.total+=e}}))},_t=function(){!function(t,e){Dt((function(t){!function(t){if(t.entries.length){var e=t.entries[0],r=e.activationStart||0,i=Math.max(e.domainLookupStart-r,0),n=Math.max(e.connectStart-r,0),s=Math.max(e.requestStart-r,0);t.attribution={waitingTime:i,dnsTime:n-i,connectionTime:s-n,requestTime:t.value-s,navigationEntry:e}}else t.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(t),function(t){t.value>0&&N(t)}(t)}),e)}(0,s.reportOptions.ttfb),function(t,e){!function(t,e){e=e||{},at(Z((function(){var r,i=z("CLS",0),n=0,s=[],a=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=s[0],r=s[s.length-1];n&&t.startTime-r.startTime<1e3&&t.startTime-e.startTime<5e3?(n+=t.value,s.push(t)):(n=t.value,s=[t])}})),n>i.value&&(i.value=n,i.entries=s,r())},o=q("layout-shift",a);o&&(r=W(t,i,ot,e.reportAllChanges),X((function(){a(o.takeRecords()),r(!0)})),H((function(){n=0,i=z("CLS",0),r=W(t,i,ot,e.reportAllChanges),Y((function(){return r()}))})),setTimeout(r,0))})))}((function(t){!function(t){if(t.entries.length){var e=t.entries.reduce((function(t,e){return t&&t.value>e.value?t:e}));if(e&&e.sources&&e.sources.length){var r=(i=e.sources).find((function(t){return t.node&&1===t.node.nodeType}))||i[0];if(r)return void(t.attribution={largestShiftTarget:G(r.node),largestShiftTime:e.startTime,largestShiftValue:e.value,largestShiftSource:r,largestShiftEntry:e,loadState:B(e.startTime)})}}var i;t.attribution={}}(t),function(t){N(t)}(t)}),e)}(0,s.reportOptions.cls),function(t,e){at((function(t){!function(t){if(t.entries.length){var e=F(),r=t.entries[t.entries.length-1];if(e){var i=e.activationStart||0,n=Math.max(0,e.responseStart-i);return void(t.attribution={timeToFirstByte:n,firstByteToFCP:t.value-n,loadState:B(t.entries[0].startTime),navigationEntry:e,fcpEntry:r})}}t.attribution={timeToFirstByte:0,firstByteToFCP:t.value,loadState:B(V())}}(t),function(t){N(t)}(t)}),e)}(0,s.reportOptions.fcp),function(t,e){!function(t,e){e=e||{},nt((function(){var r,i=it(),n=z("FID"),s=function(t){t.startTime<i.firstHiddenTime&&(n.value=t.processingStart-t.startTime,n.entries.push(t),r(!0))},a=function(t){t.forEach(s)},o=q("first-input",a);r=W(t,n,gt,e.reportAllChanges),o&&X(Z((function(){a(o.takeRecords()),o.disconnect()}))),o&&H((function(){var i;n=z("FID"),r=W(t,n,gt,e.reportAllChanges),I=[],k=-1,R=null,ft(addEventListener),i=s,I.push(i),ct()}))}))}((function(t){!function(t){var e=t.entries[0];t.attribution={eventTarget:G(e.target),eventType:e.name,eventTime:e.startTime,eventEntry:e,loadState:B(e.startTime)}}(t),function(t){N(t)}(t)}),e)}(0,s.reportOptions.fid),function(t,e){!function(t,e){e=e||{},nt((function(){var r,i=it(),n=z("LCP"),s=function(t){var e=t[t.length-1];e&&e.startTime<i.firstHiddenTime&&(n.value=Math.max(e.startTime-K(),0),n.entries=[e],r())},a=q("largest-contentful-paint",s);if(a){r=W(t,n,Lt,e.reportAllChanges);var o=Z((function(){xt[n.id]||(s(a.takeRecords()),a.disconnect(),xt[n.id]=!0,r(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return setTimeout(o,0)}),!0)})),X(o),H((function(i){n=z("LCP"),r=W(t,n,Lt,e.reportAllChanges),Y((function(){n.value=performance.now()-i.timeStamp,xt[n.id]=!0,r(!0)}))}))}}))}((function(t){!function(t){if(t.entries.length){var e=F();if(e){var r=e.activationStart||0,i=t.entries[t.entries.length-1],n=i.url&&performance.getEntriesByType("resource").filter((function(t){return t.name===i.url}))[0],s=Math.max(0,e.responseStart-r),a=Math.max(s,n?(n.requestStart||n.startTime)-r:0),o=Math.max(a,n?n.responseEnd-r:0),l=Math.max(o,i?i.startTime-r:0),d={element:G(i.element),timeToFirstByte:s,resourceLoadDelay:a-s,resourceLoadTime:o-a,elementRenderDelay:l-o,navigationEntry:e,lcpEntry:i};return i.url&&(d.url=i.url),n&&(d.lcpResourceEntry=n),void(t.attribution=d)}}t.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:t.value}}(t),function(t){N(t)}(t)}),e)}(0,s.reportOptions.lcp),Ct((function(t){return N(t)}),s.reportOptions.inp),s.isResourceTiming&&S("resource",Pt),s.isElementTiming&&S("element",It)},Ot=function(t){var e="usageDetails"in t?t.usageDetails:{};M("storageEstimate",{quota:C(t.quota),usage:C(t.usage),caches:C(e.caches),indexedDB:C(e.indexedDB),serviceWorker:C(e.serviceWorkerRegistrations)})},Mt={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Nt=function(t){if(void 0===t&&(t={}),s.analyticsTracker=t.analyticsTracker,s.isResourceTiming=!!t.resourceTiming,s.isElementTiming=!!t.elementTiming,s.maxTime=t.maxMeasureTime||s.maxTime,s.reportOptions=t.reportOptions||s.reportOptions,s.steps=t.steps,s.onMarkStep=t.onMarkStep,h()){"PerformanceObserver"in a&&_t(),void 0!==document.hidden&&document.addEventListener("visibilitychange",E);var e=function(){if(!h())return{};var t=d.getEntriesByType("navigation")[0];if(!t)return{};var e=t.responseStart,r=t.responseEnd;return{fetchTime:r-t.fetchStart,workerTime:t.workerStart>0?r-t.workerStart:0,totalTime:r-t.requestStart,downloadTime:r-e,timeToFirstByte:e-t.requestStart,headerSize:t.transferSize-t.encodedBodySize||0,dnsLookupTime:t.domainLookupEnd-t.domainLookupStart,redirectTime:t.redirectEnd-t.redirectStart}}();M("navigationTiming",e),e.redirectTime&&N({attribution:{},name:"RT",rating:O("RT",e.redirectTime),value:e.redirectTime}),M("networkInformation",function(){if("connection"in l){var t=l.connection;return"object"!=typeof t?{}:(f=t.effectiveType,g=!!t.saveData,{downlink:t.downlink,effectiveType:t.effectiveType,rtt:t.rtt,saveData:!!t.saveData})}return{}}()),l&&l.storage&&"function"==typeof l.storage.estimate&&l.storage.estimate().then(Ot),s.steps&&s.steps&&(Mt.startMarkToStepsMap={},Mt.finalMarkToStepsMap={},Mt.active={},Mt.navigationSteps={},Object.entries(s.steps).forEach((function(t){var e,r,i=t[0],n=t[1].marks,s=n[0],a=n[1],o=null!==(r=Mt.startMarkToStepsMap[s])&&void 0!==r?r:{};if(o[i]=!0,Mt.startMarkToStepsMap[s]=o,Mt.finalMarkToStepsMap[a]){var l=Mt.finalMarkToStepsMap[a][s]||[];l.push(i),Mt.finalMarkToStepsMap[a][s]=l}else Mt.finalMarkToStepsMap[a]=((e={})[s]=[i],e)})))}}},88337:function(){Promise.any=t=>new Promise(((e,r)=>{var i,n,s,a,o;let l=!1,d=[],u=0,c=[];function h(t){l||(l=!0,e(t))}function f(t){c.push(t),c.length>=u&&r(c)}for(let e of t)u++,d.push(e);for(let t of d)void 0!==(null===(i=t)||void 0===i?void 0:i.then)||void 0!==(null===(n=t)||void 0===n?void 0:n.catch)?(null===(a=null===(s=t)||void 0===s?void 0:s.then((t=>h(t))))||void 0===a||a.catch((t=>{})),null===(o=t)||void 0===o||o.catch((t=>f(t)))):h(t)}))},49873:function(t,e){var r,i,n,s=function(){var t=function(t,e){var r=t,i=u[e],n=null,s=0,a=null,o=[],l={},d=function(t,e){n=function(t){for(var e=new Array(t),r=0;r<t;r+=1){e[r]=new Array(t);for(var i=0;i<t;i+=1)e[r][i]=null}return e}(s=4*r+17),c(0,0),c(s-7,0),c(0,s-7),f(),h(),p(t,e),r>=7&&g(t),null==a&&(a=v(r,i,o)),m(a,e)},c=function(t,e){for(var r=-1;r<=7;r+=1)if(!(t+r<=-1||s<=t+r))for(var i=-1;i<=7;i+=1)e+i<=-1||s<=e+i||(n[t+r][e+i]=0<=r&&r<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=i&&i<=4)},h=function(){for(var t=8;t<s-8;t+=1)null==n[t][6]&&(n[t][6]=t%2==0);for(var e=8;e<s-8;e+=1)null==n[6][e]&&(n[6][e]=e%2==0)},f=function(){for(var t=b.getPatternPosition(r),e=0;e<t.length;e+=1)for(var i=0;i<t.length;i+=1){var s=t[e],a=t[i];if(null==n[s][a])for(var o=-2;o<=2;o+=1)for(var l=-2;l<=2;l+=1)n[s+o][a+l]=-2==o||2==o||-2==l||2==l||0==o&&0==l}},g=function(t){for(var e=b.getBCHTypeNumber(r),i=0;i<18;i+=1){var a=!t&&1==(e>>i&1);n[Math.floor(i/3)][i%3+s-8-3]=a}for(i=0;i<18;i+=1){a=!t&&1==(e>>i&1);n[i%3+s-8-3][Math.floor(i/3)]=a}},p=function(t,e){for(var r=i<<3|e,a=b.getBCHTypeInfo(r),o=0;o<15;o+=1){var l=!t&&1==(a>>o&1);o<6?n[o][8]=l:o<8?n[o+1][8]=l:n[s-15+o][8]=l}for(o=0;o<15;o+=1){l=!t&&1==(a>>o&1);o<8?n[8][s-o-1]=l:o<9?n[8][15-o-1+1]=l:n[8][15-o-1]=l}n[s-8][8]=!t},m=function(t,e){for(var r=-1,i=s-1,a=7,o=0,l=b.getMaskFunction(e),d=s-1;d>0;d-=2)for(6==d&&(d-=1);;){for(var u=0;u<2;u+=1)if(null==n[i][d-u]){var c=!1;o<t.length&&(c=1==(t[o]>>>a&1)),l(i,d-u)&&(c=!c),n[i][d-u]=c,-1==(a-=1)&&(o+=1,a=7)}if((i+=r)<0||s<=i){i-=r,r=-r;break}}},v=function(t,e,r){for(var i=S.getRSBlocks(t,e),n=w(),s=0;s<r.length;s+=1){var a=r[s];n.put(a.getMode(),4),n.put(a.getLength(),b.getLengthInBits(a.getMode(),t)),a.write(n)}var o=0;for(s=0;s<i.length;s+=1)o+=i[s].dataCount;if(n.getLengthInBits()>8*o)throw"code length overflow. ("+n.getLengthInBits()+">"+8*o+")";for(n.getLengthInBits()+4<=8*o&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*o||(n.put(236,8),n.getLengthInBits()>=8*o));)n.put(17,8);return function(t,e){for(var r=0,i=0,n=0,s=new Array(e.length),a=new Array(e.length),o=0;o<e.length;o+=1){var l=e[o].dataCount,d=e[o].totalCount-l;i=Math.max(i,l),n=Math.max(n,d),s[o]=new Array(l);for(var u=0;u<s[o].length;u+=1)s[o][u]=255&t.getBuffer()[u+r];r+=l;var c=b.getErrorCorrectPolynomial(d),h=E(s[o],c.getLength()-1).mod(c);for(a[o]=new Array(c.getLength()-1),u=0;u<a[o].length;u+=1){var f=u+h.getLength()-a[o].length;a[o][u]=f>=0?h.getAt(f):0}}var g=0;for(u=0;u<e.length;u+=1)g+=e[u].totalCount;var p=new Array(g),m=0;for(u=0;u<i;u+=1)for(o=0;o<e.length;o+=1)u<s[o].length&&(p[m]=s[o][u],m+=1);for(u=0;u<n;u+=1)for(o=0;o<e.length;o+=1)u<a[o].length&&(p[m]=a[o][u],m+=1);return p}(n,i)};l.addData=function(t,e){var r=null;switch(e=e||"Byte"){case"Numeric":r=$(t);break;case"Alphanumeric":r=A(t);break;case"Byte":r=C(t);break;case"Kanji":r=L(t);break;default:throw"mode:"+e}o.push(r),a=null},l.isDark=function(t,e){if(t<0||s<=t||e<0||s<=e)throw t+","+e;return n[t][e]},l.getModuleCount=function(){return s},l.make=function(){if(r<1){for(var t=1;t<40;t++){for(var e=S.getRSBlocks(t,i),n=w(),s=0;s<o.length;s++){var a=o[s];n.put(a.getMode(),4),n.put(a.getLength(),b.getLengthInBits(a.getMode(),t)),a.write(n)}var u=0;for(s=0;s<e.length;s++)u+=e[s].dataCount;if(n.getLengthInBits()<=8*u)break}r=t}d(!1,function(){for(var t=0,e=0,r=0;r<8;r+=1){d(!0,r);var i=b.getLostPoint(l);(0==r||t>i)&&(t=i,e=r)}return e}())},l.createTableTag=function(t,e){t=t||2;var r="";r+='<table style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",r+='">',r+="<tbody>";for(var i=0;i<l.getModuleCount();i+=1){r+="<tr>";for(var n=0;n<l.getModuleCount();n+=1)r+='<td style="',r+=" border-width: 0px; border-style: none;",r+=" border-collapse: collapse;",r+=" padding: 0px; margin: 0px;",r+=" width: "+t+"px;",r+=" height: "+t+"px;",r+=" background-color: ",r+=l.isDark(i,n)?"#000000":"#ffffff",r+=";",r+='"/>';r+="</tr>"}return r+="</tbody>",r+="</table>"},l.createSvgTag=function(t,e,r,i){var n={};"object"==typeof arguments[0]&&(t=(n=arguments[0]).cellSize,e=n.margin,r=n.alt,i=n.title),t=t||2,e=void 0===e?4*t:e,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-description":null,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-title":null;var s,a,o,d,u=l.getModuleCount()*t+2*e,c="";for(d="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",c+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',c+=n.scalable?"":' width="'+u+'px" height="'+u+'px"',c+=' viewBox="0 0 '+u+" "+u+'" ',c+=' preserveAspectRatio="xMinYMin meet"',c+=i.text||r.text?' role="img" aria-labelledby="'+y([i.id,r.id].join(" ").trim())+'"':"",c+=">",c+=i.text?'<title id="'+y(i.id)+'">'+y(i.text)+"</title>":"",c+=r.text?'<description id="'+y(r.id)+'">'+y(r.text)+"</description>":"",c+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',c+='<path d="',a=0;a<l.getModuleCount();a+=1)for(o=a*t+e,s=0;s<l.getModuleCount();s+=1)l.isDark(a,s)&&(c+="M"+(s*t+e)+","+o+d);return c+='" stroke="transparent" fill="black"/>',c+="</svg>"},l.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var r=l.getModuleCount()*t+2*e,i=e,n=r-e;return k(r,r,(function(e,r){if(i<=e&&e<n&&i<=r&&r<n){var s=Math.floor((e-i)/t),a=Math.floor((r-i)/t);return l.isDark(a,s)?0:1}return 1}))},l.createImgTag=function(t,e,r){t=t||2,e=void 0===e?4*t:e;var i=l.getModuleCount()*t+2*e,n="";return n+="<img",n+=' src="',n+=l.createDataURL(t,e),n+='"',n+=' width="',n+=i,n+='"',n+=' height="',n+=i,n+='"',r&&(n+=' alt="',n+=y(r),n+='"'),n+="/>"};var y=function(t){for(var e="",r=0;r<t.length;r+=1){var i=t.charAt(r);switch(i){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=i}}return e};return l.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,r,i,n,s,a=1*l.getModuleCount()+2*t,o=t,d=a-t,u={"██":"█","█ ":"▀"," █":"▄","  ":" "},c={"██":"▀","█ ":"▀"," █":" ","  ":" "},h="";for(e=0;e<a;e+=2){for(i=Math.floor((e-o)/1),n=Math.floor((e+1-o)/1),r=0;r<a;r+=1)s="█",o<=r&&r<d&&o<=e&&e<d&&l.isDark(i,Math.floor((r-o)/1))&&(s=" "),o<=r&&r<d&&o<=e+1&&e+1<d&&l.isDark(n,Math.floor((r-o)/1))?s+=" ":s+="█",h+=t<1&&e+1>=d?c[s]:u[s];h+="\n"}return a%2&&t>0?h.substring(0,h.length-a-1)+Array(a+1).join("▀"):h.substring(0,h.length-1)}(e);t-=1,e=void 0===e?2*t:e;var r,i,n,s,a=l.getModuleCount()*t+2*e,o=e,d=a-e,u=Array(t+1).join("██"),c=Array(t+1).join("  "),h="",f="";for(r=0;r<a;r+=1){for(n=Math.floor((r-o)/t),f="",i=0;i<a;i+=1)s=1,o<=i&&i<d&&o<=r&&r<d&&l.isDark(n,Math.floor((i-o)/t))&&(s=0),f+=s?u:c;for(n=0;n<t;n+=1)h+=f+"\n"}return h.substring(0,h.length-1)},l.renderTo2dContext=function(t,e){e=e||2;for(var r=l.getModuleCount(),i=0;i<r;i++)for(var n=0;n<r;n++)t.fillStyle=l.isDark(i,n)?"black":"white",t.fillRect(i*e,n*e,e,e)},l};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],r=0;r<t.length;r+=1){var i=t.charCodeAt(r);e.push(255&i)}return e}}).default,t.createStringToBytes=function(t,e){var r=function(){for(var r=R(t),i=function(){var t=r.read();if(-1==t)throw"eof";return t},n=0,s={};;){var a=r.read();if(-1==a)break;var o=i(),l=i()<<8|i();s[String.fromCharCode(a<<8|o)]=l,n+=1}if(n!=e)throw n+" != "+e;return s}(),i="?".charCodeAt(0);return function(t){for(var e=[],n=0;n<t.length;n+=1){var s=t.charCodeAt(n);if(s<128)e.push(s);else{var a=r[t.charAt(n)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(i)}}return e}};var e,r,i,n,s,a=1,o=2,l=4,d=8,u={L:1,M:0,Q:3,H:2},c=0,h=1,f=2,g=3,p=4,m=5,v=6,y=7,b=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],r=1335,i=7973,s=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(n={}).getBCHTypeInfo=function(t){for(var e=t<<10;s(e)-s(r)>=0;)e^=r<<s(e)-s(r);return 21522^(t<<10|e)},n.getBCHTypeNumber=function(t){for(var e=t<<12;s(e)-s(i)>=0;)e^=i<<s(e)-s(i);return t<<12|e},n.getPatternPosition=function(t){return e[t-1]},n.getMaskFunction=function(t){switch(t){case c:return function(t,e){return(t+e)%2==0};case h:return function(t,e){return t%2==0};case f:return function(t,e){return e%3==0};case g:return function(t,e){return(t+e)%3==0};case p:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case m:return function(t,e){return t*e%2+t*e%3==0};case v:return function(t,e){return(t*e%2+t*e%3)%2==0};case y:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},n.getErrorCorrectPolynomial=function(t){for(var e=E([1],0),r=0;r<t;r+=1)e=e.multiply(E([1,T.gexp(r)],0));return e},n.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case a:return 10;case o:return 9;case l:case d:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case a:return 12;case o:return 11;case l:return 16;case d:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case a:return 14;case o:return 13;case l:return 16;case d:return 12;default:throw"mode:"+t}}},n.getLostPoint=function(t){for(var e=t.getModuleCount(),r=0,i=0;i<e;i+=1)for(var n=0;n<e;n+=1){for(var s=0,a=t.isDark(i,n),o=-1;o<=1;o+=1)if(!(i+o<0||e<=i+o))for(var l=-1;l<=1;l+=1)n+l<0||e<=n+l||0==o&&0==l||a==t.isDark(i+o,n+l)&&(s+=1);s>5&&(r+=3+s-5)}for(i=0;i<e-1;i+=1)for(n=0;n<e-1;n+=1){var d=0;t.isDark(i,n)&&(d+=1),t.isDark(i+1,n)&&(d+=1),t.isDark(i,n+1)&&(d+=1),t.isDark(i+1,n+1)&&(d+=1),0!=d&&4!=d||(r+=3)}for(i=0;i<e;i+=1)for(n=0;n<e-6;n+=1)t.isDark(i,n)&&!t.isDark(i,n+1)&&t.isDark(i,n+2)&&t.isDark(i,n+3)&&t.isDark(i,n+4)&&!t.isDark(i,n+5)&&t.isDark(i,n+6)&&(r+=40);for(n=0;n<e;n+=1)for(i=0;i<e-6;i+=1)t.isDark(i,n)&&!t.isDark(i+1,n)&&t.isDark(i+2,n)&&t.isDark(i+3,n)&&t.isDark(i+4,n)&&!t.isDark(i+5,n)&&t.isDark(i+6,n)&&(r+=40);var u=0;for(n=0;n<e;n+=1)for(i=0;i<e;i+=1)t.isDark(i,n)&&(u+=1);return r+=Math.abs(100*u/e/e-50)/5*10},n),T=function(){for(var t=new Array(256),e=new Array(256),r=0;r<8;r+=1)t[r]=1<<r;for(r=8;r<256;r+=1)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8];for(r=0;r<255;r+=1)e[t[r]]=r;var i={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return i}();function E(t,e){if(void 0===t.length)throw t.length+"/"+e;var r=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var i=new Array(t.length-r+e),n=0;n<t.length-r;n+=1)i[n]=t[n+r];return i}(),i={getAt:function(t){return r[t]},getLength:function(){return r.length},multiply:function(t){for(var e=new Array(i.getLength()+t.getLength()-1),r=0;r<i.getLength();r+=1)for(var n=0;n<t.getLength();n+=1)e[r+n]^=T.gexp(T.glog(i.getAt(r))+T.glog(t.getAt(n)));return E(e,0)},mod:function(t){if(i.getLength()-t.getLength()<0)return i;for(var e=T.glog(i.getAt(0))-T.glog(t.getAt(0)),r=new Array(i.getLength()),n=0;n<i.getLength();n+=1)r[n]=i.getAt(n);for(n=0;n<t.getLength();n+=1)r[n]^=T.gexp(T.glog(t.getAt(n))+e);return E(r,0).mod(t)}};return i}var S=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var r={};return r.totalCount=t,r.dataCount=e,r},r={};return r.getRSBlocks=function(r,i){var n=function(e,r){switch(r){case u.L:return t[4*(e-1)+0];case u.M:return t[4*(e-1)+1];case u.Q:return t[4*(e-1)+2];case u.H:return t[4*(e-1)+3];default:return}}(r,i);if(void 0===n)throw"bad rs block @ typeNumber:"+r+"/errorCorrectionLevel:"+i;for(var s=n.length/3,a=[],o=0;o<s;o+=1)for(var l=n[3*o+0],d=n[3*o+1],c=n[3*o+2],h=0;h<l;h+=1)a.push(e(d,c));return a},r}(),w=function(){var t=[],e=0,r={getBuffer:function(){return t},getAt:function(e){var r=Math.floor(e/8);return 1==(t[r]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)r.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(r){var i=Math.floor(e/8);t.length<=i&&t.push(0),r&&(t[i]|=128>>>e%8),e+=1}};return r},$=function(t){var e=a,r=t,i={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,i=0;i+2<e.length;)t.put(n(e.substring(i,i+3)),10),i+=3;i<e.length&&(e.length-i==1?t.put(n(e.substring(i,i+1)),4):e.length-i==2&&t.put(n(e.substring(i,i+2)),7))}},n=function(t){for(var e=0,r=0;r<t.length;r+=1)e=10*e+s(t.charAt(r));return e},s=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return i},A=function(t){var e=o,r=t,i={getMode:function(){return e},getLength:function(t){return r.length},write:function(t){for(var e=r,i=0;i+1<e.length;)t.put(45*n(e.charAt(i))+n(e.charAt(i+1)),11),i+=2;i<e.length&&t.put(n(e.charAt(i)),6)}},n=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return i},C=function(e){var r=l,i=t.stringToBytes(e),n={getMode:function(){return r},getLength:function(t){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return n},L=function(e){var r=d,i=t.stringToBytesFuncs.SJIS;if(!i)throw"sjis not supported.";!function(t,e){var r=i("友");if(2!=r.length||38726!=(r[0]<<8|r[1]))throw"sjis not supported."}();var n=i(e),s={getMode:function(){return r},getLength:function(t){return~~(n.length/2)},write:function(t){for(var e=n,r=0;r+1<e.length;){var i=(255&e[r])<<8|255&e[r+1];if(33088<=i&&i<=40956)i-=33088;else{if(!(57408<=i&&i<=60351))throw"illegal char at "+(r+1)+"/"+i;i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13),r+=2}if(r<e.length)throw"illegal char at "+(r+1)}};return s},x=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,r,i){r=r||0,i=i||t.length;for(var n=0;n<i;n+=1)e.writeByte(t[n+r])},writeString:function(t){for(var r=0;r<t.length;r+=1)e.writeByte(t.charCodeAt(r))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var r=0;r<t.length;r+=1)r>0&&(e+=","),e+=t[r];return e+="]"}};return e},R=function(t){var e=t,r=0,i=0,n=0,s={read:function(){for(;n<8;){if(r>=e.length){if(0==n)return-1;throw"unexpected end of file./"+n}var t=e.charAt(r);if(r+=1,"="==t)return n=0,-1;t.match(/^\s$/)||(i=i<<6|a(t.charCodeAt(0)),n+=6)}var s=i>>>n-8&255;return n-=8,s}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return s},k=function(t,e,r){for(var i=function(t,e){var r=t,i=e,n=new Array(t*e),s={setPixel:function(t,e,i){n[e*r+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(r),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(r),t.writeShort(i),t.writeByte(0);var e=a(2);t.writeByte(2);for(var n=0;e.length-n>255;)t.writeByte(255),t.writeBytes(e,n,255),n+=255;t.writeByte(e.length-n),t.writeBytes(e,n,e.length-n),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,r=1+(1<<t),i=t+1,s=o(),a=0;a<e;a+=1)s.add(String.fromCharCode(a));s.add(String.fromCharCode(e)),s.add(String.fromCharCode(r));var l,d,u,c=x(),h=(l=c,d=0,u=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;d+e>=8;)l.writeByte(255&(t<<d|u)),e-=8-d,t>>>=8-d,u=0,d=0;u|=t<<d,d+=e},flush:function(){d>0&&l.writeByte(u)}});h.write(e,i);var f=0,g=String.fromCharCode(n[f]);for(f+=1;f<n.length;){var p=String.fromCharCode(n[f]);f+=1,s.contains(g+p)?g+=p:(h.write(s.indexOf(g),i),s.size()<4095&&(s.size()==1<<i&&(i+=1),s.add(g+p)),g=p)}return h.write(s.indexOf(g),i),h.write(r,i),h.flush(),c.toByteArray()},o=function(){var t={},e=0,r={add:function(i){if(r.contains(i))throw"dup key:"+i;t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return r};return s}(t,e),n=0;n<e;n+=1)for(var s=0;s<t;s+=1)i.setPixel(s,n,r(s,n));var a=x();i.write(a);for(var o=function(){var t=0,e=0,r=0,i="",n={},s=function(t){i+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return n.writeByte=function(i){for(t=t<<8|255&i,e+=8,r+=1;e>=6;)s(t>>>e-6),e-=6},n.flush=function(){if(e>0&&(s(t<<6-e),t=0,e=0),r%3!=0)for(var n=3-r%3,a=0;a<n;a+=1)i+="="},n.toString=function(){return i},n}(),l=a.toByteArray(),d=0;d<l.length;d+=1)o.writeByte(l[d]);return o.flush(),"data:image/gif;base64,"+o};return t}();s.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(r++,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}(t)},i=[],void 0===(n="function"==typeof(r=function(){return s})?r.apply(e,i):r)||(t.exports=n)},9983:function(t){"use strict";!function(e){const r=2147483647;function i(t){const e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let r=1779033703,i=3144134277,n=1013904242,s=2773480762,a=1359893119,o=2600822924,l=528734635,d=1541459225;const u=new Uint32Array(64);function c(t){let c=0,h=t.length;for(;h>=64;){let f,g,p,m,v,y=r,b=i,T=n,E=s,S=a,w=o,$=l,A=d;for(g=0;g<16;g++)p=c+4*g,u[g]=(255&t[p])<<24|(255&t[p+1])<<16|(255&t[p+2])<<8|255&t[p+3];for(g=16;g<64;g++)f=u[g-2],m=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,f=u[g-15],v=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,u[g]=(m+u[g-7]|0)+(v+u[g-16]|0)|0;for(g=0;g<64;g++)m=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&w^~S&$)|0)+(A+(e[g]+u[g]|0)|0)|0,v=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&b^y&T^b&T)|0,A=$,$=w,w=S,S=E+m|0,E=T,T=b,b=y,y=m+v|0;r=r+y|0,i=i+b|0,n=n+T|0,s=s+E|0,a=a+S|0,o=o+w|0,l=l+$|0,d=d+A|0,c+=64,h-=64}}c(t);let h,f=t.length%64,g=t.length/536870912|0,p=t.length<<3,m=f<56?56:120,v=t.slice(t.length-f,t.length);for(v.push(128),h=f+1;h<m;h++)v.push(0);return v.push(g>>>24&255),v.push(g>>>16&255),v.push(g>>>8&255),v.push(g>>>0&255),v.push(p>>>24&255),v.push(p>>>16&255),v.push(p>>>8&255),v.push(p>>>0&255),c(v),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,l>>>24&255,l>>>16&255,l>>>8&255,l>>>0&255,d>>>24&255,d>>>16&255,d>>>8&255,d>>>0&255]}function n(t,e,r){t=t.length<=64?t:i(t);const n=64+e.length+4,s=new Array(n),a=new Array(64);let o,l=[];for(o=0;o<64;o++)s[o]=54;for(o=0;o<t.length;o++)s[o]^=t[o];for(o=0;o<e.length;o++)s[64+o]=e[o];for(o=n-4;o<n;o++)s[o]=0;for(o=0;o<64;o++)a[o]=92;for(o=0;o<t.length;o++)a[o]^=t[o];function d(){for(let t=n-1;t>=n-4;t--){if(s[t]++,s[t]<=255)return;s[t]=0}}for(;r>=32;)d(),l=l.concat(i(a.concat(i(s)))),r-=32;return r>0&&(d(),l=l.concat(i(a.concat(i(s))).slice(0,r))),l}function s(t,e,r,i,n){let s;for(d(t,16*(2*r-1),n,0,16),s=0;s<2*r;s++)l(t,16*s,n,16),o(n,i),d(n,0,t,e+16*s,16);for(s=0;s<r;s++)d(t,e+2*s*16,t,16*s,16);for(s=0;s<r;s++)d(t,e+16*(2*s+1),t,16*(s+r),16)}function a(t,e){return t<<e|t>>>32-e}function o(t,e){d(t,0,e,0,16);for(let t=8;t>0;t-=2)e[4]^=a(e[0]+e[12],7),e[8]^=a(e[4]+e[0],9),e[12]^=a(e[8]+e[4],13),e[0]^=a(e[12]+e[8],18),e[9]^=a(e[5]+e[1],7),e[13]^=a(e[9]+e[5],9),e[1]^=a(e[13]+e[9],13),e[5]^=a(e[1]+e[13],18),e[14]^=a(e[10]+e[6],7),e[2]^=a(e[14]+e[10],9),e[6]^=a(e[2]+e[14],13),e[10]^=a(e[6]+e[2],18),e[3]^=a(e[15]+e[11],7),e[7]^=a(e[3]+e[15],9),e[11]^=a(e[7]+e[3],13),e[15]^=a(e[11]+e[7],18),e[1]^=a(e[0]+e[3],7),e[2]^=a(e[1]+e[0],9),e[3]^=a(e[2]+e[1],13),e[0]^=a(e[3]+e[2],18),e[6]^=a(e[5]+e[4],7),e[7]^=a(e[6]+e[5],9),e[4]^=a(e[7]+e[6],13),e[5]^=a(e[4]+e[7],18),e[11]^=a(e[10]+e[9],7),e[8]^=a(e[11]+e[10],9),e[9]^=a(e[8]+e[11],13),e[10]^=a(e[9]+e[8],18),e[12]^=a(e[15]+e[14],7),e[13]^=a(e[12]+e[15],9),e[14]^=a(e[13]+e[12],13),e[15]^=a(e[14]+e[13],18);for(let r=0;r<16;++r)t[r]+=e[r]}function l(t,e,r,i){for(let n=0;n<i;n++)r[n]^=t[e+n]}function d(t,e,r,i,n){for(;n--;)r[i++]=t[e++]}function u(t){if(!t||"number"!=typeof t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function c(t,e){if("number"!=typeof t||t%1)throw new Error("invalid "+e);return t}function h(t,e,i,a,o,h,f){if(i=c(i,"N"),a=c(a,"r"),o=c(o,"p"),h=c(h,"dkLen"),0===i||0!=(i&i-1))throw new Error("N must be power of 2");if(i>r/128/a)throw new Error("N too large");if(a>r/128/o)throw new Error("r too large");if(!u(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!u(e))throw new Error("salt must be an array or buffer");e=Array.prototype.slice.call(e);let g=n(t,e,128*o*a);const p=new Uint32Array(32*o*a);for(let t=0;t<p.length;t++){const e=4*t;p[t]=(255&g[e+3])<<24|(255&g[e+2])<<16|(255&g[e+1])<<8|(255&g[e+0])<<0}const m=new Uint32Array(64*a),v=new Uint32Array(32*a*i),y=32*a,b=new Uint32Array(16),T=new Uint32Array(16),E=o*i*2;let S,w,$=0,A=null,C=!1,L=0,x=0;const R=f?parseInt(1e3/a):4294967295,k="undefined"!=typeof setImmediate?setImmediate:setTimeout,D=function(){if(C)return f(new Error("cancelled"),$/E);let e;switch(L){case 0:w=32*x*a,d(p,w,m,0,y),L=1,S=0;case 1:e=i-S,e>R&&(e=R);for(let t=0;t<e;t++)d(m,0,v,(S+t)*y,y),s(m,y,a,b,T);if(S+=e,$+=e,f){const t=parseInt(1e3*$/E);if(t!==A){if(C=f(null,$/E),C)break;A=t}}if(S<i)break;S=0,L=2;case 2:e=i-S,e>R&&(e=R);for(let t=0;t<e;t++){const t=m[16*(2*a-1)]&i-1;l(v,t*y,m,y),s(m,y,a,b,T)}if(S+=e,$+=e,f){const t=parseInt(1e3*$/E);if(t!==A){if(C=f(null,$/E),C)break;A=t}}if(S<i)break;if(d(m,0,p,w,y),x++,x<o){L=0;break}g=[];for(let t=0;t<p.length;t++)g.push(p[t]>>0&255),g.push(p[t]>>8&255),g.push(p[t]>>16&255),g.push(p[t]>>24&255);const r=n(t,g,h);return f&&f(null,1,r),r}f&&k(D)};if(!f)for(;;){const t=D();if(null!=t)return t}D()}const f={scrypt:function(t,e,r,i,n,s,a){return new Promise((function(o,l){let d=0;a&&a(0),h(t,e,r,i,n,s,(function(t,e,r){if(t)l(t);else if(r)a&&1!==d&&a(1),o(new Uint8Array(r));else if(a&&e!==d)return d=e,a(e)}))}))},syncScrypt:function(t,e,r,i,n,s){return new Uint8Array(h(t,e,r,i,n,s))}};t.exports=f}()},12897:function(t,e,r){t.exports=function(){"use strict";var t=function(t){var e=t.id,r=t.viewBox,i=t.content;this.id=e,this.viewBox=r,this.content=i};t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};var e=function(t){var e=!!document.importNode,r=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(r,!0):r};function i(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var n=i((function(t,e){!function(e,r){t.exports=r()}(0,(function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function r(r,i){return i&&!0===i.clone&&t(r)?s(e(r),r,i):r}function i(e,i,n){var a=e.slice();return i.forEach((function(i,o){void 0===a[o]?a[o]=r(i,n):t(i)?a[o]=s(e[o],i,n):-1===e.indexOf(i)&&a.push(r(i,n))})),a}function n(e,i,n){var a={};return t(e)&&Object.keys(e).forEach((function(t){a[t]=r(e[t],n)})),Object.keys(i).forEach((function(o){t(i[o])&&e[o]?a[o]=s(e[o],i[o],n):a[o]=r(i[o],n)})),a}function s(t,e,s){var a=Array.isArray(e),o=(s||{arrayMerge:i}).arrayMerge||i;return a?Array.isArray(t)?o(t,e,s):r(e,s):n(t,e,s)}return s.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,r){return s(t,r,e)}))},s}))})),s=i((function(t,e){var r={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};e.default=r,t.exports=e.default})),a=function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},o=s.svg,l=s.xlink,d={};d[o.name]=o.uri,d[l.name]=l.uri;var u=function(t,e){void 0===t&&(t="");var r=n(d,e||{});return"<svg "+a(r)+">"+t+"</svg>"},c=function(t){function r(){t.apply(this,arguments)}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},r.createFromExistingNode=function(t){return new r({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},r.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},r.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,r=this.render();return this.node=r,e.appendChild(r),r},r.prototype.render=function(){var t=this.stringify();return e(u(t)).childNodes[0]},r.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(r.prototype,i),r}(t);return c}()},55042:function(t,e,r){t.exports=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var e=t((function(t,e){!function(e,r){t.exports=r()}(0,(function(){function t(t){return t&&"object"==typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function r(r,i){return i&&!0===i.clone&&t(r)?s(e(r),r,i):r}function i(e,i,n){var a=e.slice();return i.forEach((function(i,o){void 0===a[o]?a[o]=r(i,n):t(i)?a[o]=s(e[o],i,n):-1===e.indexOf(i)&&a.push(r(i,n))})),a}function n(e,i,n){var a={};return t(e)&&Object.keys(e).forEach((function(t){a[t]=r(e[t],n)})),Object.keys(i).forEach((function(o){t(i[o])&&e[o]?a[o]=s(e[o],i[o],n):a[o]=r(i[o],n)})),a}function s(t,e,s){var a=Array.isArray(e),o=(s||{arrayMerge:i}).arrayMerge||i;return a?Array.isArray(t)?o(t,e,s):r(e,s):n(t,e,s)}return s.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,r){return s(t,r,e)}))},s}))}));function i(t){return t=t||Object.create(null),{on:function(e,r){(t[e]||(t[e]=[])).push(r)},off:function(e,r){t[e]&&t[e].splice(t[e].indexOf(r)>>>0,1)},emit:function(e,r){(t[e]||[]).map((function(t){t(r)})),(t["*"]||[]).map((function(t){t(e,r)}))}}}var n=t((function(t,e){var r={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};e.default=r,t.exports=e.default})),s=function(t){return Object.keys(t).map((function(e){return e+'="'+t[e].toString().replace(/"/g,"&quot;")+'"'})).join(" ")},a=n.svg,o=n.xlink,l={};l[a.name]=a.uri,l[o.name]=o.uri;var d,u=function(t,r){void 0===t&&(t="");var i=e(l,r||{});return"<svg "+s(i)+">"+t+"</svg>"},c=n.svg,h=n.xlink,f={attrs:(d={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},d[c.name]=c.uri,d[h.name]=h.uri,d)},g=function(t){this.config=e(f,t||{}),this.symbols=[]};g.prototype.add=function(t){var e=this.symbols,r=this.find(t.id);return r?(e[e.indexOf(r)]=t,!1):(e.push(t),!0)},g.prototype.remove=function(t){var e=this.symbols,r=this.find(t);return!!r&&(e.splice(e.indexOf(r),1),r.destroy(),!0)},g.prototype.find=function(t){return this.symbols.filter((function(e){return e.id===t}))[0]||null},g.prototype.has=function(t){return null!==this.find(t)},g.prototype.stringify=function(){var t=this.config.attrs,e=this.symbols.map((function(t){return t.stringify()})).join("");return u(e,t)},g.prototype.toString=function(){return this.stringify()},g.prototype.destroy=function(){this.symbols.forEach((function(t){return t.destroy()}))};var p=function(t){var e=t.id,r=t.viewBox,i=t.content;this.id=e,this.viewBox=r,this.content=i};p.prototype.stringify=function(){return this.content},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};var m=function(t){var e=!!document.importNode,r=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(r,!0):r},v=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"==typeof t?document.querySelector(t):t,r=this.render();return this.node=r,e.appendChild(r),r},e.prototype.render=function(){var t=this.stringify();return m(u(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,r),e}(p),y={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},b=function(t){return Array.prototype.slice.call(t,0)},T={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},E=function(t,e){var r=document.createEvent("CustomEvent");r.initCustomEvent(t,!1,!1,e),window.dispatchEvent(r)},S=function(t){var e=[];return b(t.querySelectorAll("style")).forEach((function(t){t.textContent+="",e.push(t)})),e},w=function(t){return(t||window.location.href).split("#")[0]},$=function(t){angular.module("ng").run(["$rootScope",function(e){e.$on("$locationChangeSuccess",(function(e,r,i){E(t,{oldUrl:i,newUrl:r})}))}])},A="linearGradient, radialGradient, pattern, mask, clipPath",C=function(t,e){return void 0===e&&(e=A),b(t.querySelectorAll("symbol")).forEach((function(t){b(t.querySelectorAll(e)).forEach((function(e){t.parentNode.insertBefore(e,t)}))})),t};function L(t,e){return b(t).reduce((function(t,r){if(!r.attributes)return t;var i=b(r.attributes),n=e?i.filter(e):i;return t.concat(n)}),[])}var x=n.xlink.uri,R="xlink:href",k=/[{}|\\\^\[\]`"<>]/g;function D(t){return t.replace(k,(function(t){return"%"+t[0].charCodeAt(0).toString(16).toUpperCase()}))}function I(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(t,e,r){return b(t).forEach((function(t){var i=t.getAttribute(R);if(i&&0===i.indexOf(e)){var n=i.replace(e,r);t.setAttributeNS(x,R,n)}})),t}var _,O=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],M=O.map((function(t){return"["+t+"]"})).join(","),N=function(t,e,r,i){var n=D(r),s=D(i);L(t.querySelectorAll(M),(function(t){var e=t.localName,r=t.value;return-1!==O.indexOf(e)&&-1!==r.indexOf("url("+n)})).forEach((function(t){return t.value=t.value.replace(new RegExp(I(n),"g"),s)})),P(e,n,s)},F={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},B=function(t){function r(r){var n=this;void 0===r&&(r={}),t.call(this,e(y,r));var s=i();this._emitter=s,this.node=null;var a=this.config;if(a.autoConfigure&&this._autoConfigure(r),a.syncUrlsWithBaseTag){var o=document.getElementsByTagName("base")[0].getAttribute("href");s.on(F.MOUNT,(function(){return n.updateUrls("#",o)}))}var l=this._handleLocationChange.bind(this);this._handleLocationChange=l,a.listenLocationChangeEvent&&window.addEventListener(a.locationChangeEvent,l),a.locationChangeAngularEmitter&&$(a.locationChangeEvent),s.on(F.MOUNT,(function(t){a.moveGradientsOutsideSymbol&&C(t)})),s.on(F.SYMBOL_MOUNT,(function(t){a.moveGradientsOutsideSymbol&&C(t.parentNode),(T.isIE()||T.isEdge())&&S(t)}))}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},r.prototype._autoConfigure=function(t){var e=this.config;void 0===t.syncUrlsWithBaseTag&&(e.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===t.locationChangeAngularEmitter&&(e.locationChangeAngularEmitter=void 0!==window.angular),void 0===t.moveGradientsOutsideSymbol&&(e.moveGradientsOutsideSymbol=T.isFirefox())},r.prototype._handleLocationChange=function(t){var e=t.detail,r=e.oldUrl,i=e.newUrl;this.updateUrls(r,i)},r.prototype.add=function(e){var r=this,i=t.prototype.add.call(this,e);return this.isMounted&&i&&(e.mount(r.node),this._emitter.emit(F.SYMBOL_MOUNT,e.node)),i},r.prototype.attach=function(t){var e=this,r=this;if(r.isMounted)return r.node;var i="string"==typeof t?document.querySelector(t):t;return r.node=i,this.symbols.forEach((function(t){t.mount(r.node),e._emitter.emit(F.SYMBOL_MOUNT,t.node)})),b(i.querySelectorAll("symbol")).forEach((function(t){var e=v.createFromExistingNode(t);e.node=t,r.add(e)})),this._emitter.emit(F.MOUNT,i),i},r.prototype.destroy=function(){var t=this,e=t.config,r=t.symbols,i=t._emitter;r.forEach((function(t){return t.destroy()})),i.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},r.prototype.mount=function(t,e){void 0===t&&(t=this.config.mountTo),void 0===e&&(e=!1);var r=this;if(r.isMounted)return r.node;var i="string"==typeof t?document.querySelector(t):t,n=r.render();return this.node=n,e&&i.childNodes[0]?i.insertBefore(n,i.childNodes[0]):i.appendChild(n),this._emitter.emit(F.MOUNT,n),n},r.prototype.render=function(){return m(this.stringify())},r.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},r.prototype.updateUrls=function(t,e){if(!this.isMounted)return!1;var r=document.querySelectorAll(this.config.usagesToUpdate);return N(this.node,r,w(t)+"#",w(e)+"#"),!0},Object.defineProperties(r.prototype,n),r}(g),U=t((function(t){var e;e=function(){var t,e=[],r=document,i=r.documentElement.doScroll,n="DOMContentLoaded",s=(i?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);return s||r.addEventListener(n,t=function(){for(r.removeEventListener(n,t),s=1;t=e.shift();)t()}),function(t){s?setTimeout(t,0):e.push(t)}},t.exports=e()})),G="__SVG_SPRITE_NODE__",j="__SVG_SPRITE__";window[j]?_=window[j]:(_=new B({attrs:{id:G,"aria-hidden":"true"}}),window[j]=_);var V=function(){var t=document.getElementById(G);t?_.attach(t):_.mount(document.body,!0)};return document.body?V():U(V),_}()},77232:function(t,e,r){var i;!function(n,s){"use strict";var a="function",o="undefined",l="object",d="string",u="major",c="model",h="name",f="type",g="vendor",p="version",m="architecture",v="console",y="mobile",b="tablet",T="smarttv",E="wearable",S="embedded",w="Amazon",$="Apple",A="ASUS",C="BlackBerry",L="Browser",x="Chrome",R="Firefox",k="Google",D="Huawei",I="LG",P="Microsoft",_="Motorola",O="Opera",M="Samsung",N="Sharp",F="Sony",B="Xiaomi",U="Zebra",G="Facebook",j="Chromium OS",V="Mac OS",H=function(t){for(var e={},r=0;r<t.length;r++)e[t[r].toUpperCase()]=t[r];return e},K=function(t,e){return typeof t===d&&-1!==z(e).indexOf(z(t))},z=function(t){return t.toLowerCase()},q=function(t,e){if(typeof t===d)return t=t.replace(/^\s\s*/,""),typeof e===o?t:t.substring(0,500)},W=function(t,e){for(var r,i,n,o,d,u,c=0;c<e.length&&!d;){var h=e[c],f=e[c+1];for(r=i=0;r<h.length&&!d&&h[r];)if(d=h[r++].exec(t))for(n=0;n<f.length;n++)u=d[++i],typeof(o=f[n])===l&&o.length>0?2===o.length?typeof o[1]==a?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3===o.length?typeof o[1]!==a||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):s:this[o[0]]=u?o[1].call(this,u,o[2]):s:4===o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):s):this[o]=u||s;c+=2}},Y=function(t,e){for(var r in e)if(typeof e[r]===l&&e[r].length>0){for(var i=0;i<e[r].length;i++)if(K(e[r][i],t))return"?"===r?s:r}else if(K(e[r],t))return"?"===r?s:r;return t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,p],[/opios[\/ ]+([\w\.]+)/i],[p,[h,O+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[h,O]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[h,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[h,"Smart Lenovo "+L]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+L],p],[/\bfocus\/([\w\.]+)/i],[p,[h,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[h,O+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[h,O+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[h,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[p,[h,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+L]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+L],p],[/samsungbrowser\/([\w\.]+)/i],[p,[h,M+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,G],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[h,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,x+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[h,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[p,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[h,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,p],[/(cobalt)\/([\w\.]+)/i],[h,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,z]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[g,M],[f,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[g,M],[f,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[g,$],[f,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[g,$],[f,b]],[/(macintosh);/i],[c,[g,$]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[g,N],[f,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[g,D],[f,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[g,D],[f,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[g,B],[f,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[g,B],[f,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[g,"OPPO"],[f,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[g,"Vivo"],[f,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[g,"Realme"],[f,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[g,_],[f,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[g,_],[f,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[g,I],[f,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[g,I],[f,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[g,"Lenovo"],[f,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[g,"Nokia"],[f,y]],[/(pixel c)\b/i],[c,[g,k],[f,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[g,k],[f,y]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[g,F],[f,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[g,F],[f,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[g,"OnePlus"],[f,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[g,w],[f,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[g,w],[f,y]],[/(playbook);[-\w\),; ]+(rim)/i],[c,g,[f,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[g,C],[f,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[g,A],[f,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[g,A],[f,y]],[/(nexus 9)/i],[c,[g,"HTC"],[f,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[c,/_/g," "],[f,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[g,"Acer"],[f,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[g,"Meizu"],[f,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[g,"Ulefone"],[f,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,c,[f,y]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,c,[f,b]],[/(surface duo)/i],[c,[g,P],[f,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[g,"Fairphone"],[f,y]],[/(u304aa)/i],[c,[g,"AT&T"],[f,y]],[/\bsie-(\w*)/i],[c,[g,"Siemens"],[f,y]],[/\b(rct\w+) b/i],[c,[g,"RCA"],[f,b]],[/\b(venue[\d ]{2,7}) b/i],[c,[g,"Dell"],[f,b]],[/\b(q(?:mv|ta)\w+) b/i],[c,[g,"Verizon"],[f,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[g,"Barnes & Noble"],[f,b]],[/\b(tm\d{3}\w+) b/i],[c,[g,"NuVision"],[f,b]],[/\b(k88) b/i],[c,[g,"ZTE"],[f,b]],[/\b(nx\d{3}j) b/i],[c,[g,"ZTE"],[f,y]],[/\b(gen\d{3}) b.+49h/i],[c,[g,"Swiss"],[f,y]],[/\b(zur\d{3}) b/i],[c,[g,"Swiss"],[f,b]],[/\b((zeki)?tb.*\b) b/i],[c,[g,"Zeki"],[f,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],c,[f,b]],[/\b(ns-?\w{0,9}) b/i],[c,[g,"Insignia"],[f,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[g,"NextBook"],[f,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],c,[f,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],c,[f,y]],[/\b(ph-1) /i],[c,[g,"Essential"],[f,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[g,"Envizen"],[f,b]],[/\b(trio[-\w\. ]+) b/i],[c,[g,"MachSpeed"],[f,b]],[/\btu_(1491) b/i],[c,[g,"Rotor"],[f,b]],[/(shield[\w ]+) b/i],[c,[g,"Nvidia"],[f,b]],[/(sprint) (\w+)/i],[g,c,[f,y]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[g,P],[f,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[g,U],[f,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[g,U],[f,y]],[/smart-tv.+(samsung)/i],[g,[f,T]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[g,M],[f,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,I],[f,T]],[/(apple) ?tv/i],[g,[c,$+" TV"],[f,T]],[/crkey/i],[[c,x+"cast"],[g,k],[f,T]],[/droid.+aft(\w+)( bui|\))/i],[c,[g,w],[f,T]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[g,N],[f,T]],[/(bravia[\w ]+)( bui|\))/i],[c,[g,F],[f,T]],[/(mitv-\w{5}) bui/i],[c,[g,B],[f,T]],[/Hbbtv.*(technisat) (.*);/i],[g,c,[f,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,q],[c,q],[f,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,T]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,c,[f,v]],[/droid.+; (shield) bui/i],[c,[g,"Nvidia"],[f,v]],[/(playstation [345portablevi]+)/i],[c,[g,F],[f,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[g,P],[f,v]],[/((pebble))app/i],[g,c,[f,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[g,$],[f,E]],[/droid.+; (glass) \d/i],[c,[g,k],[f,E]],[/droid.+; (wt63?0{2,3})\)/i],[c,[g,U],[f,E]],[/(quest( 2| pro)?)/i],[c,[g,G],[f,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[f,S]],[/(aeobc)\b/i],[c,[g,w],[f,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[f,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[f,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,y]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[p,Y,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,Y,X],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,V],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,p],[/\(bb(10);/i],[p,[h,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[h,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[h,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,j],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,p],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,p]]},Q=function(t,e){if(typeof t===l&&(e=t,t=s),!(this instanceof Q))return new Q(t,e).getResult();var r=typeof n!==o&&n.navigator?n.navigator:s,i=t||(r&&r.userAgent?r.userAgent:""),v=r&&r.userAgentData?r.userAgentData:s,T=e?function(t,e){var r={};for(var i in t)e[i]&&e[i].length%2==0?r[i]=e[i].concat(t[i]):r[i]=t[i];return r}(Z,e):Z,E=r&&r.userAgent==i;return this.getBrowser=function(){var t,e={};return e[h]=s,e[p]=s,W.call(e,i,T.browser),e[u]=typeof(t=e[p])===d?t.replace(/[^\d\.]/g,"").split(".")[0]:s,E&&r&&r.brave&&typeof r.brave.isBrave==a&&(e[h]="Brave"),e},this.getCPU=function(){var t={};return t[m]=s,W.call(t,i,T.cpu),t},this.getDevice=function(){var t={};return t[g]=s,t[c]=s,t[f]=s,W.call(t,i,T.device),E&&!t[f]&&v&&v.mobile&&(t[f]=y),E&&"Macintosh"==t[c]&&r&&typeof r.standalone!==o&&r.maxTouchPoints&&r.maxTouchPoints>2&&(t[c]="iPad",t[f]=b),t},this.getEngine=function(){var t={};return t[h]=s,t[p]=s,W.call(t,i,T.engine),t},this.getOS=function(){var t={};return t[h]=s,t[p]=s,W.call(t,i,T.os),E&&!t[h]&&v&&"Unknown"!=v.platform&&(t[h]=v.platform.replace(/chrome os/i,j).replace(/macos/i,V)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(t){return i=typeof t===d&&t.length>500?q(t,500):t,this},this.setUA(i),this};Q.VERSION="1.0.37",Q.BROWSER=H([h,p,u]),Q.CPU=H([m]),Q.DEVICE=H([c,g,f,v,y,T,b,E,S]),Q.ENGINE=Q.OS=H([h,p]),typeof e!==o?(t.exports&&(e=t.exports=Q),e.UAParser=Q):r.amdO?(i=function(){return Q}.call(e,r,e,t))===s||(t.exports=i):typeof n!==o&&(n.UAParser=Q);var J=typeof n!==o&&(n.jQuery||n.Zepto);if(J&&!J.ua){var tt=new Q;J.ua=tt.getResult(),J.ua.get=function(){return tt.getUA()},J.ua.set=function(t){tt.setUA(t);var e=tt.getResult();for(var r in e)J.ua[r]=e[r]}}}("object"==typeof window?window:this)},17598:function(t,e,r){"use strict";r.d(e,{Rn:function(){return M},Wp:function(){return j},jn:function(){return G},wJ:function(){return B}});const i=2n**255n-19n,n=2n**252n+27742317777372353535851937790883648493n,s=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,a=0x6666666666666666666666666666666666666666666666666666666666666658n,o={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:i,n:n,h:8,Gx:s,Gy:a},l=(t="")=>{throw new Error(t)},d=t=>"string"==typeof t,u=(t,e)=>!(t instanceof Uint8Array)||"number"==typeof e&&e>0&&t.length!==e?l("Uint8Array expected"):t,c=t=>new Uint8Array(t),h=(t,e)=>u(d(t)?E(t):c(t),e),f=(t,e=i)=>{let r=t%e;return r>=0n?r:e+r},g=t=>t instanceof m?t:l("Point expected");let p;class m{constructor(t,e,r,i){this.ex=t,this.ey=e,this.ez=r,this.et=i}static fromAffine(t){return new m(t.x,t.y,1n,f(t.x*t.y))}static fromHex(t,e=!0){const{d:r}=o,n=(t=h(t,32)).slice();n[31]=-129&t[31];const s=w(n);0n===s||(!e||0n<s&&s<i||l("bad y coord 1"),e||0n<s&&s<2n**256n||l("bad y coord 2"));const a=f(s*s),d=f(a-1n),u=f(r*a+1n);let{isValid:c,value:g}=x(d,u);c||l("bad y coordinate 3");const p=1n===(1n&g);return 0!=(128&t[31])!==p&&(g=f(-g)),new m(g,s,1n,f(g*s))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){const{ex:e,ey:r,ez:i}=this,{ex:n,ey:s,ez:a}=g(t),o=f(e*a),l=f(n*i),d=f(r*a),u=f(s*i);return o===l&&d===u}is0(){return this.equals(y)}negate(){return new m(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{ex:t,ey:e,ez:r}=this,{a:i}=o,n=f(t*t),s=f(e*e),a=f(2n*f(r*r)),l=f(i*n),d=t+e,u=f(f(d*d)-n-s),c=l+s,h=c-a,g=l-s,p=f(u*h),v=f(c*g),y=f(u*g),b=f(h*c);return new m(p,v,b,y)}add(t){const{ex:e,ey:r,ez:i,et:n}=this,{ex:s,ey:a,ez:l,et:d}=g(t),{a:u,d:c}=o,h=f(e*s),p=f(r*a),v=f(n*c*d),y=f(i*l),b=f((e+r)*(s+a)-h-p),T=f(y-v),E=f(y+v),S=f(p-u*h),w=f(b*T),$=f(E*S),A=f(b*S),C=f(T*E);return new m(w,$,C,A)}mul(t,e=!0){if(0n===t)return!0===e?l("cannot multiply by 0"):y;if("bigint"==typeof t&&0n<t&&t<n||l("invalid scalar, must be < L"),!e&&this.is0()||1n===t)return this;if(this.equals(v))return V(t).p;let r=y,i=v;for(let n=this;t>0n;n=n.double(),t>>=1n)1n&t?r=r.add(n):e&&(i=i.add(n));return r}multiply(t){return this.mul(t)}clearCofactor(){return this.mul(BigInt(o.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let t=this.mul(n/2n,!1).double();return n%2n&&(t=t.add(this)),t.is0()}toAffine(){const{ex:t,ey:e,ez:r}=this;if(this.is0())return{x:0n,y:0n};const i=A(r);return 1n!==f(r*i)&&l("invalid inverse"),{x:f(t*i),y:f(e*i)}}toRawBytes(){const{x:t,y:e}=this.toAffine(),r=S(e);return r[31]|=1n&t?128:0,r}toHex(){return T(this.toRawBytes())}}m.BASE=new m(s,a,1n,f(s*a)),m.ZERO=new m(0n,1n,1n,0n);const{BASE:v,ZERO:y}=m,b=(t,e)=>t.toString(16).padStart(e,"0"),T=t=>Array.from(t).map((t=>b(t,2))).join(""),E=t=>{const e=t.length;(!d(t)||e%2)&&l("hex invalid 1");const r=c(e/2);for(let e=0;e<r.length;e++){const i=2*e,n=t.slice(i,i+2),s=Number.parseInt(n,16);(Number.isNaN(s)||s<0)&&l("hex invalid 2"),r[e]=s}return r},S=t=>E(b(t,64)).reverse(),w=t=>BigInt("0x"+T(c(u(t)).reverse())),$=(...t)=>{const e=c(t.reduce(((t,e)=>t+u(e).length),0));let r=0;return t.forEach((t=>{e.set(t,r),r+=t.length})),e},A=(t,e=i)=>{(0n===t||e<=0n)&&l("no inverse n="+t+" mod="+e);let r=f(t,e),n=e,s=0n,a=1n,o=1n,d=0n;for(;0n!==r;){const t=n/r,e=n%r,i=s-o*t,l=a-d*t;n=r,r=e,s=o,a=d,o=i,d=l}return 1n===n?f(s,e):l("no inverse")},C=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=i;return r},L=19681161376707505956807079304988542015446066515923890162744021073123829784752n,x=(t,e)=>{const r=f(e*e*e),n=(t=>{const e=t*t%i*t%i,r=C(e,2n)*e%i,n=C(r,1n)*t%i,s=C(n,5n)*n%i,a=C(s,10n)*s%i,o=C(a,20n)*a%i,l=C(o,40n)*o%i,d=C(l,80n)*l%i,u=C(d,80n)*l%i,c=C(u,10n)*s%i;return{pow_p_5_8:C(c,2n)*t%i,b2:e}})(t*f(r*r*e)).pow_p_5_8;let s=f(t*r*n);const a=f(e*s*s),o=s,l=f(s*L),d=a===t,u=a===f(-t),c=a===f(-t*L);return d&&(s=o),(u||c)&&(s=l),1n===(1n&f(s))&&(s=f(-s)),{isValid:d||u,value:s}},R=t=>f(w(t),n);let k;const D=(...t)=>G.sha512Async(...t),I=(...t)=>"function"==typeof k?k(...t):l("etc.sha512Sync not set"),P=t=>{const e=t.slice(0,32);e[0]&=248,e[31]&=127,e[31]|=64;const r=t.slice(32,64),i=R(e),n=v.mul(i),s=n.toRawBytes();return{head:e,prefix:r,scalar:i,point:n,pointBytes:s}},_=t=>D(h(t,32)).then(P),O=t=>P(I(h(t,32))),M=t=>_(t).then((t=>t.pointBytes));function N(t,e){return t?D(e.hashable).then(e.finish):e.finish(I(e.hashable))}const F=(t,e,r)=>{const{pointBytes:i,scalar:s}=t,a=R(e),o=v.mul(a).toRawBytes();return{hashable:$(o,i,r),finish:t=>{const e=f(a+R(t)*s,n);return u($(o,S(e)),64)}}},B=async(t,e)=>{const r=h(t),i=await _(e),n=await D(i.prefix,r);return N(!0,F(i,n,r))},U=()=>"object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,G={bytesToHex:T,hexToBytes:E,concatBytes:$,mod:f,invert:A,randomBytes:t=>{const e=U();return e||l("crypto.getRandomValues must be defined"),e.getRandomValues(c(t))},sha512Async:async(...t)=>{const e=U();e||l("crypto.subtle or etc.sha512Async must be defined");const r=$(...t);return c(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(G,{sha512Sync:{configurable:!1,get(){return k},set(t){k||(k=t)}}});const j={getExtendedPublicKeyAsync:_,getExtendedPublicKey:O,randomPrivateKey:()=>G.randomBytes(32),precompute(t=8,e=v){return e.multiply(3n),e}},V=t=>{const e=p||(p=(()=>{const t=[];let e=v,r=e;for(let i=0;i<33;i++){r=e,t.push(r);for(let i=1;i<128;i++)r=r.add(e),t.push(r);e=r.double()}return t})()),r=(t,e)=>{let r=e.negate();return t?r:e};let i=y,n=v;const s=BigInt(255),a=BigInt(8);for(let o=0;o<33;o++){const l=128*o;let d=Number(t&s);t>>=a,d>128&&(d-=256,t+=1n);const u=l,c=l+Math.abs(d)-1,h=o%2!=0,f=d<0;0===d?n=n.add(r(h,e[u])):i=i.add(r(f,e[c]))}return{p:i,f:n}}},64945:function(t,e,r){"use strict";function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}r.d(e,{Ay:function(){return Ua}});var n,s,a,o,l,d={exports:{}};n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,d.exports=l={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var i=l.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=l.normalizePath(i.path),l.buildURLFromParts(i)}var n=l.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return r.alwaysNormalize?(n.path=l.normalizePath(n.path),l.buildURLFromParts(n)):e;var a=l.parseURL(t);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=s.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var d={scheme:a.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};if(!n.netLoc&&(d.netLoc=a.netLoc,"/"!==n.path[0]))if(n.path){var u=a.path,c=u.substring(0,u.lastIndexOf("/")+1)+n.path;d.path=l.normalizePath(c)}else d.path=a.path,n.params||(d.params=a.params,n.query||(d.query=a.query));return null===d.path&&(d.path=r.alwaysNormalize?l.normalizePath(n.path):n.path),l.buildURLFromParts(d)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};var u=d.exports;function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function g(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(){return p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},p.apply(this,arguments)}const m=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},v=Number.isSafeInteger||function(t){return"number"==typeof t&&Math.abs(t)<=y},y=Number.MAX_SAFE_INTEGER||9007199254740991;let b=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),T=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),E=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const S=function(){},w={trace:S,debug:S,log:S,warn:S,info:S,error:S};let $=w;function A(t,...e){e.forEach((function(e){$[e]=t[e]?t[e].bind(t):function(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):S}(e)}))}const C=$,L=/^(\d+)x(\d+)$/,x=/(.+?)=(".*?"|.*?)(?:,|$)/g;class R{constructor(t){"string"==typeof t&&(t=R.parseAttrList(t)),p(this,t)}get clientAttrs(){return Object.keys(this).filter((t=>"X-"===t.substring(0,2)))}decimalInteger(t){const e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}hexadecimalInteger(t){if(this[t]){let e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;const r=new Uint8Array(e.length/2);for(let t=0;t<e.length/2;t++)r[t]=parseInt(e.slice(2*t,2*t+2),16);return r}return null}hexadecimalIntegerAsNumber(t){const e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}decimalFloatingPoint(t){return parseFloat(this[t])}optionalFloat(t,e){const r=this[t];return r?parseFloat(r):e}enumeratedString(t){return this[t]}bool(t){return"YES"===this[t]}decimalResolution(t){const e=L.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}static parseAttrList(t){let e;const r={};for(x.lastIndex=0;null!==(e=x.exec(t));){let t=e[2];0===t.indexOf('"')&&t.lastIndexOf('"')===t.length-1&&(t=t.slice(1,-1));r[e[1].trim()]=t}return r}}function k(t){return"SCTE35-OUT"===t||"SCTE35-IN"===t}class D{constructor(t,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){const r=e.attr;for(const e in r)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==r[e]){C.warn(`DATERANGE tag attribute: "${e}" does not match for tags with ID: "${t.ID}"`),this._badValueForSameId=e;break}t=p(new R({}),r,t)}if(this.attr=t,this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){const t=new Date(this.attr["END-DATE"]);m(t.getTime())&&(this._endDate=t)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const t=this.duration;return null!==t?new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const t=this.attr.decimalFloatingPoint("DURATION");if(m(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&m(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class I{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var P="audio",_="video",O="audiovideo";class M{constructor(t){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[P]:null,[_]:null,[O]:null},this.baseurl=t}setByteRange(t,e){const r=t.split("@",2);let i;i=1===r.length?(null==e?void 0:e.byteRangeEndOffset)||0:parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=u.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(t){this._url=t}}class N extends M{constructor(t,e){super(e),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new I,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=t}get decryptdata(){const{levelkeys:t}=this;if(!t&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;if(!m(this.programDateTime))return null;const t=m(this.duration)?this.duration:0;return this.programDateTime+1e3*t}get encrypted(){var t;if(null!=(t=this._decryptdata)&&t.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),e=t.length;if(e>1||1===e&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(t){if(this.levelkeys){const e=this.levelkeys[t];e&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))}}abortRequests(){var t,e;null==(t=this.loader)||t.abort(),null==(e=this.keyLoader)||e.abort()}setElementaryStreamInfo(t,e,r,i,n,s=!1){const{elementaryStreams:a}=this,o=a[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,n)):a[t]={startPTS:e,endPTS:r,startDTS:i,endDTS:n,partial:s}}clearElementaryStreamInfo(){const{elementaryStreams:t}=this;t[P]=null,t[_]=null,t[O]=null}}class F extends M{constructor(t,e,r,i,n){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new I,this.duration=t.decimalFloatingPoint("DURATION"),this.gap=t.bool("GAP"),this.independent=t.bool("INDEPENDENT"),this.relurl=t.enumeratedString("URI"),this.fragment=e,this.index=i;const s=t.enumeratedString("BYTERANGE");s&&this.setByteRange(s,n),n&&(this.fragOffset=n.fragOffset+n.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:t}=this;return!!(t.audio||t.video||t.audiovideo)}}class B{constructor(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}reloaded(t){if(!t)return this.advanced=!0,void(this.updated=!0);const e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e||!this.live,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&m(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const t=this.driftEndTime-this.driftStartTime;if(t>0){return 1e3*(this.driftEnd-this.driftStart)/t}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var t;return null!=(t=this.fragments)&&t.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function U(t){return Uint8Array.from(atob(t),(t=>t.charCodeAt(0)))}function G(t){const e=t.split(":");let r=null;if("data"===e[0]&&2===e.length){const t=e[1].split(";"),i=t[t.length-1].split(",");if(2===i.length){const e="base64"===i[0],n=i[1];e?(t.splice(-1,1),r=U(n)):r=function(t){const e=j(t).subarray(0,16),r=new Uint8Array(16);return r.set(e,16-e.length),r}(n)}}return r}function j(t){return Uint8Array.from(unescape(encodeURIComponent(t)),(t=>t.charCodeAt(0)))}const V="undefined"!=typeof self?self:void 0;var H={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},K="org.w3.clearkey",z="com.apple.streamingkeydelivery",q="com.microsoft.playready",W="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Y(t){switch(t){case z:return H.FAIRPLAY;case q:return H.PLAYREADY;case W:return H.WIDEVINE;case K:return H.CLEARKEY}}var X="edef8ba979d64acea3c827dcd51d21ed";function Z(t){switch(t){case H.FAIRPLAY:return z;case H.PLAYREADY:return q;case H.WIDEVINE:return W;case H.CLEARKEY:return K}}function Q(t){const{drmSystems:e,widevineLicenseUrl:r}=t,i=e?[H.FAIRPLAY,H.WIDEVINE,H.PLAYREADY,H.CLEARKEY].filter((t=>!!e[t])):[];return!i[H.WIDEVINE]&&r&&i.push(H.WIDEVINE),i}const J=null!=V&&null!=(tt=V.navigator)&&tt.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var tt;function et(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}const rt=(t,e)=>e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,it=(t,e)=>e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,nt=(t,e)=>{const r=e;let i=0;for(;rt(t,e);){i+=10;i+=st(t,e+6),it(t,e+10)&&(i+=10),e+=i}if(i>0)return t.subarray(r,r+i)},st=(t,e)=>{let r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3],r},at=(t,e)=>rt(t,e)&&st(t,e+6)+10<=t.length-e,ot=t=>{const e=ut(t);for(let t=0;t<e.length;t++){const r=e[t];if(lt(r))return pt(r)}},lt=t=>t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info,dt=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=st(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},ut=t=>{let e=0;const r=[];for(;rt(t,e);){const i=st(t,e+6);e+=10;const n=e+i;for(;e+8<n;){const i=dt(t.subarray(e)),n=ct(i);n&&r.push(n),e+=i.size+10}it(t,e)&&(e+=10)}return r},ct=t=>"PRIV"===t.type?ht(t):"W"===t.type[0]?gt(t):ft(t),ht=t=>{if(t.size<2)return;const e=mt(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}},ft=t=>{if(t.size<2)return;if("TXXX"===t.type){let e=1;const r=mt(t.data.subarray(e),!0);e+=r.length+1;const i=mt(t.data.subarray(e));return{key:t.type,info:r,data:i}}const e=mt(t.data.subarray(1));return{key:t.type,data:e}},gt=t=>{if("WXXX"===t.type){if(t.size<2)return;let e=1;const r=mt(t.data.subarray(e),!0);e+=r.length+1;const i=mt(t.data.subarray(e));return{key:t.type,info:r,data:i}}const e=mt(t.data);return{key:t.type,data:e}},pt=t=>{if(8===t.data.byteLength){const e=new Uint8Array(t.data),r=1&e[3];let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},mt=(t,e=!1)=>{const r=yt();if(r){const i=r.decode(t);if(e){const t=i.indexOf("\0");return-1!==t?i.substring(0,t):i}return i.replace(/\0/g,"")}const i=t.length;let n,s,a,o="",l=0;for(;l<i;){if(n=t[l++],0===n&&e)return o;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(n);break;case 12:case 13:s=t[l++],o+=String.fromCharCode((31&n)<<6|63&s);break;case 14:s=t[l++],a=t[l++],o+=String.fromCharCode((15&n)<<12|(63&s)<<6|(63&a)<<0)}}return o};let vt;function yt(){if(!navigator.userAgent.includes("PlayStation 4"))return vt||void 0===self.TextDecoder||(vt=new self.TextDecoder("utf-8")),vt}const bt=function(t){let e="";for(let r=0;r<t.length;r++){let i=t[r].toString(16);i.length<2&&(i="0"+i),e+=i}return e},Tt=Math.pow(2,32)-1,Et=[].push,St={video:1,audio:2,id3:3,text:4};function wt(t){return String.fromCharCode.apply(null,t)}function $t(t,e){const r=t[e]<<8|t[e+1];return r<0?65536+r:r}function At(t,e){const r=Lt(t,e);return r<0?4294967296+r:r}function Ct(t,e){let r=At(t,e);return r*=Math.pow(2,32),r+=At(t,e+4),r}function Lt(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function xt(t,e,r){t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function Rt(t,e){const r=[];if(!e.length)return r;const i=t.byteLength;for(let n=0;n<i;){const s=At(t,n),a=s>1?n+s:i;if(wt(t.subarray(n+4,n+8))===e[0])if(1===e.length)r.push(t.subarray(n+8,a));else{const i=Rt(t.subarray(n+8,a),e.slice(1));i.length&&Et.apply(r,i)}n=a}return r}function kt(t){const e=[],r=t[0];let i=8;const n=At(t,i);i+=4;let s=0,a=0;0===r?(s=At(t,i),a=At(t,i+4),i+=8):(s=Ct(t,i),a=Ct(t,i+8),i+=16),i+=2;let o=t.length+a;const l=$t(t,i);i+=2;for(let r=0;r<l;r++){let r=i;const s=At(t,r);r+=4;const a=2147483647&s;if(1===(2147483648&s)>>>31)return C.warn("SIDX has hierarchical references (not supported)"),null;const l=At(t,r);r+=4,e.push({referenceSize:a,subsegmentDuration:l,info:{duration:l/n,start:o,end:o+a-1}}),o+=a,r+=4,i=r}return{earliestPresentationTime:s,timescale:n,version:r,referencesCount:l,references:e}}function Dt(t){const e=[],r=Rt(t,["moov","trak"]);for(let t=0;t<r.length;t++){const i=r[t],n=Rt(i,["tkhd"])[0];if(n){let t=n[0];const r=At(n,0===t?12:20),s=Rt(i,["mdia","mdhd"])[0];if(s){t=s[0];const n=At(s,0===t?12:20),a=Rt(i,["mdia","hdlr"])[0];if(a){const t=wt(a.subarray(8,12)),s={soun:P,vide:_}[t];if(s){const t=It(Rt(i,["mdia","minf","stbl","stsd"])[0]);e[r]={timescale:n,type:s},e[s]=h({timescale:n,id:r},t)}}}}}return Rt(t,["moov","mvex","trex"]).forEach((t=>{const r=At(t,4),i=e[r];i&&(i.default={duration:At(t,12),flags:At(t,20)})})),e}function It(t){const e=t.subarray(8),r=e.subarray(86),i=wt(e.subarray(4,8));let n=i;const s="enca"===i||"encv"===i;if(s){const t=Rt(e,[i])[0];Rt(t.subarray("enca"===i?28:78),["sinf"]).forEach((t=>{const e=Rt(t,["schm"])[0];if(e){const r=wt(e.subarray(4,8));if("cbcs"===r||"cenc"===r){const e=Rt(t,["frma"])[0];e&&(n=wt(e))}}}))}switch(n){case"avc1":case"avc2":case"avc3":case"avc4":{const t=Rt(r,["avcC"])[0];n+="."+_t(t[1])+_t(t[2])+_t(t[3]);break}case"mp4a":{const t=Rt(e,[i])[0],r=Rt(t.subarray(28),["esds"])[0];if(r&&r.length>12){let t=4;if(3!==r[t++])break;t=Pt(r,t),t+=2;const e=r[t++];if(128&e&&(t+=2),64&e&&(t+=r[t++]),4!==r[t++])break;t=Pt(r,t);const i=r[t++];if(64!==i)break;if(n+="."+_t(i),t+=12,5!==r[t++])break;t=Pt(r,t);const s=r[t++];let a=(248&s)>>3;31===a&&(a+=1+((7&s)<<3)+((224&r[t])>>5)),n+="."+a}break}case"hvc1":case"hev1":{const t=Rt(r,["hvcC"])[0],e=t[1],i=["","A","B","C"][e>>6],s=31&e,a=At(t,2),o=(32&e)>>5?"H":"L",l=t[12],d=t.subarray(6,12);n+="."+i+s,n+="."+a.toString(16).toUpperCase(),n+="."+o+l;let u="";for(let t=d.length;t--;){const e=d[t];if(e||u){u="."+e.toString(16).toUpperCase()+u}}n+=u;break}case"dvh1":case"dvhe":{const t=Rt(r,["dvcC"])[0],e=t[2]>>1&127,i=t[2]<<5&32|t[3]>>3&31;n+="."+Ot(e)+"."+Ot(i);break}case"vp09":{const t=Rt(r,["vpcC"])[0],e=t[4],i=t[5],s=t[6]>>4&15;n+="."+Ot(e)+"."+Ot(i)+"."+Ot(s);break}case"av01":{const t=Rt(r,["av1C"])[0],e=t[1]>>>5,i=31&t[1],s=t[2]>>>7?"H":"M",a=(64&t[2])>>6,o=(32&t[2])>>5,l=2===e&&a?o?12:10:a?10:8,d=(16&t[2])>>4,u=(8&t[2])>>3,c=(4&t[2])>>2,h=3&t[2],f=1,g=1,p=1,m=0;n+="."+e+"."+Ot(i)+s+"."+Ot(l)+"."+d+"."+u+c+h+"."+Ot(f)+"."+Ot(g)+"."+Ot(p)+"."+m;break}}return{codec:n,encrypted:s}}function Pt(t,e){const r=e+5;for(;128&t[e++]&&e<r;);return e}function _t(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Ot(t){return(t<10?"0":"")+t}function Mt(t){const e=Rt(t,["schm"])[0];if(e){const r=wt(e.subarray(4,8));if("cbcs"===r||"cenc"===r)return Rt(t,["schi","tenc"])[0]}return C.error("[eme] missing 'schm' box"),null}function Nt(t){const e=At(t,0);let r=8;1&e&&(r+=4),4&e&&(r+=4);let i=0;const n=At(t,4);for(let s=0;s<n;s++){if(256&e){i+=At(t,r),r+=4}512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4)}return i}function Ft(t,e){const r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Bt(t,e){const r=[],i=e.samples,n=e.timescale,s=e.id;let a=!1;return Rt(i,["moof"]).map((o=>{const l=o.byteOffset-8;Rt(o,["traf"]).map((o=>{const d=Rt(o,["tfdt"]).map((t=>{const e=t[0];let r=At(t,4);return 1===e&&(r*=Math.pow(2,32),r+=At(t,8)),r/n}))[0];return void 0!==d&&(t=d),Rt(o,["tfhd"]).map((d=>{const u=At(d,4),c=16777215&At(d,0);let h=0;const f=0!=(16&c);let g=0;const p=0!=(32&c);let m=8;u===s&&(0!=(1&c)&&(m+=8),0!=(2&c)&&(m+=4),0!=(8&c)&&(h=At(d,m),m+=4),f&&(g=At(d,m),m+=4),p&&(m+=4),"video"===e.type&&(a=function(t){if(!t)return!1;const e=t.indexOf("."),r=e<0?t:t.substring(0,e);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(e.codec)),Rt(o,["trun"]).map((s=>{const o=s[0],d=16777215&At(s,0),u=0!=(1&d);let c=0;const f=0!=(4&d),p=0!=(256&d);let m=0;const v=0!=(512&d);let y=0;const b=0!=(1024&d),T=0!=(2048&d);let E=0;const S=At(s,4);let w=8;u&&(c=At(s,w),w+=4),f&&(w+=4);let $=c+l;for(let l=0;l<S;l++){if(p?(m=At(s,w),w+=4):m=h,v?(y=At(s,w),w+=4):y=g,b&&(w+=4),T&&(E=0===o?At(s,w):Lt(s,w),w+=4),e.type===_){let e=0;for(;e<y;){const s=At(i,$);if($+=4,Ut(a,i[$])){Gt(i.subarray($,$+s),a?2:1,t+E/n,r)}$+=s,e+=s+4}}t+=m/n}})))}))}))})),r}function Ut(t,e){if(t){const t=e>>1&63;return 39===t||40===t}return 6===(31&e)}function Gt(t,e,r,i){const n=jt(t);let s=0;s+=e;let a=0,o=0,l=0;for(;s<n.length;){a=0;do{if(s>=n.length)break;l=n[s++],a+=l}while(255===l);o=0;do{if(s>=n.length)break;l=n[s++],o+=l}while(255===l);const t=n.length-s;let e=s;if(o<t)s+=o;else if(o>t){C.error(`Malformed SEI payload. ${o} is too small, only ${t} bytes left to parse.`);break}if(4===a){if(181===n[e++]){const t=$t(n,e);if(e+=2,49===t){const t=At(n,e);if(e+=4,1195456820===t){const t=n[e++];if(3===t){const s=n[e++],o=64&s,l=o?2+3*(31&s):0,d=new Uint8Array(l);if(o){d[0]=s;for(let t=1;t<l;t++)d[t]=n[e++]}i.push({type:t,payloadType:a,pts:r,bytes:d})}}}}}else if(5===a&&o>16){const t=[];for(let r=0;r<16;r++){const i=n[e++].toString(16);t.push(1==i.length?"0"+i:i),3!==r&&5!==r&&7!==r&&9!==r||t.push("-")}const s=o-16,l=new Uint8Array(s);for(let t=0;t<s;t++)l[t]=n[e++];i.push({payloadType:a,pts:r,uuid:t.join(""),userData:mt(l),userDataBytes:l})}}}function jt(t){const e=t.byteLength,r=[];let i=1;for(;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;const n=e-r.length,s=new Uint8Array(n);let a=0;for(i=0;i<n;a++,i++)a===r[0]&&(a++,r.shift()),s[i]=t[a];return s}function Vt(t,e,r){if(16!==t.byteLength)throw new RangeError("Invalid system id");let i,n,s;if(e){i=1,n=new Uint8Array(16*e.length);for(let t=0;t<e.length;t++){const r=e[t];if(16!==r.byteLength)throw new RangeError("Invalid key");n.set(r,16*t)}}else i=0,n=new Uint8Array;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(a.buffer).setUint32(0,r.byteLength,!1),function(t,...e){const r=e.length;let i=8,n=r;for(;n--;)i+=e[n].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=255&i,s.set(t,4),n=0,i=8;n<r;n++)s.set(e[n],i),i+=e[n].byteLength;return s}([112,115,115,104],new Uint8Array([i,0,0,0]),t,s,n,a,r||new Uint8Array)}let Ht={};class Kt{static clearKeyUriToKeyIdMap(){Ht={}}constructor(t,e,r,i=[1],n=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=r,this.keyFormatVersions=i,this.iv=n,this.encrypted=!!t&&"NONE"!==t,this.isCommonEncryption=this.encrypted&&"AES-128"!==t}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case z:case W:case q:case K:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(t){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof t&&("AES-128"!==this.method||this.iv||C.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),t=0);const e=function(t){const e=new Uint8Array(16);for(let r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}(t);return new Kt(this.method,this.uri,"identity",this.keyFormatVersions,e)}const e=G(this.uri);if(e)switch(this.keyFormat){case W:this.pssh=e,e.length>=22&&(this.keyId=e.subarray(e.length-22,e.length-6));break;case q:{const t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Vt(t,null,e);const r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),i=String.fromCharCode.apply(null,Array.from(r)),n=i.substring(i.indexOf("<"),i.length),s=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(s){const t=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(t){const e=U(t).subarray(0,16);!function(t){const e=function(t,e,r){const i=t[e];t[e]=t[r],t[r]=i};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}(e),this.keyId=e}}break}default:{let t=e.subarray(0,16);if(16!==t.length){const e=new Uint8Array(16);e.set(t,16-t.length),t=e}this.keyId=t;break}}if(!this.keyId||16!==this.keyId.byteLength){let t=Ht[this.uri];if(!t){const e=Object.keys(Ht).length%Number.MAX_SAFE_INTEGER;t=new Uint8Array(16);new DataView(t.buffer,12,4).setUint32(0,e),Ht[this.uri]=t}this.keyId=t}return this}}const zt=/\{\$([a-zA-Z0-9-_]+)\}/g;function qt(t){return zt.test(t)}function Wt(t,e,r){if(null!==t.variableList||t.hasVariableRefs)for(let i=r.length;i--;){const n=r[i],s=e[n];s&&(e[n]=Yt(t,s))}}function Yt(t,e){if(null!==t.variableList||t.hasVariableRefs){const r=t.variableList;return e.replace(zt,(e=>{const i=e.substring(2,e.length-1),n=null==r?void 0:r[i];return void 0===n?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),e):n}))}return e}function Xt(t,e,r){let i,n,s=t.variableList;if(s||(t.variableList=s={}),"QUERYPARAM"in e){i=e.QUERYPARAM;try{const t=new self.URL(r).searchParams;if(!t.has(i))throw new Error(`"${i}" does not match any query parameter in URI: "${r}"`);n=t.get(i)}catch(e){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${e.message}`))}}else i=e.NAME,n=e.VALUE;i in s?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):s[i]=n||""}function Zt(t,e,r){const i=e.IMPORT;if(r&&i in r){let e=t.variableList;e||(t.variableList=e={}),e[i]=r[i]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}function Qt(t=!0){if("undefined"==typeof self)return;return(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}const Jt={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function te(t,e,r=!0){return!t.split(",").some((t=>!ee(t,e,r)))}function ee(t,e,r=!0){var i;const n=Qt(r);return null!=(i=null==n?void 0:n.isTypeSupported(re(t,e)))&&i}function re(t,e){return`${e}/mp4;codecs="${t}"`}function ie(t){if(t){const e=t.substring(0,4);return Jt.video[e]}return 2}function ne(t){return t.split(",").reduce(((t,e)=>{const r=Jt.video[e];return r?(2*r+t)/(t?3:2):(Jt.audio[e]+t)/(t?2:1)}),0)}const se={};const ae=/flac|opus/i;function oe(t,e=!0){return t.replace(ae,(t=>function(t,e=!0){if(se[t])return se[t];const r={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t];for(let i=0;i<r.length;i++)if(ee(r[i],"audio",e))return se[t]=r[i],r[i];return t}(t.toLowerCase(),e)))}function le(t,e){return t&&"mp4a"!==t?t:e}const de=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,ue=/#EXT-X-MEDIA:(.*)/g,ce=/^#EXT(?:INF|-X-TARGETDURATION):/m,he=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),fe=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class ge{static findGroup(t,e){for(let r=0;r<t.length;r++){const i=t[r];if(i.id===e)return i}}static resolve(t,e){return u.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}static isMediaPlaylist(t){return ce.test(t)}static parseMasterPlaylist(t,e){const r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:qt(t)},i=[];let n;for(de.lastIndex=0;null!=(n=de.exec(t));)if(n[1]){var s;const t=new R(n[1]);Wt(r,t,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const a=Yt(r,n[2]),o={attrs:t,bitrate:t.decimalInteger("BANDWIDTH")||t.decimalInteger("AVERAGE-BANDWIDTH"),name:t.NAME,url:ge.resolve(a,e)},l=t.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),ve(t.CODECS,o),null!=(s=o.unknownCodecs)&&s.length||i.push(o),r.levels.push(o)}else if(n[3]){const t=n[3],i=n[4];switch(t){case"SESSION-DATA":{const t=new R(i);Wt(r,t,["DATA-ID","LANGUAGE","VALUE","URI"]);const e=t["DATA-ID"];e&&(null===r.sessionData&&(r.sessionData={}),r.sessionData[e]=t);break}case"SESSION-KEY":{const t=pe(i,e,r);t.encrypted&&t.isSupported()?(null===r.sessionKeys&&(r.sessionKeys=[]),r.sessionKeys.push(t)):C.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${i}"`);break}case"DEFINE":{const t=new R(i);Wt(r,t,["NAME","VALUE","QUERYPARAM"]),Xt(r,t,e)}break;case"CONTENT-STEERING":{const t=new R(i);Wt(r,t,["SERVER-URI","PATHWAY-ID"]),r.contentSteering={uri:ge.resolve(t["SERVER-URI"],e),pathwayId:t["PATHWAY-ID"]||"."};break}case"START":r.startTimeOffset=me(i)}}const a=i.length>0&&i.length<r.levels.length;return r.levels=a?i:r.levels,0===r.levels.length&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(t,e,r){let i;const n={},s=r.levels,a={AUDIO:s.map((t=>({id:t.attrs.AUDIO,audioCodec:t.audioCodec}))),SUBTITLES:s.map((t=>({id:t.attrs.SUBTITLES,textCodec:t.textCodec}))),"CLOSED-CAPTIONS":[]};let o=0;for(ue.lastIndex=0;null!==(i=ue.exec(t));){const t=new R(i[1]),s=t.TYPE;if(s){const i=a[s],l=n[s]||[];n[s]=l,Wt(r,t,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const d=t.LANGUAGE,u=t["ASSOC-LANGUAGE"],c=t.CHANNELS,h=t.CHARACTERISTICS,f=t["INSTREAM-ID"],g={attrs:t,bitrate:0,id:o++,groupId:t["GROUP-ID"]||"",name:t.NAME||d||"",type:s,default:t.bool("DEFAULT"),autoselect:t.bool("AUTOSELECT"),forced:t.bool("FORCED"),lang:d,url:t.URI?ge.resolve(t.URI,e):""};if(u&&(g.assocLang=u),c&&(g.channels=c),h&&(g.characteristics=h),f&&(g.instreamId=f),null!=i&&i.length){const t=ge.findGroup(i,g.groupId)||i[0];ye(g,t,"audioCodec"),ye(g,t,"textCodec")}l.push(g)}}return n}static parseLevelPlaylist(t,e,r,i,n,s){const a=new B(e),o=a.fragments;let l,d,u,c=null,h=0,f=0,g=0,v=0,y=null,b=new N(i,e),T=-1,E=!1,S=null;for(he.lastIndex=0,a.m3u8=t,a.hasVariableRefs=qt(t);null!==(l=he.exec(t));){E&&(E=!1,b=new N(i,e),b.start=g,b.sn=h,b.cc=v,b.level=r,c&&(b.initSegment=c,b.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,S&&(b.setByteRange(S),S=null)));const t=l[1];if(t){b.duration=parseFloat(t);const e=(" "+l[2]).slice(1);b.title=e||null,b.tagList.push(e?["INF",t,e]:["INF",t])}else if(l[3]){if(m(b.duration)){b.start=g,u&&Ee(b,u,a),b.sn=h,b.level=r,b.cc=v,o.push(b);const t=(" "+l[3]).slice(1);b.relurl=Yt(a,t),be(b,y),y=b,g+=b.duration,h++,f=0,E=!0}}else if(l[4]){const t=(" "+l[4]).slice(1);y?b.setByteRange(t,y):b.setByteRange(t)}else if(l[5])b.rawProgramDateTime=(" "+l[5]).slice(1),b.tagList.push(["PROGRAM-DATE-TIME",b.rawProgramDateTime]),-1===T&&(T=o.length);else{if(l=l[0].match(fe),!l){C.warn("No matches on slow regex match for level playlist!");continue}for(d=1;d<l.length&&void 0===l[d];d++);const t=(" "+l[d]).slice(1),n=(" "+l[d+1]).slice(1),g=l[d+2]?(" "+l[d+2]).slice(1):"";switch(t){case"PLAYLIST-TYPE":a.type=n.toUpperCase();break;case"MEDIA-SEQUENCE":h=a.startSN=parseInt(n);break;case"SKIP":{const t=new R(n);Wt(a,t,["RECENTLY-REMOVED-DATERANGES"]);const e=t.decimalInteger("SKIPPED-SEGMENTS");if(m(e)){a.skippedSegments=e;for(let t=e;t--;)o.unshift(null);h+=e}const r=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");r&&(a.recentlyRemovedDateranges=r.split("\t"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt(n),1);break;case"VERSION":a.version=parseInt(n);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":(n||g)&&b.tagList.push(g?[n,g]:[n]);break;case"DISCONTINUITY":v++,b.tagList.push(["DIS"]);break;case"GAP":b.gap=!0,b.tagList.push([t]);break;case"BITRATE":b.tagList.push([t,n]);break;case"DATERANGE":{const t=new R(n);Wt(a,t,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Wt(a,t,t.clientAttrs);const e=new D(t,a.dateRanges[t.ID]);e.isValid||a.skippedSegments?a.dateRanges[e.id]=e:C.warn(`Ignoring invalid DATERANGE tag: "${n}"`),b.tagList.push(["EXT-X-DATERANGE",n]);break}case"DEFINE":{const t=new R(n);Wt(a,t,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in t?Zt(a,t,s):Xt(a,t,e)}break;case"DISCONTINUITY-SEQUENCE":v=parseInt(n);break;case"KEY":{const t=pe(n,e,a);if(t.isSupported()){if("NONE"===t.method){u=void 0;break}u||(u={}),u[t.keyFormat]&&(u=p({},u)),u[t.keyFormat]=t}else C.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${n}"`);break}case"START":a.startTimeOffset=me(n);break;case"MAP":{const t=new R(n);if(Wt(a,t,["BYTERANGE","URI"]),b.duration){const n=new N(i,e);Te(n,t,r,u),c=n,b.initSegment=c,c.rawProgramDateTime&&!b.rawProgramDateTime&&(b.rawProgramDateTime=c.rawProgramDateTime)}else{const e=b.byteRangeEndOffset;if(e){const t=b.byteRangeStartOffset;S=`${e-t}@${t}`}else S=null;Te(b,t,r,u),c=b,E=!0}break}case"SERVER-CONTROL":{const t=new R(n);a.canBlockReload=t.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=t.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&t.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=t.optionalFloat("PART-HOLD-BACK",0),a.holdBack=t.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const t=new R(n);a.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let t=a.partList;t||(t=a.partList=[]);const r=f>0?t[t.length-1]:void 0,i=f++,s=new R(n);Wt(a,s,["BYTERANGE","URI"]);const o=new F(s,b,e,i,r);t.push(o),b.duration+=o.duration;break}case"PRELOAD-HINT":{const t=new R(n);Wt(a,t,["URI"]),a.preloadHint=t;break}case"RENDITION-REPORT":{const t=new R(n);Wt(a,t,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(t);break}default:C.warn(`line parsed but not handled: ${l}`)}}}y&&!y.relurl?(o.pop(),g-=y.duration,a.partList&&(a.fragmentHint=y)):a.partList&&(be(b,y),b.cc=v,a.fragmentHint=b,u&&Ee(b,u,a));const w=o.length,$=o[0],A=o[w-1];if(g+=a.skippedSegments*a.targetduration,g>0&&w&&A){a.averagetargetduration=g/w;const t=A.sn;a.endSN="initSegment"!==t?t:0,a.live||(A.endList=!0),$&&(a.startCC=$.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(g+=a.fragmentHint.duration),a.totalduration=g,a.endCC=v,T>0&&function(t,e){let r=t[e];for(let i=e;i--;){const e=t[i];if(!e)return;e.programDateTime=r.programDateTime-1e3*e.duration,r=e}}(o,T),a}}function pe(t,e,r){var i,n;const s=new R(t);Wt(r,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=null!=(i=s.METHOD)?i:"",o=s.URI,l=s.hexadecimalInteger("IV"),d=s.KEYFORMATVERSIONS,u=null!=(n=s.KEYFORMAT)?n:"identity";o&&s.IV&&!l&&C.error(`Invalid IV: ${s.IV}`);const c=o?ge.resolve(o,e):"",h=(d||"1").split("/").map(Number).filter(Number.isFinite);return new Kt(a,c,u,h,l)}function me(t){const e=new R(t).decimalFloatingPoint("TIME-OFFSET");return m(e)?e:null}function ve(t,e){let r=(t||"").split(/[ ,]+/).filter((t=>t));["video","audio","text"].forEach((t=>{const i=r.filter((e=>function(t,e){const r=Jt[e];return!!r&&!!r[t.slice(0,4)]}(e,t)));i.length&&(e[`${t}Codec`]=i.join(","),r=r.filter((t=>-1===i.indexOf(t))))})),e.unknownCodecs=r}function ye(t,e,r){const i=e[r];i&&(t[r]=i)}function be(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),m(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function Te(t,e,r,i){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",i&&(t.levelkeys=i),t.initSegment=null}function Ee(t,e,r){t.levelkeys=e;const{encryptedFragments:i}=r;i.length&&i[i.length-1].levelkeys===e||!Object.keys(e).some((t=>e[t].isCommonEncryption))||i.push(t)}var Se="manifest",we="level",$e="audioTrack",Ae="subtitleTrack",Ce="main",Le="audio",xe="subtitle";function Re(t){const{type:e}=t;switch(e){case $e:return Le;case Ae:return xe;default:return Ce}}function ke(t,e){let r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}class De{constructor(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=t,this.registerListeners()}startLoad(t){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:t}=this;t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.LEVEL_LOADING,this.onLevelLoading,this),t.on(b.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(b.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:t}=this;t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.LEVEL_LOADING,this.onLevelLoading,this),t.off(b.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(b.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(t){const e=this.hls.config,r=e.pLoader,i=e.loader,n=new(r||i)(e);return this.loaders[t.type]=n,n}getInternalLoader(t){return this.loaders[t.type]}resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]}destroyInternalLoaders(){for(const t in this.loaders){const e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(t,e){const{url:r}=e;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Se,url:r,deliveryDirectives:null})}onLevelLoading(t,e){const{id:r,level:i,pathwayId:n,url:s,deliveryDirectives:a}=e;this.load({id:r,level:i,pathwayId:n,responseType:"text",type:we,url:s,deliveryDirectives:a})}onAudioTrackLoading(t,e){const{id:r,groupId:i,url:n,deliveryDirectives:s}=e;this.load({id:r,groupId:i,level:null,responseType:"text",type:$e,url:n,deliveryDirectives:s})}onSubtitleTrackLoading(t,e){const{id:r,groupId:i,url:n,deliveryDirectives:s}=e;this.load({id:r,groupId:i,level:null,responseType:"text",type:Ae,url:n,deliveryDirectives:s})}load(t){var e;const r=this.hls.config;let i,n=this.getInternalLoader(t);if(n){const e=n.context;if(e&&e.url===t.url&&e.level===t.level)return void C.trace("[playlist-loader]: playlist request ongoing");C.log(`[playlist-loader]: aborting previous loader for type: ${t.type}`),n.abort()}if(i=t.type===Se?r.manifestLoadPolicy.default:p({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),n=this.createInternalLoader(t),m(null==(e=t.deliveryDirectives)?void 0:e.part)){let e;if(t.type===we&&null!==t.level?e=this.hls.levels[t.level].details:t.type===$e&&null!==t.id?e=this.hls.audioTracks[t.id].details:t.type===Ae&&null!==t.id&&(e=this.hls.subtitleTracks[t.id].details),e){const t=e.partTarget,r=e.targetduration;if(t&&r){const e=1e3*Math.max(3*t,.8*r);i=p({},i,{maxTimeToFirstByteMs:Math.min(e,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(e,i.maxTimeToFirstByteMs)})}}}const s=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},o={onSuccess:(t,e,r,i)=>{const n=this.getInternalLoader(r);this.resetInternalLoader(r.type);const s=t.data;0===s.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),ge.isMediaPlaylist(s)?this.handleTrackOrLevelPlaylist(t,e,r,i||null,n):this.handleMasterPlaylist(t,e,r,i)):this.handleManifestParsingError(t,r,new Error("no EXTM3U delimiter"),i||null,e)},onError:(t,e,r,i)=>{this.handleNetworkError(e,r,!1,t,i)},onTimeout:(t,e,r)=>{this.handleNetworkError(e,r,!0,void 0,t)}};n.load(t,a,o)}handleMasterPlaylist(t,e,r,i){const n=this.hls,s=t.data,a=ke(t,r),o=ge.parseMasterPlaylist(s,a);if(o.playlistParsingError)return void this.handleManifestParsingError(t,r,o.playlistParsingError,i,e);const{contentSteering:l,levels:d,sessionData:u,sessionKeys:c,startTimeOffset:h,variableList:f}=o;this.variableList=f;const{AUDIO:g=[],SUBTITLES:p,"CLOSED-CAPTIONS":m}=ge.parseMasterPlaylistMedia(s,a,o);if(g.length){g.some((t=>!t.url))||!d[0].audioCodec||d[0].attrs.AUDIO||(C.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new R({}),bitrate:0,url:""}))}n.trigger(b.MANIFEST_LOADED,{levels:d,audioTracks:g,subtitles:p,captions:m,contentSteering:l,url:a,stats:e,networkDetails:i,sessionData:u,sessionKeys:c,startTimeOffset:h,variableList:f})}handleTrackOrLevelPlaylist(t,e,r,i,n){const s=this.hls,{id:a,level:o,type:l}=r,d=ke(t,r),u=m(o)?o:m(a)?a:0,c=Re(r),h=ge.parseLevelPlaylist(t.data,d,u,c,0,this.variableList);if(l===Se){const t={attrs:new R({}),bitrate:0,details:h,name:"",url:d};s.trigger(b.MANIFEST_LOADED,{levels:[t],audioTracks:[],url:d,stats:e,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}e.parsing.end=performance.now(),r.levelDetails=h,this.handlePlaylistLoaded(h,t,e,r,i,n)}handleManifestParsingError(t,e,r,i,n){this.hls.trigger(b.ERROR,{type:T.NETWORK_ERROR,details:E.MANIFEST_PARSING_ERROR,fatal:e.type===Se,url:t.url,err:r,error:r,reason:r.message,response:t,context:e,networkDetails:i,stats:n})}handleNetworkError(t,e,r=!1,i,n){let s=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${t.type}`;t.type===we?s+=`: ${t.level} id: ${t.id}`:t.type!==$e&&t.type!==Ae||(s+=` id: ${t.id} group-id: "${t.groupId}"`);const a=new Error(s);C.warn(`[playlist-loader]: ${s}`);let o=E.UNKNOWN,l=!1;const d=this.getInternalLoader(t);switch(t.type){case Se:o=r?E.MANIFEST_LOAD_TIMEOUT:E.MANIFEST_LOAD_ERROR,l=!0;break;case we:o=r?E.LEVEL_LOAD_TIMEOUT:E.LEVEL_LOAD_ERROR,l=!1;break;case $e:o=r?E.AUDIO_TRACK_LOAD_TIMEOUT:E.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Ae:o=r?E.SUBTITLE_TRACK_LOAD_TIMEOUT:E.SUBTITLE_LOAD_ERROR,l=!1}d&&this.resetInternalLoader(t.type);const u={type:T.NETWORK_ERROR,details:o,fatal:l,url:t.url,loader:d,context:t,error:a,networkDetails:e,stats:n};if(i){const r=(null==e?void 0:e.url)||t.url;u.response=h({url:r,data:void 0},i)}this.hls.trigger(b.ERROR,u)}handlePlaylistLoaded(t,e,r,i,n,s){const a=this.hls,{type:o,level:l,id:d,groupId:u,deliveryDirectives:c}=i,h=ke(e,i),f=Re(i),g="number"==typeof i.level&&f===Ce?l:void 0;if(!t.fragments.length){const t=new Error("No Segments found in Playlist");return void a.trigger(b.ERROR,{type:T.NETWORK_ERROR,details:E.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:t,reason:t.message,response:e,context:i,level:g,parent:f,networkDetails:n,stats:r})}t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));const p=t.playlistParsingError;if(p)a.trigger(b.ERROR,{type:T.NETWORK_ERROR,details:E.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:p,reason:p.message,response:e,context:i,level:g,parent:f,networkDetails:n,stats:r});else switch(t.live&&s&&(s.getCacheAge&&(t.ageHeader=s.getCacheAge()||0),s.getCacheAge&&!isNaN(t.ageHeader)||(t.ageHeader=0)),o){case Se:case we:a.trigger(b.LEVEL_LOADED,{details:t,level:g||0,id:d||0,stats:r,networkDetails:n,deliveryDirectives:c});break;case $e:a.trigger(b.AUDIO_TRACK_LOADED,{details:t,id:d||0,groupId:u||"",stats:r,networkDetails:n,deliveryDirectives:c});break;case Ae:a.trigger(b.SUBTITLE_TRACK_LOADED,{details:t,id:d||0,groupId:u||"",stats:r,networkDetails:n,deliveryDirectives:c})}}}function Ie(t,e){let r;try{r=new Event("addtrack")}catch(t){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function Pe(t,e){const r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){C.debug(`[texttrack-utils]: ${r}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,t.addCue(r)}catch(t){C.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${t}`)}}"disabled"===r&&(t.mode=r)}function _e(t){const e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(let e=t.cues.length;e--;)t.removeCue(t.cues[e]);"disabled"===e&&(t.mode=e)}function Oe(t,e,r,i){const n=t.mode;if("disabled"===n&&(t.mode="hidden"),t.cues&&t.cues.length>0){const n=function(t,e,r){const i=[],n=function(t,e){if(e<t[0].startTime)return 0;const r=t.length-1;if(e>t[r].endTime)return-1;let i=0,n=r;for(;i<=n;){const s=Math.floor((n+i)/2);if(e<t[s].startTime)n=s-1;else{if(!(e>t[s].startTime&&i<r))return s;i=s+1}}return t[i].startTime-e<e-t[n].startTime?i:n}(t,e);if(n>-1)for(let s=n,a=t.length;s<a;s++){const n=t[s];if(n.startTime>=e&&n.endTime<=r)i.push(n);else if(n.startTime>r)return i}return i}(t.cues,e,r);for(let e=0;e<n.length;e++)i&&!i(n[e])||t.removeCue(n[e])}"disabled"===n&&(t.mode=n)}function Me(t){const e=[];for(let r=0;r<t.length;r++){const i=t[r];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||e.push(t[r])}return e}var Ne="org.id3",Fe="com.apple.quicktime.HLS",Be="https://aomedia.org/emsg/ID3";function Ue(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function Ge(t,e,r,i,n){let s=new t(e,r,"");try{s.value=i,n&&(s.type=n)}catch(a){s=new t(e,r,JSON.stringify(n?h({type:n},i):i))}return s}const je=(()=>{const t=Ue();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Ve(t,e){return t.getTime()/1e3-e}class He{constructor(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:t}=this;t.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(b.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:t}=this;t.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(b.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(t,e){this.media=e.media}onMediaDetaching(){this.id3Track&&(_e(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(t){const e=this.getID3Track(t.textTracks);return e.mode="hidden",e}getID3Track(t){if(this.media){for(let e=0;e<t.length;e++){const r=t[e];if("metadata"===r.kind&&"id3"===r.label)return Ie(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(t,e){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:i}}}=this;if(!r&&!i)return;const{samples:n}=e;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=Ue();if(s)for(let t=0;t<n.length;t++){const e=n[t].type;if(e===Be&&!r||!i)continue;const a=ut(n[t].data);if(a){const r=n[t].pts;let i=r+n[t].duration;i>je&&(i=je);i-r<=0&&(i=r+.25);for(let t=0;t<a.length;t++){const n=a[t];if(!lt(n)){this.updateId3CueEnds(r,e);const t=Ge(s,r,i,n,e);t&&this.id3Track.addCue(t)}}}}}updateId3CueEnds(t,e){var r;const i=null==(r=this.id3Track)?void 0:r.cues;if(i)for(let r=i.length;r--;){const n=i[r];n.type===e&&n.startTime<t&&n.endTime===je&&(n.endTime=t)}}onBufferFlushing(t,{startOffset:e,endOffset:r,type:i}){const{id3Track:n,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:o}}=s;if(n&&(a||o)){let t;t="audio"===i?t=>t.type===Ne&&o:"video"===i?t=>t.type===Be&&a:t=>t.type===Ne&&o||t.type===Be&&a,Oe(n,e,r,t)}}onLevelUpdated(t,{details:e}){if(!this.media||!e.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:i}=this,{dateRanges:n}=e,s=Object.keys(n);if(i){const t=Object.keys(r).filter((t=>!s.includes(t)));for(let e=t.length;e--;){const n=t[e];Object.keys(r[n].cues).forEach((t=>{i.removeCue(r[n].cues[t])})),delete r[n]}}const a=e.fragments[e.fragments.length-1];if(0===s.length||!m(null==a?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=a.programDateTime/1e3-a.start,l=Ue();for(let t=0;t<s.length;t++){const e=s[t],i=n[e],a=Ve(i.startDate,o),c=r[e],h=(null==c?void 0:c.cues)||{};let f=(null==c?void 0:c.durationKnown)||!1,g=je;const p=i.endDate;if(p)g=Ve(p,o),f=!0;else if(i.endOnNext&&!f){const t=s.reduce(((t,e)=>{if(e!==i.id){const r=n[e];if(r.class===i.class&&r.startDate>i.startDate&&(!t||i.startDate<t.startDate))return r}return t}),null);t&&(g=Ve(t.startDate,o),f=!0)}const m=Object.keys(i.attr);for(let t=0;t<m.length;t++){const r=m[t];if("ID"===(u=r)||"CLASS"===u||"START-DATE"===u||"DURATION"===u||"END-DATE"===u||"END-ON-NEXT"===u)continue;const n=h[r];if(n)f&&!c.durationKnown&&(n.endTime=g);else if(l){let t=i.attr[r];k(r)&&(d=t,t=Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer);const n=Ge(l,a,g,{key:r,data:t},Fe);n&&(n.id=e,this.id3Track.addCue(n),h[r]=n)}}r[e]={cues:h,dateRange:i,durationKnown:f}}var d,u}}class Ke{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=t,this.config=t.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:t,levelDetails:e}=this;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}get targetLatency(){const{levelDetails:t}=this;if(null===t)return null;const{holdBack:e,partHoldBack:r,targetduration:i}=t,{liveSyncDuration:n,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,o=this.hls.userConfig;let l=a&&r||e;(o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==n?n:s*i);const d=i;return l+Math.min(1*this.stallCount,d)}get liveSyncPosition(){const t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;const i=r.edge,n=t-e-this.edgeStalled,s=i-r.totalduration,a=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,n),a)}get drift(){const{levelDetails:t}=this;return null===t?1:t.drift}get edgeStalled(){const{levelDetails:t}=this;if(null===t)return 0;const e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}get forwardBufferLength(){const{media:t,levelDetails:e}=this;if(!t||!e)return 0;const r=t.buffered.length;return(r?t.buffered.end(r-1):e.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(b.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(b.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(b.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(b.ERROR,this.onError,this)}onMediaAttached(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(t,{details:e}){this.levelDetails=e,e.advanced&&this.timeupdate(),!e.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(t,e){var r;e.details===E.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&C.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:t,levelDetails:e}=this;if(!t||!e)return;this.currentTime=t.currentTime;const r=this.computeLatency();if(null===r)return;this._latency=r;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:n}=this.config;if(!i||1===n||!e.live)return;const s=this.targetLatency;if(null===s)return;const a=r-s;if(a<Math.min(this.maxLatency,s+e.targetduration)&&a>.05&&this.forwardBufferLength>1){const e=Math.min(2,Math.max(1,n)),r=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;t.playbackRate=Math.min(e,Math.max(1,r))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}estimateLiveEdge(){const{levelDetails:t}=this;return null===t?null:t.edge+t.age}computeLatency(){const t=this.estimateLiveEdge();return null===t?null:t-this.currentTime}}const ze=["NONE","TYPE-0","TYPE-1",null];const qe=["SDR","PQ","HLG"];var We="",Ye="YES",Xe="v2";class Ze{constructor(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}addDirectives(t){const e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href}}class Qe{constructor(t){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.frameRate=t.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.codecSet=[t.videoCodec,t.audioCodec].filter((t=>!!t)).map((t=>t.substring(0,4))).join(","),this.addGroupId("audio",t.attrs.AUDIO),this.addGroupId("text",t.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(t){return Je(this._audioGroups,t)}hasSubtitleGroup(t){return Je(this._subtitleGroups,t)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(t,e){if(e)if("audio"===t){let t=this._audioGroups;t||(t=this._audioGroups=[]),-1===t.indexOf(e)&&t.push(e)}else if("text"===t){let t=this._subtitleGroups;t||(t=this._subtitleGroups=[]),-1===t.indexOf(e)&&t.push(e)}}get urlId(){return 0}set urlId(t){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var t;return null==(t=this.audioGroups)?void 0:t[0]}get textGroupId(){var t;return null==(t=this.subtitleGroups)?void 0:t[0]}addFallback(){}}function Je(t,e){return!(!e||!t)&&-1!==t.indexOf(e)}function tr(t,e){const r=e.startPTS;if(m(r)){let i,n=0;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&(i.duration=n)}else if(e.sn>t.sn){t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration}else e.start=Math.max(t.start-e.duration,0)}function er(t,e,r,i,n,s){i-r<=0&&(C.warn("Fragment should have a positive duration",e),i=r+e.duration,s=n+e.duration);let a=r,o=i;const l=e.startPTS,d=e.endPTS;if(m(l)){const t=Math.abs(l-r);m(e.deltaPTS)?e.deltaPTS=Math.max(t,e.deltaPTS):e.deltaPTS=t,a=Math.max(r,l),r=Math.min(r,l),n=Math.min(n,e.startDTS),o=Math.min(i,d),i=Math.max(i,d),s=Math.max(s,e.endDTS)}const u=r-e.start;0!==e.start&&(e.start=r),e.duration=i-e.start,e.startPTS=r,e.maxStartPTS=a,e.startDTS=n,e.endPTS=i,e.minEndPTS=o,e.endDTS=s;const c=e.sn;if(!t||c<t.startSN||c>t.endSN)return 0;let h;const f=c-t.startSN,g=t.fragments;for(g[f]=e,h=f;h>0;h--)tr(g[h],g[h-1]);for(h=f;h<g.length-1;h++)tr(g[h],g[h+1]);return t.fragmentHint&&tr(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,u}function rr(t,e){let r=null;const i=t.fragments;for(let t=i.length-1;t>=0;t--){const e=i[t].initSegment;if(e){r=e;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let n,s=0;if(function(t,e,r){const i=e.skippedSegments,n=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let t=n;t<=s;t++){const n=l[a+t];let s=o[t];i&&!s&&t<i&&(s=e.fragments[t]=n),n&&s&&r(n,s)}}(t,e,((t,i)=>{t.relurl&&(s=t.cc-i.cc),m(t.startPTS)&&m(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(n=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,t.initSegment&&(i.initSegment=t.initSegment,r=t.initSegment)})),r){(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((t=>{var e;!t||t.initSegment&&t.initSegment.relurl!==(null==(e=r)?void 0:e.relurl)||(t.initSegment=r)}))}if(e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some((t=>!t)),e.deltaUpdateFailed){C.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let t=e.skippedSegments;t--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=function(t,e,r){const i=p({},t);r&&r.forEach((t=>{delete i[t]}));return Object.keys(e).forEach((t=>{const r=new D(e[t].attr,i[t]);r.isValid?i[t]=r:C.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[t].attr)}"`)})),i}(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const a=e.fragments;if(s){C.warn("discontinuity sliding from playlist, take drift into account");for(let t=0;t<a.length;t++)a[t].cc+=s}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e){let i=0;for(let n=0,s=t.length;n<=s;n++){const s=t[n],a=e[n+i];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?r(s,a):i--}}}(t.partList,e.partList,((t,e)=>{e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),n?er(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):ir(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const o=e.advancedDateTime;if(e.advanced&&o){const t=e.edge;e.driftStart||(e.driftStartTime=o,e.driftStart=t),e.driftEndTime=o,e.driftEnd=t}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function ir(t,e){const r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments;r<0||r>=i.length||nr(e,i[r].start)}function nr(t,e){if(e){const r=t.fragments;for(let i=t.skippedSegments;i<r.length;i++)r[i].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function sr(t,e,r){var i;return null!=t&&t.details?ar(null==(i=t.details)?void 0:i.partList,e,r):null}function ar(t,e,r){if(t)for(let i=t.length;i--;){const n=t[i];if(n.index===r&&n.fragment.sn===e)return n}return null}function or(t){t.forEach(((t,e)=>{const{details:r}=t;null!=r&&r.fragments&&r.fragments.forEach((t=>{t.level=e}))}))}function lr(t){switch(t.details){case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_TIMEOUT:case E.LEVEL_LOAD_TIMEOUT:case E.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function dr(t,e){const r=lr(e);return t.default[(r?"timeout":"error")+"Retry"]}function ur(t,e){const r="linear"===t.backoff?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function cr(t){return h(h({},t),{errorRetry:null,timeoutRetry:null})}function hr(t,e,r,i){if(!t)return!1;const n=null==i?void 0:i.code,s=e<t.maxNumRetry&&(function(t){return 0===t&&!1===navigator.onLine||!!t&&(t<400||t>499)}(n)||!!r);return t.shouldRetry?t.shouldRetry(t,e,r,i,s):s}const fr=function(t,e){let r=0,i=t.length-1,n=null,s=null;for(;r<=i;){n=(r+i)/2|0,s=t[n];const a=e(s);if(a>0)r=n+1;else{if(!(a<0))return s;i=n-1}}return null};function gr(t,e,r=0,i=0){let n=null;if(t){n=e[t.sn-e[0].sn+1]||null;const i=t.endDTS-r;i>0&&i<15e-7&&(r+=15e-7)}else 0===r&&0===e[0].start&&(n=e[0]);if(n&&(!t||t.level===n.level)&&0===pr(r,i,n))return n;const s=fr(e,pr.bind(null,r,i));return!s||s===t&&n?n:s}function pr(t=0,e=0,r){if(r.start<=t&&r.start+r.duration>t)return 0;const i=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=t?1:r.start-i>t&&r.start?-1:0}function mr(t,e,r){const i=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>t}var vr=0,yr=2,br=3,Tr=5,Er=0,Sr=1,wr=2;class $r{constructor(t,e){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=C.log.bind(C,`${e}:`),this.warn=C.warn.bind(C,`${e}:`),this.hls=t}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(t,e){const r=null==e?void 0:e.renditionReports;if(r){let i=-1;for(let n=0;n<r.length;n++){const s=r[n];let a;try{a=new self.URL(s.URI,e.url).href}catch(t){C.warn(`Could not construct new URL for Rendition Report: ${t}`),a=s.URI||""}if(a===t){i=n;break}a===t.substring(0,a.length)&&(i=n)}if(-1!==i){const t=r[i],n=parseInt(t["LAST-MSN"])||(null==e?void 0:e.lastPartSn);let s=parseInt(t["LAST-PART"])||(null==e?void 0:e.lastPartIndex);if(this.hls.config.lowLatencyMode){const t=Math.min(e.age-e.partTarget,e.targetduration);s>=0&&t>e.partTarget&&(s+=1)}return new Ze(n,s>=0?s:void 0,We)}}}loadPlaylist(t){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)}shouldReloadPlaylist(t){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(t)}playlistLoaded(t,e,r){const{details:i,stats:n}=e,s=self.performance.now(),a=n.loading.first?Math.max(0,s-n.loading.first):0;if(i.advancedDateTime=Date.now()-a,i.live||null!=r&&r.live){if(i.reloaded(r),r&&this.log(`live playlist ${t} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),r&&i.fragments.length>0&&rr(r,i),!this.canLoad||!i.live)return;let a,o,l;if(i.canBlockReload&&i.endSN&&i.advanced){const t=this.hls.config.lowLatencyMode,n=i.lastPartSn,s=i.endSN,d=i.lastPartIndex,u=n===s;-1!==d?(o=u?s+1:n,l=u?t?0:d:d+1):o=s+1;const c=i.age,h=c+i.ageHeader;let f=Math.min(h-i.partTarget,1.5*i.targetduration);if(f>0){if(r&&f>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${f} with playlist age: ${i.age}`),f=0;else{const t=Math.floor(f/i.targetduration);if(o+=t,void 0!==l){l+=Math.round(f%i.targetduration/i.partTarget)}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${c.toFixed(2)}s goal: ${f} skip sn ${t} to part ${l}`)}i.tuneInGoal=f}if(a=this.getDeliveryDirectives(i,e.deliveryDirectives,o,l),t||!u)return void this.loadPlaylist(a)}else(i.canBlockReload||i.canSkipUntil)&&(a=this.getDeliveryDirectives(i,e.deliveryDirectives,o,l));const d=this.hls.mainForwardBufferInfo,u=d?d.end-d.len:0,c=function(t,e=1/0){let r=1e3*t.targetduration;if(t.updated){const i=t.fragments,n=4;if(i.length&&r*n>e){const t=1e3*i[i.length-1].duration;t<r&&(r=t)}}else r/=2;return Math.round(r)}(i,1e3*(i.edge-u));i.updated&&s>this.requestScheduled+c&&(this.requestScheduled=n.loading.start),void 0!==o&&i.canBlockReload?this.requestScheduled=n.loading.first+c-(1e3*i.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+c<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=c);let h=this.requestScheduled-s;h=Math.max(0,h),this.log(`reload live playlist ${t} in ${Math.round(h)} ms`),this.timer=self.setTimeout((()=>this.loadPlaylist(a)),h)}else this.clearTimer()}getDeliveryDirectives(t,e,r,i){let n=function(t,e){const{canSkipUntil:r,canSkipDateRanges:i,endSN:n}=t;return r&&(void 0!==e?e-n:0)<r?i?Xe:Ye:We}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,i=e.part,n=We),new Ze(r,i,n)}checkRetry(t){const e=t.details,r=lr(t),i=t.errorAction,{action:n,retryCount:s=0,retryConfig:a}=i||{},o=!!i&&!!a&&(n===Tr||!i.resolved&&n===yr);if(o){var l;if(this.requestScheduled=-1,s>=a.maxNumRetry)return!1;if(r&&null!=(l=t.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${e}" without delivery-directives`),this.loadPlaylist();else{const t=ur(a,s);this.timer=self.setTimeout((()=>this.loadPlaylist()),t),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${e}" in ${t}ms`)}t.levelRetry=!0,i.resolved=!0}return o}}class Ar{constructor(t,e=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}sample(t,e){const r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_}}class Cr{constructor(t,e,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ar(t),this.fast_=new Ar(e),this.defaultTTFB_=i,this.ttfb_=new Ar(t)}update(t,e){const{slow_:r,fast_:i,ttfb_:n}=this;r.halfLife!==t&&(this.slow_=new Ar(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.fast_=new Ar(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.ttfb_=new Ar(t,n.getEstimate(),n.getTotalWeight()))}sample(t,e){const r=(t=Math.max(t,this.minDelayMs_))/1e3,i=8*e/r;this.fast_.sample(r,i),this.slow_.sample(r,i)}sampleTTFB(t){const e=t/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(r,Math.max(t,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const Lr={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},xr={};function Rr(t,e,r,i,n,s){const a=t.audioCodec?t.audioGroups:null,o=null==s?void 0:s.audioCodec,l=null==s?void 0:s.channels,d=l?parseInt(l):o?1/0:2;let u=null;if(null!=a&&a.length)try{u=1===a.length&&a[0]?e.groups[a[0]].channels:a.reduce(((t,r)=>{if(r){const i=e.groups[r];if(!i)throw new Error(`Audio track group ${r} not found`);Object.keys(i.channels).forEach((e=>{t[e]=(t[e]||0)+i.channels[e]}))}return t}),{2:0})}catch(t){return!0}return void 0!==t.videoCodec&&(t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(i,30)||"SDR"!==t.videoRange&&t.videoRange!==r||t.bitrate>Math.max(n,8e6))||!!u&&m(d)&&Object.keys(u).some((t=>parseInt(t)>d))}function kr(t,e,r){const i=t.videoCodec,n=t.audioCodec;if(!i||!n||!r)return Promise.resolve(Lr);const s={width:t.width,height:t.height,bitrate:Math.ceil(Math.max(.9*t.bitrate,t.averageBitrate)),framerate:t.frameRate||30},a=t.videoRange;"SDR"!==a&&(s.transferFunction=a.toLowerCase());const o=i.split(",").map((t=>({type:"media-source",video:h(h({},s),{},{contentType:re(t,"video")})})));return n&&t.audioGroups&&t.audioGroups.forEach((t=>{var r;t&&(null==(r=e.groups[t])||r.tracks.forEach((e=>{if(e.groupId===t){const t=e.channels||"",r=parseFloat(t);m(r)&&r>2&&o.push.apply(o,n.split(",").map((t=>({type:"media-source",audio:{contentType:re(t,"audio"),channels:""+r}}))))}})))})),Promise.all(o.map((t=>{const e=function(t){const{audio:e,video:r}=t,i=r||e;if(i){const t=i.contentType.split('"')[1];if(r)return`r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${t}_${Math.ceil(r.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${t}`}return""}(t);return xr[e]||(xr[e]=r.decodingInfo(t))}))).then((t=>({supported:!t.some((t=>!t.supported)),configurations:o,decodingInfoResults:t}))).catch((t=>({supported:!1,configurations:o,decodingInfoResults:[],error:t})))}function Dr(t,e){let r=!1,i=[];return t&&(r="SDR"!==t,i=[t]),e&&(i=e.allowedVideoRanges||qe.slice(0),r=void 0!==e.preferHDR?e.preferHDR:function(){if("function"==typeof matchMedia){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return!0===t.matches}return!1}(),i=r?i.filter((t=>"SDR"!==t)):["SDR"]),{preferHDR:r,allowedVideoRanges:i}}function Ir(t,e){C.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function Pr(t,e,r){if("attrs"in t){const r=e.indexOf(t);if(-1!==r)return r}for(let i=0;i<e.length;i++){if(_r(t,e[i],r))return i}return-1}function _r(t,e,r){const{groupId:i,name:n,lang:s,assocLang:a,characteristics:o,default:l}=t,d=t.forced;return(void 0===i||e.groupId===i)&&(void 0===n||e.name===n)&&(void 0===s||e.lang===s)&&(void 0===s||e.assocLang===a)&&(void 0===l||e.default===l)&&(void 0===d||e.forced===d)&&(void 0===o||function(t,e=""){const r=t.split(","),i=e.split(",");return r.length===i.length&&!r.some((t=>-1===i.indexOf(t)))}(o,e.characteristics))&&(void 0===r||r(t,e))}function Or(t,e){const{audioCodec:r,channels:i}=t;return!(void 0!==r&&(e.audioCodec||"").substring(0,4)!==r.substring(0,4)||void 0!==i&&i!==(e.channels||"2"))}function Mr(t,e,r){for(let i=e;i;i--)if(r(t[i]))return i;for(let i=e+1;i<t.length;i++)if(r(t[i]))return i;return-1}class Nr{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(t){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var Fr="NOT_LOADED",Br="APPENDING",Ur="PARTIAL",Gr="OK";class jr{constructor(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(b.BUFFER_APPENDED,this.onBufferAppended,this),t.on(b.FRAG_BUFFERED,this.onFragBuffered,this),t.on(b.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:t}=this;t.off(b.BUFFER_APPENDED,this.onBufferAppended,this),t.off(b.FRAG_BUFFERED,this.onFragBuffered,this),t.off(b.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(t,e){const r=this.activePartLists[e];if(r)for(let e=r.length;e--;){const i=r[e];if(!i)break;const n=i.end;if(i.start<=t&&null!==n&&t<=n)return i}return this.getBufferedFrag(t,e)}getBufferedFrag(t,e){const{fragments:r}=this,i=Object.keys(r);for(let n=i.length;n--;){const s=r[i[n]];if((null==s?void 0:s.body.type)===e&&s.buffered){const e=s.body;if(e.start<=t&&t<=e.end)return e}}return null}detectEvictedFragments(t,e,r,i){this.timeRanges&&(this.timeRanges[t]=e);const n=(null==i?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach((i=>{const s=this.fragments[i];if(!s)return;if(n>=s.body.sn)return;if(!s.buffered&&!s.loaded)return void(s.body.type===r&&this.removeFragment(s.body));const a=s.range[t];a&&a.time.some((t=>{const r=!this.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&this.removeFragment(s.body),r}))}))}detectPartialFragments(t){const e=this.timeRanges,{frag:r,part:i}=t;if(!e||"initSegment"===r.sn)return;const n=Hr(r),s=this.fragments[n];if(!s||s.buffered&&r.gap)return;const a=!r.relurl;if(Object.keys(e).forEach((t=>{const n=r.elementaryStreams[t];if(!n)return;const o=e[t],l=a||!0===n.partial;s.range[t]=this.getBufferedTimes(r,i,l,o)})),s.loaded=null,Object.keys(s.range).length){s.buffered=!0;(s.body.endList=r.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),Vr(s)||this.removeParts(r.sn-1,r.type)}else this.removeFragment(s.body)}removeParts(t,e){const r=this.activePartLists[e];r&&(this.activePartLists[e]=r.filter((e=>e.fragment.sn>=t)))}fragBuffered(t,e){const r=Hr(t);let i=this.fragments[r];!i&&e&&(i=this.fragments[r]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(t,e,r,i){const n={time:[],partial:r},s=t.start,a=t.end,o=t.minEndPTS||a,l=t.maxStartPTS||s;for(let t=0;t<i.length;t++){const e=i.start(t)-this.bufferPadding,r=i.end(t)+this.bufferPadding;if(l>=e&&o<=r){n.time.push({startPTS:Math.max(s,i.start(t)),endPTS:Math.min(a,i.end(t))});break}if(s<r&&a>e){const e=Math.max(s,i.start(t)),r=Math.min(a,i.end(t));r>e&&(n.partial=!0,n.time.push({startPTS:e,endPTS:r}))}else if(a<=e)break}return n}getPartialFragment(t){let e,r,i,n=null,s=0;const{bufferPadding:a,fragments:o}=this;return Object.keys(o).forEach((l=>{const d=o[l];d&&Vr(d)&&(r=d.body.start-a,i=d.body.end+a,t>=r&&t<=i&&(e=Math.min(t-r,i-t),s<=e&&(n=d.body,s=e)))})),n}isEndListAppended(t){const e=this.endListFragments[t];return void 0!==e&&(e.buffered||Vr(e))}getState(t){const e=Hr(t),r=this.fragments[e];return r?r.buffered?Vr(r)?Ur:Gr:Br:Fr}isTimeBuffered(t,e,r){let i,n;for(let s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,n=r.end(s)+this.bufferPadding,t>=i&&e<=n)return!0;if(e<=i)return!1}return!1}onFragLoaded(t,e){const{frag:r,part:i}=e;if("initSegment"===r.sn||r.bitrateTest)return;const n=i?null:e,s=Hr(r);this.fragments[s]={body:r,appendedPTS:null,loaded:n,buffered:!1,range:Object.create(null)}}onBufferAppended(t,e){const{frag:r,part:i,timeRanges:n}=e;if("initSegment"===r.sn)return;const s=r.type;if(i){let t=this.activePartLists[s];t||(this.activePartLists[s]=t=[]),t.push(i)}this.timeRanges=n,Object.keys(n).forEach((t=>{const e=n[t];this.detectEvictedFragments(t,e,s,i)}))}onFragBuffered(t,e){this.detectPartialFragments(e)}hasFragment(t){const e=Hr(t);return!!this.fragments[e]}hasParts(t){var e;return!(null==(e=this.activePartLists[t])||!e.length)}removeFragmentsInRange(t,e,r,i,n){i&&!this.hasGaps||Object.keys(this.fragments).forEach((s=>{const a=this.fragments[s];if(!a)return;const o=a.body;o.type!==r||i&&!o.gap||o.start<e&&o.end>t&&(a.buffered||n)&&this.removeFragment(o)}))}removeFragment(t){const e=Hr(t);t.stats.loaded=0,t.clearElementaryStreamInfo();const r=this.activePartLists[t.type];if(r){const e=t.sn;this.activePartLists[t.type]=r.filter((t=>t.fragment.sn!==e))}delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Vr(t){var e,r,i;return t.buffered&&(t.body.gap||(null==(e=t.range.video)?void 0:e.partial)||(null==(r=t.range.audio)?void 0:r.partial)||(null==(i=t.range.audiovideo)?void 0:i.partial))}function Hr(t){return`${t.type}_${t.level}_${t.sn}`}const Kr={length:0,start:()=>0,end:()=>0};class zr{static isBuffered(t,e){try{if(t){const r=zr.getBuffered(t);for(let t=0;t<r.length;t++)if(e>=r.start(t)&&e<=r.end(t))return!0}}catch(t){}return!1}static bufferInfo(t,e,r){try{if(t){const i=zr.getBuffered(t),n=[];let s;for(s=0;s<i.length;s++)n.push({start:i.start(s),end:i.end(s)});return this.bufferedInfo(n,e,r)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}}static bufferedInfo(t,e,r){e=Math.max(0,e),t.sort((function(t,e){const r=t.start-e.start;return r||e.end-t.end}));let i=[];if(r)for(let e=0;e<t.length;e++){const n=i.length;if(n){const s=i[n-1].end;t[e].start-s<r?t[e].end>s&&(i[n-1].end=t[e].end):i.push(t[e])}else i.push(t[e])}else i=t;let n,s=0,a=e,o=e;for(let t=0;t<i.length;t++){const l=i[t].start,d=i[t].end;if(e+r>=l&&e<d)a=l,o=d,s=o-e;else if(e+r<l){n=l;break}}return{len:s,start:a||0,end:o||0,nextStart:n}}static getBuffered(t){try{return t.buffered}catch(t){return C.log("failed to get media.buffered",t),Kr}}}class qr{constructor(t,e,r,i=0,n=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=i,this.part=n,this.partial=s}}function Wr(t,e){for(let i=0,n=t.length;i<n;i++){var r;if((null==(r=t[i])?void 0:r.cc)===e)return t[i]}return null}function Yr(t,e){if(t){const r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function Xr(t,e){const r=e.fragments;for(let e=0,i=r.length;e<i;e++)Yr(r[e],t);e.fragmentHint&&Yr(e.fragmentHint,t),e.alignedSliding=!0}function Zr(t,e,r){e&&(!function(t,e,r){if(function(t,e,r){return!(!e||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){const t=function(t,e){const r=t.fragments,i=e.fragments;if(!i.length||!r.length)return void C.log("No fragments to align");const n=Wr(r,i[0].cc);if(n&&(!n||n.startPTS))return n;C.log("No frag in previous level to align on")}(r,e);t&&m(t.start)&&(C.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Xr(t.start,e))}}(t,r,e),!r.alignedSliding&&e&&Qr(r,e),r.alignedSliding||!e||r.skippedSegments||ir(e,r))}function Qr(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const r=t.fragments,i=e.fragments;if(!r.length||!i.length)return;let n,s;const a=Math.min(e.endCC,t.endCC);e.startCC<a&&t.startCC<a&&(n=Wr(i,a),s=Wr(r,a)),n&&s||(n=i[Math.floor(i.length/2)],s=Wr(r,n.cc)||r[Math.floor(r.length/2)]);const o=n.programDateTime,l=s.programDateTime;if(!o||!l)return;Xr((l-o)/1e3-(s.start-n.start),t)}const Jr=Math.pow(2,17);class ti{constructor(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(t,e){const r=t.url;if(!r)return Promise.reject(new ii({type:T.NETWORK_ERROR,details:E.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();const i=this.config,n=i.fLoader,s=i.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),t.gap){if(t.tagList.some((t=>"GAP"===t[0])))return void o(ri(t));t.gap=!1}const l=this.loader=t.loader=n?new n(i):new s(i),d=ei(t),u=cr(i.fragLoadPolicy.default),c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:Jr};t.stats=l.stats,l.load(d,c,{onSuccess:(e,r,i,n)=>{this.resetLoader(t,l);let s=e.data;i.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),a({frag:t,part:null,payload:s,networkDetails:n})},onError:(e,i,n,s)=>{this.resetLoader(t,l),o(new ii({type:T.NETWORK_ERROR,details:E.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:h({url:r,data:void 0},e),error:new Error(`HTTP Error ${e.code} ${e.text}`),networkDetails:n,stats:s}))},onAbort:(e,r,i)=>{this.resetLoader(t,l),o(new ii({type:T.NETWORK_ERROR,details:E.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:i,stats:e}))},onTimeout:(e,r,i)=>{this.resetLoader(t,l),o(new ii({type:T.NETWORK_ERROR,details:E.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error(`Timeout after ${c.timeout}ms`),networkDetails:i,stats:e}))},onProgress:(r,i,n,s)=>{e&&e({frag:t,part:null,payload:n,networkDetails:s})}})}))}loadPart(t,e,r){this.abort();const i=this.config,n=i.fLoader,s=i.loader;return new Promise(((a,o)=>{if(this.loader&&this.loader.destroy(),t.gap||e.gap)return void o(ri(t,e));const l=this.loader=t.loader=n?new n(i):new s(i),d=ei(t,e),u=cr(i.fragLoadPolicy.default),c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Jr};e.stats=l.stats,l.load(d,c,{onSuccess:(i,n,s,o)=>{this.resetLoader(t,l),this.updateStatsFromPart(t,e);const d={frag:t,part:e,payload:i.data,networkDetails:o};r(d),a(d)},onError:(r,i,n,s)=>{this.resetLoader(t,l),o(new ii({type:T.NETWORK_ERROR,details:E.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:h({url:d.url,data:void 0},r),error:new Error(`HTTP Error ${r.code} ${r.text}`),networkDetails:n,stats:s}))},onAbort:(r,i,n)=>{t.stats.aborted=e.stats.aborted,this.resetLoader(t,l),o(new ii({type:T.NETWORK_ERROR,details:E.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,error:new Error("Aborted"),networkDetails:n,stats:r}))},onTimeout:(r,i,n)=>{this.resetLoader(t,l),o(new ii({type:T.NETWORK_ERROR,details:E.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,error:new Error(`Timeout after ${c.timeout}ms`),networkDetails:n,stats:r}))}})}))}updateStatsFromPart(t,e){const r=t.stats,i=e.stats,n=i.total;if(r.loaded+=i.loaded,n){const i=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/n),i),a=(i-s)*Math.round(r.loaded/s);r.total=r.loaded+a}else r.total=Math.max(r.loaded,r.total);const s=r.loading,a=i.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()}}function ei(t,e=null){const r=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(m(n)&&m(s)){var a;let e=n,r=s;if("initSegment"===t.sn&&"AES-128"===(null==(a=t.decryptdata)?void 0:a.method)){const t=s-n;t%16&&(r=s+(16-t%16)),0!==n&&(i.resetIV=!0,e=n-16)}i.rangeStart=e,i.rangeEnd=r}return i}function ri(t,e){const r=new Error(`GAP ${t.gap?"tag":"attribute"} found`),i={type:T.MEDIA_ERROR,details:E.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new ii(i)}class ii extends Error{constructor(t){super(t.error.message),this.data=void 0,this.data=t}}class ni{constructor(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}decrypt(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)}}class si{constructor(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class ai{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(t){const e=new DataView(t),r=new Uint32Array(4);for(let t=0;t<4;t++)r[t]=e.getUint32(4*t);return r}initTable(){const t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],n=r[1],s=r[2],a=r[3],o=this.invSubMix,l=o[0],d=o[1],u=o[2],c=o[3],h=new Uint32Array(256);let f=0,g=0,p=0;for(p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){let r=g^g<<1^g<<2^g<<3^g<<4;r=r>>>8^255&r^99,t[f]=r,e[r]=f;const o=h[f],p=h[o],m=h[p];let v=257*h[r]^16843008*r;i[f]=v<<24|v>>>8,n[f]=v<<16|v>>>16,s[f]=v<<8|v>>>24,a[f]=v,v=16843009*m^65537*p^257*o^16843008*f,l[r]=v<<24|v>>>8,d[r]=v<<16|v>>>16,u[r]=v<<8|v>>>24,c[r]=v,f?(f=o^h[h[h[m^o]]],g^=h[h[g]]):f=g=1}}expandKey(t){const e=this.uint8ArrayToUint32Array_(t);let r=!0,i=0;for(;i<e.length&&r;)r=e[i]===this.key[i],i++;if(r)return;this.key=e;const n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);const s=this.ksRows=4*(n+6+1);let a,o;const l=this.keySchedule=new Uint32Array(s),d=this.invKeySchedule=new Uint32Array(s),u=this.sBox,c=this.rcon,h=this.invSubMix,f=h[0],g=h[1],p=h[2],m=h[3];let v,y;for(a=0;a<s;a++)a<n?v=l[a]=e[a]:(y=v,a%n==0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=c[a/n|0]<<24):n>6&&a%n==4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[a]=v=(l[a-n]^y)>>>0);for(o=0;o<s;o++)a=s-o,y=3&o?l[a]:l[a-4],d[o]=o<4||a<=4?y:f[u[y>>>24]]^g[u[y>>>16&255]]^p[u[y>>>8&255]]^m[u[255&y]],d[o]=d[o]>>>0}networkToHostOrderSwap(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}decrypt(t,e,r){const i=this.keySize+6,n=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,o=a[0],l=a[1],d=a[2],u=a[3],c=this.uint8ArrayToUint32Array_(r);let h=c[0],f=c[1],g=c[2],p=c[3];const m=new Int32Array(t),v=new Int32Array(m.length);let y,b,T,E,S,w,$,A,C,L,x,R,k,D;const I=this.networkToHostOrderSwap;for(;e<m.length;){for(C=I(m[e]),L=I(m[e+1]),x=I(m[e+2]),R=I(m[e+3]),S=C^n[0],w=R^n[1],$=x^n[2],A=L^n[3],k=4,D=1;D<i;D++)y=o[S>>>24]^l[w>>16&255]^d[$>>8&255]^u[255&A]^n[k],b=o[w>>>24]^l[$>>16&255]^d[A>>8&255]^u[255&S]^n[k+1],T=o[$>>>24]^l[A>>16&255]^d[S>>8&255]^u[255&w]^n[k+2],E=o[A>>>24]^l[S>>16&255]^d[w>>8&255]^u[255&$]^n[k+3],S=y,w=b,$=T,A=E,k+=4;y=s[S>>>24]<<24^s[w>>16&255]<<16^s[$>>8&255]<<8^s[255&A]^n[k],b=s[w>>>24]<<24^s[$>>16&255]<<16^s[A>>8&255]<<8^s[255&S]^n[k+1],T=s[$>>>24]<<24^s[A>>16&255]<<16^s[S>>8&255]<<8^s[255&w]^n[k+2],E=s[A>>>24]<<24^s[S>>16&255]<<16^s[w>>8&255]<<8^s[255&$]^n[k+3],v[e]=I(y^h),v[e+1]=I(E^f),v[e+2]=I(T^g),v[e+3]=I(b^p),h=C,f=L,g=x,p=R,e+=4}return v.buffer}}class oi{constructor(t,{removePKCS7Padding:e=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=t.enableSoftwareAES,this.removePKCS7Padding=e,e)try{const t=self.crypto;t&&(this.subtle=t.subtle||t.webkitSubtle)}catch(t){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:t,remainderData:e}=this;if(!t||e)return this.reset(),null;const r=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?function(t){const e=t.byteLength,r=e&&new DataView(t.buffer).getUint8(e-1);return r?et(t,0,e-r):t}(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(t,e,r){return this.useSoftware?new Promise(((i,n)=>{this.softwareDecrypt(new Uint8Array(t),e,r);const s=this.flush();s?i(s.buffer):n(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(t),e,r)}softwareDecrypt(t,e,r){const{currentIV:i,currentResult:n,remainderData:s}=this;this.logOnce("JS AES decrypt"),s&&(t=Ft(s,t),this.remainderData=null);const a=this.getValidChunk(t);if(!a.length)return null;i&&(r=i);let o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new ai),o.expandKey(e);const l=n;return this.currentResult=o.decrypt(a.buffer,0,r),this.currentIV=et(a,-16).buffer,l||null}webCryptoDecrypt(t,e,r){const i=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new si(i,e)),this.fastAesKey.expandKey().then((e=>{if(!i)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new ni(i,new Uint8Array(r)).decrypt(t.buffer,e)})).catch((i=>(C.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(t,e,r))))}onWebCryptoError(t,e,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,r);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(t){let e=t;const r=t.length-t.length%16;return r!==t.length&&(e=et(t,0,r),this.remainderData=et(t,r)),e}logOnce(t){this.logEnabled&&(C.log(`[decrypter]: ${t}`),this.logEnabled=!1)}}const li=function(t){let e="";const r=t.length;for(let i=0;i<r;i++)e+=`[${t.start(i).toFixed(3)}-${t.end(i).toFixed(3)}]`;return e},di="STOPPED",ui="IDLE",ci="KEY_LOADING",hi="FRAG_LOADING",fi="FRAG_LOADING_WAITING_RETRY",gi="WAITING_TRACK",pi="PARSING",mi="PARSED",vi="ENDED",yi="ERROR",bi="WAITING_INIT_PTS",Ti="WAITING_LEVEL";class Ei extends Nr{constructor(t,e,r,i,n){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=di,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=n,this.logPrefix=i,this.log=C.log.bind(C,`${i}:`),this.warn=C.warn.bind(C,`${i}:`),this.hls=t,this.fragmentLoader=new ti(t.config),this.keyLoader=r,this.fragmentTracker=e,this.config=t.config,this.decrypter=new oi(t.config),t.on(b.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(t){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const t=this.fragCurrent;null!=t&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=di}_streamEnded(t,e){if(e.live||t.nextStart||!t.end||!this.media)return!1;const r=e.partList;if(null!=r&&r.length){const t=r[r.length-1];return zr.isBuffered(this.media,t.start+t.duration/2)}const i=e.fragments[e.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){var t;if(this.levels&&null!==this.levelLastLoaded)return null==(t=this.levelLastLoaded)?void 0:t.details}onMediaAttached(t,e){const r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===di&&this.startLoad(i.startPosition)}onMediaDetaching(){const t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:t,fragCurrent:e,media:r,mediaBuffer:i,state:n}=this,s=r?r.currentTime:0,a=zr.bufferInfo(i||r,s,t.maxBufferHole);if(this.log(`media seeking to ${m(s)?s.toFixed(3):s}, state: ${n}`),this.state===vi)this.resetLoadingState();else if(e){const r=t.maxFragLookUpTolerance,i=e.start-r,n=e.start+e.duration+r;if(!a.len||n<a.start||i>a.end){const t=s>n;(s<i||t)&&(t&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0),this.lastCurrentTime=s),this.loadedmetadata||a.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(t,e){this.startTimeOffset=e.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=di,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(t,e,r){this._loadFragForPlayback(t,e,r)}_loadFragForPlayback(t,e,r){this._doFragLoad(t,e,r,(e=>{if(this.fragContextChanged(t))return this.warn(`Fragment ${t.sn}${e.part?" p: "+e.part.index:""} of level ${t.level} was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)})).then((e=>{if(!e)return;const r=this.state;this.fragContextChanged(t)?(r===hi||!this.fragCurrent&&r===pi)&&(this.fragmentTracker.removeFragment(t),this.state=ui):("payload"in e&&(this.log(`Loaded fragment ${t.sn} of level ${t.level}`),this.hls.trigger(b.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))})).catch((e=>{this.state!==di&&this.state!==yi&&(this.warn(e),this.resetFragmentLoading(t))}))}clearTrackerIfNeeded(t){var e;const{fragmentTracker:r}=this;if(r.getState(t)===Br){const e=t.type,i=this.getFwdBufferInfo(this.mediaBuffer,e),n=Math.max(t.duration,i?i.len:this.config.maxBufferLength);this.reduceMaxBufferLength(n)&&r.removeFragment(t)}else 0===(null==(e=this.mediaBuffer)?void 0:e.buffered.length)?r.removeAllFragments():r.hasParts(t.type)&&(r.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),r.getState(t)===Ur&&r.removeFragment(t))}checkLiveUpdate(t){if(t.updated&&!t.live){const e=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)}flushMainBuffer(t,e,r=null){if(!(t-e))return;const i={startOffset:t,endOffset:e,type:r};this.hls.trigger(b.BUFFER_FLUSHING,i)}_loadInitSegment(t,e){this._doFragLoad(t,e).then((e=>{if(!e||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e})).then((e=>{const{hls:r}=this,{payload:i}=e,n=t.decryptdata;if(i&&i.byteLength>0&&null!=n&&n.key&&n.iv&&"AES-128"===n.method){const s=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer).catch((e=>{throw r.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((i=>{const n=self.performance.now();return r.trigger(b.FRAG_DECRYPTED,{frag:t,payload:i,stats:{tstart:s,tdecrypt:n}}),e.payload=i,this.completeInitSegmentLoad(e)}))}return this.completeInitSegmentLoad(e)})).catch((e=>{this.state!==di&&this.state!==yi&&(this.warn(e),this.resetFragmentLoading(t))}))}completeInitSegmentLoad(t){const{levels:e}=this;if(!e)throw new Error("init load aborted, missing levels");const r=t.frag.stats;this.state=ui,t.frag.data=new Uint8Array(t.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(t){const{fragCurrent:e}=this;return!t||!e||t.sn!==e.sn||t.level!==e.level}fragBufferedComplete(t,e){var r,i,n,s;const a=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${t.type} sn: ${t.sn}${e?" part: "+e.index:""} of ${this.playlistType===Ce?"level":"track"} ${t.level} (frag:[${(null!=(r=t.startPTS)?r:NaN).toFixed(3)}-${(null!=(i=t.endPTS)?i:NaN).toFixed(3)}] > buffer:${a?li(zr.getBuffered(a)):"(detached)"})`),"initSegment"!==t.sn){var o;if(t.type!==xe){const e=t.elementaryStreams;if(!Object.keys(e).some((t=>!!e[t])))return void(this.state=ui)}const e=null==(o=this.levels)?void 0:o[t.level];null!=e&&e.fragmentError&&(this.log(`Resetting level fragment error count of ${e.fragmentError} on frag buffered`),e.fragmentError=0)}this.state=ui,a&&(!this.loadedmetadata&&t.type==Ce&&a.buffered.length&&(null==(n=this.fragCurrent)?void 0:n.sn)===(null==(s=this.fragPrevious)?void 0:s.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(t){const{transmuxer:e}=this;if(!e)return;const{frag:r,part:i,partsLoaded:n}=t,s=!n||0===n.length||n.some((t=>!t)),a=new qr(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!s);e.flush(a)}_handleFragmentLoadProgress(t){}_doFragLoad(t,e,r=null,i){var n;const s=null==e?void 0:e.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;if(!t.encrypted||null!=(n=t.decryptdata)&&n.key?!t.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(t,s.encryptedFragments):(this.log(`Loading key for ${t.sn} of [${s.startSN}-${s.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${t.level}`),this.state=ci,this.fragCurrent=t,a=this.keyLoader.load(t).then((t=>{if(!this.fragContextChanged(t.frag))return this.hls.trigger(b.KEY_LOADED,t),this.state===ci&&(this.state=ui),t})),this.hls.trigger(b.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),r=Math.max(t.start,r||0),this.config.lowLatencyMode&&"initSegment"!==t.sn){const n=s.partList;if(n&&i){r>t.end&&s.fragmentHint&&(t=s.fragmentHint);const o=this.getNextPart(n,t,r);if(o>-1){const l=n[o];let d;return this.log(`Loading part sn: ${t.sn} p: ${l.index} cc: ${t.cc} of playlist [${s.startSN}-${s.endSN}] parts [0-${o}-${n.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${t.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=hi,d=a?a.then((r=>!r||this.fragContextChanged(r.frag)?null:this.doFragPartsLoad(t,l,e,i))).catch((t=>this.handleFragLoadError(t))):this.doFragPartsLoad(t,l,e,i).catch((t=>this.handleFragLoadError(t))),this.hls.trigger(b.FRAG_LOADING,{frag:t,part:l,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}if(!t.url||this.loadedEndOfParts(n,r))return Promise.resolve(null)}}this.log(`Loading fragment ${t.sn} cc: ${t.cc} ${s?"of ["+s.startSN+"-"+s.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${t.level}, target: ${parseFloat(r.toFixed(3))}`),m(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=hi;const o=this.config.progressive;let l;return l=o&&a?a.then((e=>!e||this.fragContextChanged(null==e?void 0:e.frag)?null:this.fragmentLoader.load(t,i))).catch((t=>this.handleFragLoadError(t))):Promise.all([this.fragmentLoader.load(t,o?i:void 0),a]).then((([t])=>(!o&&t&&i&&i(t),t))).catch((t=>this.handleFragLoadError(t))),this.hls.trigger(b.FRAG_LOADING,{frag:t,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):l}doFragPartsLoad(t,e,r,i){return new Promise(((n,s)=>{var a;const o=[],l=null==(a=r.details)?void 0:a.partList,d=e=>{this.fragmentLoader.loadPart(t,e,i).then((i=>{o[e.index]=i;const s=i.part;this.hls.trigger(b.FRAG_LOADED,i);const a=sr(r,t.sn,e.index+1)||ar(l,t.sn,e.index+1);if(!a)return n({frag:t,part:s,partsLoaded:o});d(a)})).catch(s)};d(e)}))}handleFragLoadError(t){if("data"in t){const e=t.data;t.data&&e.details===E.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(b.ERROR,e)}else this.hls.trigger(b.ERROR,{type:T.OTHER_ERROR,details:E.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null}_handleTransmuxerFlush(t){const e=this.getCurrentContext(t);if(!e||this.state!==pi)return void(this.fragCurrent||this.state===di||this.state===yi||(this.state=ui));const{frag:r,part:i,level:n}=e,s=self.performance.now();r.stats.parsing.end=s,i&&(i.stats.parsing.end=s),this.updateLevelTiming(r,i,n,t.partial)}getCurrentContext(t){const{levels:e,fragCurrent:r}=this,{level:i,sn:n,part:s}=t;if(null==e||!e[i])return this.warn(`Levels object was unset while buffering fragment ${n} of level ${i}. The current chunk will not be buffered.`),null;const a=e[i],o=s>-1?sr(a,n,s):null,l=o?o.fragment:function(t,e,r){if(null==t||!t.details)return null;const i=t.details;let n=i.fragments[e-i.startSN];return n||(n=i.fragmentHint,n&&n.sn===e?n:e<i.startSN&&r&&r.sn===e?r:null)}(a,n,r);return l?(r&&r!==l&&(l.stats=r.stats),{frag:l,part:o,level:a}):null}bufferFragmentData(t,e,r,i,n){var s;if(!t||this.state!==pi)return;const{data1:a,data2:o}=t;let l=a;if(a&&o&&(l=Ft(a,o)),null==(s=l)||!s.length)return;const d={type:t.type,frag:e,part:r,chunkMeta:i,parent:e.type,data:l};if(this.hls.trigger(b.BUFFER_APPENDING,d),t.dropped&&t.independent&&!r){if(n)return;this.flushBufferGap(e)}}flushBufferGap(t){const e=this.media;if(!e)return;if(!zr.isBuffered(e,e.currentTime))return void this.flushMainBuffer(0,t.start);const r=e.currentTime,i=zr.bufferInfo(e,r,0),n=t.duration,s=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),a=Math.max(Math.min(t.start-s,i.end-s),r+s);t.start-a>s&&this.flushMainBuffer(a,t.start)}getFwdBufferInfo(t,e){const r=this.getLoadPosition();return m(r)?this.getFwdBufferInfoAtPos(t,r,e):null}getFwdBufferInfoAtPos(t,e,r){const{config:{maxBufferHole:i}}=this,n=zr.bufferInfo(t,e,i);if(0===n.len&&void 0!==n.nextStart){const s=this.fragmentTracker.getBufferedFrag(e,r);if(s&&n.nextStart<s.end)return zr.bufferInfo(t,e,Math.max(n.nextStart,i))}return n}getMaxBufferLength(t){const{config:e}=this;let r;return r=t?Math.max(8*e.maxBufferSize/t,e.maxBufferLength):e.maxBufferLength,Math.min(r,e.maxMaxBufferLength)}reduceMaxBufferLength(t){const e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${e.maxMaxBufferLength}s`),!0)}getAppendedFrag(t,e=Ce){const r=this.fragmentTracker.getAppendedFrag(t,Ce);return r&&"fragment"in r?r.fragment:r}getNextFragment(t,e){const r=e.fragments,i=r.length;if(!i)return null;const{config:n}=this,s=r[0].start;let a;if(e.live){const o=n.initialLiveManifestSize;if(i<o)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${o})`),null;(!e.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||t<s)&&(a=this.getInitialLiveFragment(e,r),this.startPosition=this.nextLoadPosition=a?this.hls.liveSyncPosition||a.start:t)}else t<=s&&(a=r[0]);if(!a){const r=n.lowLatencyMode?e.partEnd:e.fragmentEnd;a=this.getFragmentAtPosition(t,r,e)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(t,e){const r=this.fragmentTracker.getState(t);return(r===Gr||r===Ur&&!!t.gap)&&this.nextLoadPosition>e}getNextFragmentLoopLoading(t,e,r,i,n){const s=t.gap,a=this.getNextFragment(this.nextLoadPosition,e);if(null===a)return a;if(t=a,s&&t&&!t.gap&&r.nextStart){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(null!==e&&r.len+e.len>=n)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${t.sn}`),null}return t}mapToInitFragWhenRequired(t){return null==t||!t.initSegment||null!=t&&t.initSegment.data||this.bitrateTest?t:t.initSegment}getNextPart(t,e,r){let i=-1,n=!1,s=!0;for(let a=0,o=t.length;a<o;a++){const o=t[a];if(s=s&&!o.independent,i>-1&&r<o.start)break;const l=o.loaded;l?i=-1:(n||o.independent||s)&&o.fragment===e&&(i=a),n=l}return i}loadedEndOfParts(t,e){const r=t[t.length-1];return r&&e>r.start&&r.loaded}getInitialLiveFragment(t,e){const r=this.fragPrevious;let i=null;if(r){if(t.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!m(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(let i=0;i<t.length;++i){const n=t[i];if(mr(e,r,n))return n}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const n=r.sn+1;if(n>=t.startSN&&n<=t.endSN){const s=e[n-t.startSN];r.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=function(t,e){return fr(t,(t=>t.cc<e?1:t.cc>e?-1:0))}(e,r.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const e=this.hls.liveSyncPosition;null!==e&&(i=this.getFragmentAtPosition(e,this.bitrateTest?t.fragmentEnd:t.edge,t))}return i}getFragmentAtPosition(t,e,r){const{config:i}=this;let{fragPrevious:n}=this,{fragments:s,endSN:a}=r;const{fragmentHint:o}=r,l=i.maxFragLookUpTolerance,d=r.partList,u=!!(i.lowLatencyMode&&null!=d&&d.length&&o);let c;if(u&&o&&!this.bitrateTest&&(s=s.concat(o),a=o.sn),t<e){c=gr(n,s,t,t>e-l?0:l)}else c=s[s.length-1];if(c){const t=c.sn-r.startSN,e=this.fragmentTracker.getState(c);if((e===Gr||e===Ur&&c.gap)&&(n=c),n&&c.sn===n.sn&&(!u||d[0].fragment.sn>c.sn)){if(n&&c.level===n.level){const e=s[t+1];c=c.sn<a&&this.fragmentTracker.getState(e)!==Gr?e:null}}}return c}synchronizeToLiveEdge(t){const{config:e,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,n=r.currentTime,s=t.fragments[0].start,a=t.edge,o=n>=s-e.maxFragLookUpTolerance&&n<=a;if(null!==i&&r.duration>i&&(n<i||!o)){const s=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||n<a-s)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn(`Playback: ${n.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),r.currentTime=i))}}alignPlaylists(t,e,r){const i=t.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const n=t.fragments[0].start,s=!e,a=t.alignedSliding&&m(n);if(s||!a&&!n){const{fragPrevious:n}=this;Zr(n,r,t);const s=t.fragments[0].start;return this.log(`Live playlist sliding: ${s.toFixed(2)} start-sn: ${e?e.startSN:"na"}->${t.startSN} prev-sn: ${n?n.sn:"na"} fragments: ${i}`),s}return n}waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)}setStartPosition(t,e){let r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){const i=null!==this.startTimeOffset,n=i?this.startTimeOffset:t.startTimeOffset;null!==n&&m(n)?(r=e+n,n<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log(`Start time offset ${n} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:t}=this;let e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e}handleFragLoadAborted(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn(`Fragment ${t.sn}${e?" part "+e.index:""} of level ${t.level} was aborted`),this.resetFragmentLoading(t))}resetFragmentLoading(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===fi)||(this.state=ui)}onFragmentOrKeyLoadError(t,e){if(e.chunkMeta&&!e.frag){const t=this.getCurrentContext(e.chunkMeta);t&&(e.frag=t.frag)}const r=e.frag;if(!r||r.type!==t||!this.levels)return;var i;if(this.fragContextChanged(r))return void this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const n=e.details===E.FRAG_GAP;n&&this.fragmentTracker.fragBuffered(r,!0);const s=e.errorAction,{action:a,retryCount:o=0,retryConfig:l}=s||{};if(s&&a===Tr&&l){this.resetStartWhenNotLoaded(this.levelLastLoaded);const i=ur(l,o);this.warn(`Fragment ${r.sn} of ${t} ${r.level} errored with ${e.details}, retrying loading ${o+1}/${l.maxNumRetry} in ${i}ms`),s.resolved=!0,this.retryDate=self.performance.now()+i,this.state=fi}else if(l&&s){if(this.resetFragmentErrors(t),!(o<l.maxNumRetry))return void C.warn(`${e.details} reached or exceeded max retry (${o})`);n||a===br||(s.resolved=!0)}else(null==s?void 0:s.action)===yr?this.state=Ti:this.state=yi;this.tickImmediate()}reduceLengthAndFlushBuffer(t){if(this.state===pi||this.state===mi){const e=t.parent,r=this.getFwdBufferInfo(this.mediaBuffer,e),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len);const n=!i;return n&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${e} buffer`),t.frag&&(this.fragmentTracker.removeFragment(t.frag),this.nextLoadPosition=t.frag.start),this.resetLoadingState(),n}return!1}resetFragmentErrors(t){t===Le&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==di&&(this.state=ui)}afterBufferFlushed(t,e,r){if(!t)return;const i=zr.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,i,r),this.state===vi&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ui}resetStartWhenNotLoaded(t){if(!this.loadedmetadata){this.startFragRequested=!1;const e=t?t.details:null;null!=e&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(t){this.warn(`The loading context changed while buffering fragment ${t.sn} of level ${t.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(t=0){this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)}updateLevelTiming(t,e,r,i){var n;const s=r.details;if(!s)return void this.warn("level.details undefined");if(!Object.keys(t.elementaryStreams).reduce(((e,n)=>{const a=t.elementaryStreams[n];if(a){const o=a.endPTS-a.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${t.sn} ${n} duration reliably (${o})`),e||!1;const l=i?0:er(s,t,a.startPTS,a.endPTS,a.startDTS,a.endDTS);return this.hls.trigger(b.LEVEL_PTS_UPDATED,{details:s,level:r,drift:l,type:n,frag:t,start:a.startPTS,end:a.endPTS}),!0}return e}),!1)&&null===(null==(n=this.transmuxer)?void 0:n.error)){const e=new Error(`Found no media in fragment ${t.sn} of level ${t.level} resetting transmuxer to fallback to playlist timing`);if(0===r.fragmentError&&(r.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)),this.warn(e.message),this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,error:e,frag:t,reason:`Found no media in msn ${t.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=mi,this.hls.trigger(b.FRAG_PARSED,{frag:t,part:e})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(t){"demuxerWorker"===t.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(t){const e=this._state;e!==t&&(this._state=t,this.log(`${e}->${t}`))}get state(){return this._state}}class Si{constructor(){this.chunks=[],this.dataLength=0}push(t){this.chunks.push(t),this.dataLength+=t.length}flush(){const{chunks:t,dataLength:e}=this;let r;return t.length?(r=1===t.length?t[0]:function(t,e){const r=new Uint8Array(e);let i=0;for(let e=0;e<t.length;e++){const n=t[e];r.set(n,i),i+=n.length}return r}(t,e),this.reset(),r):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function wi(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class $i{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(t,e,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(t){this.initPTS=t,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(t,e){return!1}appendFrame(t,e,r){}demux(t,e){this.cachedData&&(t=Ft(this.cachedData,t),this.cachedData=null);let r,i=nt(t,0),n=i?i.length:0;const s=this._audioTrack,a=this._id3Track,o=i?ot(i):void 0,l=t.length;for((null===this.basePTS||0===this.frameIndex&&m(o))&&(this.basePTS=Ai(o,e,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ne,duration:Number.POSITIVE_INFINITY});n<l;){if(this.canParse(t,n)){const e=this.appendFrame(s,t,n);e?(this.frameIndex++,this.lastPTS=e.sample.pts,n+=e.length,r=n):n=l}else at(t,n)?(i=nt(t,n),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ne,duration:Number.POSITIVE_INFINITY}),n+=i.length,r=n):n++;if(n===l&&r!==l){const e=et(t,r);this.cachedData?this.cachedData=Ft(this.cachedData,e):this.cachedData=e}}return{audioTrack:s,videoTrack:wi(),id3Track:a,textTrack:wi()}}demuxSampleAes(t,e,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(t){const e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:wi(),id3Track:this._id3Track,textTrack:wi()}}destroy(){}}const Ai=(t,e,r)=>{if(m(t))return 90*t;return 9e4*e+(r?9e4*r.baseTime/r.timescale:0)};function Ci(t,e){return 255===t[e]&&240==(246&t[e+1])}function Li(t,e){return 1&t[e+1]?7:9}function xi(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function Ri(t,e){return e+1<t.length&&Ci(t,e)}function ki(t,e){if(Ri(t,e)){const r=Li(t,e);if(e+r>=t.length)return!1;const i=xi(t,e);if(i<=r)return!1;const n=e+i;return n===t.length||Ri(t,n)}return!1}function Di(t,e,r,i,n){if(!t.samplerate){const s=function(t,e,r,i){let n,s,a,o;const l=navigator.userAgent.toLowerCase(),d=i,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=1+((192&e[r+2])>>>6);const c=(60&e[r+2])>>>2;if(!(c>u.length-1))return a=(1&e[r+2])<<2,a|=(192&e[r+3])>>>6,C.log(`manifest codec:${i}, ADTS type:${n}, samplingIndex:${c}`),/firefox/i.test(l)?c>=6?(n=5,o=new Array(4),s=c-3):(n=2,o=new Array(2),s=c):-1!==l.indexOf("android")?(n=2,o=new Array(2),s=c):(n=5,o=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&c>=6?s=c-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(c>=6&&1===a||/vivaldi/i.test(l))||!i&&1===a)&&(n=2,o=new Array(2)),s=c)),o[0]=n<<3,o[0]|=(14&c)>>1,o[1]|=(1&c)<<7,o[1]|=a<<3,5===n&&(o[1]|=(14&s)>>1,o[2]=(1&s)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[c],channelCount:a,codec:"mp4a.40."+n,manifestCodec:d};{const e=new Error(`invalid ADTS sampling index:${c}`);t.emit(b.ERROR,b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!0,error:e,reason:e.message})}}(e,r,i,n);if(!s)return;t.config=s.config,t.samplerate=s.samplerate,t.channelCount=s.channelCount,t.codec=s.codec,t.manifestCodec=s.manifestCodec,C.log(`parsed codec:${t.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function Ii(t){return 9216e4/t}function Pi(t,e,r,i,n){const s=i+n*Ii(t.samplerate),a=function(t,e){const r=Li(t,e);if(e+r<=t.length){const i=xi(t,e)-r;if(i>0)return{headerLength:r,frameLength:i}}}(e,r);let o;if(a){const{frameLength:i,headerLength:n}=a,l=n+i,d=Math.max(0,r+l-e.length);d?(o=new Uint8Array(l-n),o.set(e.subarray(r+n,e.length),0)):o=e.subarray(r+n,r+l);const u={unit:o,pts:s};return d||t.samples.push(u),{sample:u,length:l,missing:d}}const l=e.length-r;o=new Uint8Array(l),o.set(e.subarray(r,e.length),0);return{sample:{unit:o,pts:s},length:l,missing:-1}}let _i=null;const Oi=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Mi=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ni=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Fi=[0,1,1,4];function Bi(t,e,r,i,n){if(r+24>e.length)return;const s=Ui(e,r);if(s&&r+s.frameLength<=e.length){const a=i+n*(9e4*s.samplesPerFrame/s.sampleRate),o={unit:e.subarray(r,r+s.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(o),{sample:o,length:s.frameLength,missing:0}}}function Ui(t,e){const r=t[e+1]>>3&3,i=t[e+1]>>1&3,n=t[e+2]>>4&15,s=t[e+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==s){const a=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*Oi[14*(3===r?3-i:3===i?3:4)+n-1],d=Mi[3*(3===r?0:2===r?1:2)+s],u=3===o?1:2,c=Ni[r][i],h=Fi[i],f=8*c*h,g=Math.floor(c*l/d+a)*h;if(null===_i){const t=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);_i=t?parseInt(t[1]):0}return!!_i&&_i<=87&&2===i&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:d,channelCount:u,frameLength:g,samplesPerFrame:f}}}function Gi(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function ji(t,e){return e+1<t.length&&Gi(t,e)}function Vi(t,e){if(e+1<t.length&&Gi(t,e)){const r=4,i=Ui(t,e);let n=r;null!=i&&i.frameLength&&(n=i.frameLength);const s=e+n;return s===t.length||ji(t,s)}return!1}const Hi=/\/emsg[-/]ID3/i;const Ki=(t,e)=>{let r=0,i=5;e+=i;const n=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=t[e];const o=Math.min(i,8),l=8-o;s[0]=4278190080>>>24+l<<l,n[0]=(a[0]&s[0])>>l,r=r?r<<o|n[0]:n[0],e+=1,i-=o}return r};class zi extends $i{constructor(t){super(),this.observer=void 0,this.observer=t}resetInitSegment(t,e,r,i){super.resetInitSegment(t,e,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}}canParse(t,e){return e+64<t.length}appendFrame(t,e,r){const i=qi(t,e,r,this.basePTS,this.frameIndex);if(-1!==i){return{sample:t.samples[t.samples.length-1],length:i,missing:0}}}static probe(t){if(!t)return!1;const e=nt(t,0);if(!e)return!1;const r=e.length;return 11===t[r]&&119===t[r+1]&&void 0!==ot(e)&&Ki(t,r)<16}}function qi(t,e,r,i,n){if(r+8>e.length)return-1;if(11!==e[r]||119!==e[r+1])return-1;const s=e[r+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],o=63&e[r+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+s];if(r+l>e.length)return-1;const d=e[r+6]>>5;let u=0;2===d?u+=2:(1&d&&1!==d&&(u+=2),4&d&&(u+=2));const c=(e[r+6]<<8|e[r+7])>>12-u&1,h=[2,1,2,3,3,4,4,5][d]+c,f=e[r+5]>>3,g=7&e[r+5],p=new Uint8Array([s<<6|f<<1|g>>2,(3&g)<<6|d<<3|c<<2|o>>4,o<<4&224]),m=i+n*(1536/a*9e4),v=e.subarray(r,r+l);return t.config=p,t.channelCount=h,t.samplerate=a,t.samples.push({unit:v,pts:m}),l}class Wi{constructor(){this.VideoSample=null}createVideoSample(t,e,r,i){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:i,length:0}}getLastNalUnit(t){var e;let r,i=this.VideoSample;if(i&&0!==i.units.length||(i=t[t.length-1]),null!=(e=i)&&e.units){const t=i.units;r=t[t.length-1]}return r}pushAccessUnit(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){const r=e.samples,i=r.length;if(!i)return void e.dropped++;{const e=r[i-1];t.pts=e.pts,t.dts=e.dts}}e.samples.push(t)}t.debug.length&&C.log(t.pts+"/"+t.dts+":"+t.debug)}}class Yi{constructor(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");i.set(t.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}skipBits(t){let e;t=Math.min(t,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(e=(t-=this.bitsAvailable)>>3,t-=e<<3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}readBits(t){let e=Math.min(this.bitsAvailable,t);const r=this.word>>>32-e;if(t>32&&C.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0)this.word<<=e;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return e=t-e,e>0&&this.bitsAvailable?r<<e|this.readBits(e):r}skipLZ(){let t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const t=this.skipLZ();return this.readBits(t+1)-1}readEG(){const t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(t){let e,r=8,i=8;for(let n=0;n<t;n++)0!==i&&(e=this.readEG(),i=(r+e+256)%256),r=0===i?r:i}readSPS(){let t,e,r,i=0,n=0,s=0,a=0;const o=this.readUByte.bind(this),l=this.readBits.bind(this),d=this.readUEG.bind(this),u=this.readBoolean.bind(this),c=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);o();const p=o();if(l(5),c(3),o(),f(),100===p||110===p||122===p||244===p||44===p||83===p||86===p||118===p||128===p){const t=d();if(3===t&&c(1),f(),f(),c(1),u())for(e=3!==t?8:12,r=0;r<e;r++)u()&&g(r<6?16:64)}f();const m=d();if(0===m)d();else if(1===m)for(c(1),h(),h(),t=d(),r=0;r<t;r++)h();f(),c(1);const v=d(),y=d(),b=l(1);0===b&&c(1),c(1),u()&&(i=d(),n=d(),s=d(),a=d());let T=[1,1];if(u()&&u()){switch(o()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[o()<<8|o(),o()<<8|o()]}}return{width:Math.ceil(16*(v+1)-2*i-2*n),height:(2-b)*(y+1)*16-(b?2:4)*(s+a),pixelRatio:T}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class Xi extends Wi{parseAVCPES(t,e,r,i,n){const s=this.parseAVCNALu(t,r.data);let a,o=this.VideoSample,l=!1;r.data=null,o&&s.length&&!t.audFound&&(this.pushAccessUnit(o,t),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"")),s.forEach((i=>{var s;switch(i.type){case 1:{let e=!1;a=!0;const n=i.data;if(l&&n.length>4){const t=new Yi(n).readSliceType();2!==t&&4!==t&&7!==t&&9!==t||(e=!0)}var d;if(e)null!=(d=o)&&d.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null);o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),o.frame=!0,o.key=e;break}case 5:a=!0,null!=(s=o)&&s.frame&&!o.key&&(this.pushAccessUnit(o,t),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:a=!0,Gt(i.data,1,r.pts,e.samples);break;case 7:{var u,c;a=!0,l=!0;const e=i.data,r=new Yi(e).readSPS();if(!t.sps||t.width!==r.width||t.height!==r.height||(null==(u=t.pixelRatio)?void 0:u[0])!==r.pixelRatio[0]||(null==(c=t.pixelRatio)?void 0:c[1])!==r.pixelRatio[1]){t.width=r.width,t.height=r.height,t.pixelRatio=r.pixelRatio,t.sps=[e],t.duration=n;const i=e.subarray(1,4);let s="avc1.";for(let t=0;t<3;t++){let e=i[t].toString(16);e.length<2&&(e="0"+e),s+=e}t.codec=s}break}case 8:a=!0,t.pps=[i.data];break;case 9:a=!0,t.audFound=!0,o&&this.pushAccessUnit(o,t),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}if(o&&a){o.units.push(i)}})),i&&o&&(this.pushAccessUnit(o,t),this.VideoSample=null)}parseAVCNALu(t,e){const r=e.byteLength;let i=t.naluState||0;const n=i,s=[];let a,o,l,d=0,u=-1,c=0;for(-1===i&&(u=0,c=31&e[0],i=0,d=1);d<r;)if(a=e[d++],i)if(1!==i)if(a)if(1===a){if(o=d-i-1,u>=0){const t={data:e.subarray(u,o),type:c};s.push(t)}else{const r=this.getLastNalUnit(t.samples);r&&(n&&d<=4-n&&r.state&&(r.data=r.data.subarray(0,r.data.byteLength-n)),o>0&&(r.data=Ft(r.data,e.subarray(0,o)),r.state=0))}d<r?(l=31&e[d],u=d,c=l,i=0):i=-1}else i=0;else i=3;else i=a?0:2;else i=a?0:1;if(u>=0&&i>=0){const t={data:e.subarray(u,r),type:c,state:i};s.push(t)}if(0===s.length){const r=this.getLastNalUnit(t.samples);r&&(r.data=Ft(r.data,e))}return t.naluState=i,s}}class Zi{constructor(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new oi(e,{removePKCS7Padding:!1})}decryptBuffer(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(t,e,r){const i=t[e].unit;if(i.length<=16)return;const n=i.subarray(16,i.length-i.length%16),s=n.buffer.slice(n.byteOffset,n.byteOffset+n.length);this.decryptBuffer(s).then((n=>{const s=new Uint8Array(n);i.set(s,16),this.decrypter.isSync()||this.decryptAacSamples(t,e+1,r)}))}decryptAacSamples(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32)&&(this.decryptAacSample(t,e,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(t){const e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e);let i=0;for(let e=32;e<t.length-16;e+=160,i+=16)r.set(t.subarray(e,e+16),i);return r}getAvcDecryptedUnit(t,e){const r=new Uint8Array(e);let i=0;for(let e=32;e<t.length-16;e+=160,i+=16)t.set(r.subarray(i,i+16),e);return t}decryptAvcSample(t,e,r,i,n){const s=jt(n.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then((a=>{n.data=this.getAvcDecryptedUnit(s,a),this.decrypter.isSync()||this.decryptAvcSamples(t,e,r+1,i)}))}decryptAvcSamples(t,e,r,i){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void i();const n=t[e].units;for(;!(r>=n.length);r++){const s=n[r];if(!(s.data.length<=48||1!==s.type&&5!==s.type||(this.decryptAvcSample(t,e,r,i,s),this.decrypter.isSync())))return}}}}const Qi=188;class Ji{constructor(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=t,this.config=e,this.typeSupported=r,this.videoParser=new Xi}static probe(t){const e=Ji.syncOffset(t);return e>0&&C.warn(`MPEG2-TS detected but first sync word found @ offset ${e}`),-1!==e}static syncOffset(t){const e=t.length;let r=Math.min(940,e-Qi)+1,i=0;for(;i<r;){let n=!1,s=-1,a=0;for(let o=i;o<e;o+=Qi){if(71!==t[o]||e-o!==Qi&&71!==t[o+Qi]){if(a)return-1;break}if(a++,-1===s&&(s=o,0!==s&&(r=Math.min(s+18612,t.length-Qi)+1)),n||(n=0===tn(t,o)),n&&a>1&&(0===s&&a>2||o+Qi>r))return s}i++}return-1}static createTrack(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:St[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}}resetInitSegment(t,e,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Ji.createTrack("video"),this._audioTrack=Ji.createTrack("audio",i),this._id3Track=Ji.createTrack("id3"),this._txtTrack=Ji.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=e,this.videoCodec=r,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:t,_videoTrack:e,_id3Track:r}=this;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(t,e,r=!1,i=!1){let n;r||(this.sampleAes=null);const s=this._videoTrack,a=this._audioTrack,o=this._id3Track,l=this._txtTrack;let d=s.pid,u=s.pesData,c=a.pid,h=o.pid,f=a.pesData,g=o.pesData,p=null,m=this.pmtParsed,v=this._pmtId,y=t.length;if(this.remainderData&&(y=(t=Ft(this.remainderData,t)).length,this.remainderData=null),y<Qi&&!i)return this.remainderData=t,{audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};const S=Math.max(0,Ji.syncOffset(t));y-=(y-S)%Qi,y<t.byteLength&&!i&&(this.remainderData=new Uint8Array(t.buffer,y,t.buffer.byteLength-y));let w=0;for(let e=S;e<y;e+=Qi)if(71===t[e]){const i=!!(64&t[e+1]),y=tn(t,e);let b;if((48&t[e+3])>>4>1){if(b=e+5+t[e+4],b===e+Qi)continue}else b=e+4;switch(y){case d:i&&(u&&(n=sn(u))&&this.videoParser.parseAVCPES(s,l,n,!1,this._duration),u={data:[],size:0}),u&&(u.data.push(t.subarray(b,e+Qi)),u.size+=e+Qi-b);break;case c:if(i){if(f&&(n=sn(f)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,n);break;case"mp3":this.parseMPEGPES(a,n);break;case"ac3":this.parseAC3PES(a,n)}f={data:[],size:0}}f&&(f.data.push(t.subarray(b,e+Qi)),f.size+=e+Qi-b);break;case h:i&&(g&&(n=sn(g))&&this.parseID3PES(o,n),g={data:[],size:0}),g&&(g.data.push(t.subarray(b,e+Qi)),g.size+=e+Qi-b);break;case 0:i&&(b+=t[b]+1),v=this._pmtId=en(t,b);break;case v:{i&&(b+=t[b]+1);const n=rn(t,b,this.typeSupported,r);d=n.videoPid,d>0&&(s.pid=d,s.segmentCodec=n.segmentVideoCodec),c=n.audioPid,c>0&&(a.pid=c,a.segmentCodec=n.segmentAudioCodec),h=n.id3Pid,h>0&&(o.pid=h),null===p||m||(C.warn(`MPEG-TS PMT found at ${e} after unknown PID '${p}'. Backtracking to sync byte @${S} to parse all TS packets.`),p=null,e=S-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:p=y}}else w++;if(w>0){const t=new Error(`Found ${w} TS packet/s that do not start with 0x47`);this.observer.emit(b.ERROR,b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,error:t,reason:t.message})}s.pesData=u,a.pesData=f,o.pesData=g;const $={audioTrack:a,videoTrack:s,id3Track:o,textTrack:l};return i&&this.extractRemainingSamples($),$}flush(){const{remainderData:t}=this;let e;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e}extractRemainingSamples(t){const{audioTrack:e,videoTrack:r,id3Track:i,textTrack:n}=t,s=r.pesData,a=e.pesData,o=i.pesData;let l;if(s&&(l=sn(s))?(this.videoParser.parseAVCPES(r,n,l,!0,this._duration),r.pesData=null):r.pesData=s,a&&(l=sn(a))){switch(e.segmentCodec){case"aac":this.parseAACPES(e,l);break;case"mp3":this.parseMPEGPES(e,l);break;case"ac3":this.parseAC3PES(e,l)}e.pesData=null}else null!=a&&a.size&&C.log("last AAC PES packet truncated,might overlap between fragments"),e.pesData=a;o&&(l=sn(o))?(this.parseID3PES(i,l),i.pesData=null):i.pesData=o}demuxSampleAes(t,e,r){const i=this.demux(t,r,!0,!this.config.progressive),n=this.sampleAes=new Zi(this.observer,this.config,e);return this.decrypt(i,n)}decrypt(t,e){return new Promise((r=>{const{audioTrack:i,videoTrack:n}=t;i.samples&&"aac"===i.segmentCodec?e.decryptAacSamples(i.samples,0,(()=>{n.samples?e.decryptAvcSamples(n.samples,0,0,(()=>{r(t)})):r(t)})):n.samples&&e.decryptAvcSamples(n.samples,0,0,(()=>{r(t)}))}))}destroy(){this._duration=0}parseAACPES(t,e){let r=0;const i=this.aacOverFlow;let n,s,a,o=e.data;if(i){this.aacOverFlow=null;const e=i.missing,n=i.sample.unit.byteLength;if(-1===e)o=Ft(i.sample.unit,o);else{const s=n-e;i.sample.unit.set(o.subarray(0,e),s),t.samples.push(i.sample),r=i.missing}}for(n=r,s=o.length;n<s-1&&!Ri(o,n);n++);if(n!==r){let t;const e=n<s-1;t=e?`AAC PES did not start with ADTS header,offset:${n}`:"No ADTS header found in AAC PES";const r=new Error(t);if(C.warn(`parsing error: ${t}`),this.observer.emit(b.ERROR,b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,levelRetry:e,error:r,reason:t}),!e)return}if(Di(t,this.observer,o,n,this.audioCodec),void 0!==e.pts)a=e.pts;else{if(!i)return void C.warn("[tsdemuxer]: AAC PES unknown PTS");{const e=Ii(t.samplerate);a=i.sample.pts+e}}let l,d=0;for(;n<s;){if(l=Pi(t,o,n,a,d),n+=l.length,l.missing){this.aacOverFlow=l;break}for(d++;n<s-1&&!Ri(o,n);n++);}}parseMPEGPES(t,e){const r=e.data,i=r.length;let n=0,s=0;const a=e.pts;if(void 0!==a)for(;s<i;)if(ji(r,s)){const e=Bi(t,r,s,a,n);if(!e)break;s+=e.length,n++}else s++;else C.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(t,e){{const r=e.data,i=e.pts;if(void 0===i)return void C.warn("[tsdemuxer]: AC3 PES unknown PTS");const n=r.length;let s,a=0,o=0;for(;o<n&&(s=qi(t,r,o,i,a++))>0;)o+=s}}parseID3PES(t,e){if(void 0===e.pts)return void C.warn("[tsdemuxer]: ID3 PES unknown PTS");const r=p({},e,{type:this._videoTrack?Be:Ne,duration:Number.POSITIVE_INFINITY});t.samples.push(r)}}function tn(t,e){return((31&t[e+1])<<8)+t[e+2]}function en(t,e){return(31&t[e+10])<<8|t[e+11]}function rn(t,e,r,i){const n={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},s=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<s;){const s=tn(t,e),a=(15&t[e+3])<<8|t[e+4];switch(t[e]){case 207:if(!i){nn("ADTS AAC");break}case 15:-1===n.audioPid&&(n.audioPid=s);break;case 21:-1===n.id3Pid&&(n.id3Pid=s);break;case 219:if(!i){nn("H.264");break}case 27:-1===n.videoPid&&(n.videoPid=s,n.segmentVideoCodec="avc");break;case 3:case 4:r.mpeg||r.mp3?-1===n.audioPid&&(n.audioPid=s,n.segmentAudioCodec="mp3"):C.log("MPEG audio found, not supported in this browser");break;case 193:if(!i){nn("AC-3");break}case 129:r.ac3?-1===n.audioPid&&(n.audioPid=s,n.segmentAudioCodec="ac3"):C.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===n.audioPid&&a>0){let i=e+5,o=a;for(;o>2;){if(106===t[i])!0!==r.ac3?C.log("AC-3 audio found, not supported in this browser for now"):(n.audioPid=s,n.segmentAudioCodec="ac3");const e=t[i+1]+2;i+=e,o-=e}}break;case 194:case 135:C.warn("Unsupported EC-3 in M2TS found");break;case 36:C.warn("Unsupported HEVC in M2TS found")}e+=a+5}return n}function nn(t){C.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function sn(t){let e,r,i,n,s,a=0;const o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;)o[0]=Ft(o[0],o[1]),o.splice(1,1);e=o[0];if(1===(e[0]<<16)+(e[1]<<8)+e[2]){if(r=(e[4]<<8)+e[5],r&&r>t.size-6)return null;const l=e[7];192&l&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&l?(s=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,n-s>54e5&&(C.warn(`${Math.round((n-s)/9e4)}s delta between PTS and DTS, align them`),n=s)):s=n),i=e[8];let d=i+9;if(t.size<=d)return null;t.size-=d;const u=new Uint8Array(t.size);for(let t=0,r=o.length;t<r;t++){e=o[t];let r=e.byteLength;if(d){if(d>r){d-=r;continue}e=e.subarray(d),r-=d,d=0}u.set(e,a),a+=r}return r&&(r-=i+3),{data:u,pts:n,dts:s,len:r}}return null}class an{static getSilentFrame(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const on=Math.pow(2,32)-1;class ln{static init(){let t;for(t in ln.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},ln.types)ln.types.hasOwnProperty(t)&&(ln.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const e=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ln.HDLR_TYPES={video:e,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),n=new Uint8Array([0,0,0,0,0,0,0,0]);ln.STTS=ln.STSC=ln.STCO=n,ln.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ln.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ln.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ln.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);ln.FTYP=ln.box(ln.types.ftyp,s,o,s,a),ln.DINF=ln.box(ln.types.dinf,ln.box(ln.types.dref,i))}static box(t,...e){let r=8,i=e.length;const n=i;for(;i--;)r+=e[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=255&r,s.set(t,4),i=0,r=8;i<n;i++)s.set(e[i],r),r+=e[i].byteLength;return s}static hdlr(t){return ln.box(ln.types.hdlr,ln.HDLR_TYPES[t])}static mdat(t){return ln.box(ln.types.mdat,t)}static mdhd(t,e){e*=t;const r=Math.floor(e/(on+1)),i=Math.floor(e%(on+1));return ln.box(ln.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}static mdia(t){return ln.box(ln.types.mdia,ln.mdhd(t.timescale,t.duration),ln.hdlr(t.type),ln.minf(t))}static mfhd(t){return ln.box(ln.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}static minf(t){return"audio"===t.type?ln.box(ln.types.minf,ln.box(ln.types.smhd,ln.SMHD),ln.DINF,ln.stbl(t)):ln.box(ln.types.minf,ln.box(ln.types.vmhd,ln.VMHD),ln.DINF,ln.stbl(t))}static moof(t,e,r){return ln.box(ln.types.moof,ln.mfhd(t),ln.traf(r,e))}static moov(t){let e=t.length;const r=[];for(;e--;)r[e]=ln.trak(t[e]);return ln.box.apply(null,[ln.types.moov,ln.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(ln.mvex(t)))}static mvex(t){let e=t.length;const r=[];for(;e--;)r[e]=ln.trex(t[e]);return ln.box.apply(null,[ln.types.mvex,...r])}static mvhd(t,e){e*=t;const r=Math.floor(e/(on+1)),i=Math.floor(e%(on+1)),n=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ln.box(ln.types.mvhd,n)}static sdtp(t){const e=t.samples||[],r=new Uint8Array(4+e.length);let i,n;for(i=0;i<e.length;i++)n=e[i].flags,r[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return ln.box(ln.types.sdtp,r)}static stbl(t){return ln.box(ln.types.stbl,ln.stsd(t),ln.box(ln.types.stts,ln.STTS),ln.box(ln.types.stsc,ln.STSC),ln.box(ln.types.stsz,ln.STSZ),ln.box(ln.types.stco,ln.STCO))}static avc1(t){let e,r,i,n=[],s=[];for(e=0;e<t.sps.length;e++)r=t.sps[e],i=r.byteLength,n.push(i>>>8&255),n.push(255&i),n=n.concat(Array.prototype.slice.call(r));for(e=0;e<t.pps.length;e++)r=t.pps[e],i=r.byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(r));const a=ln.box(ln.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(s))),o=t.width,l=t.height,d=t.pixelRatio[0],u=t.pixelRatio[1];return ln.box(ln.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,ln.box(ln.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ln.box(ln.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,u>>24,u>>16&255,u>>8&255,255&u])))}static esds(t){const e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))}static audioStsd(t){const e=t.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,e>>8&255,255&e,0,0])}static mp4a(t){return ln.box(ln.types.mp4a,ln.audioStsd(t),ln.box(ln.types.esds,ln.esds(t)))}static mp3(t){return ln.box(ln.types[".mp3"],ln.audioStsd(t))}static ac3(t){return ln.box(ln.types["ac-3"],ln.audioStsd(t),ln.box(ln.types.dac3,t.config))}static stsd(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?ln.box(ln.types.stsd,ln.STSD,ln.mp3(t)):"ac3"===t.segmentCodec?ln.box(ln.types.stsd,ln.STSD,ln.ac3(t)):ln.box(ln.types.stsd,ln.STSD,ln.mp4a(t)):ln.box(ln.types.stsd,ln.STSD,ln.avc1(t))}static tkhd(t){const e=t.id,r=t.duration*t.timescale,i=t.width,n=t.height,s=Math.floor(r/(on+1)),a=Math.floor(r%(on+1));return ln.box(ln.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,a>>24,a>>16&255,a>>8&255,255&a,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,n>>8&255,255&n,0,0]))}static traf(t,e){const r=ln.sdtp(t),i=t.id,n=Math.floor(e/(on+1)),s=Math.floor(e%(on+1));return ln.box(ln.types.traf,ln.box(ln.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),ln.box(ln.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,s>>24,s>>16&255,s>>8&255,255&s])),ln.trun(t,r.length+16+20+8+16+8+8),r)}static trak(t){return t.duration=t.duration||4294967295,ln.box(ln.types.trak,ln.tkhd(t),ln.mdia(t))}static trex(t){const e=t.id;return ln.box(ln.types.trex,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,e){const r=t.samples||[],i=r.length,n=12+16*i,s=new Uint8Array(n);let a,o,l,d,u,c;for(e+=8+n,s.set(["video"===t.type?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,e>>>24&255,e>>>16&255,e>>>8&255,255&e],0),a=0;a<i;a++)o=r[a],l=o.duration,d=o.size,u=o.flags,c=o.cts,s.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,d>>>24&255,d>>>16&255,d>>>8&255,255&d,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,61440&u.degradPrio,15&u.degradPrio,c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+16*a);return ln.box(ln.types.trun,s)}static initSegment(t){ln.types||ln.init();const e=ln.moov(t);return Ft(ln.FTYP,e)}}ln.types=void 0,ln.HDLR_TYPES=void 0,ln.STTS=void 0,ln.STSC=void 0,ln.STCO=void 0,ln.STSZ=void 0,ln.VMHD=void 0,ln.SMHD=void 0,ln.STSD=void 0,ln.FTYP=void 0,ln.DINF=void 0;const dn=9e4;function un(t,e,r=1,i=!1){const n=t*e*r;return i?Math.round(n):n}function cn(t,e=!1){return un(t,1e3,1/dn,e)}let hn,fn=null,gn=null;class pn{constructor(t,e,r,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===fn){const t=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);fn=t?parseInt(t[1]):0}if(null===gn){const t=navigator.userAgent.match(/Safari\/(\d+)/i);gn=t?parseInt(t[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(t){C.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t}resetNextTimestamp(){C.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){C.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(t){let e=!1;const r=t.reduce(((t,r)=>{const i=r.pts-t;return i<-4294967296?(e=!0,mn(t,r.pts)):i>0?t:r.pts}),t[0].pts);return e&&C.debug("PTS rollover detected"),r}remux(t,e,r,i,n,s,a,o){let l,d,u,c,h,f,g=n,p=n;const m=t.pid>-1,v=e.pid>-1,y=e.samples.length,b=t.samples.length>0,T=a&&y>0||y>1;if((!m||b)&&(!v||T)||this.ISGenerated||a){if(this.ISGenerated){var E,S,w,$;const t=this.videoTrackConfig;!t||e.width===t.width&&e.height===t.height&&(null==(E=e.pixelRatio)?void 0:E[0])===(null==(S=t.pixelRatio)?void 0:S[0])&&(null==(w=e.pixelRatio)?void 0:w[1])===(null==($=t.pixelRatio)?void 0:$[1])||this.resetInitSegment()}else u=this.generateIS(t,e,n,s);const r=this.isVideoContiguous;let i,a=-1;if(T&&(a=function(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!r&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,a>0){C.warn(`[mp4-remuxer]: Dropped ${a} out of ${y} video samples due to a missing keyframe`);const t=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(a),e.dropped+=a,p+=(e.samples[0].pts-t)/e.inputTimeScale,i=p}else-1===a&&(C.warn(`[mp4-remuxer]: No keyframe found out of ${y} video samples`),f=!1);if(this.ISGenerated){if(b&&T){const r=this.getVideoStartPts(e.samples),i=(mn(t.samples[0].pts,r)-r)/e.inputTimeScale;g+=Math.max(0,i),p+=Math.max(0,-i)}if(b){if(t.samplerate||(C.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),u=this.generateIS(t,e,n,s)),d=this.remuxAudio(t,g,this.isAudioContiguous,s,v||T||o===Le?p:void 0),T){const i=d?d.endPTS-d.startPTS:0;e.inputTimeScale||(C.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),u=this.generateIS(t,e,n,s)),l=this.remuxVideo(e,p,r,i)}}else T&&(l=this.remuxVideo(e,p,r,0));l&&(l.firstKeyFrame=a,l.independent=-1!==a,l.firstKeyFramePTS=i)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=vn(r,n,this._initPTS,this._initDTS)),i.samples.length&&(c=yn(i,n,this._initPTS))),{audio:d,video:l,initSegment:u,independent:f,text:c,id3:h}}generateIS(t,e,r,i){const n=t.samples,s=e.samples,a=this.typeSupported,o={},l=this._initPTS;let d,u,c,h=!l||i,f="audio/mp4";if(h&&(d=u=1/0),t.config&&n.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":a.mpeg?(f="audio/mpeg",t.codec=""):a.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3"}o.audio={id:"audio",container:f,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&a.mpeg?new Uint8Array(0):ln.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(c=t.inputTimeScale,l&&c===l.timescale?h=!1:d=u=n[0].pts-Math.round(c*r))}if(e.sps&&e.pps&&s.length){if(e.timescale=e.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:ln.initSegment([e]),metadata:{width:e.width,height:e.height}},h)if(c=e.inputTimeScale,l&&c===l.timescale)h=!1;else{const t=this.getVideoStartPts(s),e=Math.round(c*r);u=Math.min(u,mn(s[0].dts,t)-e),d=Math.min(d,t-e)}this.videoTrackConfig={width:e.width,height:e.height,pixelRatio:e.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,h?(this._initPTS={baseTime:d,timescale:c},this._initDTS={baseTime:u,timescale:c}):d=c=void 0,{tracks:o,initPTS:d,timescale:c}}remuxVideo(t,e,r,i){const n=t.inputTimeScale,s=t.samples,a=[],o=s.length,l=this._initPTS;let d,u,c=this.nextAvcDts,h=8,f=this.videoSampleDuration,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,v=!1;if(!r||null===c){const t=e*n,i=s[0].pts-mn(s[0].dts,s[0].pts);fn&&null!==c&&Math.abs(t-i-c)<15e3?r=!0:c=t-i}const y=l.baseTime*n/l.timescale;for(let t=0;t<o;t++){const e=s[t];e.pts=mn(e.pts-y,c),e.dts=mn(e.dts-y,c),e.dts<s[t>0?t-1:t].dts&&(v=!0)}v&&s.sort((function(t,e){const r=t.dts-e.dts,i=t.pts-e.pts;return r||i})),d=s[0].dts,u=s[s.length-1].dts;const S=u-d,w=S?Math.round(S/(o-1)):f||t.inputTimeScale/30;if(r){const t=d-c,r=t>w,i=t<-1;if((r||i)&&(r?C.warn(`AVC: ${cn(t,!0)} ms (${t}dts) hole between fragments detected at ${e.toFixed(3)}`):C.warn(`AVC: ${cn(-t,!0)} ms (${t}dts) overlapping between fragments detected at ${e.toFixed(3)}`),!i||c>=s[0].pts||fn)){d=c;const e=s[0].pts-t;if(r)s[0].dts=d,s[0].pts=e;else for(let r=0;r<s.length&&!(s[r].dts>e);r++)s[r].dts-=t,s[r].pts-=t;C.log(`Video: Initial PTS/DTS adjusted: ${cn(e,!0)}/${cn(d,!0)}, delta: ${cn(t,!0)} ms`)}}d=Math.max(0,d);let $=0,A=0,L=d;for(let t=0;t<o;t++){const e=s[t],r=e.units,i=r.length;let n=0;for(let t=0;t<i;t++)n+=r[t].data.length;A+=n,$+=i,e.length=n,e.dts<L?(e.dts=L,L+=w/4|0||1):L=e.dts,g=Math.min(e.pts,g),m=Math.max(e.pts,m)}u=s[o-1].dts;const x=A+4*$+8;let R;try{R=new Uint8Array(x)}catch(t){return void this.observer.emit(b.ERROR,b.ERROR,{type:T.MUX_ERROR,details:E.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:x,reason:`fail allocating video mdat ${x}`})}const k=new DataView(R.buffer);k.setUint32(0,x),R.set(ln.types.mdat,4);let D=!1,I=Number.POSITIVE_INFINITY,P=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY;for(let t=0;t<o;t++){const e=s[t],r=e.units;let l,d=0;for(let t=0,e=r.length;t<e;t++){const e=r[t],i=e.data,n=e.data.byteLength;k.setUint32(h,n),h+=4,R.set(i,h),h+=n,d+=4+n}if(t<o-1)f=s[t+1].dts-e.dts,l=s[t+1].pts-e.pts;else{const r=this.config,a=t>0?e.dts-s[t-1].dts:w;if(l=t>0?e.pts-s[t-1].pts:w,r.stretchShortVideoTrack&&null!==this.nextAudioPts){const t=Math.floor(r.maxBufferHole*n),s=(i?g+i*n:this.nextAudioPts)-e.pts;s>t?(f=s-a,f<0?f=a:D=!0,C.log(`[mp4-remuxer]: It is approximately ${s/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=a}else f=a}const u=Math.round(e.pts-e.dts);I=Math.min(I,f),_=Math.max(_,f),P=Math.min(P,l),O=Math.max(O,l),a.push(new bn(e.key,f,d,u))}if(a.length)if(fn){if(fn<70){const t=a[0].flags;t.dependsOn=2,t.isNonSync=0}}else if(gn&&O-P<_-I&&w/_<.025&&0===a[0].cts){C.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let t=d;for(let e=0,r=a.length;e<r;e++){const i=t+a[e].duration,n=t+a[e].cts;if(e<r-1){const t=i+a[e+1].cts;a[e].duration=t-n}else a[e].duration=e?a[e-1].duration:w;a[e].cts=0,t=i}}f=D||!f?w:f,this.nextAvcDts=c=u+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const M={data1:ln.moof(t.sequenceNumber++,d,p({},t,{samples:a})),data2:R,startPTS:g/n,endPTS:(m+f)/n,startDTS:d/n,endDTS:c/n,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:t.dropped};return t.samples=[],t.dropped=0,M}getSamplesPerFrame(t){switch(t.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(t,e,r,i,n){const s=t.inputTimeScale,a=s/(t.samplerate?t.samplerate:s),o=this.getSamplesPerFrame(t),l=o*a,d=this._initPTS,u="mp3"===t.segmentCodec&&this.typeSupported.mpeg,c=[],h=void 0!==n;let f=t.samples,g=u?0:8,m=this.nextAudioPts||-1;const v=e*s,y=d.baseTime*s/d.timescale;if(this.isAudioContiguous=r=r||f.length&&m>0&&(i&&Math.abs(v-m)<9e3||Math.abs(mn(f[0].pts-y,v)-m)<20*l),f.forEach((function(t){t.pts=mn(t.pts-y,v)})),!r||m<0){if(f=f.filter((t=>t.pts>=0)),!f.length)return;m=0===n?0:i&&!h?Math.max(0,v):f[0].pts}if("aac"===t.segmentCodec){const e=this.config.maxAudioFramesDrift;for(let r=0,i=m;r<f.length;r++){const n=f[r],a=n.pts,o=a-i,d=Math.abs(1e3*o/s);if(o<=-e*l&&h)0===r&&(C.warn(`Audio frame @ ${(a/s).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*o/s)} ms.`),this.nextAudioPts=m=i=a);else if(o>=e*l&&d<1e4&&h){let e=Math.round(o/l);i=a-e*l,i<0&&(e--,i+=l),0===r&&(this.nextAudioPts=m=i),C.warn(`[mp4-remuxer]: Injecting ${e} audio frame @ ${(i/s).toFixed(3)}s due to ${Math.round(1e3*o/s)} ms gap.`);for(let s=0;s<e;s++){const e=Math.max(i,0);let s=an.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);s||(C.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),s=n.unit.subarray()),f.splice(r,0,{unit:s,pts:e}),i+=l,r++}}n.pts=i,i+=l}}let S,w=null,$=null,A=0,L=f.length;for(;L--;)A+=f[L].unit.byteLength;for(let e=0,i=f.length;e<i;e++){const i=f[e],n=i.unit;let s=i.pts;if(null!==$){c[e-1].duration=Math.round((s-$)/a)}else{if(r&&"aac"===t.segmentCodec&&(s=m),w=s,!(A>0))return;A+=g;try{S=new Uint8Array(A)}catch(t){return void this.observer.emit(b.ERROR,b.ERROR,{type:T.MUX_ERROR,details:E.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:A,reason:`fail allocating audio mdat ${A}`})}if(!u){new DataView(S.buffer).setUint32(0,A),S.set(ln.types.mdat,4)}}S.set(n,g);const l=n.byteLength;g+=l,c.push(new bn(!0,o,l,0)),$=s}const x=c.length;if(!x)return;const R=c[c.length-1];this.nextAudioPts=m=$+a*R.duration;const k=u?new Uint8Array(0):ln.moof(t.sequenceNumber++,w/a,p({},t,{samples:c}));t.samples=[];const D=w/s,I=m/s,P={data1:k,data2:S,startPTS:D,endPTS:I,startDTS:D,endDTS:I,type:"audio",hasAudio:!0,hasVideo:!1,nb:x};return this.isAudioContiguous=!0,P}remuxEmptyAudio(t,e,r,i){const n=t.inputTimeScale,s=n/(t.samplerate?t.samplerate:n),a=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,d=(null!==a?a:i.startDTS*n)+l,u=i.endDTS*n+l,c=1024*s,h=Math.ceil((u-d)/c),f=an.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(C.warn("[mp4-remuxer]: remux empty Audio"),!f)return void C.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const g=[];for(let t=0;t<h;t++){const e=d+t*c;g.push({unit:f,pts:e,dts:e})}return t.samples=g,this.remuxAudio(t,e,r,!1)}}function mn(t,e){let r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function vn(t,e,r,i){const n=t.samples.length;if(!n)return;const s=t.inputTimeScale;for(let a=0;a<n;a++){const n=t.samples[a];n.pts=mn(n.pts-r.baseTime*s/r.timescale,e*s)/s,n.dts=mn(n.dts-i.baseTime*s/i.timescale,e*s)/s}const a=t.samples;return t.samples=[],{samples:a}}function yn(t,e,r){const i=t.samples.length;if(!i)return;const n=t.inputTimeScale;for(let s=0;s<i;s++){const i=t.samples[s];i.pts=mn(i.pts-r.baseTime*n/r.timescale,e*n)/n}t.samples.sort(((t,e)=>t.pts-e.pts));const s=t.samples;return t.samples=[],{samples:s}}class bn{constructor(t,e,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}function Tn(t,e){const r=null==t?void 0:t.codec;if(r&&r.length>4)return r;if(e===P){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r){return oe(r,!1)}const t="mp4a.40.5";return C.info(`Parsed audio codec "${r}" or audio object type not handled. Using "${t}"`),t}return C.warn(`Unhandled video codec "${r}"`),"hvc1"===r||"hev1"===r?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1.42e01e"}try{hn=self.performance.now.bind(self.performance)}catch(t){C.debug("Unable to use Performance API on this environment"),hn=null==V?void 0:V.Date.now}const En=[{demux:class{constructor(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}resetTimeStamp(){}resetInitSegment(t,e,r,i){const n=this.videoTrack=wi("video",1),s=this.audioTrack=wi("audio",1),a=this.txtTrack=wi("text",1);if(this.id3Track=wi("id3",1),this.timeOffset=0,null==t||!t.byteLength)return;const o=Dt(t);if(o.video){const{id:t,timescale:e,codec:r}=o.video;n.id=t,n.timescale=a.timescale=e,n.codec=r}if(o.audio){const{id:t,timescale:e,codec:r}=o.audio;s.id=t,s.timescale=e,s.codec=r}a.id=St.text,n.sampleDuration=0,n.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(t){return function(t){const e=t.byteLength;for(let r=0;r<e;){const i=At(t,r);if(i>8&&109===t[r+4]&&111===t[r+5]&&111===t[r+6]&&102===t[r+7])return!0;r=i>1?r+i:e}return!1}(t)}demux(t,e){this.timeOffset=e;let r=t;const i=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Ft(this.remainderData,t));const e=function(t){const e={valid:null,remainder:null},r=Rt(t,["moof"]);if(r.length<2)return e.remainder=t,e;const i=r[r.length-1];return e.valid=et(t,0,i.byteOffset-8),e.remainder=et(t,i.byteOffset-8),e}(r);this.remainderData=e.remainder,i.samples=e.valid||new Uint8Array}else i.samples=r;const s=this.extractID3Track(i,e);return n.samples=Bt(e,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const t=this.timeOffset,e=this.videoTrack,r=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(e,this.timeOffset);return r.samples=Bt(t,e),{videoTrack:e,audioTrack:wi(),id3Track:i,textTrack:wi()}}extractID3Track(t,e){const r=this.id3Track;if(t.samples.length){const i=Rt(t.samples,["emsg"]);i&&i.forEach((t=>{const i=function(t){const e=t[0];let r="",i="",n=0,s=0,a=0,o=0,l=0,d=0;if(0===e){for(;"\0"!==wt(t.subarray(d,d+1));)r+=wt(t.subarray(d,d+1)),d+=1;for(r+=wt(t.subarray(d,d+1)),d+=1;"\0"!==wt(t.subarray(d,d+1));)i+=wt(t.subarray(d,d+1)),d+=1;i+=wt(t.subarray(d,d+1)),d+=1,n=At(t,12),s=At(t,16),o=At(t,20),l=At(t,24),d=28}else if(1===e){d+=4,n=At(t,d),d+=4;const e=At(t,d);d+=4;const s=At(t,d);for(d+=4,a=2**32*e+s,v(a)||(a=Number.MAX_SAFE_INTEGER,C.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=At(t,d),d+=4,l=At(t,d),d+=4;"\0"!==wt(t.subarray(d,d+1));)r+=wt(t.subarray(d,d+1)),d+=1;for(r+=wt(t.subarray(d,d+1)),d+=1;"\0"!==wt(t.subarray(d,d+1));)i+=wt(t.subarray(d,d+1)),d+=1;i+=wt(t.subarray(d,d+1)),d+=1}return{schemeIdUri:r,value:i,timeScale:n,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:t.subarray(d,t.byteLength)}}(t);if(Hi.test(i.schemeIdUri)){const t=m(i.presentationTime)?i.presentationTime/i.timeScale:e+i.presentationTimeDelta/i.timeScale;let n=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;n<=.001&&(n=Number.POSITIVE_INFINITY);const s=i.payload;r.samples.push({data:s,len:s.byteLength,dts:t,pts:t,type:Be,duration:n})}}))}return r}demuxSampleAes(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(t){this.initPTS=t,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(t,e,r,i){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(function(t,e){if(!t||!e)return t;const r=e.keyId;r&&e.isCommonEncryption&&Rt(t,["moov","trak"]).forEach((t=>{const e=Rt(t,["mdia","minf","stbl","stsd"])[0].subarray(8);let i=Rt(e,["enca"]);const n=i.length>0;n||(i=Rt(e,["encv"])),i.forEach((t=>{Rt(n?t.subarray(28):t.subarray(78),["sinf"]).forEach((t=>{const e=Mt(t);if(e){const t=e.subarray(8,24);t.some((t=>0!==t))||(C.log(`[eme] Patching keyId in 'enc${n?"a":"v"}>sinf>>tenc' box: ${bt(t)} -> ${bt(r)}`),e.set(r,8))}}))}))}));return t}(t,i)),this.emitInitSegment=!0}generateInitSegment(t){let{audioCodec:e,videoCodec:r}=this;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const i=this.initData=Dt(t);i.audio&&(e=Tn(i.audio,P)),i.video&&(r=Tn(i.video,_));const n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:i.audio?n.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:i.video?n.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:C.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n}remux(t,e,r,i,n,s){var a,o;let{initPTS:l,lastEndTime:d}=this;const u={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};m(d)||(d=this.lastEndTime=n||0);const c=e.samples;if(null==c||!c.length)return u;const h={initPTS:void 0,timescale:1};let f=this.initData;if(null!=(a=f)&&a.length||(this.generateInitSegment(c),f=this.initData),null==(o=f)||!o.length)return C.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),u;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=function(t,e){let r=0,i=0,n=0;const s=Rt(t,["moof","traf"]);for(let t=0;t<s.length;t++){const a=s[t],o=Rt(a,["tfhd"])[0],l=e[At(o,4)];if(!l)continue;const d=l.default,u=At(o,0)|(null==d?void 0:d.flags);let c=null==d?void 0:d.duration;8&u&&(c=At(o,2&u?12:8));const h=l.timescale||9e4,f=Rt(a,["trun"]);for(let t=0;t<f.length;t++)r=Nt(f[t]),!r&&c&&(r=c*At(f[t],4)),l.type===_?i+=r/h:l.type===P&&(n+=r/h)}if(0===i&&0===n){let e=1/0,r=0,i=0;const n=Rt(t,["sidx"]);for(let t=0;t<n.length;t++){const s=kt(n[t]);if(null!=s&&s.references){e=Math.min(e,s.earliestPresentationTime/s.timescale);const t=s.references.reduce(((t,e)=>t+e.info.duration||0),0);r=Math.max(r,t+s.earliestPresentationTime/s.timescale),i=r-e}}if(i&&m(i))return i}return i||n}(c,f),p=function(t,e){return Rt(e,["moof","traf"]).reduce(((e,r)=>{const i=Rt(r,["tfdt"])[0],n=i[0],s=Rt(r,["tfhd"]).reduce(((e,r)=>{const s=At(r,4),a=t[s];if(a){let t=At(i,4);if(1===n){if(t===Tt)return C.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;t*=Tt+1,t+=At(i,8)}const r=t/(a.timescale||9e4);if(m(r)&&(null===e||r<e))return r}return e}),null);return null!==s&&m(s)&&(null===e||s<e)?s:e}),null)}(f,c),v=null===p?n:p;(function(t,e,r,i){if(null===t)return!0;const n=Math.max(i,1),s=e-t.baseTime/t.timescale;return Math.abs(s-r)>n}(l,v,n,g)||h.timescale!==l.timescale&&s)&&(h.initPTS=v-n,l&&1===l.timescale&&C.warn("Adjusting initPTS by "+(h.initPTS-l.baseTime)),this.initPTS=l={baseTime:h.initPTS,timescale:1});const y=t?v-l.baseTime/l.timescale:d,b=y+g;!function(t,e,r){Rt(e,["moof","traf"]).forEach((e=>{Rt(e,["tfhd"]).forEach((i=>{const n=At(i,4),s=t[n];if(!s)return;const a=s.timescale||9e4;Rt(e,["tfdt"]).forEach((t=>{const e=t[0],i=r*a;if(i){let r=At(t,4);if(0===e)r-=i,r=Math.max(r,0),xt(t,4,r);else{r*=Math.pow(2,32),r+=At(t,8),r-=i,r=Math.max(r,0);const e=Math.floor(r/(Tt+1)),n=Math.floor(r%(Tt+1));xt(t,4,e),xt(t,8,n)}}}))}))}))}(f,c,l.baseTime/l.timescale),g>0?this.lastEndTime=b:(C.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const T=!!f.audio,E=!!f.video;let S="";T&&(S+="audio"),E&&(S+="video");const w={data1:c,startPTS:y,startDTS:y,endPTS:b,endDTS:b,type:S,hasAudio:T,hasVideo:E,nb:1,dropped:0};return u.audio="audio"===w.type?w:void 0,u.video="audio"!==w.type?w:void 0,u.initSegment=h,u.id3=vn(r,n,l,l),i.samples.length&&(u.text=yn(i,n,l)),u}}},{demux:Ji,remux:pn},{demux:class extends $i{constructor(t,e){super(),this.observer=void 0,this.config=void 0,this.observer=t,this.config=e}resetInitSegment(t,e,r,i){super.resetInitSegment(t,e,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const e=nt(t,0);let r=(null==e?void 0:e.length)||0;if(Vi(t,r))return!1;for(let e=t.length;r<e;r++)if(ki(t,r))return C.log("ADTS sync word found !"),!0;return!1}canParse(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&Ci(t,e)&&xi(t,e)<=t.length-e}(t,e)}appendFrame(t,e,r){Di(t,this.observer,e,r,t.manifestCodec);const i=Pi(t,e,r,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i}},remux:pn},{demux:class extends $i{resetInitSegment(t,e,r,i){super.resetInitSegment(t,e,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const e=nt(t,0);let r=(null==e?void 0:e.length)||0;if(e&&11===t[r]&&119===t[r+1]&&void 0!==ot(e)&&Ki(t,r)<=16)return!1;for(let e=t.length;r<e;r++)if(Vi(t,r))return C.log("MPEG Audio sync word found !"),!0;return!1}canParse(t,e){return function(t,e){return Gi(t,e)&&4<=t.length-e}(t,e)}appendFrame(t,e,r){if(null!==this.basePTS)return Bi(t,e,r,this.basePTS,this.frameIndex)}},remux:pn}];En.splice(2,0,{demux:zi,remux:pn});class Sn{constructor(t,e,r,i,n){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=i,this.id=n}configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()}push(t,e,r,i){const n=r.transmuxing;n.executeStart=hn();let s=new Uint8Array(t);const{currentTransmuxState:a,transmuxConfig:o}=this;i&&(this.currentTransmuxState=i);const{contiguous:l,discontinuity:d,trackSwitch:u,accurateTimeOffset:c,timeOffset:h,initSegmentChange:f}=i||a,{audioCodec:g,videoCodec:p,defaultInitPts:m,duration:v,initSegmentData:y}=o,S=function(t,e){let r=null;t.byteLength>0&&null!=(null==e?void 0:e.key)&&null!==e.iv&&null!=e.method&&(r=e);return r}(s,e);if(S&&"AES-128"===S.method){const t=this.getDecrypter();if(!t.isSync())return this.decryptionPromise=t.webCryptoDecrypt(s,S.key.buffer,S.iv.buffer).then((t=>{const e=this.push(t,null,r);return this.decryptionPromise=null,e})),this.decryptionPromise;{let e=t.softwareDecrypt(s,S.key.buffer,S.iv.buffer);if(r.part>-1&&(e=t.flush()),!e)return n.executeEnd=hn(),wn(r);s=new Uint8Array(e)}}const w=this.needsProbing(d,u);if(w){const t=this.configureTransmuxer(s);if(t)return C.warn(`[transmuxer] ${t.message}`),this.observer.emit(b.ERROR,b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,fatal:!1,error:t,reason:t.message}),n.executeEnd=hn(),wn(r)}(d||u||f||w)&&this.resetInitSegment(y,g,p,v,e),(d||f||w)&&this.resetInitialTimestamp(m),l||this.resetContiguity();const $=this.transmux(s,S,h,c,r),A=this.currentTransmuxState;return A.contiguous=!0,A.discontinuity=!1,A.trackSwitch=!1,n.executeEnd=hn(),$}flush(t){const e=t.transmuxing;e.executeStart=hn();const{decrypter:r,currentTransmuxState:i,decryptionPromise:n}=this;if(n)return n.then((()=>this.flush(t)));const s=[],{timeOffset:a}=i;if(r){const e=r.flush();e&&s.push(this.push(e,null,t))}const{demuxer:o,remuxer:l}=this;if(!o||!l)return e.executeEnd=hn(),[wn(t)];const d=o.flush(a);return $n(d)?d.then((e=>(this.flushRemux(s,e,t),s))):(this.flushRemux(s,d,t),s)}flushRemux(t,e,r){const{audioTrack:i,videoTrack:n,id3Track:s,textTrack:a}=e,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;C.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const d=this.remuxer.remux(i,n,s,a,l,o,!0,this.id);t.push({remuxResult:d,chunkMeta:r}),r.transmuxing.executeEnd=hn()}resetInitialTimestamp(t){const{demuxer:e,remuxer:r}=this;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))}resetContiguity(){const{demuxer:t,remuxer:e}=this;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())}resetInitSegment(t,e,r,i,n){const{demuxer:s,remuxer:a}=this;s&&a&&(s.resetInitSegment(t,e,r,i),a.resetInitSegment(t,e,r,n))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(t,e,r,i,n){let s;return s=e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,i,n):this.transmuxUnencrypted(t,r,i,n),s}transmuxUnencrypted(t,e,r,i){const{audioTrack:n,videoTrack:s,id3Track:a,textTrack:o}=this.demuxer.demux(t,e,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(n,s,a,o,e,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(t,e,r,i,n){return this.demuxer.demuxSampleAes(t,e,r).then((t=>({remuxResult:this.remuxer.remux(t.audioTrack,t.videoTrack,t.id3Track,t.textTrack,r,i,!1,this.id),chunkMeta:n})))}configureTransmuxer(t){const{config:e,observer:r,typeSupported:i,vendor:n}=this;let s;for(let e=0,r=En.length;e<r;e++){var a;if(null!=(a=En[e].demux)&&a.probe(t)){s=En[e];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,d=s.remux,u=s.demux;l&&l instanceof d||(this.remuxer=new d(r,e,i,n)),o&&o instanceof u||(this.demuxer=new u(r,e,i),this.probe=u.probe)}needsProbing(t,e){return!this.demuxer||!this.remuxer||t||e}getDecrypter(){let t=this.decrypter;return t||(t=this.decrypter=new oi(this.config)),t}}const wn=t=>({remuxResult:{},chunkMeta:t});function $n(t){return"then"in t&&t.then instanceof Function}class An{constructor(t,e,r,i,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=i,this.defaultInitPts=n||null}}class Cn{constructor(t,e,r,i,n,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=n,this.initSegmentChange=s}}var Ln={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function s(t,e,i,s,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,s||t,a),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,s=i.length,a=new Array(s);n<s;n++)a[n]=i[n].fn;return a},o.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,n,s,a){var o=r?r+t:t;if(!this._events[o])return!1;var l,d,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,s),!0;case 6:return u.fn.call(u.context,e,i,n,s,a),!0}for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u.fn.apply(u.context,l)}else{var h,f=u.length;for(d=0;d<f;d++)switch(u[d].once&&this.removeListener(t,u[d].fn,void 0,!0),c){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,e);break;case 3:u[d].fn.call(u[d].context,e,i);break;case 4:u[d].fn.call(u[d].context,e,i,n);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u[d].fn.apply(u[d].context,l)}}return!0},o.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},o.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},o.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||a(this,s);else{for(var l=0,d=[],u=o.length;l<u;l++)(o[l].fn!==e||n&&!o[l].once||i&&o[l].context!==i)&&d.push(o[l]);d.length?this._events[s]=1===d.length?d[0]:d:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o}(Ln);var xn=i(Ln.exports);class Rn{constructor(t,e,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const n=t.config;this.hls=t,this.id=e,this.useWorker=!!n.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const s=(t,e)=>{(e=e||{}).frag=this.frag,e.id=this.id,t===b.ERROR&&(this.error=e.error),this.hls.trigger(t,e)};this.observer=new xn,this.observer.on(b.FRAG_DECRYPTED,s),this.observer.on(b.ERROR,s);const a=Qt(n.preferManagedMediaSource)||{isTypeSupported:()=>!1},o={mpeg:a.isTypeSupported("audio/mpeg"),mp3:a.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:a.isTypeSupported('audio/mp4; codecs="ac-3"')},l=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){if(n.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{n.workerPath?(C.log(`loading Web Worker ${n.workerPath} for "${e}"`),this.workerContext=function(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}(n.workerPath)):(C.log(`injecting Web Worker for "${e}"`),this.workerContext=function(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}()),this.onwmsg=t=>this.onWorkerMessage(t);const{worker:t}=this.workerContext;t.addEventListener("message",this.onwmsg),t.onerror=t=>{const r=new Error(`${t.message}  (${t.filename}:${t.lineno})`);n.enableWorker=!1,C.warn(`Error in "${e}" Web Worker, fallback to inline`),this.hls.trigger(b.ERROR,{type:T.OTHER_ERROR,details:E.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:r})},t.postMessage({cmd:"init",typeSupported:o,vendor:l,id:e,config:JSON.stringify(n)})}catch(t){C.warn(`Error setting up "${e}" Web Worker, fallback to inline`,t),this.resetWorker(),this.error=null,this.transmuxer=new Sn(this.observer,o,n,l,e)}return}}this.transmuxer=new Sn(this.observer,o,n,l,e)}resetWorker(){if(this.workerContext){const{worker:t,objectURL:e}=this.workerContext;e&&self.URL.revokeObjectURL(e),t.removeEventListener("message",this.onwmsg),t.onerror=null,t.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(t,e,r,i,n,s,a,o,l,d){var u,c;l.transmuxing.start=self.performance.now();const{transmuxer:h}=this,f=s?s.start:n.start,g=n.decryptdata,p=this.frag,m=!(p&&n.cc===p.cc),v=!(p&&l.level===p.level),y=p?l.sn-p.sn:-1,b=this.part?l.part-this.part.index:-1,T=0===y&&l.id>1&&l.id===(null==p?void 0:p.stats.chunkCount),E=!v&&(1===y||0===y&&(1===b||T&&b<=0)),S=self.performance.now();(v||y||0===n.stats.parsing.start)&&(n.stats.parsing.start=S),!s||!b&&E||(s.stats.parsing.start=S);const w=!(p&&(null==(u=n.initSegment)?void 0:u.url)===(null==(c=p.initSegment)?void 0:c.url)),$=new Cn(m,E,o,v,f,w);if(!E||m||w){C.log(`[transmuxer-interface, ${n.type}]: Starting new transmux session for sn: ${l.sn} p: ${l.part} level: ${l.level} id: ${l.id}\n        discontinuity: ${m}\n        trackSwitch: ${v}\n        contiguous: ${E}\n        accurateTimeOffset: ${o}\n        timeOffset: ${f}\n        initSegmentChange: ${w}`);const t=new An(r,i,e,a,d);this.configureTransmuxer(t)}if(this.frag=n,this.part=s,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:t,decryptdata:g,chunkMeta:l,state:$},t instanceof ArrayBuffer?[t]:[]);else if(h){const e=h.push(t,g,l,$);$n(e)?(h.async=!0,e.then((t=>{this.handleTransmuxComplete(t)})).catch((t=>{this.transmuxerError(t,l,"transmuxer-interface push error")}))):(h.async=!1,this.handleTransmuxComplete(e))}}flush(t){t.transmuxing.start=self.performance.now();const{transmuxer:e}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t});else if(e){let r=e.flush(t);$n(r)||e.async?($n(r)||(r=Promise.resolve(r)),r.then((e=>{this.handleFlushResult(e,t)})).catch((e=>{this.transmuxerError(e,t,"transmuxer-interface flush error")}))):this.handleFlushResult(r,t)}}transmuxerError(t,e,r){this.hls&&(this.error=t,this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_PARSING_ERROR,chunkMeta:e,fatal:!1,error:t,err:t,reason:r}))}handleFlushResult(t,e){t.forEach((t=>{this.handleTransmuxComplete(t)})),this.onFlush(e)}onWorkerMessage(t){const e=t.data,r=this.hls;switch(e.event){case"init":{var i;const t=null==(i=this.workerContext)?void 0:i.objectURL;t&&self.URL.revokeObjectURL(t);break}case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;case"workerLog":C[e.data.logType]&&C[e.data.logType](e.data.message);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}}configureTransmuxer(t){const{transmuxer:e}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:t}):e&&e.configure(t)}handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)}}function kn(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!Dn(t[r].attrs,e[r].attrs))return!1;return!0}function Dn(t,e,r){const i=t["STABLE-RENDITION-ID"];return i&&!r?i===e["STABLE-RENDITION-ID"]:!(r||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some((r=>t[r]!==e[r]))}function In(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class Pn{constructor(t){this.buffered=void 0;const e=(e,r,i)=>{if((r>>>=0)>i-1)throw new DOMException(`Failed to execute '${e}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${i})`);return t[r][e]};this.buffered={get length(){return t.length},end(r){return e("end",r,t.length)},start(r){return e("start",r,t.length)}}}}class _n{constructor(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}append(t,e,r){const i=this.queues[e];i.push(t),1!==i.length||r||this.executeNext(e)}insertAbort(t,e){this.queues[e].unshift(t),this.executeNext(e)}appendBlocker(t){let e;const r=new Promise((t=>{e=t})),i={execute:e,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,t),r}executeNext(t){const e=this.queues[t];if(e.length){const r=e[0];try{r.execute()}catch(e){C.warn(`[buffer-operation-queue]: Exception executing "${t}" SourceBuffer operation: ${e}`),r.onError(e);const i=this.buffers[t];null!=i&&i.updating||this.shiftAndExecuteNext(t)}}}shiftAndExecuteNext(t){this.queues[t].shift(),this.executeNext(t)}current(t){return this.queues[t][0]}}const On=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;function Mn(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach((e=>{t.removeChild(e)}))}const Nn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Fn=function(t){let e=t;return Nn.hasOwnProperty(t)&&(e=Nn[t]),String.fromCharCode(e)},Bn=15,Un=100,Gn={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},jn={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Vn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Hn={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Kn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class zn{constructor(){this.time=null,this.verboseLevel=0}log(t,e){if(this.verboseLevel>=t){const r="function"==typeof e?e():e;C.log(`${this.time} [${t}] ${r}`)}}}const qn=function(t){const e=[];for(let r=0;r<t.length;r++)e.push(t[r].toString(16));return e};class Wn{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){const e=["foreground","underline","italics","background","flash"];for(let r=0;r<e.length;r++){const i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Yn{constructor(){this.uchar=" ",this.penState=new Wn}reset(){this.uchar=" ",this.penState.reset()}setChar(t,e){this.uchar=t,this.penState.copy(e)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class Xn{constructor(t){this.chars=[],this.pos=0,this.currPenState=new Wn,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Un;t++)this.chars.push(new Yn);this.logger=t}equals(t){for(let e=0;e<Un;e++)if(!this.chars[e].equals(t.chars[e]))return!1;return!0}copy(t){for(let e=0;e<Un;e++)this.chars[e].copy(t.chars[e])}isEmpty(){let t=!0;for(let e=0;e<Un;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Un&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Un)}moveCursor(t){const e=this.pos+t;if(t>1)for(let t=this.pos+1;t<e+1;t++)this.chars[t].setPenState(this.currPenState);this.setCursor(e)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();const e=Fn(t);this.pos>=Un?this.logger.log(0,(()=>"Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))}clearFromPos(t){let e;for(e=t;e<Un;e++)this.chars[e].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const t=[];let e=!0;for(let r=0;r<Un;r++){const i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t);this.chars[this.pos].setPenState(this.currPenState)}}class Zn{constructor(t){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let e=0;e<Bn;e++)this.rows.push(new Xn(t));this.logger=t}reset(){for(let t=0;t<Bn;t++)this.rows[t].clear();this.currRow=14}equals(t){let e=!0;for(let r=0;r<Bn;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e}copy(t){for(let e=0;e<Bn;e++)this.rows[e].copy(t.rows[e])}isEmpty(){let t=!0;for(let e=0;e<Bn;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t);this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,(()=>"pacData = "+JSON.stringify(t)));let e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(let t=0;t<Bn;t++)this.rows[t].clear();const t=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){const i=r.rows[t].cueStartTime,n=this.logger.time;if(null!==i&&null!==n&&i<n)for(let i=0;i<this.nrRollUpRows;i++)this.rows[e-this.nrRollUpRows+i+1].copy(r.rows[t+i])}}this.currRow=e;const r=this.rows[this.currRow];if(null!==t.indent){const e=t.indent,i=Math.max(e-1,0);r.setCursor(t.indent),t.color=r.chars[i].penState.foreground}const i={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(t){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(t))),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;const e=[];let r="",i=-1;for(let r=0;r<Bn;r++){const n=this.rows[r].getTextString();n&&(i=r+1,t?e.push("Row "+i+": '"+n+"'"):e.push(n.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r}getTextAndFormat(){return this.rows}}class Qn{constructor(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Zn(r),this.nonDisplayedMemory=new Zn(r),this.lastOutputScreen=new Zn(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(t){this.outputFilter=t}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(()=>"MODE="+t)),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}insertChars(t){for(let e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);const e=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>e+": "+this.writeScreen.getDisplayText(!0))),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){const e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{const r=Math.floor(t/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];e.foreground=i[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)}outputDataUpdate(t=!1){const e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}class Jn{constructor(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const i=this.logger=new zn;this.channels=[null,new Qn(t,e,i),new Qn(t+1,r,i)]}getHandler(t){return this.channels[t].getHandler()}setHandler(t,e){this.channels[t].setHandler(e)}addData(t,e){let r,i,n,s=!1;this.logger.time=t;for(let t=0;t<e.length;t+=2)if(i=127&e[t],n=127&e[t+1],0!==i||0!==n){if(this.logger.log(3,"["+qn([e[t],e[t+1]])+"] -> ("+qn([i,n])+")"),r=this.parseCmd(i,n),r||(r=this.parseMidrow(i,n)),r||(r=this.parsePAC(i,n)),r||(r=this.parseBackgroundAttributes(i,n)),!r&&(s=this.parseChars(i,n),s)){const t=this.currentChannel;if(t&&t>0){this.channels[t].insertChars(s)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||s||this.logger.log(2,"Couldn't parse cleaned data "+qn([i,n])+" orig: "+qn([e[t],e[t+1]]))}}parseCmd(t,e){const{cmdHistory:r}=this;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=33&&e<=35))return!1;if(es(t,e,r))return ts(null,null,r),this.logger.log(3,"Repeated command ("+qn([t,e])+") is dropped"),!0;const i=20===t||21===t||23===t?1:2,n=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),ts(t,e,r),this.currentChannel=i,!0}parseMidrow(t,e){let r=0;if((17===t||25===t)&&e>=32&&e<=47){if(r=17===t?1:2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return!!i&&(i.ccMIDROW(e),this.logger.log(3,"MIDROW ("+qn([t,e])+")"),!0)}return!1}parsePAC(t,e){let r;const i=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127)&&!((16===t||24===t)&&e>=64&&e<=95))return!1;if(es(t,e,i))return ts(null,null,i),!0;const n=t<=23?1:2;r=e>=64&&e<=95?1===n?Gn[t]:Vn[t]:1===n?jn[t]:Hn[t];const s=this.channels[n];return!!s&&(s.setPAC(this.interpretPAC(r,e)),ts(t,e,i),this.currentChannel=n,!0)}interpretPAC(t,e){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i}parseChars(t,e){let r,i=null,n=null;if(t>=25?(r=2,n=t-8):(r=1,n=t),n>=17&&n<=19){let t;t=17===n?e+80:18===n?e+112:e+144,this.logger.log(2,"Special char '"+Fn(t)+"' in channel "+r),i=[t]}else t>=32&&t<=127&&(i=0===e?[t]:[t,e]);if(i){const r=qn(i);this.logger.log(3,"Char codes =  "+r.join(",")),ts(t,e,this.cmdHistory)}return i}parseBackgroundAttributes(t,e){if(!((16===t||24===t)&&e>=32&&e<=47)&&!((23===t||31===t)&&e>=45&&e<=47))return!1;let r;const i={};16===t||24===t?(r=Math.floor((e-32)/2),i.background=Kn[r],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0));const n=t<=23?1:2;return this.channels[n].setBkgData(i),ts(t,e,this.cmdHistory),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){const e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(t){for(let e=0;e<this.channels.length;e++){const r=this.channels[e];r&&r.cueSplitAtTime(t)}}}function ts(t,e,r){r.a=t,r.b=e}function es(t,e,r){return r.a===t&&r.b===e}class rs{constructor(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var is=function(){if(null!=V&&V.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;const r=e.toLowerCase();return!!~t.indexOf(r)&&r}function i(t){return r(e,t)}function n(t,...e){let r=1;for(;r<arguments.length;r++){const e=arguments[r];for(const r in e)t[r]=e[r]}return t}function s(e,s,a){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let d="",u=!1,c=e,h=s,f=a,g=null,p="",m=!0,v="auto",y="start",b=50,T="middle",E=50,S="middle";Object.defineProperty(o,"id",n({},l,{get:function(){return d},set:function(t){d=""+t}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},l,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return p},set:function(e){const i=function(e){return r(t,e)}(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");p=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},l,{get:function(){return v},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return y},set:function(t){const e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},l,{get:function(){return b},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return T},set:function(t){const e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},l,{get:function(){return E},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},l,{get:function(){return S},set:function(t){const e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");S=e,this.hasBeenReset=!0}})),o.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class ns{decode(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}function ss(t){function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(i||0)}const r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}class as{constructor(){this.values=Object.create(null)}set(t,e){this.get(t)||""===e||(this.values[t]=e)}get(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e}has(t){return t in this.values}alt(t,e,r){for(let i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}}integer(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))}percent(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){const r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1}}function os(t,e,r,i){const n=i?t.split(i):[t];for(const t in n){if("string"!=typeof n[t])continue;const i=n[t].split(r);if(2!==i.length)continue;e(i[0],i[1])}}const ls=new is(0,0,""),ds="middle"===ls.align?"middle":"center";function us(t,e,r){const i=t;function n(){const e=ss(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=n(),s(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.slice(3),s(),e.endTime=n(),s(),function(t,e){const i=new as;os(t,(function(t,e){let n;switch(t){case"region":for(let n=r.length-1;n>=0;n--)if(r[n].id===e){i.set(t,r[n].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":n=e.split(","),i.integer(t,n[0]),i.percent(t,n[0])&&i.set("snapToLines",!1),i.alt(t,n[0],["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",ds,"end"]);break;case"position":n=e.split(","),i.percent(t,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",ds,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",ds,"end","left","right"])}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");let n=i.get("line","auto");"auto"===n&&-1===ls.line&&(n=-1),e.line=n,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",ds);let s=i.get("position","auto");"auto"===s&&50===ls.position&&(s="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=s}(t,e)}function cs(t){return t.replace(/<br(?: \/)?>/gi,"\n")}class hs{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new ns,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(t){const e=this;function r(){let t=e.buffer,r=0;for(t=cs(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;const i=t.slice(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.slice(r),i}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{let t="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;t=r();const i=t.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==i||!i[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}let i=!1;for(;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(i?i=!1:t=r(),e.state){case"HEADER":/:/.test(t)?os(t,(function(t,e){}),/:/):t||(e.state="ID");continue;case"NOTE":t||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){e.state="NOTE";break}if(!t)continue;if(e.cue=new is(0,0,""),e.state="CUE",-1===t.indexOf("--\x3e")){e.cue.id=t;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{us(t,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":{const r=-1!==t.indexOf("--\x3e");if(!t||r&&(i=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=t}continue;case"BADCUE":t||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this}flush(){const t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this}}const fs=/\r\n|\n\r|\n|\r/g,gs=function(t,e,r=0){return t.slice(r,r+e.length)===e},ps=function(t){let e=5381,r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function ms(t,e,r){return ps(t.toString())+ps(e.toString())+ps(r)}function vs(t,e,r,i,n,s,a){const o=new hs,l=mt(new Uint8Array(t)).trim().replace(fs,"\n").split("\n"),d=[],u=e?function(t,e=1){return un(t,dn,1/e)}(e.baseTime,e.timescale):0;let c,h="00:00.000",f=0,g=0,p=!0;o.oncue=function(t){const s=r[i];let a=r.ccOffset;const o=(f-u)/9e4;if(null!=s&&s.new&&(void 0!==g?a=r.ccOffset=s.start:function(t,e,r){let i=t[e],n=t[i.prevCC];if(!n||!n.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;null!=(s=n)&&s.new;){var s;t.ccOffset+=i.start-n.start,i.new=!1,i=n,n=t[i.prevCC]}t.presentationOffset=r}(r,i,o)),o){if(!e)return void(c=new Error("Missing initPTS for VTT MPEGTS"));a=o-r.presentationOffset}const l=t.endTime-t.startTime,h=mn(9e4*(t.startTime+a-g),9e4*n)/9e4;t.startTime=Math.max(h,0),t.endTime=Math.max(h+l,0);const p=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(p)),t.id||(t.id=ms(t.startTime,t.endTime,p)),t.endTime>0&&d.push(t)},o.onparsingerror=function(t){c=t},o.onflush=function(){c?a(c):s(d)},l.forEach((t=>{if(p){if(gs(t,"X-TIMESTAMP-MAP=")){p=!1,t.slice(16).split(",").forEach((t=>{gs(t,"LOCAL:")?h=t.slice(6):gs(t,"MPEGTS:")&&(f=parseInt(t.slice(7)))}));try{g=function(t){let e=parseInt(t.slice(-3));const r=parseInt(t.slice(-6,-4)),i=parseInt(t.slice(-9,-7)),n=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!(m(e)&&m(r)&&m(i)&&m(n)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${t}`);return e+=1e3*r,e+=6e4*i,e+=36e5*n,e}(h)/1e3}catch(t){c=t}return}""===t&&(p=!1)}o.parse(t+"\n")})),o.flush()}const ys="stpp.ttml.im1t",bs=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ts=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Es={left:"start",center:"center",right:"end",start:"start",end:"end"};function Ss(t,e,r,i){const n=Rt(new Uint8Array(t),["mdat"]);if(0===n.length)return void i(new Error("Could not parse IMSC1 mdat"));const s=n.map((t=>mt(t))),a=function(t,e,r=1,i=!1){return un(t,e,1/r,i)}(e.baseTime,1,e.timescale);try{s.forEach((t=>r(function(t,e){const r=(new DOMParser).parseFromString(t,"text/xml"),i=r.getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const n={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(n).reduce(((t,e)=>(t[e]=i.getAttribute(`ttp:${e}`)||n[e],t)),{}),a="preserve"!==i.getAttribute("xml:space"),o=$s(ws(i,"styling","style")),l=$s(ws(i,"layout","region")),d=ws(i,"body","[begin]");return[].map.call(d,(t=>{const r=As(t,a);if(!r||!t.hasAttribute("begin"))return null;const i=xs(t.getAttribute("begin"),s),n=xs(t.getAttribute("dur"),s);let d=xs(t.getAttribute("end"),s);if(null===i)throw Ls(t);if(null===d){if(null===n)throw Ls(t);d=i+n}const u=new is(i-e,d-e,r);u.id=ms(u.startTime,u.endTime,u.text);const c=function(t,e,r){const i="http://www.w3.org/ns/ttml#styling";let n=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=null!=t&&t.hasAttribute("style")?t.getAttribute("style"):null;a&&r.hasOwnProperty(a)&&(n=r[a]);return s.reduce(((r,s)=>{const a=Cs(e,i,s)||Cs(t,i,s)||Cs(n,i,s);return a&&(r[s]=a),r}),{})}(l[t.getAttribute("region")],o[t.getAttribute("style")],o),{textAlign:h}=c;if(h){const t=Es[h];t&&(u.lineAlign=t),u.align=h}return p(u,c),u})).filter((t=>null!==t))}(t,a))))}catch(t){i(t)}}function ws(t,e,r){const i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function $s(t){return t.reduce(((t,e)=>{const r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function As(t,e){return[].slice.call(t.childNodes).reduce(((t,r,i)=>{var n;return"br"===r.nodeName&&i?t+"\n":null!=(n=r.childNodes)&&n.length?As(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent}),"")}function Cs(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function Ls(t){return new Error(`Could not parse ttml timestamp ${t}`)}function xs(t,e){if(!t)return null;let r=ss(t);return null===r&&(bs.test(t)?r=function(t,e){const r=bs.exec(t),i=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+i/e.frameRate}(t,e):Ts.test(t)&&(r=function(t,e){const r=Ts.exec(t),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(t,e))),r}function Rs(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function ks(t,e){return!!t&&t.kind===Rs(e)&&In(e,t)}class Ds{constructor(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(t){this.streamController=t}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:t}=this;t.on(b.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(b.MANIFEST_PARSED,this.onManifestParsed,this),t.on(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(b.BUFFER_CODECS,this.onBufferCodecs,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:t}=this;t.off(b.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(b.MANIFEST_PARSED,this.onManifestParsed,this),t.off(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(b.BUFFER_CODECS,this.onBufferCodecs,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(t,e){const r=this.hls.levels[e.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(t,e){const r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onLevelsUpdated(t,e){this.timer&&m(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const t=this.hls.levels;if(t.length){const e=this.hls,r=this.getMaxLevel(t.length-1);r!==this.autoLevelCapping&&C.log(`Setting autoLevelCapping to ${r}: ${t[r].height}p@${t[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),e.autoLevelCapping=r,e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}}getMaxLevel(t){const e=this.hls.levels;if(!e.length)return-1;const r=e.filter(((e,r)=>this.isLevelAllowed(e)&&r<=t));return this.clientRect=null,Ds.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const t=this.media,e={width:0,height:0};if(t){const r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch(t){}return t}isLevelAllowed(t){return!this.restrictedLevels.some((e=>t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height))}static getMaxLevelByMediaSize(t,e,r){if(null==t||!t.length)return-1;let i=t.length-1;const n=Math.max(e,r);for(let e=0;e<t.length;e+=1){const r=t[e];if((r.width>=n||r.height>=n)&&(s=r,!(a=t[e+1])||s.width!==a.width||s.height!==a.height)){i=e;break}}var s,a;return i}}const Is="[eme]";class Ps{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ps.CDMCleanupPromise?[Ps.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=C.debug.bind(C,Is),this.log=C.log.bind(C,Is),this.warn=C.warn.bind(C,Is),this.error=C.error.bind(C,Is),this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(b.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(b.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(b.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(b.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(t){const{drmSystems:e,widevineLicenseUrl:r}=this.config,i=e[t];if(i)return i.licenseUrl;if(t===H.WIDEVINE&&r)return r;throw new Error(`no license server URL configured for key-system "${t}"`)}getServerCertificateUrl(t){const{drmSystems:e}=this.config,r=e[t];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const e=this.hls.levels,r=(t,e,r)=>!!t&&r.indexOf(t)===e,i=e.map((t=>t.audioCodec)).filter(r),n=e.map((t=>t.videoCodec)).filter(r);return i.length+n.length===0&&n.push("avc1.42e01e"),new Promise(((e,r)=>{const s=t=>{const a=t.shift();this.getMediaKeysPromise(a,i,n).then((t=>e({keySystem:a,mediaKeys:t}))).catch((e=>{t.length?s(t):r(e instanceof _s?e:new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))}))};s(t)}))}requestMediaKeySystemAccess(t,e){const{requestMediaKeySystemAccessFunc:r}=this.config;if("function"!=typeof r){let t=`Configured requestMediaKeySystemAccess is not a function ${r}`;return null===J&&"http:"===self.location.protocol&&(t=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(t))}return r(t,e)}getMediaKeysPromise(t,e,r){const i=function(t,e,r,i){let n;switch(t){case H.FAIRPLAY:n=["cenc","sinf"];break;case H.WIDEVINE:case H.PLAYREADY:n=["cenc"];break;case H.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return function(t,e,r,i){return[{initDataTypes:t,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map((t=>({contentType:`audio/mp4; codecs="${t}"`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}))),videoCapabilities:r.map((t=>({contentType:`video/mp4; codecs="${t}"`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null})))}]}(n,e,r,i)}(t,e,r,this.config.drmSystemOptions),n=this.keySystemAccessPromises[t];let s=null==n?void 0:n.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${t}" key-system access with config: ${JSON.stringify(i)}`),s=this.requestMediaKeySystemAccess(t,i);const e=this.keySystemAccessPromises[t]={keySystemAccess:s};return s.catch((e=>{this.log(`Failed to obtain access to key-system "${t}": ${e}`)})),s.then((r=>{this.log(`Access for key-system "${r.keySystem}" obtained`);const i=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),e.mediaKeys=r.createMediaKeys().then((e=>(this.log(`Media-keys created for "${t}"`),i.then((r=>r?this.setMediaKeysServerCertificate(e,t,r):e))))),e.mediaKeys.catch((e=>{this.error(`Failed to create media-keys for "${t}"}: ${e}`)})),e.mediaKeys}))}return s.then((()=>n.mediaKeys))}createMediaKeySessionContext({decryptdata:t,keySystem:e,mediaKeys:r}){this.log(`Creating key-system session "${e}" keyId: ${bt(t.keyId||[])}`);const i=r.createSession(),n={decryptdata:t,keySystem:e,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(n),n}renewKeySession(t){const e=t.decryptdata;if(e.pssh){const r=this.createMediaKeySessionContext(t),i=this.getKeyIdString(e),n="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,n,e.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return bt(t.keyId)}updateKeySession(t,e){var r;const i=t.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${bt((null==(r=t.decryptdata)?void 0:r.keyId)||[])}\n      } (data length: ${e?e.byteLength:e})`),i.update(e)}selectKeySystemFormat(t){const e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise}getKeyFormatPromise(t){return new Promise(((e,r)=>{const i=Q(this.config),n=t.map(Y).filter((t=>!!t&&-1!==i.indexOf(t)));return this.getKeySystemSelectionPromise(n).then((({keySystem:t})=>{const i=Z(t);i?e(i):r(new Error(`Unable to find format for key-system "${t}"`))})).catch(r)}))}loadKey(t){const e=t.keyInfo.decryptdata,r=this.getKeyIdString(e),i=`(keyId: ${r} format: "${e.keyFormat}" method: ${e.method} uri: ${e.uri})`;this.log(`Starting session for key ${i}`);let n=this.keyIdToKeySessionPromise[r];return n||(n=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(e).then((({keySystem:r,mediaKeys:n})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${i}`),this.attemptSetMediaKeys(r,n).then((()=>{this.throwIfDestroyed();const t=this.createMediaKeySessionContext({keySystem:r,mediaKeys:n,decryptdata:e});return this.generateRequestWithPreferredKeySession(t,"cenc",e.pssh,"playlist-key")}))))),n.catch((t=>this.handleError(t)))),n}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){this.hls&&(this.error(t.message),t instanceof _s?this.hls.trigger(b.ERROR,t.data):this.hls.trigger(b.ERROR,{type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const e=this.getKeyIdString(t),r=this.keyIdToKeySessionPromise[e];if(!r){const e=Y(t.keyFormat),r=e?[e]:Q(this.config);return this.attemptKeySystemAccess(r)}return r}getKeySystemSelectionPromise(t){if(t.length||(t=Q(this.config)),0===t.length)throw new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}_onMediaEncrypted(t){const{initDataType:e,initData:r}=t;if(this.debug(`"${t.type}" event: init data type: "${e}"`),null===r)return;let i,n;if("sinf"===e&&this.config.drmSystems[H.FAIRPLAY]){const t=wt(new Uint8Array(r));try{const e=U(JSON.parse(t).sinf),r=Mt(new Uint8Array(e));if(!r)return;i=r.subarray(8,24),n=H.FAIRPLAY}catch(t){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const t=function(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},r=new DataView(t),i=r.getUint32(0);if(t.byteLength!==i&&i>44)return null;if(1886614376!==r.getUint32(4))return null;if(e.version=r.getUint32(8)>>>24,e.version>1)return null;e.systemId=bt(new Uint8Array(t,12,16));const n=r.getUint32(28);if(0===e.version){if(i-32<n)return null;e.data=new Uint8Array(t,32,n)}else if(1===e.version){e.kids=[];for(let r=0;r<n;r++)e.kids.push(new Uint8Array(t,32+16*r,16))}return e}(r);if(null===t)return;0===t.version&&t.systemId===X&&t.data&&(i=t.data.subarray(8,24)),n=function(t){if(t===X)return H.WIDEVINE}(t.systemId)}if(!n||!i)return;const s=bt(i),{keyIdToKeySessionPromise:a,mediaKeySessions:o}=this;let l=a[s];for(let t=0;t<o.length;t++){const n=o[t],d=n.decryptdata;if(d.pssh||!d.keyId)continue;const u=bt(d.keyId);if(s===u||-1!==d.uri.replace(/-/g,"").indexOf(s)){l=a[u],delete a[u],d.pssh=new Uint8Array(r),d.keyId=i,l=a[s]=l.then((()=>this.generateRequestWithPreferredKeySession(n,e,r,"encrypted-event-key-match")));break}}l||(l=a[s]=this.getKeySystemSelectionPromise([n]).then((({keySystem:t,mediaKeys:n})=>{var a;this.throwIfDestroyed();const o=new Kt("ISO-23001-7",s,null!=(a=Z(t))?a:"");return o.pssh=new Uint8Array(r),o.keyId=i,this.attemptSetMediaKeys(t,n).then((()=>{this.throwIfDestroyed();const i=this.createMediaKeySessionContext({decryptdata:o,keySystem:t,mediaKeys:n});return this.generateRequestWithPreferredKeySession(i,e,r,"encrypted-event-no-match")}))}))),l.catch((t=>this.handleError(t)))}_onWaitingForKey(t){this.log(`"${t.type}" event`)}attemptSetMediaKeys(t,e){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const i=Promise.all(r).then((()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(e)}));return this.setMediaKeysQueue.push(i),i.then((()=>{this.log(`Media-keys set for "${t}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter((t=>-1===r.indexOf(t)))}))}generateRequestWithPreferredKeySession(t,e,r,i){var n,s;const a=null==(n=this.config.drmSystems)||null==(s=n[t.keySystem])?void 0:s.generateRequest;if(a)try{const i=a.call(this.hls,e,r,t);if(!i)throw new Error("Invalid response from configured generateRequest filter");e=i.initDataType,r=t.decryptdata.pssh=i.initData?new Uint8Array(i.initData):null}catch(t){var o;if(this.warn(t.message),null!=(o=this.hls)&&o.config.debug)throw t}if(null===r)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(t);const l=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${i}": ${l} (init data type: ${e} length: ${r?r.byteLength:null})`);const d=new xn,u=t._onmessage=e=>{const r=t.mediaKeysSession;if(!r)return void d.emit("error",new Error("invalid state"));const{messageType:i,message:n}=e;this.log(`"${i}" message event for session "${r.sessionId}" message size: ${n.byteLength}`),"license-request"===i||"license-renewal"===i?this.renewLicense(t,n).catch((t=>{this.handleError(t),d.emit("error",t)})):"license-release"===i?t.keySystem===H.FAIRPLAY&&(this.updateKeySession(t,j("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${i}"`)},c=t._onkeystatuseschange=e=>{if(!t.mediaKeysSession)return void d.emit("error",new Error("invalid state"));this.onKeyStatusChange(t);const r=t.keyStatus;d.emit("keyStatus",r),"expired"===r&&(this.warn(`${t.keySystem} expired for key ${l}`),this.renewKeySession(t))};t.mediaKeysSession.addEventListener("message",u),t.mediaKeysSession.addEventListener("keystatuseschange",c);const h=new Promise(((t,e)=>{d.on("error",e),d.on("keyStatus",(r=>{r.startsWith("usable")?t():"output-restricted"===r?e(new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?e(new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${r}"`)):"expired"===r?e(new Error("key expired while generating request")):this.warn(`unhandled key status change "${r}"`)}))}));return t.mediaKeysSession.generateRequest(e,r).then((()=>{var e;this.log(`Request generated for key-session "${null==(e=t.mediaKeysSession)?void 0:e.sessionId}" keyId: ${l}`)})).catch((t=>{throw new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_NO_SESSION,error:t,fatal:!1},`Error generating key-session request: ${t}`)})).then((()=>h)).catch((e=>{throw d.removeAllListeners(),this.removeSession(t),e})).then((()=>(d.removeAllListeners(),t)))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach(((e,r)=>{this.log(`key status change "${e}" for keyStatuses keyId: ${bt("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${bt(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=e}))}fetchServerCertificate(t){const e=this.config,r=new(0,e.loader)(e),i=this.getServerCertificateUrl(t);return i?(this.log(`Fetching server certificate for "${t}"`),new Promise(((n,s)=>{const a={responseType:"arraybuffer",url:i},o=e.certLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,e,r,i)=>{n(t.data)},onError:(e,r,n,o)=>{s(new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:h({url:a.url,data:void 0},e)},`"${t}" certificate request failed (${i}). Status: ${e.code} (${e.text})`))},onTimeout:(e,r,n)=>{s(new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:n,response:{url:a.url,data:void 0}},`"${t}" certificate request timed out (${i})`))},onAbort:(t,e,r)=>{s(new Error("aborted"))}};r.load(a,l,d)}))):Promise.resolve()}setMediaKeysServerCertificate(t,e,r){return new Promise(((i,n)=>{t.setServerCertificate(r).then((n=>{this.log(`setServerCertificate ${n?"success":"not supported by CDM"} (${null==r?void 0:r.byteLength}) on "${e}"`),i(t)})).catch((t=>{n(new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:t,fatal:!0},t.message))}))}))}renewLicense(t,e){return this.requestLicense(t,new Uint8Array(e)).then((e=>this.updateKeySession(t,new Uint8Array(e)).catch((t=>{throw new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:t,fatal:!0},t.message)}))))}unpackPlayReadyKeyMessage(t,e){const r=String.fromCharCode.apply(null,new Uint16Array(e.buffer));if(!r.includes("PlayReadyKeyMessage"))return t.setRequestHeader("Content-Type","text/xml; charset=utf-8"),e;const i=(new DOMParser).parseFromString(r,"application/xml"),n=i.querySelectorAll("HttpHeader");if(n.length>0){let e;for(let r=0,i=n.length;r<i;r++){var s,a;e=n[r];const i=null==(s=e.querySelector("name"))?void 0:s.textContent,o=null==(a=e.querySelector("value"))?void 0:a.textContent;i&&o&&t.setRequestHeader(i,o)}}const o=i.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return j(atob(l))}setupLicenseXHR(t,e,r,i){const n=this.config.licenseXhrSetup;return n?Promise.resolve().then((()=>{if(!r.decryptdata)throw new Error("Key removed");return n.call(this.hls,t,e,r,i)})).catch((s=>{if(!r.decryptdata)throw s;return t.open("POST",e,!0),n.call(this.hls,t,e,r,i)})).then((r=>{t.readyState||t.open("POST",e,!0);return{xhr:t,licenseChallenge:r||i}})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:i}))}requestLicense(t,e){const r=this.config.keyLoadPolicy.default;return new Promise(((i,n)=>{const s=this.getLicenseServerUrl(t.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return n(new Error("invalid state"));if(4===a.readyState)if(200===a.status){this._requestLicenseFailureCount=0;let e=a.response;this.log(`License received ${e instanceof ArrayBuffer?e.byteLength:e}`);const r=this.config.licenseResponseCallback;if(r)try{e=r.call(this.hls,a,s,t)}catch(t){this.error(t)}i(e)}else{const o=r.errorRetry,l=o?o.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||a.status>=400&&a.status<500)n(new _s({type:T.KEY_SYSTEM_ERROR,details:E.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const r=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${r} attempts left`),this.requestLicense(t,e).then(i,n)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=a,this.setupLicenseXHR(a,s,t,e).then((({xhr:e,licenseChallenge:r})=>{t.keySystem==H.PLAYREADY&&(r=this.unpackPlayReadyKeyMessage(e,r)),e.send(r)}))}))}onMediaAttached(t,e){if(!this.config.emeEnabled)return;const r=e.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media,e=this.mediaKeySessions;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Kt.clearKeyUriToKeyIdMap();const r=e.length;Ps.CDMCleanupPromise=Promise.all(e.map((t=>this.removeSession(t))).concat(null==t?void 0:t.setMediaKeys(null).catch((t=>{this.log(`Could not clear media keys: ${t}`)})))).then((()=>{r&&(this.log("finished closing key sessions and clearing media keys"),e.length=0)})).catch((t=>{this.log(`Could not close sessions and clear media keys: ${t}`)}))}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:e}){if(e&&this.config.emeEnabled&&!this.keyFormatPromise){const t=e.reduce(((t,e)=>(-1===t.indexOf(e.keyFormat)&&t.push(e.keyFormat),t)),[]);this.log(`Selecting key-system from session-keys ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)}}removeSession(t){const{mediaKeysSession:e,licenseXhr:r}=t;if(e){this.log(`Remove licenses and keys and close session ${e.sessionId}`),t._onmessage&&(e.removeEventListener("message",t._onmessage),t._onmessage=void 0),t._onkeystatuseschange&&(e.removeEventListener("keystatuseschange",t._onkeystatuseschange),t._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(t);return i>-1&&this.mediaKeySessions.splice(i,1),e.remove().catch((t=>{this.log(`Could not remove session: ${t}`)})).then((()=>e.close())).catch((t=>{this.log(`Could not close session: ${t}`)}))}}}Ps.CDMCleanupPromise=void 0;class _s extends Error{constructor(t,e){super(e),this.data=void 0,t.error||(t.error=new Error(e)),this.data=t,t.err=t.error}}var Os,Ms,Ns;!function(t){t.MANIFEST="m",t.AUDIO="a",t.VIDEO="v",t.MUXED="av",t.INIT="i",t.CAPTION="c",t.TIMED_TEXT="tt",t.KEY="k",t.OTHER="o"}(Os||(Os={})),function(t){t.DASH="d",t.HLS="h",t.SMOOTH="s",t.OTHER="o"}(Ms||(Ms={})),function(t){t.OBJECT="CMCD-Object",t.REQUEST="CMCD-Request",t.SESSION="CMCD-Session",t.STATUS="CMCD-Status"}(Ns||(Ns={}));const Fs={[Ns.OBJECT]:["br","d","ot","tb"],[Ns.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[Ns.SESSION]:["cid","pr","sf","sid","st","v"],[Ns.STATUS]:["bs","rtp"]};class Bs{constructor(t,e){this.value=void 0,this.params=void 0,Array.isArray(t)&&(t=t.map((t=>t instanceof Bs?t:new Bs(t)))),this.value=t,this.params=e}}class Us{constructor(t){this.description=void 0,this.description=t}}const Gs="Dict";function js(t,e,r,i){return new Error(`failed to ${t} "${n=e,Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":"object"==typeof n?JSON.stringify(n):String(n)}" as ${r}`,{cause:i});var n}const Vs="Bare Item",Hs="Boolean",Ks="Byte Sequence",zs="Decimal",qs="Integer";const Ws=/[\x00-\x1f\x7f]+/,Ys="Token",Xs="Key";function Zs(t,e,r){return js("serialize",t,e,r)}function Qs(t){if(!1===ArrayBuffer.isView(t))throw Zs(t,Ks);return`:${e=t,btoa(String.fromCharCode(...e))}:`;var e}function Js(t){if(function(t){return t<-999999999999999||999999999999999<t}(t))throw Zs(t,qs);return t.toString()}function ta(t,e){if(t<0)return-ta(-t,e);const r=Math.pow(10,e);if(Math.abs(t*r%1-.5)<Number.EPSILON){const e=Math.floor(t*r);return(e%2==0?e:e+1)/r}return Math.round(t*r)/r}function ea(t){const e=ta(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Zs(t,zs);const r=e.toString();return r.includes(".")?r:`${r}.0`}const ra="String";function ia(t){const e=(r=t).description||r.toString().slice(7,-1);var r;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e))throw Zs(e,Ys);return e}function na(t){switch(typeof t){case"number":if(!m(t))throw Zs(t,Vs);return Number.isInteger(t)?Js(t):ea(t);case"string":return function(t){if(Ws.test(t))throw Zs(t,ra);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(t);case"symbol":return ia(t);case"boolean":return function(t){if("boolean"!=typeof t)throw Zs(t,Hs);return t?"?1":"?0"}(t);case"object":if(t instanceof Date)return function(t){return`@${Js(t.getTime()/1e3)}`}(t);if(t instanceof Uint8Array)return Qs(t);if(t instanceof Us)return ia(t);default:throw Zs(t,Vs)}}function sa(t){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(t))throw Zs(t,Xs);return t}function aa(t){return null==t?"":Object.entries(t).map((([t,e])=>!0===e?`;${sa(t)}`:`;${sa(t)}=${na(e)}`)).join("")}function oa(t){return t instanceof Bs?`${na(t.value)}${aa(t.params)}`:na(t)}function la(t,e={whitespace:!0}){if("object"!=typeof t)throw Zs(t,Gs);const r=t instanceof Map?t.entries():Object.entries(t),i=null!=e&&e.whitespace?" ":"";return Array.from(r).map((([t,e])=>{e instanceof Bs==!1&&(e=new Bs(e));let r=sa(t);var i;return!0===e.value?r+=aa(e.params):(r+="=",Array.isArray(e.value)?r+=`(${(i=e).value.map(oa).join(" ")})${aa(i.params)}`:r+=oa(e)),r})).join(`,${i}`)}const da=t=>"ot"===t||"sf"===t||"st"===t,ua=t=>"number"==typeof t?m(t):null!=t&&""!==t&&!1!==t;const ca=t=>Math.round(t),ha=t=>100*ca(t/100),fa={br:ca,d:ca,bl:ha,dl:ha,mtp:ha,nor:(t,e)=>(null!=e&&e.baseUrl&&(t=function(t,e){const r=new URL(t),i=new URL(e);if(r.origin!==i.origin)return t;const n=r.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;n[0]===s[0];)n.shift(),s.shift();for(;s.length;)s.shift(),n.unshift("..");return n.join("/")}(t,e.baseUrl)),encodeURIComponent(t)),rtp:ha,tb:ca};function ga(t,e={}){return t?function(t,e){return la(t,e)}(function(t,e){const r={};if(null==t||"object"!=typeof t)return r;const i=Object.keys(t).sort(),n=p({},fa,null==e?void 0:e.formatters),s=null==e?void 0:e.filter;return i.forEach((i=>{if(null!=s&&s(i))return;let a=t[i];const o=n[i];o&&(a=o(a,e)),"v"===i&&1===a||"pr"==i&&1===a||ua(a)&&(da(i)&&"string"==typeof a&&(a=new Us(a)),r[i]=a)})),r}(t,e),p({whitespace:!1},e)):""}function pa(t,e,r){return p(t,function(t,e={}){if(!t)return{};const r=Object.entries(t),i=Object.entries(Fs).concat(Object.entries((null==e?void 0:e.customHeaderMap)||{})),n=r.reduce(((t,e)=>{var r;const[n,s]=e,a=(null==(r=i.find((t=>t[1].includes(n))))?void 0:r[0])||Ns.REQUEST;return null!=t[a]||(t[a]={}),t[a][n]=s,t}),{});return Object.entries(n).reduce(((t,[r,i])=>(t[r]=ga(i,e),t)),{})}(e,r))}const ma="CMCD";const va=/CMCD=[^&#]+/;function ya(t,e,r){const i=function(t,e={}){if(!t)return"";const r=ga(t,e);return`${ma}=${encodeURIComponent(r)}`}(e,r);if(!i)return t;if(va.test(t))return t.replace(va,i);const n=t.includes("?")?"&":"?";return`${t}${n}${i}`}function ba(t,e,r,i){t&&Object.keys(e).forEach((n=>{const s=t.filter((t=>t.groupId===n)).map((t=>{const s=p({},t);return s.details=void 0,s.attrs=new R(s.attrs),s.url=s.attrs.URI=Ta(t.url,t.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),s.groupId=s.attrs["GROUP-ID"]=e[n],s.attrs["PATHWAY-ID"]=i,s}));t.push(...s)}))}function Ta(t,e,r,i){const{HOST:n,PARAMS:s,[r]:a}=i;let o;e&&(o=null==a?void 0:a[e],o&&(t=o));const l=new self.URL(t);return n&&!o&&(l.host=n),s&&Object.keys(s).sort().forEach((t=>{t&&l.searchParams.set(t,s[t])})),l.href}const Ea=/^age:\s*[\d.]+\s*$/im;class Sa{constructor(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new I,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null,this.stats=null}abortInternal(){const t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))}abort(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:t,context:e}=this;if(!t||!e)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const n=this.xhrSetup;n?Promise.resolve().then((()=>{if(!this.stats.aborted)return n(r,e.url)})).catch((t=>(r.open("GET",e.url,!0),n(r,e.url)))).then((()=>{this.stats.aborted||this.openAndSendXhr(r,e,t)})).catch((t=>{this.callbacks.onError({code:r.status,text:t.message},e,r,i)})):this.openAndSendXhr(r,e,t)}openAndSendXhr(t,e,r){t.readyState||t.open("GET",e.url,!0);const i=e.headers,{maxTimeToFirstByteMs:n,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const e in i)t.setRequestHeader(e,i[e]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),r.timeout=n&&m(n)?n:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),t.send()}readystatechange(){const{context:t,loader:e,stats:r}=this;if(!t||!e)return;const i=e.readyState,n=this.config;if(!r.aborted&&i>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),e.onreadystatechange=null,e.onprogress=null;const i=e.status,s="text"!==e.responseType;if(i>=200&&i<300&&(s&&e.response||null!==e.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);const n=s?e.response:e.responseText,a="arraybuffer"===e.responseType?n.byteLength:n.length;if(r.loaded=r.total=a,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;const o=this.callbacks.onProgress;if(o&&o(r,t,n,e),!this.callbacks)return;const l={url:e.responseURL,data:n,code:i};this.callbacks.onSuccess(l,r,t,e)}else{const s=n.loadPolicy.errorRetry;hr(s,r.retry,!1,{url:t.url,data:void 0,code:i})?this.retry(s):(C.error(`${i} while loading ${t.url}`),this.callbacks.onError({code:i,text:e.statusText},t,e,r))}}}loadtimeout(){var t;const e=null==(t=this.config)?void 0:t.loadPolicy.timeoutRetry;if(hr(e,this.stats.retry,!0))this.retry(e);else{var r;C.warn(`timeout while loading ${null==(r=this.context)?void 0:r.url}`);const t=this.callbacks;t&&(this.abortInternal(),t.onTimeout(this.stats,this.context,this.loader))}}retry(t){const{context:e,stats:r}=this;this.retryDelay=ur(t,r.retry),r.retry++,C.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==e?void 0:e.url}, retrying ${r.retry}/${t.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(t){const e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)}getCacheAge(){let t=null;if(this.loader&&Ea.test(this.loader.getAllResponseHeaders())){const e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t}getResponseHeader(t){return this.loader&&new RegExp(`^${t}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null}}const wa=/(\d+)-(\d+)\/(\d+)/;class $a{constructor(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Aa,this.controller=new self.AbortController,this.stats=new I}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(t,e,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const n=function(t,e){const r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(p({},t.headers))};t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1));return r}(t,this.controller.signal),s=r.onProgress,a="arraybuffer"===t.responseType,o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=e.loadPolicy;this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,n),self.clearTimeout(this.requestTimeout),e.timeout=l&&m(l)?l:d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),r.onTimeout(i,t,this.response)}),e.timeout),self.fetch(this.request).then((n=>{this.response=this.loader=n;const o=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),e.timeout=d,this.requestTimeout=self.setTimeout((()=>{this.abortInternal(),r.onTimeout(i,t,this.response)}),d-(o-i.loading.start)),!n.ok){const{status:t,statusText:e}=n;throw new Ca(e||"fetch, bad network response",t,n)}return i.loading.first=o,i.total=function(t){const e=t.get("Content-Range");if(e){const t=function(t){const e=wa.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}(e);if(m(t))return t}const r=t.get("Content-Length");if(r)return parseInt(r)}(n.headers)||i.total,s&&m(e.highWaterMark)?this.loadProgressively(n,i,t,e.highWaterMark,s):a?n.arrayBuffer():"json"===t.responseType?n.json():n.text()})).then((n=>{const a=this.response;if(!a)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const l=n[o];l&&(i.loaded=i.total=l);const d={url:a.url,data:n,code:a.status};s&&!m(e.highWaterMark)&&s(i,t,n,a),r.onSuccess(d,i,t,a)})).catch((e=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const n=e&&e.code||0,s=e?e.message:null;r.onError({code:n,text:s},t,e?e.details:null,i)}))}getCacheAge(){let t=null;if(this.response){const e=this.response.headers.get("age");t=e?parseFloat(e):null}return t}getResponseHeader(t){return this.response?this.response.headers.get(t):null}loadProgressively(t,e,r,i=0,n){const s=new Si,a=t.body.getReader(),o=()=>a.read().then((a=>{if(a.done)return s.dataLength&&n(e,r,s.flush(),t),Promise.resolve(new ArrayBuffer(0));const l=a.value,d=l.length;return e.loaded+=d,d<i||s.dataLength?(s.push(l),s.dataLength>=i&&n(e,r,s.flush(),t)):n(e,r,l,t),o()})).catch((()=>Promise.reject()));return o()}}function Aa(t,e){return new self.Request(t.url,e)}class Ca extends Error{constructor(t,e,r){super(t),this.code=void 0,this.details=void 0,this.code=e,this.details=r}}const La=/\s/,xa={newCue(t,e,r,i){const n=[];let s,a,o,l,d;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(s=i.rows[h],o=!0,l=0,d="",!s.isEmpty()){var c;for(let t=0;t<s.chars.length;t++)La.test(s.chars[t].uchar)&&o?l++:(d+=s.chars[t].uchar,o=!1);s.cueStartTime=e,e===r&&(r+=1e-4),l>=16?l--:l++;const i=cs(d.trim()),f=ms(e,r,i);null!=t&&null!=(c=t.cues)&&c.getCueById(f)||(a=new u(e,r,i),a.id=f,a.line=h+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*l/32)),n.push(a))}return t&&n.length&&(n.sort(((t,e)=>"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line)),n.forEach((e=>Pe(t,e)))),n}},Ra=h(h({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Sa,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class{constructor(t){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:e,hls:r}=this,{autoLevelEnabled:i,media:n}=r;if(!t||!n)return;const s=performance.now(),a=e?e.stats:t.stats,o=e?e.duration:t.duration,l=s-a.loading.start,d=r.minAutoLevel;if(a.aborted||a.loaded&&a.loaded===a.total||t.level<=d)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!i||n.paused||!n.playbackRate||!n.readyState)return;const u=r.mainForwardBufferInfo;if(null===u)return;const c=this.bwEstimator.getEstimateTTFB(),h=Math.abs(n.playbackRate);if(l<=Math.max(c,o/(2*h)*1e3))return;const f=u.len/h,g=a.loading.first?a.loading.first-a.loading.start:-1,p=a.loaded&&g>-1,v=this.getBwEstimate(),y=r.levels,T=y[t.level],E=a.total||Math.max(a.loaded,Math.round(o*T.averageBitrate/8));let S=p?l-g:l;S<1&&p&&(S=Math.min(l,8*a.loaded/v));const w=p?1e3*a.loaded/S:0,$=w?(E-a.loaded)/w:8*E/v+c/1e3;if($<=f)return;const A=w?8*w:v;let L,x=Number.POSITIVE_INFINITY;for(L=t.level-1;L>d;L--){const t=y[L].maxBitrate;if(x=this.getTimeToLoadFrag(c/1e3,A,o*t,!y[L].details),x<f)break}if(x>=$)return;if(x>10*o)return;r.nextLoadLevel=r.nextAutoLevel=L,p?this.bwEstimator.sample(l-Math.min(c,g),a.loaded):this.bwEstimator.sampleTTFB(l);const R=y[L].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>R&&this.resetEstimator(R),this.clearTimer(),C.warn(`[abr] Fragment ${t.sn}${e?" part "+e.index:""} of level ${t.level} is loading too slowly;\n      Time to underbuffer: ${f.toFixed(3)} s\n      Estimated load time for current fragment: ${$.toFixed(3)} s\n      Estimated load time for down switch fragment: ${x.toFixed(3)} s\n      TTFB estimate: ${0|g} ms\n      Current BW estimate: ${m(v)?0|v:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${L} @ ${0|R} bps`),r.trigger(b.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:a})},this.hls=t,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(t){t&&(C.log(`setting initial bwe to ${t}`),this.hls.config.abrEwmaDefaultEstimate=t),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const t=this.hls.config;return new Cr(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)}registerListeners(){const{hls:t}=this;t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.FRAG_LOADING,this.onFragLoading,this),t.on(b.FRAG_LOADED,this.onFragLoaded,this),t.on(b.FRAG_BUFFERED,this.onFragBuffered,this),t.on(b.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(b.LEVEL_LOADED,this.onLevelLoaded,this),t.on(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(b.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.on(b.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t&&(t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.FRAG_LOADING,this.onFragLoading,this),t.off(b.FRAG_LOADED,this.onFragLoaded,this),t.off(b.FRAG_BUFFERED,this.onFragBuffered,this),t.off(b.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(b.LEVEL_LOADED,this.onLevelLoaded,this),t.off(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(b.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.off(b.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(t,e){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(t,e){const r=e.frag;if(!this.ignoreFragment(r)){var i;if(!r.bitrateTest)this.fragCurrent=r,this.partCurrent=null!=(i=e.part)?i:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(t,e){this.clearTimer()}onError(t,e){if(!e.fatal)switch(e.details){case E.BUFFER_ADD_CODEC_ERROR:case E.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case E.FRAG_LOAD_TIMEOUT:{const t=e.frag,{fragCurrent:r,partCurrent:i}=this;if(t&&r&&t.sn===r.sn&&t.level===r.level){const e=performance.now(),r=i?i.stats:t.stats,n=e-r.loading.start,s=r.loading.first?r.loading.first-r.loading.start:-1;if(r.loaded&&s>-1){const t=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(n-Math.min(t,s),r.loaded)}else this.bwEstimator.sampleTTFB(n)}break}}}getTimeToLoadFrag(t,e,r,i){return t+r/e+(i?this.lastLevelLoadSec:0)}onLevelLoaded(t,e){const r=this.hls.config,{loading:i}=e.stats,n=i.end-i.start;m(n)&&(this.lastLevelLoadSec=n/1e3),e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}onFragLoaded(t,{frag:e,part:r}){const i=r?r.stats:e.stats;if(e.type===Ce&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(e)){if(this.clearTimer(),e.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const t=r?r.duration:e.duration,n=this.hls.levels[e.level],s=(n.loaded?n.loaded.bytes:0)+i.loaded,a=(n.loaded?n.loaded.duration:0)+t;n.loaded={bytes:s,duration:a},n.realBitrate=Math.round(8*s/a)}if(e.bitrateTest){const t={stats:i,frag:e,part:r,id:e.type};this.onFragBuffered(b.FRAG_BUFFERED,t),e.bitrateTest=!1}else this.lastLoadedFragLevel=e.level}}onFragBuffered(t,e){const{frag:r,part:i}=e,n=null!=i&&i.stats.loaded?i.stats:r.stats;if(n.aborted)return;if(this.ignoreFragment(r))return;const s=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,n.loaded),n.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(t){return t.type!==Ce||"initSegment"===t.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:t,minAutoLevel:e}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,n=this.findBestLevel(r,e,t,0,i,1,1);if(n>-1)return n;const s=this.hls.firstLevel,a=Math.min(Math.max(s,e),t);return C.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const t=this.forcedAutoLevel,e=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(!(-1===t||e&&r&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return t;const i=e&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==t){const e=this.hls.levels;if(e.length>Math.max(t,i)&&e[t].loadError<=e[i].loadError)return t}return this._nextAutoLevel=i,this.nextAutoLevelKey=this.getAutoLevelKey(),i}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:t,partCurrent:e,hls:r}=this,{maxAutoLevel:i,config:n,minAutoLevel:s}=r,a=e?e.duration:t?t.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let d=n.abrBandWidthFactor,u=n.abrBandWidthUpFactor;if(l){const t=this.findBestLevel(o,s,i,l,0,d,u);if(t>=0)return t}let c=a?Math.min(a,n.maxStarvationDelay):n.maxStarvationDelay;if(!l){const t=this.bitrateTestDelay;if(t){c=(a?Math.min(a,n.maxLoadingDelay):n.maxLoadingDelay)-t,C.info(`[abr] bitrate test took ${Math.round(1e3*t)}ms, set first fragment max fetchDuration to ${Math.round(1e3*c)} ms`),d=u=1}}const h=this.findBestLevel(o,s,i,l,c,d,u);if(C.info(`[abr] ${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`),h>-1)return h;const f=r.levels[s],g=r.levels[r.loadLevel];return(null==f?void 0:f.bitrate)<(null==g?void 0:g.bitrate)?s:r.loadLevel}getStarvationDelay(){const t=this.hls,e=t.media;if(!e)return 1/0;const r=e&&0!==e.playbackRate?Math.abs(e.playbackRate):1,i=t.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(t,e,r,i,n,s,a){var o;const l=i+n,d=this.lastLoadedFragLevel,u=-1===d?this.hls.firstLevel:d,{fragCurrent:c,partCurrent:h}=this,{levels:f,allAudioTracks:g,loadLevel:p,config:v}=this.hls;if(1===f.length)return 0;const y=f[u],b=!(null==y||null==(o=y.details)||!o.live),T=-1===p||-1===d;let E,S="SDR",w=(null==y?void 0:y.frameRate)||0;const{audioPreference:$,videoPreference:A}=v,L=this.audioTracksByGroup||(this.audioTracksByGroup=function(t){return t.reduce(((t,e)=>{let r=t.groups[e.groupId];r||(r=t.groups[e.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(e);const i=e.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||e.default,r.hasAutoSelect=r.hasAutoSelect||e.autoselect,r.hasDefault&&(t.hasDefaultAudio=!0),r.hasAutoSelect&&(t.hasAutoSelectAudio=!0),t}),{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}(g));if(T){if(-1!==this.firstSelection)return this.firstSelection;const i=this.codecTiers||(this.codecTiers=function(t,e,r,i){return t.slice(r,i+1).reduce(((t,r)=>{if(!r.codecSet)return t;const i=r.audioGroups;let n=t[r.codecSet];n||(t[r.codecSet]=n={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),n.minBitrate=Math.min(n.minBitrate,r.bitrate);const s=Math.min(r.height,r.width);return n.minHeight=Math.min(n.minHeight,s),n.minFramerate=Math.min(n.minFramerate,r.frameRate),n.maxScore=Math.max(n.maxScore,r.score),n.fragmentError+=r.fragmentError,n.videoRanges[r.videoRange]=(n.videoRanges[r.videoRange]||0)+1,i&&i.forEach((t=>{if(!t)return;const r=e.groups[t];n.hasDefaultAudio=n.hasDefaultAudio||e.hasDefaultAudio?r.hasDefault:r.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(r.channels).forEach((t=>{n.channels[t]=(n.channels[t]||0)+r.channels[t]}))})),t}),{})}(f,L,e,r)),n=function(t,e,r,i,n){const s=Object.keys(t),a=null==i?void 0:i.channels,o=null==i?void 0:i.audioCodec,l=a&&2===parseInt(a);let d=!0,u=!1,c=1/0,h=1/0,f=1/0,g=0,p=[];const{preferHDR:v,allowedVideoRanges:y}=Dr(e,n);for(let e=s.length;e--;){const r=t[s[e]];d=r.channels[2]>0,c=Math.min(c,r.minHeight),h=Math.min(h,r.minFramerate),f=Math.min(f,r.minBitrate);const i=y.filter((t=>r.videoRanges[t]>0));i.length>0&&(u=!0,p=i)}c=m(c)?c:0,h=m(h)?h:0;const b=Math.max(1080,c),T=Math.max(30,h);return f=m(f)?f:r,r=Math.max(f,r),u||(e=void 0,p=[]),{codecSet:s.reduce(((e,i)=>{const n=t[i];if(i===e)return e;if(n.minBitrate>r)return Ir(i,`min bitrate of ${n.minBitrate} > current estimate of ${r}`),e;if(!n.hasDefaultAudio)return Ir(i,"no renditions with default or auto-select sound found"),e;if(o&&i.indexOf(o.substring(0,4))%5!=0)return Ir(i,`audio codec preference "${o}" not found`),e;if(a&&!l){if(!n.channels[a])return Ir(i,`no renditions with ${a} channel sound found (channels options: ${Object.keys(n.channels)})`),e}else if((!o||l)&&d&&0===n.channels[2])return Ir(i,"no renditions with stereo sound found"),e;return n.minHeight>b?(Ir(i,`min resolution of ${n.minHeight} > maximum of ${b}`),e):n.minFramerate>T?(Ir(i,`min framerate of ${n.minFramerate} > maximum of ${T}`),e):p.some((t=>n.videoRanges[t]>0))?n.maxScore<g?(Ir(i,`max score of ${n.maxScore} < selected max of ${g}`),e):e&&(ne(i)>=ne(e)||n.fragmentError>t[e].fragmentError)?e:(g=n.maxScore,i):(Ir(i,`no variants with VIDEO-RANGE of ${JSON.stringify(p)} found`),e)}),void 0),videoRanges:p,preferHDR:v,minFramerate:h,minBitrate:f}}(i,S,t,$,A),{codecSet:s,videoRanges:a,minFramerate:o,minBitrate:l,preferHDR:d}=n;E=s,S=d?a[a.length-1]:a[0],w=o,t=Math.max(t,l),C.log(`[abr] picked start tier ${JSON.stringify(n)}`)}else E=null==y?void 0:y.codecSet,S=null==y?void 0:y.videoRange;const x=h?h.duration:c?c.duration:0,R=this.bwEstimator.getEstimateTTFB()/1e3,k=[];for(let o=r;o>=e;o--){var D;const e=f[o],c=o>u;if(!e)continue;if(v.useMediaCapabilities&&!e.supportedResult&&!e.supportedPromise){const r=navigator.mediaCapabilities;"function"==typeof(null==r?void 0:r.decodingInfo)&&Rr(e,L,S,w,t,$)?(e.supportedPromise=kr(e,L,r),e.supportedPromise.then((t=>{if(!this.hls)return;e.supportedResult=t;const r=this.hls.levels,i=r.indexOf(e);t.error?C.warn(`[abr] MediaCapabilities decodingInfo error: "${t.error}" for level ${i} ${JSON.stringify(t)}`):t.supported||(C.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${i} ${JSON.stringify(t)}`),i>-1&&r.length>1&&(C.log(`[abr] Removing unsupported level ${i}`),this.hls.removeLevel(i)))}))):e.supportedResult=Lr}if(E&&e.codecSet!==E||S&&e.videoRange!==S||c&&w>e.frameRate||!c&&w>0&&w<e.frameRate||e.supportedResult&&(null==(D=e.supportedResult.decodingInfoResults)||!D[0].smooth)){k.push(o);continue}const g=e.details,A=(h?null==g?void 0:g.partTarget:null==g?void 0:g.averagetargetduration)||x;let I;I=c?a*t:s*t;const P=x&&i>=2*x&&0===n?f[o].averageBitrate:f[o].maxBitrate,_=this.getTimeToLoadFrag(R,I,P*A,void 0===g);if(I>=P&&(o===d||0===e.loadError&&0===e.fragmentError)&&(_<=R||!m(_)||b&&!this.bitrateTestDelay||_<l)){const t=this.forcedAutoLevel;return o===p||-1!==t&&t===p||(k.length&&C.trace(`[abr] Skipped level(s) ${k.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${f[k[0]].codecs}" ${f[k[0]].videoRange}; not compatible with "${y.codecs}" ${S}`),C.info(`[abr] switch candidate:${u}->${o} adjustedbw(${Math.round(I)})-bitrate=${Math.round(I-P)} ttfb:${R.toFixed(1)} avgDuration:${A.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${_.toFixed(1)} firstSelection:${T} codecSet:${E} videoRange:${S} hls.loadLevel:${p}`)),T&&(this.firstSelection=o),o}}return-1}set nextAutoLevel(t){const{maxAutoLevel:e,minAutoLevel:r}=this.hls,i=Math.min(Math.max(t,r),e);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}},bufferController:class{constructor(t){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=t=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=t=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:t,mediaSource:e}=this;this.log("Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(b.MEDIA_ATTACHED,{media:t,mediaSource:e})),e&&e.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:t,_objectUrl:e}=this;t!==e&&C.error(`Media element src was set while attaching MediaSource (${e} > ${t})`)},this.hls=t;const e="[buffer-controller]";this.appendSource=t.config.preferManagedMediaSource,this.log=C.log.bind(C,e),this.warn=C.warn.bind(C,e),this.error=C.error.bind(C,e),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:t}=this;t.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_PARSED,this.onManifestParsed,this),t.on(b.BUFFER_RESET,this.onBufferReset,this),t.on(b.BUFFER_APPENDING,this.onBufferAppending,this),t.on(b.BUFFER_CODECS,this.onBufferCodecs,this),t.on(b.BUFFER_EOS,this.onBufferEos,this),t.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(b.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(b.FRAG_PARSED,this.onFragParsed,this),t.on(b.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:t}=this;t.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_PARSED,this.onManifestParsed,this),t.off(b.BUFFER_RESET,this.onBufferReset,this),t.off(b.BUFFER_APPENDING,this.onBufferAppending,this),t.off(b.BUFFER_CODECS,this.onBufferCodecs,this),t.off(b.BUFFER_EOS,this.onBufferEos,this),t.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(b.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(b.FRAG_PARSED,this.onFragParsed,this),t.off(b.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new _n(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(t,e){let r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(t,e){const r=this.media=e.media,i=Qt(this.appendSource);if(r&&i){var n;const t=this.mediaSource=new i;this.log(`created media source: ${null==(n=t.constructor)?void 0:n.name}`),t.addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),t.addEventListener("startstreaming",this._onStartStreaming),t.addEventListener("endstreaming",this._onEndStreaming);const e=this._objectUrl=self.URL.createObjectURL(t);if(this.appendSource)try{r.removeAttribute("src");const i=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||i&&t instanceof i,Mn(r),function(t,e){const r=self.document.createElement("source");r.type="video/mp4",r.src=e,t.appendChild(r)}(r,e),r.load()}catch(t){r.src=e}else r.src=e;r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:t,mediaSource:e,_objectUrl:r}=this;if(e){if(this.log("media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){this.warn(`onMediaDetaching: ${t.message} while calling endOfStream`)}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),e.removeEventListener("startstreaming",this._onStartStreaming),e.removeEventListener("endstreaming",this._onEndStreaming),t&&(t.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),this.mediaSrc===r?(t.removeAttribute("src"),this.appendSource&&Mn(t),t.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(b.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach((t=>{this.resetBuffer(t)})),this._initSourceBuffer()}resetBuffer(t){const e=this.sourceBuffer[t];try{var r;if(e)this.removeBufferListeners(t),this.sourceBuffer[t]=void 0,null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(e)}catch(e){this.warn(`onBufferReset ${t}`,e)}}onBufferCodecs(t,e){const r=this.getSourceBufferTypes().length,i=Object.keys(e);if(i.forEach((t=>{if(r){const r=this.tracks[t];if(r&&"function"==typeof r.buffer.changeType){var i;const{id:n,codec:s,levelCodec:a,container:o,metadata:l}=e[t],d=le(r.codec,r.levelCodec),u=null==d?void 0:d.replace(On,"$1");let c=le(s,a);const h=null==(i=c)?void 0:i.replace(On,"$1");if(c&&u!==h){"audio"===t.slice(0,5)&&(c=oe(c,this.hls.config.preferManagedMediaSource));const e=`${o};codecs=${c}`;this.appendChangeType(t,e),this.log(`switching codec ${d} to ${c}`),this.tracks[t]={buffer:r.buffer,codec:s,container:o,levelCodec:a,metadata:l,id:n}}}}else this.pendingTracks[t]=e[t]})),r)return;const n=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==n&&(this.log(`${n} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=n),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks()}appendChangeType(t,e){const{operationQueue:r}=this,i={execute:()=>{const i=this.sourceBuffer[t];i&&(this.log(`changing ${t} sourceBuffer type to ${e}`),i.changeType(e)),r.shiftAndExecuteNext(t)},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn(`Failed to change ${t} SourceBuffer type`,e)}};r.append(i,t,!!this.pendingTracks[t])}onBufferAppending(t,e){const{hls:r,operationQueue:i,tracks:n}=this,{data:s,type:a,frag:o,part:l,chunkMeta:d}=e,u=d.buffering[a],c=self.performance.now();u.start=c;const h=o.stats.buffering,f=l?l.stats.buffering:null;0===h.start&&(h.start=c),f&&0===f.start&&(f.start=c);const g=n.audio;let p=!1;"audio"===a&&"audio/mpeg"===(null==g?void 0:g.container)&&(p=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const m=o.start,v={execute:()=>{if(u.executeStart=self.performance.now(),p){const t=this.sourceBuffer[a];if(t){const e=m-t.timestampOffset;Math.abs(e)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${m} (delta: ${e}) sn: ${o.sn})`),t.timestampOffset=m)}}this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const t=self.performance.now();u.executeEnd=u.end=t,0===h.first&&(h.first=t),f&&0===f.first&&(f.first=t);const{sourceBuffer:e}=this,r={};for(const t in e)r[t]=zr.getBuffered(e[t]);this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(b.BUFFER_APPENDED,{type:a,frag:o,part:l,chunkMeta:d,parent:o.type,timeRanges:r})},onError:t=>{const e={type:T.MEDIA_ERROR,parent:o.type,details:E.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:o,part:l,chunkMeta:d,error:t,err:t,fatal:!1};if(t.code===DOMException.QUOTA_EXCEEDED_ERR)e.details=E.BUFFER_FULL_ERROR;else{const t=++this.appendErrors[a];e.details=E.BUFFER_APPEND_ERROR,this.warn(`Failed ${t}/${r.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer`),t>=r.config.appendErrorMaxRetry&&(e.fatal=!0)}r.trigger(b.ERROR,e)}};i.append(v,a,!!this.pendingTracks[a])}onBufferFlushing(t,e){const{operationQueue:r}=this,i=t=>({execute:this.removeExecutor.bind(this,t,e.startOffset,e.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(b.BUFFER_FLUSHED,{type:t})},onError:e=>{this.warn(`Failed to remove from ${t} SourceBuffer`,e)}});e.type?r.append(i(e.type),e.type):this.getSourceBufferTypes().forEach((t=>{r.append(i(t),t)}))}onFragParsed(t,e){const{frag:r,part:i}=e,n=[],s=i?i.elementaryStreams:r.elementaryStreams;s[O]?n.push("audiovideo"):(s[P]&&n.push("audio"),s[_]&&n.push("video"));0===n.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers((()=>{const t=self.performance.now();r.stats.buffering.end=t,i&&(i.stats.buffering.end=t);const e=i?i.stats:r.stats;this.hls.trigger(b.FRAG_BUFFERED,{frag:r,part:i,stats:e,id:r.type})}),n)}onFragChanged(t,e){this.trimBuffers()}onBufferEos(t,e){this.getSourceBufferTypes().reduce(((t,r)=>{const i=this.sourceBuffer[r];return!i||e.type&&e.type!==r||(i.ending=!0,i.ended||(i.ended=!0,this.log(`${r} sourceBuffer now EOS`))),t&&!(i&&!i.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers((()=>{this.getSourceBufferTypes().forEach((t=>{const e=this.sourceBuffer[t];e&&(e.ending=!1)}));const{mediaSource:t}=this;t&&"open"===t.readyState?(this.log("Calling mediaSource.endOfStream()"),t.endOfStream()):t&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${t.readyState}`)})))}onLevelUpdated(t,{details:e}){e.fragments.length&&(this.details=e,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:t,details:e,media:r}=this;if(!r||null===e)return;if(!this.getSourceBufferTypes().length)return;const i=t.config,n=r.currentTime,s=e.levelTargetDuration,a=e.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(m(a)&&a>0){const t=Math.max(a,s),e=Math.floor(n/s)*s-t;this.flushBackBuffer(n,s,e)}if(m(i.frontBufferFlushThreshold)&&i.frontBufferFlushThreshold>0){const t=Math.max(i.maxBufferLength,i.frontBufferFlushThreshold),e=Math.max(t,s),r=Math.floor(n/s)*s+e;this.flushFrontBuffer(n,s,r)}}flushBackBuffer(t,e,r){const{details:i,sourceBuffer:n}=this;this.getSourceBufferTypes().forEach((s=>{const a=n[s];if(a){const n=zr.getBuffered(a);if(n.length>0&&r>n.start(0)){if(this.hls.trigger(b.BACK_BUFFER_REACHED,{bufferEnd:r}),null!=i&&i.live)this.hls.trigger(b.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(a.ended&&n.end(n.length-1)-t<2*e)return void this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);this.hls.trigger(b.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:s})}}}))}flushFrontBuffer(t,e,r){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach((n=>{const s=i[n];if(s){const i=zr.getBuffered(s),a=i.length;if(a<2)return;const o=i.start(a-1),l=i.end(a-1);if(r>o||t>=o&&t<=l)return;if(s.ended&&t-l<2*e)return void this.log(`Cannot flush ${n} front buffer while SourceBuffer is in ended state`);this.hls.trigger(b.BUFFER_FLUSHING,{startOffset:o,endOffset:1/0,type:n})}}))}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:t,hls:e,media:r,mediaSource:i}=this,n=t.fragments[0].start+t.totalduration,s=r.duration,a=m(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(t)):(n>a&&n>s||!m(s))&&(this.log(`Updating Media Source duration to ${n.toFixed(3)}`),i.duration=n)}updateSeekableRange(t){const e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){const i=Math.max(0,r[0].start),n=Math.max(i,i+t.totalduration);this.log(`Media Source duration is set to ${e.duration}. Setting seekable range to ${i}-${n}.`),e.setLiveSeekableRange(i,n)}}checkPendingTracks(){const{bufferCodecEventsExpected:t,operationQueue:e,pendingTracks:r}=this,i=Object.keys(r).length;if(i&&(!t||2===i||"audiovideo"in r)){this.createSourceBuffers(r),this.pendingTracks={};const t=this.getSourceBufferTypes();if(t.length)this.hls.trigger(b.BUFFER_CREATED,{tracks:this.tracks}),t.forEach((t=>{e.executeNext(t)}));else{const t=new Error("could not create source buffer for media codec(s)");this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:t,reason:t.message})}}}createSourceBuffers(t){const{sourceBuffer:e,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const i in t)if(!e[i]){const n=t[i];if(!n)throw Error(`source buffer exists for track ${i}, however track does not`);let s=n.levelCodec||n.codec;s&&"audio"===i.slice(0,5)&&(s=oe(s,this.hls.config.preferManagedMediaSource));const a=`${n.container};codecs=${s}`;this.log(`creating sourceBuffer(${a})`);try{const t=e[i]=r.addSourceBuffer(a),o=i;this.addBufferListener(o,"updatestart",this._onSBUpdateStart),this.addBufferListener(o,"updateend",this._onSBUpdateEnd),this.addBufferListener(o,"error",this._onSBUpdateError),this.addBufferListener(o,"bufferedchange",((t,e)=>{const r=e.removedRanges;null!=r&&r.length&&this.hls.trigger(b.BUFFER_FLUSHED,{type:i})})),this.tracks[i]={buffer:t,codec:s,container:n.container,levelCodec:n.levelCodec,metadata:n.metadata,id:n.id}}catch(t){this.error(`error while trying to add sourceBuffer: ${t.message}`),this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,sourceBufferName:i,mimeType:a})}}}get mediaSrc(){var t;const e=(null==(t=this.media)?void 0:t.firstChild)||this.media;return null==e?void 0:e.src}_onSBUpdateStart(t){const{operationQueue:e}=this;e.current(t).onStart()}_onSBUpdateEnd(t){var e;if("closed"===(null==(e=this.mediaSource)?void 0:e.readyState))return void this.resetBuffer(t);const{operationQueue:r}=this;r.current(t).onComplete(),r.shiftAndExecuteNext(t)}_onSBUpdateError(t,e){var r;const i=new Error(`${t} SourceBuffer error. MediaSource readyState: ${null==(r=this.mediaSource)?void 0:r.readyState}`);this.error(`${i}`,e),this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_APPENDING_ERROR,sourceBufferName:t,error:i,fatal:!1});const n=this.operationQueue.current(t);n&&n.onError(i)}removeExecutor(t,e,r){const{media:i,mediaSource:n,operationQueue:s,sourceBuffer:a}=this,o=a[t];if(!i||!n||!o)return this.warn(`Attempting to remove from the ${t} SourceBuffer, but it does not exist`),void s.shiftAndExecuteNext(t);const l=m(i.duration)?i.duration:1/0,d=m(n.duration)?n.duration:1/0,u=Math.max(0,e),c=Math.min(r,l,d);c>u&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${u},${c}] from the ${t} SourceBuffer`),o.remove(u,c)):s.shiftAndExecuteNext(t)}appendExecutor(t,e){const r=this.sourceBuffer[e];if(r)r.ended=!1,r.appendBuffer(t);else if(!this.pendingTracks[e])throw new Error(`Attempting to append to the ${e} SourceBuffer, but it does not exist`)}blockBuffers(t,e=this.getSourceBufferTypes()){if(!e.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);const{operationQueue:r}=this,i=e.map((t=>r.appendBlocker(t)));Promise.all(i).then((()=>{t(),e.forEach((t=>{const e=this.sourceBuffer[t];null!=e&&e.updating||r.shiftAndExecuteNext(t)}))}))}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(t,e,r){const i=this.sourceBuffer[t];if(!i)return;const n=r.bind(this,t);this.listeners[t].push({event:e,listener:n}),i.addEventListener(e,n)}removeBufferListeners(t){const e=this.sourceBuffer[t];e&&this.listeners[t].forEach((t=>{e.removeEventListener(t.event,t.listener)}))}},capLevelController:Ds,errorController:class{constructor(t){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=t,this.log=C.log.bind(C,"[info]:"),this.warn=C.warn.bind(C,"[warning]:"),this.error=C.error.bind(C,"[error]:"),this.registerListeners()}registerListeners(){const t=this.hls;t.on(b.ERROR,this.onError,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const t=this.hls;t&&(t.off(b.ERROR,this.onError,this),t.off(b.ERROR,this.onErrorOut,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(t){}stopLoad(){this.playlistError=0}getVariantLevelIndex(t){return(null==t?void 0:t.type)===Ce?t.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(t,e){var r,i;if(e.fatal)return;const n=this.hls,s=e.context;switch(e.details){case E.FRAG_LOAD_ERROR:case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_ERROR:case E.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case E.FRAG_PARSING_ERROR:if(null!=(r=e.frag)&&r.gap)return void(e.errorAction={action:vr,flags:Er});case E.FRAG_GAP:case E.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=yr);case E.LEVEL_EMPTY_ERROR:case E.LEVEL_PARSING_ERROR:{var a,o;const t=e.parent===Ce?e.level:n.loadLevel;e.details===E.LEVEL_EMPTY_ERROR&&null!=(a=e.context)&&null!=(o=a.levelDetails)&&o.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,t):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t))}return;case E.LEVEL_LOAD_ERROR:case E.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==s?void 0:s.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,s.level)));case E.AUDIO_TRACK_LOAD_ERROR:case E.AUDIO_TRACK_LOAD_TIMEOUT:case E.SUBTITLE_LOAD_ERROR:case E.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const t=n.levels[n.loadLevel];if(t&&(s.type===$e&&t.hasAudioGroup(s.groupId)||s.type===Ae&&t.hasSubtitleGroup(s.groupId)))return e.errorAction=this.getPlaylistRetryOrSwitchAction(e,n.loadLevel),e.errorAction.action=yr,void(e.errorAction.flags=Sr)}return;case E.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const t=n.levels[n.loadLevel],r=null==t?void 0:t.attrs["HDCP-LEVEL"];r?e.errorAction={action:yr,flags:wr,hdcpLevel:r}:this.keySystemError(e)}return;case E.BUFFER_ADD_CODEC_ERROR:case E.REMUX_ALLOC_ERROR:case E.BUFFER_APPEND_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(i=e.level)?i:n.loadLevel));case E.INTERNAL_EXCEPTION:case E.BUFFER_APPENDING_ERROR:case E.BUFFER_FULL_ERROR:case E.LEVEL_SWITCH_ERROR:case E.BUFFER_STALLED_ERROR:case E.BUFFER_SEEK_OVER_HOLE:case E.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:vr,flags:Er})}e.type===T.KEY_SYSTEM_ERROR&&this.keySystemError(e)}keySystemError(t){const e=this.getVariantLevelIndex(t.frag);t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e)}getPlaylistRetryOrSwitchAction(t,e){const r=dr(this.hls.config.playlistLoadPolicy,t),i=this.playlistError++;if(hr(r,i,lr(t),t.response))return{action:Tr,flags:Er,retryConfig:r,retryCount:i};const n=this.getLevelSwitchAction(t,e);return r&&(n.retryConfig=r,n.retryCount=i),n}getFragRetryOrSwitchAction(t){const e=this.hls,r=this.getVariantLevelIndex(t.frag),i=e.levels[r],{fragLoadPolicy:n,keyLoadPolicy:s}=e.config,a=dr(t.details.startsWith("key")?s:n,t),o=e.levels.reduce(((t,e)=>t+e.fragmentError),0);if(i){t.details!==E.FRAG_GAP&&i.fragmentError++;if(hr(a,o,lr(t),t.response))return{action:Tr,flags:Er,retryConfig:a,retryCount:o}}const l=this.getLevelSwitchAction(t,r);return a&&(l.retryConfig=a,l.retryCount=o),l}getLevelSwitchAction(t,e){const r=this.hls;null==e&&(e=r.loadLevel);const i=this.hls.levels[e];if(i){var n,s;const e=t.details;i.loadError++,e===E.BUFFER_APPEND_ERROR&&i.fragmentError++;let l=-1;const{levels:d,loadLevel:u,minAutoLevel:c,maxAutoLevel:h}=r;r.autoLevelEnabled||(r.loadLevel=-1);const f=null==(n=t.frag)?void 0:n.type,g=(f===Le&&e===E.FRAG_PARSING_ERROR||"audio"===t.sourceBufferName&&(e===E.BUFFER_ADD_CODEC_ERROR||e===E.BUFFER_APPEND_ERROR))&&d.some((({audioCodec:t})=>i.audioCodec!==t)),p="video"===t.sourceBufferName&&(e===E.BUFFER_ADD_CODEC_ERROR||e===E.BUFFER_APPEND_ERROR)&&d.some((({codecSet:t,audioCodec:e})=>i.codecSet!==t&&i.audioCodec===e)),{type:m,groupId:v}=null!=(s=t.context)?s:{};for(let r=d.length;r--;){const n=(r+u)%d.length;if(n!==u&&n>=c&&n<=h&&0===d[n].loadError){var a,o;const r=d[n];if(e===E.FRAG_GAP&&t.frag){const e=d[n].details;if(e){const r=gr(t.frag,e.fragments,t.frag.start);if(null!=r&&r.gap)continue}}else{if(m===$e&&r.hasAudioGroup(v)||m===Ae&&r.hasSubtitleGroup(v))continue;if(f===Le&&null!=(a=i.audioGroups)&&a.some((t=>r.hasAudioGroup(t)))||f===xe&&null!=(o=i.subtitleGroups)&&o.some((t=>r.hasSubtitleGroup(t)))||g&&i.audioCodec===r.audioCodec||!g&&i.audioCodec!==r.audioCodec||p&&i.codecSet===r.codecSet)continue}l=n;break}}if(l>-1&&r.loadLevel!==l)return t.levelRetry=!0,this.playlistError=0,{action:yr,flags:Er,nextAutoLevel:l}}return{action:yr,flags:Sr}}onErrorOut(t,e){var r;switch(null==(r=e.errorAction)?void 0:r.action){case vr:break;case yr:this.sendAlternateToPenaltyBox(e),e.errorAction.resolved||e.details===E.FRAG_GAP?/MediaSource readyState: ended/.test(e.error.message)&&(this.warn(`MediaSource ended after "${e.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):e.fatal=!0}e.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(t){const e=this.hls,r=t.errorAction;if(!r)return;const{flags:i,hdcpLevel:n,nextAutoLevel:s}=r;switch(i){case Er:this.switchLevel(t,s);break;case wr:n&&(e.maxHdcpLevel=ze[ze.indexOf(n)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${e.maxHdcpLevel}" or lower`)}r.resolved||this.switchLevel(t,s)}switchLevel(t,e){void 0!==e&&t.errorAction&&(this.warn(`switching to level ${e} after ${t.details}`),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}},fpsController:class{constructor(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}setStreamController(t){this.streamController=t}registerListeners(){this.hls.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(t,e){const r=this.hls.config;if(r.capLevelOnFPSDrop){const t=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=t,t&&"function"==typeof t.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(t,e,r){const i=performance.now();if(e){if(this.lastTime){const t=i-this.lastTime,n=r-this.lastDroppedFrames,s=e-this.lastDecodedFrames,a=1e3*n/t,o=this.hls;if(o.trigger(b.FPS_DROP,{currentDropped:n,currentDecoded:s,totalDroppedFrames:r}),a>0&&n>o.config.fpsDroppedMonitoringThreshold*s){let t=o.currentLevel;C.warn("drop FPS ratio greater than max allowed value for currentLevel: "+t),t>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=t)&&(t-=1,o.trigger(b.FPS_DROP_LEVEL_CAPPING,{level:t,droppedLevel:o.currentLevel}),o.autoLevelCapping=t,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}}checkFPSInterval(){const t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){const e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:J,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:xa,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends Ei{constructor(t,e,r){super(t,e,r,"[subtitle-stream-controller]",xe),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:t}=this;t.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.LEVEL_LOADED,this.onLevelLoaded,this),t.on(b.ERROR,this.onError,this),t.on(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(b.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(b.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:t}=this;t.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.LEVEL_LOADED,this.onLevelLoaded,this),t.off(b.ERROR,this.onError,this),t.off(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(b.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(b.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(t){this.stopLoad(),this.state=ui,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(t,e){this.mainDetails=e.details}onSubtitleFragProcessed(t,e){const{frag:r,success:i}=e;if(this.fragPrevious=r,this.state=ui,!i)return;const n=this.tracksBuffered[this.currentTrackId];if(!n)return;let s;const a=r.start;for(let t=0;t<n.length;t++)if(a>=n[t].start&&a<=n[t].end){s=n[t];break}const o=r.start+r.duration;s?s.end=o:(s={start:a,end:o},n.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null)}onBufferFlushing(t,e){const{startOffset:r,endOffset:i}=e;if(0===r&&i!==Number.POSITIVE_INFINITY){const t=i-1;if(t<=0)return;e.endOffsetSubtitles=Math.max(0,t),this.tracksBuffered.forEach((e=>{for(let r=0;r<e.length;)if(e[r].end<=t)e.shift();else{if(!(e[r].start<t))break;e[r].start=t,r++}})),this.fragmentTracker.removeFragmentsInRange(r,t,xe)}}onFragBuffered(t,e){var r;this.loadedmetadata||e.frag.type!==Ce||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)}onError(t,e){const r=e.frag;(null==r?void 0:r.type)===xe&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==di&&(this.state=ui))}onSubtitleTracksUpdated(t,{subtitleTracks:e}){this.levels&&kn(this.levels,e)?this.levels=e.map((t=>new Qe(t))):(this.tracksBuffered=[],this.levels=e.map((t=>{const e=new Qe(t);return this.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,xe),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(t,e){var r;if(this.currentTrackId=e.id,null==(r=this.levels)||!r.length||-1===this.currentTrackId)return void this.clearInterval();const i=this.levels[this.currentTrackId];null!=i&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(500)}onSubtitleTrackLoaded(t,e){var r;const{currentTrackId:i,levels:n}=this,{details:s,id:a}=e;if(!n)return void this.warn(`Subtitle tracks were reset while loading level ${a}`);const o=n[i];if(a>=n.length||a!==i||!o)return;this.log(`Subtitle track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(s.live||null!=(r=o.details)&&r.live){const t=this.mainDetails;if(s.deltaUpdateFailed||!t)return;const e=t.fragments[0];var d;if(o.details)l=this.alignPlaylists(s,o.details,null==(d=this.levelLastLoaded)?void 0:d.details),0===l&&e&&(l=e.start,nr(s,l));else s.hasProgramDateTime&&t.hasProgramDateTime?(Qr(s,t),l=s.fragments[0].start):e&&(l=e.start,nr(s,l))}if(o.details=s,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&s.live||this.setStartPosition(this.mainDetails||s,l),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===ui){gr(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(t){const{frag:e,payload:r}=t,i=e.decryptdata,n=this.hls;if(!this.fragContextChanged(e)&&r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&"AES-128"===i.method){const t=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer).catch((t=>{throw n.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:e}),t})).then((r=>{const i=performance.now();n.trigger(b.FRAG_DECRYPTED,{frag:e,payload:r,stats:{tstart:t,tdecrypt:i}})})).catch((t=>{this.warn(`${t.name}: ${t.message}`),this.state=ui}))}}doTick(){if(this.media){if(this.state===ui){const{currentTrackId:t,levels:e}=this,r=null==e?void 0:e[t];if(!r||!e.length||!r.details)return;const{config:i}=this,n=this.getLoadPosition(),s=zr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],n,i.maxBufferHole),{end:a,len:o}=s,l=this.getFwdBufferInfo(this.media,Ce),d=r.details;if(o>this.getMaxBufferLength(null==l?void 0:l.len)+d.levelTargetDuration)return;const u=d.fragments,c=u.length,h=d.edge;let f=null;const g=this.fragPrevious;if(a<h){const t=i.maxFragLookUpTolerance,e=a>h-t?0:t;f=gr(g,u,Math.max(u[0].start,a),e),!f&&g&&g.start<u[0].start&&(f=u[0])}else f=u[c-1];if(!f)return;if(f=this.mapToInitFragWhenRequired(f),"initSegment"!==f.sn){const t=u[f.sn-d.startSN-1];t&&t.cc===f.cc&&this.fragmentTracker.getState(t)===Fr&&(f=t)}this.fragmentTracker.getState(f)===Fr&&this.loadFragment(f,r,a)}}else this.state=ui}getMaxBufferLength(t){const e=super.getMaxBufferLength();return t?Math.max(e,t):e}loadFragment(t,e,r){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t,e):(this.startFragRequested=!0,super.loadFragment(t,e,r))}get mediaBufferTimeRanges(){return new Pn(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends $r{constructor(t){super(t,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const e=Me(this.media.textTracks);for(let r=0;r<e.length;r++)if("hidden"===e[r].mode)t=e[r];else if("showing"===e[r].mode){t=e[r];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:t}=this;t.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_PARSED,this.onManifestParsed,this),t.on(b.LEVEL_LOADING,this.onLevelLoading,this),t.on(b.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(b.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_PARSED,this.onManifestParsed,this),t.off(b.LEVEL_LOADING,this.onLevelLoading,this),t.off(b.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(b.ERROR,this.onError,this)}onMediaAttached(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,t)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);Me(this.media.textTracks).forEach((t=>{_e(t)})),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(t,e){this.tracks=e.subtitleTracks}onSubtitleTrackLoaded(t,e){const{id:r,groupId:i,details:n}=e,s=this.tracksInGroup[r];if(!s||s.groupId!==i)return void this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=e.details,this.log(`Subtitle track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${n.startSN}-${n.endSN}]`),r===this.trackId&&this.playlistLoaded(r,e,a)}onLevelLoading(t,e){this.switchLevel(e.level)}onLevelSwitching(t,e){this.switchLevel(e.level)}switchLevel(t){const e=this.hls.levels[t];if(!e)return;const r=e.subtitleGroups||null,i=this.groupIds;let n=this.currentTrack;if(!r||(null==i?void 0:i.length)!==(null==r?void 0:r.length)||null!=r&&r.some((t=>-1===(null==i?void 0:i.indexOf(t))))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const t=this.tracks.filter((t=>!r||-1!==r.indexOf(t.groupId)));if(t.length)this.selectDefaultTrack&&!t.some((t=>t.default))&&(this.selectDefaultTrack=!1),t.forEach(((t,e)=>{t.id=e}));else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=t;const e=this.hls.config.subtitlePreference;if(!n&&e){this.selectDefaultTrack=!1;const r=Pr(e,t);if(r>-1)n=t[r];else{const t=Pr(e,this.tracks);n=this.tracks[t]}}let i=this.findTrackId(n);-1===i&&n&&(i=this.findTrackId(null));const s={subtitleTracks:t};this.log(`Updating subtitle tracks, ${t.length} track(s) found in "${null==r?void 0:r.join(",")}" group-id`),this.hls.trigger(b.SUBTITLE_TRACKS_UPDATED,s),-1!==i&&-1===this.trackId&&this.setSubtitleTrack(i)}else this.shouldReloadPlaylist(n)&&this.setSubtitleTrack(this.trackId)}findTrackId(t){const e=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<e.length;i++){const n=e[i];if((!r||n.default)&&(r||t)&&(!t||_r(n,t)))return i}if(t){for(let r=0;r<e.length;r++){const i=e[r];if(Dn(t.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<e.length;r++){const i=e[r];if(Dn(t.attrs,i.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(t){if(t){const e=this.tracksInGroup;for(let r=0;r<e.length;r++){if(In(e[r],t))return r}}return-1}onError(t,e){!e.fatal&&e.context&&(e.context.type!==Ae||e.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(e.context.groupId)||this.checkRetry(e))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t)}setSubtitleOption(t){if(this.hls.config.subtitlePreference=t,t){const e=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,e.length){const r=this.currentTrack;if(r&&_r(t,r))return r;const i=Pr(t,this.tracksInGroup);if(i>-1){const t=this.tracksInGroup[i];return this.setSubtitleTrack(i),t}if(r)return null;{const r=Pr(t,e);if(r>-1)return e[r]}}}return null}loadPlaylist(t){super.loadPlaylist();const e=this.currentTrack;if(this.shouldLoadPlaylist(e)&&e){const r=e.id,i=e.groupId;let n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn(`Could not construct new URL with HLS Delivery Directives: ${t}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(b.SUBTITLE_TRACK_LOADING,{url:n,id:r,groupId:i,deliveryDirectives:t||null})}}toggleTrackModes(){const{media:t}=this;if(!t)return;const e=Me(t.textTracks),r=this.currentTrack;let i;if(r&&(i=e.filter((t=>In(r,t)))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(e).forEach((t=>{"disabled"!==t.mode&&t!==i&&(t.mode="disabled")})),i){const t=this.subtitleDisplay?"showing":"hidden";i.mode!==t&&(i.mode=t)}}setSubtitleTrack(t){const e=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=t);if(t<-1||t>=e.length||!m(t))return void this.warn(`Invalid subtitle track id: ${t}`);this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=e[t]||null;if(this.trackId=t,this.currentTrack=i,this.toggleTrackModes(),!i)return void this.hls.trigger(b.SUBTITLE_TRACK_SWITCH,{id:t});const n=!!i.details&&!i.details.live;if(t===this.trackId&&i===r&&n)return;this.log(`Switching to subtitle-track ${t}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:a="",name:o,type:l,url:d}=i;this.hls.trigger(b.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:o,type:l,url:d});const u=this.switchParams(i.url,null==r?void 0:r.details);this.loadPlaylist(u)}},timelineController:class{constructor(t){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},t.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(b.FRAG_LOADING,this.onFragLoading,this),t.on(b.FRAG_LOADED,this.onFragLoaded,this),t.on(b.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(b.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(b.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(b.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:t}=this;t.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(b.FRAG_LOADING,this.onFragLoading,this),t.off(b.FRAG_LOADED,this.onFragLoaded,this),t.off(b.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(b.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(b.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(b.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const t=new rs(this,"textTrack1"),e=new rs(this,"textTrack2"),r=new rs(this,"textTrack3"),i=new rs(this,"textTrack4");this.cea608Parser1=new Jn(1,t,e),this.cea608Parser2=new Jn(3,r,i)}}addCues(t,e,r,i,n){let s=!1;for(let t=n.length;t--;){const i=n[t],u=(a=i[0],o=i[1],l=e,d=r,Math.min(o,d)-Math.max(a,l));if(u>=0&&(i[0]=Math.min(i[0],e),i[1]=Math.max(i[1],r),s=!0,u/(r-e)>.5))return}var a,o,l,d;if(s||n.push([e,r]),this.config.renderTextTracksNatively){const n=this.captionsTracks[t];this.Cues.newCue(n,e,r,i)}else{const n=this.Cues.newCue(null,e,r,i);this.hls.trigger(b.CUES_PARSED,{type:"captions",cues:n,track:t})}}onInitPtsFound(t,{frag:e,id:r,initPTS:i,timescale:n}){const{unparsedVttFrags:s}=this;"main"===r&&(this.initPTS[e.cc]={baseTime:i,timescale:n}),s.length&&(this.unparsedVttFrags=[],s.forEach((t=>{this.onFragLoaded(b.FRAG_LOADED,t)})))}getExistingTrack(t,e){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const n=r.textTracks[i];if(ks(n,{name:t,lang:e,attrs:{}}))return n}return null}createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)}createNativeTrack(t){if(this.captionsTracks[t])return;const{captionsProperties:e,captionsTracks:r,media:i}=this,{label:n,languageCode:s}=e[t],a=this.getExistingTrack(n,s);if(a)r[t]=a,_e(r[t]),Ie(r[t],i);else{const e=this.createTextTrack("captions",n,s);e&&(e[t]=!0,r[t]=e)}}createNonNativeTrack(t){if(this.nonNativeCaptionsTracks[t])return;const e=this.captionsProperties[t];if(!e)return;const r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(b.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(t,e,r){const i=this.media;if(i)return i.addTextTrack(t,e,r)}onMediaAttaching(t,e){this.media=e.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:t}=this;Object.keys(t).forEach((e=>{_e(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:t}=this;if(!t)return;const e=t.textTracks;if(e)for(let t=0;t<e.length;t++)_e(e[t])}onSubtitleTracksUpdated(t,e){const r=e.subtitleTracks||[],i=r.some((t=>t.textCodec===ys));if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(kn(this.tracks,r))return void(this.tracks=r);if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const t=this.media,e=t?Me(t.textTracks):null;if(this.tracks.forEach(((t,r)=>{let i;if(e){let r=null;for(let i=0;i<e.length;i++)if(e[i]&&ks(e[i],t)){r=e[i],e[i]=null;break}r&&(i=r)}if(i)_e(i);else{const e=Rs(t);i=this.createTextTrack(e,t.name,t.lang),i&&(i.mode="disabled")}i&&this.textTracks.push(i)})),null!=e&&e.length){const t=e.filter((t=>null!==t)).map((t=>t.label));t.length&&C.warn(`Media element contains unused subtitle tracks: ${t.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const t=this.tracks.map((t=>({label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t})));this.hls.trigger(b.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:t})}}}onManifestLoaded(t,e){this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((t=>{const e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(!e)return;const r=`textTrack${e[1]}`,i=this.captionsProperties[r];i&&(i.label=t.name,t.lang&&(i.languageCode=t.lang),i.media=t)}))}closedCaptionsForLevel(t){const e=this.hls.levels[t.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]}onFragLoading(t,e){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i,lastCc:n,lastSn:s,lastPartIndex:a}=this;if(this.enabled&&r&&i&&e.frag.type===Ce){var o,l;const{cc:t,sn:d}=e.frag,u=null!=(o=null==e||null==(l=e.part)?void 0:l.index)?o:-1;d===s+1||d===s&&u===a+1||t===n||(r.reset(),i.reset()),this.lastCc=t,this.lastSn=d,this.lastPartIndex=u}}onFragLoaded(t,e){const{frag:r,payload:i}=e;if(r.type===xe)if(i.byteLength){const t=r.decryptdata,n="stats"in e;if(null==t||!t.encrypted||n){const t=this.tracks[r.level],n=this.vttCCs;n[r.cc]||(n[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),t&&t.textCodec===ys?this._parseIMSC1(r,i):this._parseVTTs(e)}}else this.hls.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(t,e){const r=this.hls;Ss(e,this.initPTS[t.cc],(e=>{this._appendCues(e,t.level),r.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(e=>{C.log(`Failed to parse IMSC1: ${e}`),r.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))}_parseVTTs(t){var e;const{frag:r,payload:i}=t,{initPTS:n,unparsedVttFrags:s}=this,a=n.length-1;if(!n[r.cc]&&-1===a)return void s.push(t);const o=this.hls;vs(null!=(e=r.initSegment)&&e.data?Ft(r.initSegment.data,new Uint8Array(i)):i,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,(t=>{this._appendCues(t,r.level),o.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})}),(e=>{const n="Missing initPTS for VTT MPEGTS"===e.message;n?s.push(t):this._fallbackToIMSC1(r,i),C.log(`Failed to parse VTT cue: ${e}`),n&&a>r.cc||o.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:e})}))}_fallbackToIMSC1(t,e){const r=this.tracks[t.level];r.textCodec||Ss(e,this.initPTS[t.cc],(()=>{r.textCodec=ys,this._parseIMSC1(t,e)}),(()=>{r.textCodec="wvtt"}))}_appendCues(t,e){const r=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[e];if(!r||"disabled"===r.mode)return;t.forEach((t=>Pe(r,t)))}else{const i=this.tracks[e];if(!i)return;const n=i.default?"default":"subtitles"+e;r.trigger(b.CUES_PARSED,{type:"subtitles",cues:t,track:n})}}onFragDecrypted(t,e){const{frag:r}=e;r.type===xe&&this.onFragLoaded(b.FRAG_LOADED,e)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(t,e){this.initCea608Parsers();const{cea608Parser1:r,cea608Parser2:i}=this;if(!this.enabled||!r||!i)return;const{frag:n,samples:s}=e;if(n.type!==Ce||"NONE"!==this.closedCaptionsForLevel(n))for(let t=0;t<s.length;t++){const e=s[t].bytes;if(e){const n=this.extractCea608Data(e);r.addData(s[t].pts,n[0]),i.addData(s[t].pts,n[1])}}}onBufferFlushing(t,{startOffset:e,endOffset:r,endOffsetSubtitles:i,type:n}){const{media:s}=this;if(s&&!(s.currentTime<r)){if(!n||"video"===n){const{captionsTracks:t}=this;Object.keys(t).forEach((i=>Oe(t[i],e,r)))}if(this.config.renderTextTracksNatively&&0===e&&void 0!==i){const{textTracks:t}=this;Object.keys(t).forEach((r=>Oe(t[r],e,i)))}}}extractCea608Data(t){const e=[[],[]],r=31&t[0];let i=2;for(let n=0;n<r;n++){const r=t[i++],n=127&t[i++],s=127&t[i++];if(0===n&&0===s)continue;if(0!=(4&r)){const t=3&r;0!==t&&1!==t||(e[t].push(n),e[t].push(s))}}return e}},audioStreamController:class extends Ei{constructor(t,e,r){super(t,e,r,"[audio-stream-controller]",Le),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:t}=this;t.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.LEVEL_LOADED,this.onLevelLoaded,this),t.on(b.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(b.ERROR,this.onError,this),t.on(b.BUFFER_RESET,this.onBufferReset,this),t.on(b.BUFFER_CREATED,this.onBufferCreated,this),t.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(b.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(b.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(b.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:t}=this;t.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.LEVEL_LOADED,this.onLevelLoaded,this),t.off(b.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(b.ERROR,this.onError,this),t.off(b.BUFFER_RESET,this.onBufferReset,this),t.off(b.BUFFER_CREATED,this.onBufferCreated,this),t.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(b.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(b.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(b.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(t,{frag:e,id:r,initPTS:i,timescale:n}){if("main"===r){const t=e.cc;this.initPTS[e.cc]={baseTime:i,timescale:n},this.log(`InitPTS for cc: ${t} found from main: ${i}`),this.videoTrackCC=t,this.state===bi&&this.tick()}}startLoad(t){if(!this.levels)return this.startPosition=t,void(this.state=di);const e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),e>0&&-1===t?(this.log(`Override startPosition with lastCurrentTime @${e.toFixed(3)}`),t=e,this.state=ui):(this.loadedmetadata=!1,this.state=gi),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}doTick(){switch(this.state){case ui:this.doTickIdle();break;case gi:{var t;const{levels:e,trackId:r}=this,i=null==e||null==(t=e[r])?void 0:t.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=bi}break}case fi:{var e;const t=performance.now(),r=this.retryDate;if(!r||t>=r||null!=(e=this.media)&&e.seeking){const{levels:t,trackId:e}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((null==t?void 0:t[e])||null),this.state=ui}break}case bi:{const t=this.waitingData;if(t){const{frag:e,part:r,cache:i,complete:n}=t;if(void 0!==this.initPTS[e.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=hi;const t={frag:e,part:r,payload:i.flush(),networkDetails:null};this._handleFragmentLoadProgress(t),n&&super._handleFragmentLoadComplete(t)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${e.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const t=this.getLoadPosition(),r=zr.bufferInfo(this.mediaBuffer,t,this.config.maxBufferHole);pr(r.end,this.config.maxFragLookUpTolerance,e)<0&&(this.log(`Waiting fragment cc (${e.cc}) @ ${e.start} cancelled because another fragment at ${r.end} is needed`),this.clearWaitingFragment())}}else this.state=ui}}this.onTickEnd()}clearWaitingFragment(){const t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ui)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:t}=this;null!=t&&t.readyState&&(this.lastCurrentTime=t.currentTime)}doTickIdle(){const{hls:t,levels:e,media:r,trackId:i}=this,n=t.config;if(!r&&(this.startFragRequested||!n.startFragPrefetch)||null==e||!e[i])return;const s=e[i],a=s.details;if(!a||a.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(a))return void(this.state=gi);const o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,P,Le));const l=this.getFwdBufferInfo(o,Le);if(null===l)return;const{bufferedTrack:d,switchingTrack:u}=this;if(!u&&this._streamEnded(l,a))return t.trigger(b.BUFFER_EOS,{type:"audio"}),void(this.state=vi);const c=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Ce),h=l.len,f=this.getMaxBufferLength(null==c?void 0:c.len),g=a.fragments,p=g[0].start;let m=this.flushing?this.getLoadPosition():l.end;if(u&&r){const t=this.getLoadPosition();d&&!Dn(u.attrs,d.attrs)&&(m=t),a.PTSKnown&&t<p&&(l.end>p||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=p+.05)}if(h>=f&&!u&&m<g[g.length-1].start)return;let v=this.getNextFragment(m,a),y=!1;if(v&&this.isLoopLoading(v,m)&&(y=!!v.gap,v=this.getNextFragmentLoopLoading(v,a,l,Ce,f)),!v)return void(this.bufferFlushed=!0);const T=c&&v.start>c.end+a.targetduration;if(T||(null==c||!c.len)&&l.len){const t=this.getAppendedFrag(v.start,Ce);if(null===t)return;if(y||(y=!!t.gap||!!T&&0===c.len),T&&!y||y&&l.nextStart&&l.nextStart<t.end)return}this.loadFragment(v,s,m)}getMaxBufferLength(t){const e=super.getMaxBufferLength();return t?Math.min(Math.max(e,t),this.config.maxMaxBufferLength):e}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(t,{audioTracks:e}){this.resetTransmuxer(),this.levels=e.map((t=>new Qe(t)))}onAudioTrackSwitching(t,e){const r=!!e.url;this.trackId=e.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=e,this.state=ui,this.flushAudioIfNeeded(e)):(this.switchingTrack=null,this.bufferedTrack=e,this.state=di),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(t,e){this.mainDetails=e.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(b.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(t,e){var r;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=e);const{levels:i}=this,{details:n,id:s}=e;if(!i)return void this.warn(`Audio tracks were reset while loading level ${s}`);this.log(`Audio track ${s} loaded [${n.startSN},${n.endSN}]${n.lastPartSn?`[part-${n.lastPartSn}-${n.lastPartIndex}]`:""},duration:${n.totalduration}`);const a=i[s];let o=0;if(n.live||null!=(r=a.details)&&r.live){this.checkLiveUpdate(n);const t=this.mainDetails;if(n.deltaUpdateFailed||!t)return;var l;if(!a.details&&n.hasProgramDateTime&&t.hasProgramDateTime)Qr(n,t),o=n.fragments[0].start;else o=this.alignPlaylists(n,a.details,null==(l=this.levelLastLoaded)?void 0:l.details)}a.details=n,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(this.mainDetails||n,o),this.state!==gi||this.waitForCdnTuneIn(n)||(this.state=ui),this.tick()}_handleFragmentLoadProgress(t){var e;const{frag:r,part:i,payload:n}=t,{config:s,trackId:a,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const l=o[a];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const d=l.details;if(!d)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);const u=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let c=this.transmuxer;c||(c=this.transmuxer=new Rn(this.hls,Le,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],f=null==(e=r.initSegment)?void 0:e.data;if(void 0!==h){const t=!1,e=i?i.index:-1,s=-1!==e,a=new qr(r.level,r.sn,r.stats.chunkCount,n.byteLength,e,s);c.push(n,f,u,"",r,i,d.totalduration,t,a,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${d.startSN} ,${d.endSN}],track ${a}`);const{cache:t}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new Si,complete:!1};t.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=bi}}_handleFragmentLoadComplete(t){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(t)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(t,e){const r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer||null)}onFragBuffered(t,e){const{frag:r,part:i}=e;if(r.type===Le)if(this.fragContextChanged(r))this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==r.sn){this.fragPrevious=r;const t=this.switchingTrack;t&&(this.bufferedTrack=t,this.switchingTrack=null,this.hls.trigger(b.AUDIO_TRACK_SWITCHED,h({},t)))}this.fragBufferedComplete(r,i)}else if(!this.loadedmetadata&&r.type===Ce){const t=this.videoBuffer||this.media;if(t){zr.getBuffered(t).length&&(this.loadedmetadata=!0)}}}onError(t,e){var r;if(e.fatal)this.state=yi;else switch(e.details){case E.FRAG_GAP:case E.FRAG_PARSING_ERROR:case E.FRAG_DECRYPT_ERROR:case E.FRAG_LOAD_ERROR:case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_ERROR:case E.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Le,e);break;case E.AUDIO_TRACK_LOAD_ERROR:case E.AUDIO_TRACK_LOAD_TIMEOUT:case E.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==gi||(null==(r=e.context)?void 0:r.type)!==$e||(this.state=ui);break;case E.BUFFER_APPEND_ERROR:case E.BUFFER_FULL_ERROR:if(!e.parent||"audio"!==e.parent)return;if(e.details===E.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(e)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case E.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}}onBufferFlushing(t,{type:e}){e!==_&&(this.flushing=!0)}onBufferFlushed(t,{type:e}){if(e!==_){this.flushing=!1,this.bufferFlushed=!0,this.state===vi&&(this.state=ui);const t=this.mediaBuffer||this.media;t&&(this.afterBufferFlushed(t,e,Le),this.tick())}}_handleTransmuxComplete(t){var e;const r="audio",{hls:i}=this,{remuxResult:n,chunkMeta:s}=t,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:d}=a,{details:u}=d,{audio:c,text:h,id3:f,initSegment:g}=n;if(!this.fragContextChanged(o)&&u){if(this.state=pi,this.switchingTrack&&c&&this.completeAudioSwitch(this.switchingTrack),null!=g&&g.tracks){const t=o.initSegment||o;this._bufferInitSegment(d,g.tracks,t,s),i.trigger(b.FRAG_PARSING_INIT_SEGMENT,{frag:t,id:r,tracks:g.tracks})}if(c){const{startPTS:t,endPTS:e,startDTS:r,endDTS:i}=c;l&&(l.elementaryStreams[P]={startPTS:t,endPTS:e,startDTS:r,endDTS:i}),o.setElementaryStreamInfo(P,t,e,r,i),this.bufferFragmentData(c,o,l,s)}if(null!=f&&null!=(e=f.samples)&&e.length){const t=p({id:r,frag:o,details:u},f);i.trigger(b.FRAG_PARSING_METADATA,t)}if(h){const t=p({id:r,frag:o,details:u},h);i.trigger(b.FRAG_PARSING_USERDATA,t)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(t,e,r,i){if(this.state!==pi)return;e.video&&delete e.video;const n=e.audio;if(!n)return;n.id="audio";const s=t.audioCodec;this.log(`Init audio buffer, container:${n.container}, codecs[level/parsed]=[${s}/${n.codec}]`),s&&1===s.split(",").length&&(n.levelCodec=s),this.hls.trigger(b.BUFFER_CODECS,e);const a=n.initSegment;if(null!=a&&a.byteLength){const t={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:a};this.hls.trigger(b.BUFFER_APPENDING,t)}this.tickImmediate()}loadFragment(t,e,r){const i=this.fragmentTracker.getState(t);var n;if(this.fragCurrent=t,this.switchingTrack||i===Fr||i===Ur)if("initSegment"===t.sn)this._loadInitSegment(t,e);else if(null!=(n=e.details)&&n.live&&!this.initPTS[t.cc]){this.log(`Waiting for video PTS in continuity counter ${t.cc} of live stream before loading audio fragment ${t.sn} of level ${this.trackId}`),this.state=bi;const r=this.mainDetails;r&&r.fragments[0].start!==e.details.fragments[0].start&&Qr(e.details,r)}else this.startFragRequested=!0,super.loadFragment(t,e,r);else this.clearTrackerIfNeeded(t)}flushAudioIfNeeded(t){const{media:e,bufferedTrack:r}=this,i=null==r?void 0:r.attrs,n=t.attrs;e&&i&&(i.CHANNELS!==n.CHANNELS||r.name!==t.name||r.lang!==t.lang)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}completeAudioSwitch(t){const{hls:e}=this;this.flushAudioIfNeeded(t),this.bufferedTrack=t,this.switchingTrack=null,e.trigger(b.AUDIO_TRACK_SWITCHED,h({},t))}},audioTrackController:class extends $r{constructor(t){super(t,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:t}=this;t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_PARSED,this.onManifestParsed,this),t.on(b.LEVEL_LOADING,this.onLevelLoading,this),t.on(b.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(b.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_PARSED,this.onManifestParsed,this),t.off(b.LEVEL_LOADING,this.onLevelLoading,this),t.off(b.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(b.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(t,e){this.tracks=e.audioTracks||[]}onAudioTrackLoaded(t,e){const{id:r,groupId:i,details:n}=e,s=this.tracksInGroup[r];if(!s||s.groupId!==i)return void this.warn(`Audio track with id:${r} and group:${i} not found in active group ${null==s?void 0:s.groupId}`);const a=s.details;s.details=e.details,this.log(`Audio track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${n.startSN}-${n.endSN}]`),r===this.trackId&&this.playlistLoaded(r,e,a)}onLevelLoading(t,e){this.switchLevel(e.level)}onLevelSwitching(t,e){this.switchLevel(e.level)}switchLevel(t){const e=this.hls.levels[t];if(!e)return;const r=e.audioGroups||null,i=this.groupIds;let n=this.currentTrack;if(!r||(null==i?void 0:i.length)!==(null==r?void 0:r.length)||null!=r&&r.some((t=>-1===(null==i?void 0:i.indexOf(t))))){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const t=this.tracks.filter((t=>!r||-1!==r.indexOf(t.groupId)));if(t.length)this.selectDefaultTrack&&!t.some((t=>t.default))&&(this.selectDefaultTrack=!1),t.forEach(((t,e)=>{t.id=e}));else if(!n&&!this.tracksInGroup.length)return;this.tracksInGroup=t;const e=this.hls.config.audioPreference;if(!n&&e){const r=Pr(e,t,Or);if(r>-1)n=t[r];else{const t=Pr(e,this.tracks);n=this.tracks[t]}}let i=this.findTrackId(n);-1===i&&n&&(i=this.findTrackId(null));const a={audioTracks:t};this.log(`Updating audio tracks, ${t.length} track(s) found in group(s): ${null==r?void 0:r.join(",")}`),this.hls.trigger(b.AUDIO_TRACKS_UPDATED,a);const o=this.trackId;if(-1!==i&&-1===o)this.setAudioTrack(i);else if(t.length&&-1===o){var s;const e=new Error(`No audio track selected for current audio group-ID(s): ${null==(s=this.groupIds)?void 0:s.join(",")} track count: ${t.length}`);this.warn(e.message),this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:e})}}else this.shouldReloadPlaylist(n)&&this.setAudioTrack(this.trackId)}onError(t,e){!e.fatal&&e.context&&(e.context.type!==$e||e.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(e.context.groupId)||(this.requestScheduled=-1,this.checkRetry(e)))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}setAudioOption(t){const e=this.hls;if(e.config.audioPreference=t,t){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&_r(t,i,Or))return i;const n=Pr(t,this.tracksInGroup,Or);if(n>-1){const t=this.tracksInGroup[n];return this.setAudioTrack(n),t}if(i){let i=e.loadLevel;-1===i&&(i=e.firstAutoLevel);const n=function(t,e,r,i,n){const s=e[i],a=e.reduce(((t,e,r)=>{const i=e.uri;return(t[i]||(t[i]=[])).push(r),t}),{})[s.uri];a.length>1&&(i=Math.max.apply(Math,a));const o=s.videoRange,l=s.frameRate,d=s.codecSet.substring(0,4),u=Mr(e,i,(e=>{if(e.videoRange!==o||e.frameRate!==l||e.codecSet.substring(0,4)!==d)return!1;const i=e.audioGroups,s=r.filter((t=>!i||-1!==i.indexOf(t.groupId)));return Pr(t,s,n)>-1}));return u>-1?u:Mr(e,i,(e=>{const i=e.audioGroups,s=r.filter((t=>!i||-1!==i.indexOf(t.groupId)));return Pr(t,s,n)>-1}))}(t,e.levels,r,i,Or);if(-1===n)return null;e.nextLoadLevel=n}if(t.channels||t.audioCodec){const e=Pr(t,r);if(e>-1)return r[e]}}}return null}setAudioTrack(t){const e=this.tracksInGroup;if(t<0||t>=e.length)return void this.warn(`Invalid audio track id: ${t}`);this.clearTimer(),this.selectDefaultTrack=!1;const r=this.currentTrack,i=e[t],n=i.details&&!i.details.live;if(t===this.trackId&&i===r&&n)return;if(this.log(`Switching to audio-track ${t} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=t,this.currentTrack=i,this.hls.trigger(b.AUDIO_TRACK_SWITCHING,h({},i)),n)return;const s=this.switchParams(i.url,null==r?void 0:r.details);this.loadPlaylist(s)}findTrackId(t){const e=this.tracksInGroup;for(let r=0;r<e.length;r++){const i=e[r];if((!this.selectDefaultTrack||i.default)&&(!t||_r(t,i,Or)))return r}if(t){const{name:r,lang:i,assocLang:n,characteristics:s,audioCodec:a,channels:o}=t;for(let t=0;t<e.length;t++){if(_r({name:r,lang:i,assocLang:n,characteristics:s,audioCodec:a,channels:o},e[t],Or))return t}for(let r=0;r<e.length;r++){const i=e[r];if(Dn(t.attrs,i.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<e.length;r++){const i=e[r];if(Dn(t.attrs,i.attrs,["LANGUAGE"]))return r}}return-1}loadPlaylist(t){const e=this.currentTrack;if(this.shouldLoadPlaylist(e)&&e){super.loadPlaylist();const r=e.id,i=e.groupId;let n=e.url;if(t)try{n=t.addDirectives(n)}catch(t){this.warn(`Could not construct new URL with HLS Delivery Directives: ${t}`)}this.log(`loading audio-track playlist ${r} "${e.name}" lang:${e.lang} group:${i}`),this.clearTimer(),this.hls.trigger(b.AUDIO_TRACK_LOADING,{url:n,id:r,groupId:i,deliveryDirectives:t||null})}}},emeController:Ps,cmcdController:class{constructor(t){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=t=>{try{this.apply(t,{ot:Os.MANIFEST,su:!this.initialized})}catch(t){C.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=t=>{try{const e=t.frag,r=this.hls.levels[e.level],i=this.getObjectType(e),n={d:1e3*e.duration,ot:i};i!==Os.VIDEO&&i!==Os.AUDIO&&i!=Os.MUXED||(n.br=r.bitrate/1e3,n.tb=this.getTopBandwidth(i)/1e3,n.bl=this.getBufferLength(i)),this.apply(t,n)}catch(t){C.warn("Could not generate segment CMCD data.",t)}},this.hls=t;const e=this.config=t.config,{cmcd:r}=e;null!=r&&(e.pLoader=this.createPlaylistLoader(),e.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||function(){try{return crypto.randomUUID()}catch(t){try{const t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}}}(),this.cid=r.contentId,this.useHeaders=!0===r.useHeaders,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const t=this.hls;t.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(b.MEDIA_DETACHED,this.onMediaDetached,this),t.on(b.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const t=this.hls;t.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(b.MEDIA_DETACHED,this.onMediaDetached,this),t.off(b.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(t,e){var r,i;this.audioBuffer=null==(r=e.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(i=e.tracks.video)?void 0:i.buffer}createData(){var t;return{v:1,sf:Ms.HLS,sid:this.sid,cid:this.cid,pr:null==(t=this.media)?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(t,e={}){p(e,this.createData());const r=e.ot===Os.INIT||e.ot===Os.VIDEO||e.ot===Os.MUXED;this.starved&&r&&(e.bs=!0,e.su=!0,this.starved=!1),null==e.su&&(e.su=this.buffering);const{includeKeys:i}=this;i&&(e=Object.keys(e).reduce(((t,r)=>(i.includes(r)&&(t[r]=e[r]),t)),{})),this.useHeaders?(t.headers||(t.headers={}),pa(t.headers,e)):t.url=ya(t.url,e)}getObjectType(t){const{type:e}=t;return"subtitle"===e?Os.TIMED_TEXT:"initSegment"===t.sn?Os.INIT:"audio"===e?Os.AUDIO:"main"===e?this.hls.audioTracks.length?Os.VIDEO:Os.MUXED:void 0}getTopBandwidth(t){let e,r=0;const i=this.hls;if(t===Os.AUDIO)e=i.audioTracks;else{const t=i.maxAutoLevel,r=t>-1?t+1:i.levels.length;e=i.levels.slice(0,r)}for(const t of e)t.bitrate>r&&(r=t.bitrate);return r>0?r:NaN}getBufferLength(t){const e=this.hls.media,r=t===Os.AUDIO?this.audioBuffer:this.videoBuffer;if(!r||!e)return NaN;return 1e3*zr.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:t}=this.config,e=this.applyPlaylistData,r=t||this.config.loader;return class{constructor(t){this.loader=void 0,this.loader=new r(t)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(t,r,i){e(t),this.loader.load(t,r,i)}}}createFragmentLoader(){const{fLoader:t}=this.config,e=this.applyFragmentData,r=t||this.config.loader;return class{constructor(t){this.loader=void 0,this.loader=new r(t)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(t,r,i){e(t),this.loader.load(t,r,i)}}}},contentSteeringController:class{constructor(t){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.log=C.log.bind(C,"[content-steering]:"),this.registerListeners()}registerListeners(){const t=this.hls;t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(b.MANIFEST_PARSED,this.onManifestParsed,this),t.on(b.ERROR,this.onError,this)}unregisterListeners(){const t=this.hls;t&&(t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(b.MANIFEST_PARSED,this.onManifestParsed,this),t.off(b.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const t=1e3*this.timeToLoad-(performance.now()-this.updated);if(t>0)return void this.scheduleRefresh(this.uri,t)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(t){const e=this.levels;e&&(this.levels=e.filter((e=>e!==t)))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(t,e){const{contentSteering:r}=e;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks}onError(t,e){const{errorAction:r}=e;if((null==r?void 0:r.action)===yr&&r.flags===Sr){const t=this.levels;let i=this.pathwayPriority,n=this.pathwayId;if(e.context){const{groupId:r,pathwayId:i,type:s}=e.context;r&&t?n=this.getPathwayForGroupId(r,s,n):i&&(n=i)}n in this.penalizedPathways||(this.penalizedPathways[n]=performance.now()),!i&&t&&(i=t.reduce(((t,e)=>(-1===t.indexOf(e.pathwayId)&&t.push(e.pathwayId),t)),[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==n),r.resolved||C.warn(`Could not resolve ${e.details} ("${e.error.message}") with content-steering for Pathway: ${n} levels: ${t?t.length:t} priorities: ${JSON.stringify(i)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(t){this.levels=t;let e=this.getLevelsForPathway(this.pathwayId);if(0===e.length){const r=t[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),e=this.getLevelsForPathway(r),this.pathwayId=r}return e.length!==t.length?(this.log(`Found ${e.length}/${t.length} levels in Pathway "${this.pathwayId}"`),e):t}getLevelsForPathway(t){return null===this.levels?[]:this.levels.filter((e=>t===e.pathwayId))}updatePathwayPriority(t){let e;this.pathwayPriority=t;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach((t=>{i-r[t]>3e5&&delete r[t]}));for(let i=0;i<t.length;i++){const n=t[i];if(n in r)continue;if(n===this.pathwayId)return;const s=this.hls.nextLoadLevel,a=this.hls.levels[s];if(e=this.getLevelsForPathway(n),e.length>0){this.log(`Setting Pathway to "${n}"`),this.pathwayId=n,or(e),this.hls.trigger(b.LEVELS_UPDATED,{levels:e});const t=this.hls.levels[s];a&&t&&this.levels&&(t.attrs["STABLE-VARIANT-ID"]!==a.attrs["STABLE-VARIANT-ID"]&&t.bitrate!==a.bitrate&&this.log(`Unstable Pathways change from bitrate ${a.bitrate} to ${t.bitrate}`),this.hls.nextLoadLevel=s);break}}}getPathwayForGroupId(t,e,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let r=0;r<i.length;r++)if(e===$e&&i[r].hasAudioGroup(t)||e===Ae&&i[r].hasSubtitleGroup(t))return i[r].pathwayId;return r}clonePathways(t){const e=this.levels;if(!e)return;const r={},i={};t.forEach((t=>{const{ID:n,"BASE-ID":s,"URI-REPLACEMENT":a}=t;if(e.some((t=>t.pathwayId===n)))return;const o=this.getLevelsForPathway(s).map((t=>{const e=new R(t.attrs);e["PATHWAY-ID"]=n;const s=e.AUDIO&&`${e.AUDIO}_clone_${n}`,o=e.SUBTITLES&&`${e.SUBTITLES}_clone_${n}`;s&&(r[e.AUDIO]=s,e.AUDIO=s),o&&(i[e.SUBTITLES]=o,e.SUBTITLES=o);const l=Ta(t.uri,e["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",a),d=new Qe({attrs:e,audioCodec:t.audioCodec,bitrate:t.bitrate,height:t.height,name:t.name,url:l,videoCodec:t.videoCodec,width:t.width});if(t.audioGroups)for(let e=1;e<t.audioGroups.length;e++)d.addGroupId("audio",`${t.audioGroups[e]}_clone_${n}`);if(t.subtitleGroups)for(let e=1;e<t.subtitleGroups.length;e++)d.addGroupId("text",`${t.subtitleGroups[e]}_clone_${n}`);return d}));e.push(...o),ba(this.audioTracks,r,a,n),ba(this.subtitleTracks,i,a,n)}))}loadSteeringManifest(t){const e=this.hls.config,r=e.loader;let i;this.loader&&this.loader.destroy(),this.loader=new r(e);try{i=new self.URL(t)}catch(e){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${t}`)}if("data:"!==i.protocol){const t=0|(this.hls.bandwidthEstimate||e.abrEwmaDefaultEstimate);i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+t)}const n={responseType:"json",url:i.href},s=e.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(t,e,r,n)=>{this.log(`Loaded steering manifest: "${i}"`);const s=t.data;if(1!==s.VERSION)return void this.log(`Steering VERSION ${s.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=s.TTL;const{"RELOAD-URI":a,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=s;if(a)try{this.uri=new self.URL(a,i).href}catch(t){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${a}`)}this.scheduleRefresh(this.uri||r.url),o&&this.clonePathways(o);const d={steeringManifest:s,url:i.toString()};this.hls.trigger(b.STEERING_MANIFEST_LOADED,d),l&&this.updatePathwayPriority(l)},onError:(t,e,r,i)=>{if(this.log(`Error loading steering manifest: ${t.code} ${t.text} (${e.url})`),this.stopLoad(),410===t.code)return this.enabled=!1,void this.log(`Steering manifest ${e.url} no longer available`);let n=1e3*this.timeToLoad;if(429!==t.code)this.scheduleRefresh(this.uri||e.url,n);else{const t=this.loader;if("function"==typeof(null==t?void 0:t.getResponseHeader)){const e=t.getResponseHeader("Retry-After");e&&(n=1e3*parseFloat(e))}this.log(`Steering manifest ${e.url} rate limited`)}},onTimeout:(t,e,r)=>{this.log(`Timeout loading steering manifest (${e.url})`),this.scheduleRefresh(this.uri||e.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(n,o,l)}scheduleRefresh(t,e=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout((()=>{var e;const r=null==(e=this.hls)?void 0:e.media;!r||r.ended?this.scheduleRefresh(t,1e3*this.timeToLoad):this.loadSteeringManifest(t)}),e)}}});function ka(t){return t&&"object"==typeof t?Array.isArray(t)?t.map(ka):Object.keys(t).reduce(((e,r)=>(e[r]=ka(t[r]),e)),{}):t}function Da(t){const e=t.loader;if(e!==$a&&e!==Sa)C.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1})()&&(t.loader=$a,t.progressive=!0,t.enableSoftwareAES=!0,C.log("[config]: Progressive streaming enabled, using FetchLoader"))}}let Ia;class Pa extends $r{constructor(t,e){super(t,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=e,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(b.LEVEL_LOADED,this.onLevelLoaded,this),t.on(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(b.FRAG_BUFFERED,this.onFragBuffered,this),t.on(b.ERROR,this.onError,this)}_unregisterListeners(){const{hls:t}=this;t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(b.LEVEL_LOADED,this.onLevelLoaded,this),t.off(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(b.FRAG_BUFFERED,this.onFragBuffered,this),t.off(b.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach((t=>{t.loadError=0,t.fragmentError=0})),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(t,e){this.resetLevels()}onManifestLoaded(t,e){const r=this.hls.config.preferManagedMediaSource,i=[],n={},s={};let a=!1,o=!1,l=!1;e.levels.forEach((t=>{var e,d;const u=t.attrs;let{audioCodec:c,videoCodec:h}=t;-1!==(null==(e=c)?void 0:e.indexOf("mp4a.40.34"))&&(Ia||(Ia=/chrome|firefox/i.test(navigator.userAgent)),Ia&&(t.audioCodec=c=void 0)),c&&(t.audioCodec=c=oe(c,r)),0===(null==(d=h)?void 0:d.indexOf("avc1"))&&(h=t.videoCodec=function(t){const e=t.split(".");if(e.length>2){let t=e.shift()+".";return t+=parseInt(e.shift()).toString(16),t+=("000"+parseInt(e.shift()).toString(16)).slice(-4),t}return t}(h));const{width:f,height:g,unknownCodecs:p}=t;if(a||(a=!(!f||!g)),o||(o=!!h),l||(l=!!c),null!=p&&p.length||c&&!te(c,"audio",r)||h&&!te(h,"video",r))return;const{CODECS:m,"FRAME-RATE":v,"HDCP-LEVEL":y,"PATHWAY-ID":b,RESOLUTION:T,"VIDEO-RANGE":E}=u,S=`${`${b||"."}-`}${t.bitrate}-${T}-${v}-${m}-${E}-${y}`;if(n[S])if(n[S].uri===t.url||t.attrs["PATHWAY-ID"])n[S].addGroupId("audio",u.AUDIO),n[S].addGroupId("text",u.SUBTITLES);else{const e=s[S]+=1;t.attrs["PATHWAY-ID"]=new Array(e+1).join(".");const r=new Qe(t);n[S]=r,i.push(r)}else{const e=new Qe(t);n[S]=e,s[S]=1,i.push(e)}})),this.filterAndSortMediaOptions(i,e,a,o,l)}filterAndSortMediaOptions(t,e,r,i,n){let s=[],a=[],o=t;if((r||i)&&n&&(o=o.filter((({videoCodec:t,videoRange:e,width:r,height:i})=>{return(!!t||!(!r||!i))&&(!!(n=e)&&qe.indexOf(n)>-1);var n}))),0===o.length)return void Promise.resolve().then((()=>{if(this.hls){e.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(e.levels[0].attrs)}`);const t=new Error("no level with compatible codecs found in manifest");this.hls.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:t,reason:t.message})}}));if(e.audioTracks){const{preferManagedMediaSource:t}=this.hls.config;s=e.audioTracks.filter((e=>!e.audioCodec||te(e.audioCodec,"audio",t))),_a(s)}e.subtitles&&(a=e.subtitles,_a(a));const l=o.slice(0);o.sort(((t,e)=>{if(t.attrs["HDCP-LEVEL"]!==e.attrs["HDCP-LEVEL"])return(t.attrs["HDCP-LEVEL"]||"")>(e.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&t.height!==e.height)return t.height-e.height;if(t.frameRate!==e.frameRate)return t.frameRate-e.frameRate;if(t.videoRange!==e.videoRange)return qe.indexOf(t.videoRange)-qe.indexOf(e.videoRange);if(t.videoCodec!==e.videoCodec){const r=ie(t.videoCodec),i=ie(e.videoCodec);if(r!==i)return i-r}if(t.uri===e.uri&&t.codecSet!==e.codecSet){const r=ne(t.codecSet),i=ne(e.codecSet);if(r!==i)return i-r}return t.averageBitrate!==e.averageBitrate?t.averageBitrate-e.averageBitrate:0}));let d=l[0];if(this.steering&&(o=this.steering.filterParsedLevels(o),o.length!==l.length))for(let t=0;t<l.length;t++)if(l[t].pathwayId===o[0].pathwayId){d=l[t];break}this._levels=o;for(let t=0;t<o.length;t++)if(o[t]===d){var u;this._firstLevel=t;const e=d.bitrate,r=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${o.length} level(s) found, first bitrate: ${e}`),void 0===(null==(u=this.hls.userConfig)?void 0:u.abrEwmaDefaultEstimate)){const t=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);t>r&&r===Ra.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=t)}break}const c=n&&!i,h={levels:o,audioTracks:s,subtitleTracks:a,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:n,video:i,altAudio:!c&&s.some((t=>!!t.url))};this.hls.trigger(b.MANIFEST_PARSED,h),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(t){const e=this._levels;if(0===e.length)return;if(t<0||t>=e.length){const r=new Error("invalid level idx"),i=t<0;if(this.hls.trigger(b.ERROR,{type:T.OTHER_ERROR,details:E.LEVEL_SWITCH_ERROR,level:t,fatal:i,error:r,reason:r.message}),i)return;t=Math.min(t,e.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,n=i?i.attrs["PATHWAY-ID"]:void 0,s=e[t],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=s,r===t&&s.details&&i&&n===a)return;this.log(`Switching to level ${t} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${a?" with Pathway "+a:""} from level ${r}${n?" with Pathway "+n:""}`);const o={level:t,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(b.LEVEL_SWITCHING,o);const l=s.details;if(!l||l.live){const t=this.switchParams(s.uri,null==i?void 0:i.details);this.loadPlaylist(t)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}get firstLevel(){return this._firstLevel}set firstLevel(t){this._firstLevel=t}get startLevel(){if(void 0===this._startLevel){const t=this.hls.config.startLevel;return void 0!==t?t:this.hls.firstAutoLevel}return this._startLevel}set startLevel(t){this._startLevel=t}onError(t,e){!e.fatal&&e.context&&e.context.type===we&&e.context.level===this.level&&this.checkRetry(e)}onFragBuffered(t,{frag:e}){if(void 0!==e&&e.type===Ce){const t=e.elementaryStreams;if(!Object.keys(t).some((e=>!!t[e])))return;const r=this._levels[e.level];null!=r&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(t,e){var r;const{level:i,details:n}=e,s=this._levels[i];var a;if(!s)return this.warn(`Invalid level index ${i}`),void(null!=(a=e.deliveryDirectives)&&a.skip&&(n.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(i,e,s.details)):null!=(r=e.deliveryDirectives)&&r.skip&&(n.deltaUpdateFailed=!0)}loadPlaylist(t){super.loadPlaylist();const e=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){let i=r.uri;if(t)try{i=t.addDirectives(i)}catch(t){this.warn(`Could not construct new URL with HLS Delivery Directives: ${t}`)}const n=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${e}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""} with${n?" Pathway "+n:""} ${i}`),this.clearTimer(),this.hls.trigger(b.LEVEL_LOADING,{url:i,level:e,pathwayId:r.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}removeLevel(t){var e;const r=this._levels.filter(((e,r)=>r!==t||(this.steering&&this.steering.removeLevel(e),e===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,e.details&&e.details.fragments.forEach((t=>t.level=-1))),!1)));or(r),this._levels=r,this.currentLevelIndex>-1&&null!=(e=this.currentLevel)&&e.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(b.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(t,{levels:e}){this._levels=e}checkMaxAutoUpdated(){const{autoLevelCapping:t,maxAutoLevel:e,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==e&&(this._maxAutoLevel=e,this.hls.trigger(b.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:e,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function _a(t){const e={};t.forEach((t=>{const r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}class Oa{constructor(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}abort(t){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var e;if(t&&t!==(null==(e=i.context)?void 0:e.frag.type))return;i.abort()}}}detach(){for(const t in this.keyUriToKeyInfo){const e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}}destroy(){this.detach();for(const t in this.keyUriToKeyInfo){const e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(t,e=E.KEY_LOAD_ERROR,r,i,n){return new ii({type:T.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:n,error:r,networkDetails:i})}loadClear(t,e){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:i}=t;for(let t=0;t<e.length;t++){const n=e[t];if(i<=n.cc&&("initSegment"===r||"initSegment"===n.sn||r<n.sn)){this.emeController.selectKeySystemFormat(n).then((t=>{n.setKeyFormat(t)}));break}}}}load(t){return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then((e=>this.loadInternal(t,e))):this.loadInternal(t)}loadInternal(t,e){var r,i;e&&t.setKeyFormat(e);const n=t.decryptdata;if(!n){const r=new Error(e?`Expected frag.decryptdata to be defined after setting format ${e}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,E.KEY_LOAD_ERROR,r))}const s=n.uri;if(!s)return Promise.reject(this.createKeyLoadError(t,E.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let a=this.keyUriToKeyInfo[s];if(null!=(r=a)&&r.decryptdata.key)return n.key=a.decryptdata.key,Promise.resolve({frag:t,keyInfo:a});var o;if(null!=(i=a)&&i.keyLoadPromise)switch(null==(o=a.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then((e=>(n.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:a})))}switch(a=this.keyUriToKeyInfo[s]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===n.keyFormat?this.loadKeyHTTP(a,t):this.loadKeyEME(a,t);case"AES-128":return this.loadKeyHTTP(a,t);default:return Promise.reject(this.createKeyLoadError(t,E.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${n.method}"`)))}}loadKeyEME(t,e){const r={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){const e=this.emeController.loadKey(r);if(e)return(t.keyLoadPromise=e.then((e=>(t.mediaKeySessionContext=e,r)))).catch((e=>{throw t.keyLoadPromise=null,e}))}return Promise.resolve(r)}loadKeyHTTP(t,e){const r=this.config,i=new(0,r.loader)(r);return e.keyLoader=t.loader=i,t.keyLoadPromise=new Promise(((n,s)=>{const a={keyInfo:t,frag:e,responseType:"arraybuffer",url:t.decryptdata.uri},o=r.keyLoadPolicy.default,l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(t,e,r,i)=>{const{frag:a,keyInfo:o,url:l}=r;if(!a.decryptdata||o!==this.keyUriToKeyInfo[l])return s(this.createKeyLoadError(a,E.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),i));o.decryptdata.key=a.decryptdata.key=new Uint8Array(t.data),a.keyLoader=null,o.loader=null,n({frag:a,keyInfo:o})},onError:(t,r,i,n)=>{this.resetLoader(r),s(this.createKeyLoadError(e,E.KEY_LOAD_ERROR,new Error(`HTTP Error ${t.code} loading key ${t.text}`),i,h({url:a.url,data:void 0},t)))},onTimeout:(t,r,i)=>{this.resetLoader(r),s(this.createKeyLoadError(e,E.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),i))},onAbort:(t,r,i)=>{this.resetLoader(r),s(this.createKeyLoadError(e,E.INTERNAL_ABORTED,new Error("key loading aborted"),i))}};i.load(a,l,d)}))}resetLoader(t){const{frag:e,keyInfo:r,url:i}=t,n=r.loader;e.keyLoader===n&&(e.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],n&&n.destroy()}}function Ma(){return self.SourceBuffer||self.WebKitSourceBuffer}function Na(){if(!Qt())return!1;const t=Ma();return!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove}class Fa{constructor(t,e,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(t,e){const{config:r,media:i,stalled:n}=this;if(null===i)return;const{currentTime:s,seeking:a}=i,o=this.seeking&&!a,l=!this.seeking&&a;if(this.seeking=a,s!==t){if(this.moved=!0,a||(this.nudgeRetry=0),null!==n){if(this.stallReported){const t=self.performance.now()-n;C.warn(`playback not stuck anymore @${s}, after ${Math.round(t)}ms`),this.stallReported=!1}this.stalled=null}return}if(l||o)return void(this.stalled=null);if(i.paused&&!a||i.ended||0===i.playbackRate||!zr.getBuffered(i).length)return void(this.nudgeRetry=0);const d=zr.bufferInfo(i,s,0),u=d.nextStart||0;if(a){const t=d.len>2,r=!u||e&&e.start<=s||u-s>2&&!this.fragmentTracker.getPartialFragment(s);if(t||r)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var c;if(!(d.len>0)&&!u)return;const t=Math.max(u,d.start||0)-s,e=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,r=(null==e||null==(c=e.details)?void 0:c.live)?2*e.details.targetduration:2,n=this.fragmentTracker.getPartialFragment(s);if(t>0&&(t<=r||n))return void(i.paused||this._trySkipBufferHole(n))}const h=self.performance.now();if(null===n)return void(this.stalled=h);const f=h-n;if(!a&&f>=250&&(this._reportStall(d),!this.media))return;const g=zr.bufferInfo(i,s,r.maxBufferHole);this._tryFixBufferStall(g,f)}_tryFixBufferStall(t,e){const{config:r,fragmentTracker:i,media:n}=this;if(null===n)return;const s=n.currentTime,a=i.getPartialFragment(s);if(a){if(this._trySkipBufferHole(a)||!this.media)return}(t.len>r.maxBufferHole||t.nextStart&&t.nextStart-s<r.maxBufferHole)&&e>1e3*r.highBufferWatchdogPeriod&&(C.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(t){const{hls:e,media:r,stallReported:i}=this;if(!i&&r){this.stallReported=!0;const i=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(t)})`);C.warn(i.message),e.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:t.len})}}_trySkipBufferHole(t){const{config:e,hls:r,media:i}=this;if(null===i)return 0;const n=i.currentTime,s=zr.bufferInfo(i,n,0),a=n<s.start?s.start:s.nextStart;if(a){const o=s.len<=e.maxBufferHole,l=s.len>0&&s.len<1&&i.readyState<3,d=a-n;if(d>0&&(o||l)){if(d>e.maxBufferHole){const{fragmentTracker:e}=this;let r=!1;if(0===n){const t=e.getAppendedFrag(0,Ce);t&&a<t.end&&(r=!0)}if(!r){const r=t||e.getAppendedFrag(n,Ce);if(r){let t=!1,i=r.end;for(;i<a;){const r=e.getPartialFragment(i);if(!r){t=!0;break}i+=r.duration}if(t)return 0}}}const s=Math.max(a+.05,n+.1);if(C.warn(`skipping hole, adjusting currentTime from ${n} to ${s}`),this.moved=!0,this.stalled=null,i.currentTime=s,t&&!t.gap){const e=new Error(`fragment loaded with buffer holes, seeking from ${n} to ${s}`);r.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:e,reason:e.message,frag:t})}return s}}return 0}_tryNudgeBuffer(){const{config:t,hls:e,media:r,nudgeRetry:i}=this;if(null===r)return;const n=r.currentTime;if(this.nudgeRetry++,i<t.nudgeMaxRetry){const s=n+(i+1)*t.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${n} to ${s}`);C.warn(a.message),r.currentTime=s,e.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const r=new Error(`Playhead still not moving while enough data buffered @${n} after ${t.nudgeMaxRetry} nudges`);C.error(r.message),e.trigger(b.ERROR,{type:T.MEDIA_ERROR,details:E.BUFFER_STALLED_ERROR,error:r,fatal:!0})}}}class Ba extends Ei{constructor(t,e,r){super(t,e,r,"[stream-controller]",Ce),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(b.MANIFEST_LOADING,this.onManifestLoading,this),t.on(b.MANIFEST_PARSED,this.onManifestParsed,this),t.on(b.LEVEL_LOADING,this.onLevelLoading,this),t.on(b.LEVEL_LOADED,this.onLevelLoaded,this),t.on(b.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(b.ERROR,this.onError,this),t.on(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(b.BUFFER_CREATED,this.onBufferCreated,this),t.on(b.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(b.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:t}=this;t.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(b.MANIFEST_LOADING,this.onManifestLoading,this),t.off(b.MANIFEST_PARSED,this.onManifestParsed,this),t.off(b.LEVEL_LOADED,this.onLevelLoaded,this),t.off(b.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(b.ERROR,this.onError,this),t.off(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(b.BUFFER_CREATED,this.onBufferCreated,this),t.off(b.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(b.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(b.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(t){if(this.levels){const{lastCurrentTime:e,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let t=r.startLevel;-1===t&&(r.config.testBandwidth&&this.levels.length>1?(t=0,this.bitrateTest=!0):t=r.firstAutoLevel),r.nextLoadLevel=t,this.level=r.loadLevel,this.loadedmetadata=!1}e>0&&-1===t&&(this.log(`Override startPosition with lastCurrentTime @${e.toFixed(3)}`),t=e),this.state=ui,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=di}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Ti:{const{levels:t,level:e}=this,r=null==t?void 0:t[e],i=null==r?void 0:r.details;if(i&&(!i.live||this.levelLastLoaded===r)){if(this.waitForCdnTuneIn(i))break;this.state=ui;break}if(this.hls.nextLoadLevel!==this.level){this.state=ui;break}break}case fi:{var t;const e=self.performance.now(),r=this.retryDate;if(!r||e>=r||null!=(t=this.media)&&t.seeking){const{levels:t,level:e}=this,r=null==t?void 0:t[e];this.resetStartWhenNotLoaded(r||null),this.state=ui}}}this.state===ui&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:t,levelLastLoaded:e,levels:r,media:i}=this;if(null===e||!i&&(this.startFragRequested||!t.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const n=t.nextLoadLevel;if(null==r||!r[n])return;const s=r[n],a=this.getMainFwdBufferInfo();if(null===a)return;const o=this.getLevelDetails();if(o&&this._streamEnded(a,o)){const t={};return this.altAudio&&(t.type="video"),this.hls.trigger(b.BUFFER_EOS,t),void(this.state=vi)}t.loadLevel!==n&&-1===t.manualLevel&&this.log(`Adapting to level ${n} from level ${this.level}`),this.level=t.nextLoadLevel=n;const l=s.details;if(!l||this.state===Ti||l.live&&this.levelLastLoaded!==s)return this.level=n,void(this.state=Ti);const d=a.len,u=this.getMaxBufferLength(s.maxBitrate);if(d>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const c=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(c,l);if(this.couldBacktrack&&!this.fragPrevious&&h&&"initSegment"!==h.sn&&this.fragmentTracker.getState(h)!==Gr){var f;const t=(null!=(f=this.backtrackFragment)?f:h).sn-l.startSN,e=l.fragments[t-1];e&&h.cc===e.cc&&(h=e,this.fragmentTracker.removeFragment(e))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,c)){if(!h.gap){const t=this.audioOnly&&!this.altAudio?P:_,e=(t===_?this.videoBuffer:this.mediaBuffer)||this.media;e&&this.afterBufferFlushed(e,t,Ce)}h=this.getNextFragmentLoopLoading(h,l,a,Ce,u)}h&&(!h.initSegment||h.initSegment.data||this.bitrateTest||(h=h.initSegment),this.loadFragment(h,s,c))}loadFragment(t,e,r){const i=this.fragmentTracker.getState(t);this.fragCurrent=t,i===Fr||i===Ur?"initSegment"===t.sn?this._loadInitSegment(t,e):this.bitrateTest?(this.log(`Fragment ${t.sn} of level ${t.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(t,e)):(this.startFragRequested=!0,super.loadFragment(t,e,r)):this.clearTrackerIfNeeded(t)}getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,Ce)}followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:t,media:e}=this;if(null!=e&&e.readyState){let r;const i=this.getAppendedFrag(e.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const n=this.getLevelDetails();if(null!=n&&n.live){const t=this.getMainFwdBufferInfo();if(!t||t.len<2*n.targetduration)return}if(!e.paused&&t){const e=t[this.hls.nextLoadLevel],i=this.fragLastKbps;r=i&&this.fragCurrent?this.fragCurrent.duration*e.maxBitrate/(1e3*i)+1:0}else r=0;const s=this.getBufferedFrag(e.currentTime+r);if(s){const t=this.followingBufferedFrag(s);if(t){this.abortCurrentFrag();const e=t.maxStartPTS?t.maxStartPTS:t.start,r=t.duration,i=Math.max(s.end,e+Math.min(Math.max(r-this.config.maxFragLookUpTolerance,r*(this.couldBacktrack?.5:.125)),r*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(i,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case ci:case hi:case fi:case pi:case mi:this.state=ui}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(t,e){super.flushMainBuffer(t,e,this.altAudio?"video":null)}onMediaAttached(t,e){super.onMediaAttached(t,e);const r=e.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new Fa(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:t}=this;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const t=this.media,e=t?t.currentTime:null;m(e)&&this.log(`Media seeked to ${e.toFixed(3)}`);const r=this.getMainFwdBufferInfo();null!==r&&0!==r.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(b.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(t,e){let r=!1,i=!1;e.levels.forEach((t=>{const e=t.audioCodec;e&&(r=r||-1!==e.indexOf("mp4a.40.2"),i=i||-1!==e.indexOf("mp4a.40.5"))})),this.audioCodecSwitch=r&&i&&!function(){var t;const e=Ma();return"function"==typeof(null==e||null==(t=e.prototype)?void 0:t.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1}onLevelLoading(t,e){const{levels:r}=this;if(!r||this.state!==ui)return;const i=r[e.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=Ti)}onLevelLoaded(t,e){var r;const{levels:i}=this,n=e.level,s=e.details,a=s.totalduration;if(!i)return void this.warn(`Levels were reset while loading level ${n}`);this.log(`Level ${n} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${a}`);const o=i[n],l=this.fragCurrent;!l||this.state!==hi&&this.state!==fi||l.level!==e.level&&l.loader&&this.abortCurrentFrag();let d=0;if(s.live||null!=(r=o.details)&&r.live){var u;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,o.details,null==(u=this.levelLastLoaded)?void 0:u.details)}if(o.details=s,this.levelLastLoaded=o,this.hls.trigger(b.LEVEL_UPDATED,{details:s,level:n}),this.state===Ti){if(this.waitForCdnTuneIn(s))return;this.state=ui}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}_handleFragmentLoadProgress(t){var e;const{frag:r,part:i,payload:n}=t,{levels:s}=this;if(!s)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const a=s[r.level],o=a.details;if(!o)return this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),void this.fragmentTracker.removeFragment(r);const l=a.videoCodec,d=o.PTSKnown||!o.live,u=null==(e=r.initSegment)?void 0:e.data,c=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new Rn(this.hls,Ce,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,g=-1!==f,p=new qr(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,g),m=this.initPTS[r.cc];h.push(n,u,c,l,r,i,o.totalduration,d,p,m)}onAudioTrackSwitching(t,e){const r=this.altAudio;if(!!!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const t=this.fragCurrent;t&&(this.log("Switching to main audio track, cancel main fragment load"),t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const t=this.hls;r&&(t.trigger(b.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),t.trigger(b.AUDIO_TRACK_SWITCHED,e)}}onAudioTrackSwitched(t,e){const r=e.id,i=!!this.hls.audioTracks[r].url;if(i){const t=this.videoBuffer;t&&this.mediaBuffer!==t&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=t)}this.altAudio=i,this.tick()}onBufferCreated(t,e){const r=e.tracks;let i,n,s=!1;for(const t in r){const e=r[t];if("main"===e.id){if(n=t,i=e,"video"===t){const e=r[t];e&&(this.videoBuffer=e.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${n}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(t,e){const{frag:r,part:i}=e;if(r&&r.type!==Ce)return;if(this.fragContextChanged(r))return this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===mi&&(this.state=ui));const n=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}onError(t,e){var r;if(e.fatal)this.state=yi;else switch(e.details){case E.FRAG_GAP:case E.FRAG_PARSING_ERROR:case E.FRAG_DECRYPT_ERROR:case E.FRAG_LOAD_ERROR:case E.FRAG_LOAD_TIMEOUT:case E.KEY_LOAD_ERROR:case E.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ce,e);break;case E.LEVEL_LOAD_ERROR:case E.LEVEL_LOAD_TIMEOUT:case E.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==Ti||(null==(r=e.context)?void 0:r.type)!==we||(this.state=ui);break;case E.BUFFER_APPEND_ERROR:case E.BUFFER_FULL_ERROR:if(!e.parent||"main"!==e.parent)return;if(e.details===E.BUFFER_APPEND_ERROR)return void this.resetLoadingState();this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case E.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}}checkBuffer(){const{media:t,gapController:e}=this;if(t&&e&&t.readyState){if(this.loadedmetadata||!zr.getBuffered(t).length){const t=this.state!==ui?this.fragCurrent:null;e.poll(this.lastCurrentTime,t)}this.lastCurrentTime=t.currentTime}}onFragLoadEmergencyAborted(){this.state=ui,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(t,{type:e}){if(e!==P||this.audioOnly&&!this.altAudio){const t=(e===_?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(t,e,Ce),this.tick()}}onLevelsUpdated(t,e){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=e.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:t}=this;if(!t)return;const e=t.currentTime;let r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void this.log(`could not seek to ${r}, already seeking at ${e}`);const i=zr.getBuffered(t),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${n} to match buffer start`),r+=n,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${e}`),t.currentTime=r}}_getAudioCodec(t){let e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e}_loadBitrateTestFrag(t,e){t.bitrateTest=!0,this._doFragLoad(t,e).then((r=>{const{hls:i}=this;if(!r||this.fragContextChanged(t))return;e.fragmentError=0,this.state=ui,this.startFragRequested=!1,this.bitrateTest=!1;const n=t.stats;n.parsing.start=n.parsing.end=n.buffering.start=n.buffering.end=self.performance.now(),i.trigger(b.FRAG_LOADED,r),t.bitrateTest=!1}))}_handleTransmuxComplete(t){var e;const r="main",{hls:i}=this,{remuxResult:n,chunkMeta:s}=t,a=this.getCurrentContext(s);if(!a)return void this.resetWhenMissingContext(s);const{frag:o,part:l,level:d}=a,{video:u,text:c,id3:h,initSegment:f}=n,{details:g}=d,p=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=pi,f){if(null!=f&&f.tracks){const t=o.initSegment||o;this._bufferInitSegment(d,f.tracks,t,s),i.trigger(b.FRAG_PARSING_INIT_SEGMENT,{frag:t,id:r,tracks:f.tracks})}const t=f.initPTS,e=f.timescale;m(t)&&(this.initPTS[o.cc]={baseTime:t,timescale:e},i.trigger(b.INIT_PTS_FOUND,{frag:o,id:r,initPTS:t,timescale:e}))}if(u&&g&&"initSegment"!==o.sn){const t=g.fragments[o.sn-1-g.startSN],e=o.sn===g.startSN,r=!t||o.cc>t.cc;if(!1!==n.independent){const{startPTS:t,endPTS:i,startDTS:n,endDTS:a}=u;if(l)l.elementaryStreams[u.type]={startPTS:t,endPTS:i,startDTS:n,endDTS:a};else if(u.firstKeyFrame&&u.independent&&1===s.id&&!r&&(this.couldBacktrack=!0),u.dropped&&u.independent){const n=this.getMainFwdBufferInfo(),s=(n?n.end:this.getLoadPosition())+this.config.maxBufferHole,l=u.firstKeyFramePTS?u.firstKeyFramePTS:t;if(!e&&s<l-this.config.maxBufferHole&&!r)return void this.backtrack(o);r&&(o.gap=!0),o.setElementaryStreamInfo(u.type,o.start,i,o.start,a,!0)}else e&&t>2&&(o.gap=!0);o.setElementaryStreamInfo(u.type,t,i,n,a),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,l,s,e||r)}else{if(!e&&!r)return void this.backtrack(o);o.gap=!0}}if(p){const{startPTS:t,endPTS:e,startDTS:r,endDTS:i}=p;l&&(l.elementaryStreams[P]={startPTS:t,endPTS:e,startDTS:r,endDTS:i}),o.setElementaryStreamInfo(P,t,e,r,i),this.bufferFragmentData(p,o,l,s)}if(g&&null!=h&&null!=(e=h.samples)&&e.length){const t={id:r,frag:o,details:g,samples:h.samples};i.trigger(b.FRAG_PARSING_METADATA,t)}if(g&&c){const t={id:r,frag:o,details:g,samples:c.samples};i.trigger(b.FRAG_PARSING_USERDATA,t)}}}_bufferInitSegment(t,e,r,i){if(this.state!==pi)return;this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;const{audio:n,video:s,audiovideo:a}=e;if(n){let e=t.audioCodec;const r=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==n.metadata.channelCount&&-1===r.indexOf("firefox")&&(e="mp4a.40.5")),e&&-1!==e.indexOf("mp4a.40.5")&&-1!==r.indexOf("android")&&"audio/mpeg"!==n.container&&(e="mp4a.40.2",this.log(`Android: force audio codec to ${e}`)),t.audioCodec&&t.audioCodec!==e&&this.log(`Swapping manifest audio codec "${t.audioCodec}" for "${e}"`),n.levelCodec=e,n.id="main",this.log(`Init audio buffer, container:${n.container}, codecs[selected/level/parsed]=[${e||""}/${t.audioCodec||""}/${n.codec}]`)}s&&(s.levelCodec=t.videoCodec,s.id="main",this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${t.videoCodec||""}/${s.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${t.codecs}/${a.codec}]`),this.hls.trigger(b.BUFFER_CODECS,e),Object.keys(e).forEach((t=>{const n=e[t].initSegment;null!=n&&n.byteLength&&this.hls.trigger(b.BUFFER_APPENDING,{type:t,data:n,frag:r,part:null,chunkMeta:i,parent:r.type})})),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Ce)}backtrack(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=ui}checkFragmentChanged(){const t=this.media;let e=null;if(t&&t.readyState>1&&!1===t.seeking){const r=t.currentTime;if(zr.isBuffered(t,r)?e=this.getAppendedFrag(r):zr.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){this.backtrackFragment=null;const t=this.fragPlaying,r=e.level;t&&e.sn===t.sn&&t.level===r||(this.fragPlaying=e,this.hls.trigger(b.FRAG_CHANGED,{frag:e}),t&&t.level===r||this.hls.trigger(b.LEVEL_SWITCHED,{level:r}))}}}get nextLevel(){const t=this.nextBufferedFrag;return t?t.level:-1}get currentFrag(){const t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}get currentProgramDateTime(){const t=this.media;if(t){const e=t.currentTime,r=this.currentFrag;if(r&&m(e)&&m(r.programDateTime)){const t=r.programDateTime+1e3*(e-r.start);return new Date(t)}}return null}get currentLevel(){const t=this.currentFrag;return t?t.level:-1}get nextBufferedFrag(){const t=this.currentFrag;return t?this.followingBufferedFrag(t):null}get forceStartLoad(){return this._forceStartLoad}}class Ua{static get version(){return"1.5.6"}static isMSESupported(){return Na()}static isSupported(){return function(){if(!Na())return!1;const t=Qt();return"function"==typeof(null==t?void 0:t.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some((e=>t.isTypeSupported(re(e,"video"))))||["mp4a.40.2","fLaC"].some((e=>t.isTypeSupported(re(e,"audio")))))}()}static getMediaSource(){return Qt()}static get Events(){return b}static get ErrorTypes(){return T}static get ErrorDetails(){return E}static get DefaultConfig(){return Ua.defaultConfig?Ua.defaultConfig:Ra}static set DefaultConfig(t){Ua.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new xn,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,function(t,e){if("object"==typeof console&&!0===t||"object"==typeof t){A(t,"debug","log","info","warn","error");try{$.log(`Debug logs enabled for "${e}" in hls.js version 1.5.6`)}catch(t){$=w}}else $=w}(t.debug||!1,"Hls instance");const e=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=ka(t),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((t=>{const n=`${"level"===t?"playlist":t}LoadPolicy`,s=void 0===e[n],a=[];i.forEach((i=>{const o=`${t}Loading${i}`,l=e[o];if(void 0!==l&&s){a.push(o);const t=r[n].default;switch(e[n]={default:t},i){case"TimeOut":t.maxLoadTimeMs=l,t.maxTimeToFirstByteMs=l;break;case"MaxRetry":t.errorRetry.maxNumRetry=l,t.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":t.errorRetry.retryDelayMs=l,t.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":t.errorRetry.maxRetryDelayMs=l,t.timeoutRetry.maxRetryDelayMs=l}}})),a.length&&C.warn(`hls.js config: "${a.join('", "')}" setting(s) are deprecated, use "${n}": ${JSON.stringify(e[n])}`)})),h(h({},r),e)}(Ua.DefaultConfig,t);this.userConfig=t,e.progressive&&Da(e);const{abrController:r,bufferController:i,capLevelController:n,errorController:s,fpsController:a}=e,o=new s(this),l=this.abrController=new r(this),d=this.bufferController=new i(this),u=this.capLevelController=new n(this),c=new a(this),f=new De(this),g=new He(this),p=e.contentSteeringController,m=p?new p(this):null,v=this.levelController=new Pa(this,m),y=new jr(this),T=new Oa(this.config),E=this.streamController=new Ba(this,y,T);u.setStreamController(E),c.setStreamController(E);const S=[f,v,E];m&&S.splice(1,0,m),this.networkControllers=S;const L=[l,d,u,c,g,y];this.audioTrackController=this.createController(e.audioTrackController,S);const x=e.audioStreamController;x&&S.push(new x(this,y,T)),this.subtitleTrackController=this.createController(e.subtitleTrackController,S);const R=e.subtitleStreamController;R&&S.push(new R(this,y,T)),this.createController(e.timelineController,L),T.emeController=this.emeController=this.createController(e.emeController,L),this.cmcdController=this.createController(e.cmcdController,L),this.latencyController=this.createController(Ke,L),this.coreComponents=L,S.push(o);const k=o.onErrorOut;"function"==typeof k&&this.on(b.ERROR,k,o)}createController(t,e){if(t){const r=new t(this);return e&&e.push(r),r}return null}on(t,e,r=this){this._emitter.on(t,e,r)}once(t,e,r=this){this._emitter.once(t,e,r)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,e,r=this,i){this._emitter.off(t,e,r,i)}listeners(t){return this._emitter.listeners(t)}emit(t,e,r){return this._emitter.emit(t,e,r)}trigger(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){if(C.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),!this.triggeringException){this.triggeringException=!0;const r=t===b.ERROR;this.trigger(b.ERROR,{type:T.OTHER_ERROR,details:E.INTERNAL_EXCEPTION,fatal:r,event:t,error:e}),this.triggeringException=!1}}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){C.log("destroy"),this.trigger(b.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((t=>t.destroy())),this.networkControllers.length=0,this.coreComponents.forEach((t=>t.destroy())),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){C.log("attachMedia"),this._media=t,this.trigger(b.MEDIA_ATTACHING,{media:t})}detachMedia(){C.log("detachMedia"),this.trigger(b.MEDIA_DETACHING,void 0),this._media=null}loadSource(t){this.stopLoad();const e=this.media,r=this.url,i=this.url=u.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,C.log(`loadSource:${i}`),e&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(e)),this.trigger(b.MANIFEST_LOADING,{url:t})}startLoad(t=-1){C.log(`startLoad(${t})`),this.started=!0,this.networkControllers.forEach((e=>{e.startLoad(t)}))}stopLoad(){C.log("stopLoad"),this.started=!1,this.networkControllers.forEach((t=>{t.stopLoad()}))}resumeBuffering(){this.started&&this.networkControllers.forEach((t=>{"fragmentLoader"in t&&t.startLoad(-1)}))}pauseBuffering(){this.networkControllers.forEach((t=>{"fragmentLoader"in t&&t.stopLoad()}))}swapAudioCodec(){C.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){C.log("recoverMediaError");const t=this._media;this.detachMedia(),t&&this.attachMedia(t)}removeLevel(t){this.levelController.removeLevel(t)}get levels(){const t=this.levelController.levels;return t||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){C.log(`set currentLevel:${t}`),this.levelController.manualLevel=t,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){C.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){C.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){C.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){const t=this.levelController.startLevel;return-1===t&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:t}set startLevel(t){C.log(`set startLevel:${t}`),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}set bandwidthEstimate(t){this.abrController.resetEstimator(t)}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(C.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){(function(t){return ze.indexOf(t)>-1})(t)&&this._maxHdcpLevel!==t&&(this._maxHdcpLevel=t,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:e}}=this;if(!t)return 0;const r=t.length;for(let i=0;i<r;i++)if(t[i].maxBitrate>=e)return i;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:e,maxHdcpLevel:r}=this;let i;if(i=-1===e&&null!=t&&t.length?t.length-1:e,r)for(let e=i;e--;){const i=t[e].attrs["HDCP-LEVEL"];if(i&&i<=r)return e}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(t){this.abrController.nextAutoLevel=t}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(t){var e;return null==(e=this.audioTrackController)?void 0:e.setAudioOption(t)}setSubtitleOption(t){var e;return null==(e=this.subtitleTrackController)||e.setSubtitleOption(t),null}get allAudioTracks(){const t=this.audioTrackController;return t?t.allAudioTracks:[]}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const e=this.audioTrackController;e&&(e.audioTrack=t)}get allSubtitleTracks(){const t=this.subtitleTrackController;return t?t.allSubtitleTracks:[]}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return!!t&&t.subtitleDisplay}set subtitleDisplay(t){const e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}Ua.defaultConfig=void 0},13293:function(t,e,r){"use strict";r.d(e,{o4:function(){return U}});const i="3.7.2",n=i,s="function"==typeof atob,a="function"==typeof btoa,o="function"==typeof Buffer,l="function"==typeof TextDecoder?new TextDecoder:void 0,d="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(t=>{let e={};return t.forEach(((t,r)=>e[t]=r)),e})(u),h=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),g="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(t,e=(t=>t))=>new Uint8Array(Array.prototype.slice.call(t,0).map(e)),p=t=>t.replace(/=/g,"").replace(/[+\/]/g,(t=>"+"==t?"-":"_")),m=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),v=t=>{let e,r,i,n,s="";const a=t.length%3;for(let a=0;a<t.length;){if((r=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255||(n=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=r<<16|i<<8|n,s+=u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}return a?s.slice(0,a-3)+"===".substring(a):s},y=a?t=>btoa(t):o?t=>Buffer.from(t,"binary").toString("base64"):v,b=o?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let r=0,i=t.length;r<i;r+=4096)e.push(f.apply(null,t.subarray(r,r+4096)));return y(e.join(""))},T=(t,e=!1)=>e?p(b(t)):b(t),E=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?f(192|e>>>6)+f(128|63&e):f(224|e>>>12&15)+f(128|e>>>6&63)+f(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return f(240|e>>>18&7)+f(128|e>>>12&63)+f(128|e>>>6&63)+f(128|63&e)},S=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=t=>t.replace(S,E),$=o?t=>Buffer.from(t,"utf8").toString("base64"):d?t=>b(d.encode(t)):t=>y(w(t)),A=(t,e=!1)=>e?p($(t)):$(t),C=t=>A(t,!0),L=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,x=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return f(55296+(e>>>10))+f(56320+(1023&e));case 3:return f((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return f((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},R=t=>t.replace(L,x),k=t=>{if(t=t.replace(/\s+/g,""),!h.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,r,i,n="";for(let s=0;s<t.length;)e=c[t.charAt(s++)]<<18|c[t.charAt(s++)]<<12|(r=c[t.charAt(s++)])<<6|(i=c[t.charAt(s++)]),n+=64===r?f(e>>16&255):64===i?f(e>>16&255,e>>8&255):f(e>>16&255,e>>8&255,255&e);return n},D=s?t=>atob(m(t)):o?t=>Buffer.from(t,"base64").toString("binary"):k,I=o?t=>g(Buffer.from(t,"base64")):t=>g(D(t),(t=>t.charCodeAt(0))),P=t=>I(O(t)),_=o?t=>Buffer.from(t,"base64").toString("utf8"):l?t=>l.decode(I(t)):t=>R(D(t)),O=t=>m(t.replace(/[-_]/g,(t=>"-"==t?"+":"/"))),M=t=>_(O(t)),N=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),F=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,N(e));t("fromBase64",(function(){return M(this)})),t("toBase64",(function(t){return A(this,t)})),t("toBase64URI",(function(){return A(this,!0)})),t("toBase64URL",(function(){return A(this,!0)})),t("toUint8Array",(function(){return P(this)}))},B=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,N(e));t("toBase64",(function(t){return T(this,t)})),t("toBase64URI",(function(){return T(this,!0)})),t("toBase64URL",(function(){return T(this,!0)}))},U={version:i,VERSION:n,atob:D,atobPolyfill:k,btoa:y,btoaPolyfill:v,fromBase64:M,toBase64:A,encode:A,encodeURI:C,encodeURL:C,utob:w,btou:R,decode:M,isValid:t=>{if("string"!=typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},fromUint8Array:T,toUint8Array:P,extendString:F,extendUint8Array:B,extendBuiltins:()=>{F(),B()}}},75688:function(t,e,r){"use strict";r.d(e,{A:function(){return f}});var i=r(53247),n=r(52582),s=r(94408),a=r(39710);function o(t,e,r){var n=new i.Ay(r).getCountryCodesForCallingCode(t);return n?n.filter((function(t){return function(t,e,r){var n=new i.Ay(r);if(n.selectNumberingPlan(e),n.numberingPlan.possibleLengths().indexOf(t.length)>=0)return!0;return!1}(e,t,r)})):[]}var l=r(89177);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=function(){function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new TypeError("`country` or `countryCallingCode` not passed");if(!r)throw new TypeError("`nationalNumber` not passed");if(!n)throw new TypeError("`metadata` not passed");var s=function(t,e){var r,n,s=new i.Ay(e);g(t)?(r=t,s.selectNumberingPlan(r),n=s.countryCallingCode()):n=t;return{country:r,countryCallingCode:n}}(e,n),a=s.country,o=s.countryCallingCode;this.country=a,this.countryCallingCode=o,this.nationalNumber=r,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return n}}var e,r,d;return e=t,(r=[{key:"setExt",value:function(t){this.ext=t}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:o(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return(0,n.A)(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return function(t,e,r){if(e=e||{},(r=new i.Ay(r)).selectNumberingPlan(t.country,t.countryCallingCode),r.hasTypes())return void 0!==(0,a.A)(t,e,r.metadata);var n=e.v2?t.nationalNumber:t.phone;return(0,s.A)(n,r.nationalNumberPattern())}(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){return new i.Ay(this.getMetadata()).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(t){return this.number===t.number&&this.ext===t.ext}},{key:"getType",value:function(){return(0,a.A)(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(t,e){return(0,l.A)(this,t,e?u(u({},e),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(t){return this.format("NATIONAL",t)}},{key:"formatInternational",value:function(t){return this.format("INTERNATIONAL",t)}},{key:"getURI",value:function(t){return this.format("RFC3966",t)}}])&&h(e.prototype,r),d&&h(e,d),Object.defineProperty(e,"prototype",{writable:!1}),t}(),g=function(t){return/^[A-Z]{2}$/.test(t)}},36128:function(t,e,r){"use strict";r.d(e,{Cb:function(){return n},Jq:function(){return s},OA:function(){return a},c7:function(){return i},tz:function(){return l},uD:function(){return o}});var i=2,n=17,s=3,a="0-9０-９٠-٩۰-۹",o="".concat("-‐-―−ー－").concat("／/").concat("．.").concat("  ­​⁠　").concat("()（）［］\\[\\]").concat("~⁓∼～"),l="+＋"},89177:function(t,e,r){"use strict";r.d(e,{x:function(){return p},A:function(){return f}});var i=r(94408),n=r(11528),s=r(53247),a=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h={formatExtension:function(t,e,r){return"".concat(t).concat(r.ext()).concat(e)}};function f(t,e,r,i){if(r=r?u(u({},h),r):h,i=new s.Ay(i),t.country&&"001"!==t.country){if(!i.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));i.country(t.country)}else{if(!t.countryCallingCode)return t.phone||"";i.selectNumberingPlan(t.countryCallingCode)}var n,o=i.countryCallingCode(),l=r.v2?t.nationalNumber:t.phone;switch(e){case"NATIONAL":return l?m(n=g(l,t.carrierCode,"NATIONAL",i,r),t.ext,i,r.formatExtension):"";case"INTERNATIONAL":return l?(n=g(l,null,"INTERNATIONAL",i,r),m(n="+".concat(o," ").concat(n),t.ext,i,r.formatExtension)):"+".concat(o);case"E.164":return"+".concat(o).concat(l);case"RFC3966":return function(t){var e=t.number,r=t.ext;if(!e)return"";if("+"!==e[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(e).concat(r?";ext="+r:"")}({number:"+".concat(o).concat(l),ext:t.ext});case"IDD":if(!r.fromCountry)return;var d=function(t,e,r,i,n){var o=(0,s.Ko)(i,n.metadata);if(o===r){var l=g(t,e,"NATIONAL",n);return"1"===r?r+" "+l:l}var d=function(t,e,r){var i=new s.Ay(r);return i.selectNumberingPlan(t,e),i.defaultIDDPrefix()?i.defaultIDDPrefix():a.test(i.IDDPrefix())?i.IDDPrefix():void 0}(i,void 0,n.metadata);if(d)return"".concat(d," ").concat(r," ").concat(g(t,null,"INTERNATIONAL",n))}(l,t.carrierCode,o,r.fromCountry,i);return m(d,t.ext,i,r.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(e,'"'))}}function g(t,e,r,i,s){var a=p(i.formats(),t);return a?(0,n.A)(t,a,{useInternationalFormat:"INTERNATIONAL"===r,withNationalPrefix:!a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!s||!1!==s.nationalPrefix,carrierCode:e,metadata:i}):t}function p(t,e){for(var r,n=o(t);!(r=n()).done;){var s=r.value;if(s.leadingDigitsPatterns().length>0){var a=s.leadingDigitsPatterns()[s.leadingDigitsPatterns().length-1];if(0!==e.search(a))continue}if((0,i.A)(e,s.pattern()))return s}}function m(t,e,r,i){return e?i(t,e,r):t}},71135:function(t,e,r){"use strict";r.d(e,{A:function(){return n}});var i=r(36128);function n(t){return t.replace(new RegExp("[".concat(i.uD,"]+"),"g")," ").trim()}},51786:function(t,e,r){"use strict";function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function s(t,e){return a(t,void 0,e)}function a(t,e,r){var n=r.type(e),s=n&&n.possibleLengths()||r.possibleLengths();if(!s)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===e){if(!r.type("FIXED_LINE"))return a(t,"MOBILE",r);var o=r.type("MOBILE");o&&(s=function(t,e){for(var r,n=t.slice(),s=i(e);!(r=s()).done;){var a=r.value;t.indexOf(a)<0&&n.push(a)}return n.sort((function(t,e){return t-e}))}(s,o.possibleLengths()))}else if(e&&!n)return"INVALID_LENGTH";var l=t.length,d=s[0];return d===l?"IS_POSSIBLE":d>l?"TOO_SHORT":s[s.length-1]<l?"TOO_LONG":s.indexOf(l,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}r.d(e,{A:function(){return s}})},15512:function(t,e,r){"use strict";r.d(e,{A:function(){return a}});var i=r(36128),n=";ext=",s=function(t){return"([".concat(i.OA,"]{1,").concat(t,"})")};function a(t){var e="[  \\t,]*",r="[:\\.．]?[  \\t,-]*",i="#?",a="[  \\t]*";return n+s("20")+"|"+(e+"(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)"+r+s("20")+i)+"|"+(e+"(?:[xｘ#＃~～]|int|ｉｎｔ)"+r+s("9")+i)+"|"+("[- ]+"+s("6")+"#")+"|"+(a+"(?:,{2}|;)"+r+s("15")+i)+"|"+(a+"(?:,)+"+r+s("9")+i)}},19713:function(t,e,r){"use strict";r.d(e,{A:function(){return o}});var i=r(46890),n=r(10283),s=r(53247),a=r(36128);function o(t,e,r,o){if(!t)return{};var l;if("+"!==t[0]){var d=(0,i.A)(t,e,r,o);if(!d||d===t){if(e||r){var u=(0,n.A)(t,e,r,o),c=u.countryCallingCode,h=u.number;if(c)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:c,number:h}}return{number:t}}l=!0,t="+"+d}if("0"===t[1])return{};o=new s.Ay(o);for(var f=2;f-1<=a.Jq&&f<=t.length;){var g=t.slice(1,f);if(o.hasCallingCode(g))return o.selectNumberingPlan(g),{countryCallingCodeSource:l?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:g,number:t.slice(f)};f++}return{}}},10283:function(t,e,r){"use strict";r.d(e,{A:function(){return o}});var i=r(53247),n=r(94408),s=r(54573),a=r(51786);function o(t,e,r,o){var l=e?(0,i.Ko)(e,o):r;if(0===t.indexOf(l)){(o=new i.Ay(o)).selectNumberingPlan(e,r);var d=t.slice(l.length),u=(0,s.A)(d,o).nationalNumber,c=(0,s.A)(t,o).nationalNumber;if(!(0,n.A)(c,o.nationalNumberPattern())&&(0,n.A)(u,o.nationalNumberPattern())||"TOO_LONG"===(0,a.A)(c,o))return{countryCallingCode:l,number:d}}return{number:t}}},54573:function(t,e,r){"use strict";r.d(e,{A:function(){return a}});var i=r(81459),n=r(94408),s=r(51786);function a(t,e){var r=(0,i.A)(t,e),a=r.carrierCode,o=r.nationalNumber;if(o!==t){if(!function(t,e,r){if((0,n.A)(t,r.nationalNumberPattern())&&!(0,n.A)(e,r.nationalNumberPattern()))return!1;return!0}(t,o,e))return{nationalNumber:t};if(e.possibleLengths()&&!function(t,e){switch((0,s.A)(t,e)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}(o,e))return{nationalNumber:t}}return{nationalNumber:o,carrierCode:a}}},81459:function(t,e,r){"use strict";function i(t,e){if(t&&e.numberingPlan.nationalPrefixForParsing()){var r=new RegExp("^(?:"+e.numberingPlan.nationalPrefixForParsing()+")"),i=r.exec(t);if(i){var n,s,a,o=i.length-1,l=o>0&&i[o];if(e.nationalPrefixTransformRule()&&l)n=t.replace(r,e.nationalPrefixTransformRule()),o>1&&(s=i[1]);else{var d=i[0];n=t.slice(d.length),l&&(s=i[1])}if(l){var u=t.indexOf(i[1]);t.slice(0,u)===e.numberingPlan.nationalPrefix()&&(a=e.numberingPlan.nationalPrefix())}else a=i[0];return{nationalNumber:n,nationalPrefix:a,carrierCode:s}}}return{nationalNumber:t}}r.d(e,{A:function(){return i}})},11528:function(t,e,r){"use strict";r.d(e,{A:function(){return s},_:function(){return n}});var i=r(71135),n=/(\$\d)/;function s(t,e,r){var s=r.useInternationalFormat,a=r.withNationalPrefix,o=(r.carrierCode,r.metadata,t.replace(new RegExp(e.pattern()),s?e.internationalFormat():a&&e.nationalPrefixFormattingRule()?e.format().replace(n,e.nationalPrefixFormattingRule()):e.format()));return s?(0,i.A)(o):o}},39495:function(t,e,r){"use strict";r.d(e,{A:function(){return s}});var i=r(56111),n=!1;function s(t,e){var r=e.nationalNumber,s=e.defaultCountry,a=e.metadata;if(n&&a.isNonGeographicCallingCode(t))return"001";var o=a.getCountryCodesForCallingCode(t);return o?1===o.length?o[0]:(0,i.A)(r,{countries:o,defaultCountry:s,metadata:a.metadata}):void 0}},56111:function(t,e,r){"use strict";r.d(e,{A:function(){return o}});var i=r(53247),n=r(39710);function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function o(t,e){var r=e.countries,a=e.defaultCountry,o=e.metadata;o=new i.Ay(o);for(var l,d=[],u=s(r);!(l=u()).done;){var c=l.value;if(o.country(c),o.leadingDigits()){if(t&&0===t.search(o.leadingDigits()))return c}else if((0,n.A)({phone:t,country:c},void 0,o.metadata)){if(!a)return c;if(c===a)return c;d.push(c)}}if(d.length>0)return d[0]}},39710:function(t,e,r){"use strict";r.d(e,{A:function(){return l}});var i=r(53247),n=r(94408);function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var o=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function l(t,e,r){if(e=e||{},t.country||t.countryCallingCode){(r=new i.Ay(r)).selectNumberingPlan(t.country,t.countryCallingCode);var a=e.v2?t.nationalNumber:t.phone;if((0,n.A)(a,r.nationalNumberPattern())){if(d(a,"FIXED_LINE",r))return r.type("MOBILE")&&""===r.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":r.type("MOBILE")?d(a,"MOBILE",r)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var l,u=s(o);!(l=u()).done;){var c=l.value;if(d(a,c,r))return c}}}}function d(t,e,r){return!(!(e=r.type(e))||!e.pattern())&&(!(e.possibleLengths()&&e.possibleLengths().indexOf(t.length)<0)&&(0,n.A)(t,e.pattern()))}},40284:function(t,e,r){"use strict";r.d(e,{A:function(){return n}});var i={}.constructor;function n(t){return null!=t&&t.constructor===i}},94408:function(t,e,r){"use strict";function i(t,e){return t=t||"",new RegExp("^(?:"+e+")$").test(t)}r.d(e,{A:function(){return i}})},3578:function(t,e,r){"use strict";function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}r.d(e,{Ay:function(){return o},ZW:function(){return a}});var s={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function a(t){return s[t]}function o(t){for(var e,r="",n=i(t.split(""));!(e=n()).done;){var s=a(e.value);s&&(r+=s)}return r}},46890:function(t,e,r){"use strict";r.d(e,{A:function(){return a}});var i=r(53247),n=r(36128),s=new RegExp("(["+n.OA+"])");function a(t,e,r,n){if(e){var a=new i.Ay(n);a.selectNumberingPlan(e,r);var o=new RegExp(a.IDDPrefix());if(0===t.search(o)){var l=(t=t.slice(t.match(o)[0].length)).match(s);if(!(l&&null!=l[1]&&l[1].length>0&&"0"===l[1]))return t}}}},52582:function(t,e,r){"use strict";r.d(e,{A:function(){return s},x:function(){return a}});var i=r(53247),n=r(51786);function s(t,e,r){if(void 0===e&&(e={}),r=new i.Ay(r),e.v2){if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(t.countryCallingCode)}else{if(!t.phone)return!1;if(t.country){if(!r.hasCountry(t.country))throw new Error("Unknown country: ".concat(t.country));r.country(t.country)}else{if(!t.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(t.countryCallingCode)}}if(r.possibleLengths())return a(t.phone||t.nationalNumber,r);if(t.countryCallingCode&&r.isNonGeographicCallingCode(t.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function a(t,e){return"IS_POSSIBLE"===(0,n.A)(t,e)}},53247:function(t,e,r){"use strict";function i(t,e){t=t.split("-"),e=e.split("-");for(var r=t[0].split("."),i=e[0].split("."),n=0;n<3;n++){var s=Number(r[n]),a=Number(i[n]);if(s>a)return 1;if(a>s)return-1;if(!isNaN(s)&&isNaN(a))return 1;if(isNaN(s)&&!isNaN(a))return-1}return t[1]&&e[1]?t[1]>e[1]?1:t[1]<e[1]?-1:0:!t[1]&&e[1]?1:t[1]&&!e[1]?-1:0}r.d(e,{Ay:function(){return c},Ko:function(){return y},J_:function(){return b}});var n=r(40284);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function l(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var d=" ext. ",u=/^\d+$/,c=function(){function t(e){a(this,t),function(t){if(!t)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!(0,n.A)(t)||!(0,n.A)(t.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat((0,n.A)(t)?"an object of shape: { "+Object.keys(t).join(", ")+" }":"a "+v(t)+": "+t,"."))}(e),this.metadata=e,T.call(this,e)}return l(t,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter((function(t){return"001"!==t}))}},{key:"getCountryMetadata",value:function(t){return this.metadata.countries[t]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(t){return void 0!==this.getCountryMetadata(t)}},{key:"hasCallingCode",value:function(t){if(this.getCountryCodesForCallingCode(t))return!0;if(this.nonGeographic()){if(this.nonGeographic()[t])return!0}else{var e=this.countryCallingCodes()[t];if(e&&1===e.length&&"001"===e[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(t){return this.nonGeographic()?!!this.nonGeographic()[t]:!this.getCountryCodesForCallingCode(t)}},{key:"country",value:function(t){return this.selectNumberingPlan(t)}},{key:"selectNumberingPlan",value:function(t,e){if(t&&u.test(t)&&(e=t,t=null),t&&"001"!==t){if(!this.hasCountry(t))throw new Error("Unknown country: ".concat(t));this.numberingPlan=new h(this.getCountryMetadata(t),this)}else if(e){if(!this.hasCallingCode(e))throw new Error("Unknown calling code: ".concat(e));this.numberingPlan=new h(this.getNumberingPlanMetadata(e),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(t){var e=this.countryCallingCodes()[t];if(e){if(1===e.length&&3===e[0].length)return;return e}}},{key:"getCountryCodeForCallingCode",value:function(t){var e=this.getCountryCodesForCallingCode(t);if(e)return e[0]}},{key:"getNumberingPlanMetadata",value:function(t){var e=this.getCountryCodeForCallingCode(t);if(e)return this.getCountryMetadata(e);if(this.nonGeographic()){var r=this.nonGeographic()[t];if(r)return r}else{var i=this.countryCallingCodes()[t];if(i&&1===i.length&&"001"===i[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(t){return this.numberingPlan.type(t)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(t){return this.selectNumberingPlan(t)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}]),t}(),h=function(){function t(e,r){a(this,t),this.globalMetadataObject=r,this.metadata=e,T.call(this,r.metadata)}return l(t,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(t){return t[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var t=this,e=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return e.map((function(e){return new f(e,t)}))}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(t){return t[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(t){if(this.hasTypes()&&m(this.types(),t))return new p(m(this.types(),t),this)}},{key:"ext",value:function(){return this.v1||this.v2?d:this.metadata[13]||d}}]),t}(),f=function(){function t(e,r){a(this,t),this._format=e,this.metadata=r}return l(t,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||g.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),t}(),g=/^\(?\$1\)?$/,p=function(){function t(e,r){a(this,t),this.type=e,this.metadata=r}return l(t,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),t}();function m(t,e){switch(e){case"FIXED_LINE":return t[0];case"MOBILE":return t[1];case"TOLL_FREE":return t[2];case"PREMIUM_RATE":return t[3];case"PERSONAL_NUMBER":return t[4];case"VOICEMAIL":return t[5];case"UAN":return t[6];case"PAGER":return t[7];case"VOIP":return t[8];case"SHARED_COST":return t[9]}}var v=function(t){return s(t)};function y(t,e){if((e=new c(e)).hasCountry(t))return e.country(t).countryCallingCode();throw new Error("Unknown country: ".concat(t))}function b(t,e){return e.countries.hasOwnProperty(t)}function T(t){var e=t.version;"number"==typeof e?(this.v1=1===e,this.v2=2===e,this.v3=3===e,this.v4=4===e):e?-1===i(e,"1.2.0")?this.v2=!0:-1===i(e,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}},63696:function(t,e,r){"use strict";r.d(e,{A:function(){return l}});var i=r(40284);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,n,s=[],a=!0,o=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(s.push(i.value),!e||s.length!==e);a=!0);}catch(t){o=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw n}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function l(t){var e,r,o,l=a(Array.prototype.slice.call(t),4),d=l[0],u=l[1],c=l[2],h=l[3];if("string"!=typeof d)throw new TypeError("A text for parsing must be a string.");if(e=d,u&&"string"!=typeof u){if(!(0,i.A)(u))throw new Error("Invalid second argument: ".concat(u));c?(r=u,o=c):o=u}else h?(r=c,o=h):(r=void 0,o=c),u&&(r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({defaultCountry:u},r));return{text:e,options:r,metadata:o}}},38121:function(t,e,r){"use strict";r.d(e,{A:function(){return tt}});var i=r(36128);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){var e=u();return function(){var r,i=h(t);if(e){var s=h(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return function(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return o(t)}(this,r)}}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){var e="function"==typeof Map?new Map:void 0;return l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return d(t,arguments,h(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,t)},l(t)}function d(t,e,r){return d=u()?Reflect.construct:function(t,e,r){var i=[null];i.push.apply(i,e);var n=new(Function.bind.apply(t,i));return r&&c(n,r.prototype),n},d.apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(l,t);var e,r,i,n=a(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e=n.call(this,t),Object.setPrototypeOf(o(e),l.prototype),e.name=e.constructor.name,e}return e=l,r&&s(e.prototype,r),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(l(Error)),g=r(53247),p=r(15512),m="["+i.OA+"]{"+i.c7+"}",v="["+i.tz+"]{0,1}(?:["+i.uD+"]*["+i.OA+"]){3,}["+i.uD+i.OA+"]*",y=new RegExp("^["+i.tz+"]{0,1}(?:["+i.uD+"]*["+i.OA+"]){1,2}$","i"),b=v+"(?:"+(0,p.A)()+")?",T=new RegExp("^"+m+"$|^"+b+"$","i");var E=new RegExp("(?:"+(0,p.A)()+")$","i");var S=r(3578);function w(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function A(t){for(var e,r="",i=w(t.split(""));!(e=i()).done;){r+=C(e.value,r)||""}return r}function C(t,e,r){return"+"===t?e?void("function"==typeof r&&r("end")):"+":(0,S.ZW)(t)}var L=r(52582),x=r(75688),R=r(94408),k=r(19713),D=r(54573),I=r(39495),P="+",_="(["+i.OA+"]|[\\-\\.\\(\\)]?)",O="^\\"+P+_+"*["+i.OA+"]"+_+"*$",M=new RegExp(O,"g"),N=i.OA,F=new RegExp("^("+("["+N+"]+((\\-)*["+N+"])*")+"\\.)*"+("[a-zA-Z]+((\\-)*["+N+"])*")+"\\.?$","g"),B="tel:",U=";phone-context=",G=";isub=";function j(t,e){var r,i=e.extractFormattedPhoneNumber,n=function(t){var e=t.indexOf(U);if(e<0)return null;var r=e+U.length;if(r>=t.length)return"";var i=t.indexOf(";",r);return i>=0?t.substring(r,i):t.substring(r)}(t);if(!function(t){return null===t||0!==t.length&&(M.test(t)||F.test(t))}(n))throw new f("NOT_A_NUMBER");if(null===n)r=i(t)||"";else{r="",n.charAt(0)===P&&(r+=n);var s,a=t.indexOf(B);s=a>=0?a+B.length:0;var o=t.indexOf(U);r+=t.substring(s,o)}var l=r.indexOf(G);if(l>0&&(r=r.substring(0,l)),""!==r)return r}var V=250,H=new RegExp("["+i.tz+i.OA+"]"),K=new RegExp("[^"+i.OA+"#]+$"),z=!1;function q(t,e,r){if(e=e||{},r=new g.Ay(r),e.defaultCountry&&!r.hasCountry(e.defaultCountry)){if(e.v2)throw new f("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(e.defaultCountry))}var n=function(t,e,r){var n=j(t,{extractFormattedPhoneNumber:function(t){return function(t,e,r){if(!t)return;if(t.length>V){if(r)throw new f("TOO_LONG");return}if(!1===e)return t;var i=t.search(H);if(i<0)return;return t.slice(i).replace(K,"")}(t,r,e)}});if(!n)return{};if(!function(t){return t.length>=i.c7&&T.test(t)}(n))return function(t){return y.test(t)}(n)?{error:"TOO_SHORT"}:{};var s=function(t){var e=t.search(E);if(e<0)return{};for(var r=t.slice(0,e),i=t.match(E),n=1;n<i.length;){if(i[n])return{number:r,ext:i[n]};n++}}(n);if(s.ext)return s;return{number:n}}(t,e.v2,e.extract),s=n.number,a=n.ext,o=n.error;if(!s){if(e.v2){if("TOO_SHORT"===o)throw new f("TOO_SHORT");throw new f("NOT_A_NUMBER")}return{}}var l=function(t,e,r,i){var n,s=(0,k.A)(A(t),e,r,i.metadata),a=s.countryCallingCodeSource,o=s.countryCallingCode,l=s.number;if(o)i.selectNumberingPlan(o);else{if(!l||!e&&!r)return{};i.selectNumberingPlan(e,r),e?n=e:z&&i.isNonGeographicCallingCode(r)&&(n="001"),o=r||(0,g.Ko)(e,i.metadata)}if(!l)return{countryCallingCodeSource:a,countryCallingCode:o};var d=(0,D.A)(A(l),i),u=d.nationalNumber,c=d.carrierCode,h=(0,I.A)(o,{nationalNumber:u,defaultCountry:e,metadata:i});h&&(n=h,"001"===h||i.country(n));return{country:n,countryCallingCode:o,countryCallingCodeSource:a,nationalNumber:u,carrierCode:c}}(s,e.defaultCountry,e.defaultCallingCode,r),d=l.country,u=l.nationalNumber,c=l.countryCallingCode,h=l.countryCallingCodeSource,p=l.carrierCode;if(!r.hasSelectedNumberingPlan()){if(e.v2)throw new f("INVALID_COUNTRY");return{}}if(!u||u.length<i.c7){if(e.v2)throw new f("TOO_SHORT");return{}}if(u.length>i.Cb){if(e.v2)throw new f("TOO_LONG");return{}}if(e.v2){var m=new x.A(c,u,r.metadata);return d&&(m.country=d),p&&(m.carrierCode=p),a&&(m.ext=a),m.__countryCallingCodeSource=h,m}var v=!!(e.extended?r.hasSelectedNumberingPlan():d)&&(0,R.A)(u,r.nationalNumberPattern());return e.extended?{country:d,countryCallingCode:c,carrierCode:p,valid:v,possible:!!v||!(!0!==e.extended||!r.possibleLengths()||!(0,L.x)(u,r)),phone:u,ext:a}:v?function(t,e,r){var i={country:t,phone:e};r&&(i.ext=r);return i}(d,u,a):{}}function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){J(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function J(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tt(t,e,r){e&&e.defaultCountry&&!(0,g.J_)(e.defaultCountry,r)&&(e=Q(Q({},e),{},{defaultCountry:void 0}));try{return function(t,e,r){return q(t,Y(Y({},e),{},{v2:!0}),r)}(t,e,r)}catch(t){if(!(t instanceof f))throw t}}},58097:function(t,e){"use strict";e.A={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|73)|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","[27]\\d{6,7}|[34]\\d{5,7}|63\\d{6}|(?:5|8\\d\\d)\\d{7}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:(?:79|94)[01]|83[0-389])\\d{5}|4(?:[0-3]\\d|4[047-9]|5[0-25-9]|6[0-36-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[3-79]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:[0-5]\\d\\d|69[7-9]|70[0-79])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-2]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97[7-9]))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(8-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"8 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(8-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(8-$1)",1]],"8",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-489]|3[5-9]|9)|8(?:0[89]|92)","5(?:2(?:[2-49]|8[235-9])|3[5-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-2]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:22|44|7[27]|87|99)[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-689]|8[1-69]|9[1-8])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[047]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","2[0-24-9]\\d{8}|[78]\\d{10,13}|[7-9]\\d{9}|[1-9]\\d{7}|[124-7]\\d{6}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-7]|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[27]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","(?:[1-6]|[7-9]\\d\\d)\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-8]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","[1-6]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["6"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:5056(?:[0-35-9]\\d|4[468])|7302[0-3]\\d)\\d{4}|(?:472[24]|505[2-57-9]|7306|983[237-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[149]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-7]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","810","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","[23]\\d{7,8}|(?:4\\d\\d|[89]00)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[23]"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}}},32852:function(t,e,r){"use strict";r.d(e,{Q:function(){return ot}});var i=r(58097),n=r(53247),s=r(75688);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e){var r=e.onCountryChange,i=e.onCallingCodeChange;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onCountryChange=r,this.onCallingCodeChange=i}var e,r,i;return e=t,(r=[{key:"reset",value:function(t){var e=t.country,r=t.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(e,r)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var i=r[e];this[i]=t[i]}}},{key:"initCountryAndCallingCode",value:function(t,e){this.setCountry(t),this.setCallingCode(e)}},{key:"setCountry",value:function(t){this.country=t,this.onCountryChange(t)}},{key:"setCallingCode",value:function(t){this.callingCode=t,this.onCallingCodeChange(t,this.country)}},{key:"startInternationalNumber",value:function(t,e){this.international=!0,this.initCountryAndCallingCode(t,e)}},{key:"appendDigits",value:function(t){this.digits+=t}},{key:"appendNationalSignificantNumberDigits",value:function(t){this.nationalSignificantNumber+=t}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}])&&a(e.prototype,r),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var u="x",c=new RegExp(u);function h(t,e){if(e<1)return"";for(var r="";e>1;)1&e&&(r+=t),e>>=1,t+=t;return r+t}function f(t,e){return")"===t[e]&&e++,function(t){var e=[],r=0;for(;r<t.length;)"("===t[r]?e.push(r):")"===t[r]&&e.pop(),r++;var i=0,n="";e.push(t.length);for(var s=0,a=e;s<a.length;s++){var o=a[s];n+=t.slice(i,o),i=o+1}return n}(t.slice(0,e))}var g=r(51786),p=r(3578),m=r(11528);function v(t,e,r){var i=r.metadata,n=r.shouldTryNationalPrefixFormattingRule,s=r.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(e.pattern(),")$")).test(t.nationalSignificantNumber))return function(t,e,r){var i=r.metadata,n=r.shouldTryNationalPrefixFormattingRule,s=r.getSeparatorAfterNationalPrefix;t.nationalSignificantNumber,t.international,t.nationalPrefix,t.carrierCode;if(n(e)){var a=y(t,e,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:s,metadata:i});if(a)return a}return y(t,e,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:s,metadata:i})}(t,e,{metadata:i,shouldTryNationalPrefixFormattingRule:n,getSeparatorAfterNationalPrefix:s})}function y(t,e,r){var i=r.metadata,n=r.useNationalPrefixFormattingRule,s=r.getSeparatorAfterNationalPrefix,a=(0,m.A)(t.nationalSignificantNumber,e,{carrierCode:t.carrierCode,useInternationalFormat:t.international,withNationalPrefix:n,metadata:i});if(n||(t.nationalPrefix?a=t.nationalPrefix+s(e)+a:t.complexPrefixBeforeNationalSignificantNumber&&(a=t.complexPrefixBeforeNationalSignificantNumber+" "+a)),function(t,e){return(0,p.Ay)(t)===e.getNationalDigits()}(a,t))return a}function b(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,(r=[{key:"parse",value:function(t){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(t),1!==this.context.length)throw new Error("Non-finalized contexts left when pattern parse ended");var e=this.context[0],r=e.branches,i=e.instructions;if(r)return{op:"|",args:r.concat([$(i)])};if(0===i.length)throw new Error("Pattern is required");return 1===i.length?i[0]:i}},{key:"startContext",value:function(t){this.context.push(t)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(t){if(!t)throw new Error("Pattern is required");var e=t.match(w);if(e){var r=e[1],i=t.slice(0,e.index),n=t.slice(e.index+r.length);switch(r){case"(?:":i&&this.parsePattern(i),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(i&&this.parsePattern(i),0===this.getContext().instructions.length)throw new Error('No instructions found after "|" operator in an "or" group');var s=this.getContext().branches;s.push($(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:s});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(i&&this.parsePattern(i),!this.getContext().branches){if(1!==this.context.length)throw new Error('"branches" not found in an "or" group context');this.getContext().branches=[]}this.getContext().branches.push($(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":i&&this.parsePattern(i),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:E(i)});break;default:throw new Error("Unknown operator: ".concat(r))}n&&this.parsePattern(n)}else{if(S.test(t))throw new Error("Illegal characters found in a pattern: ".concat(t));this.getContext().instructions=this.getContext().instructions.concat(t.split(""))}}}])&&b(e.prototype,r),i&&b(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(t){for(var e=[],r=0;r<t.length;){if("-"===t[r]){if(0===r||r===t.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(t));for(var i=t[r-1].charCodeAt(0)+1,n=t[r+1].charCodeAt(0)-1,s=i;s<=n;)e.push(String.fromCharCode(s)),s++}else e.push(t[r]);r++}return e}var S=/[\(\)\[\]\?\:\|]/,w=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function $(t){return 1===t.length?t[0]:t}function A(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function L(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var x=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.matchTree=(new T).parse(e)}var e,r,i;return e=t,r=[{key:"match",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowOverflow;if(!t)throw new Error("String is required");var r=R(t.split(""),this.matchTree,!0);if(r&&r.match&&delete r.matchedChars,!r||!r.overflow||e)return r}}],r&&L(e.prototype,r),i&&L(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R(t,e,r){if("string"==typeof e){var i=t.join("");return 0===e.indexOf(i)?t.length===e.length?{match:!0,matchedChars:t}:{partialMatch:!0}:0===i.indexOf(e)?r&&t.length>e.length?{overflow:!0}:{match:!0,matchedChars:t.slice(0,e.length)}:void 0}if(Array.isArray(e)){for(var n=t.slice(),s=0;s<e.length;){var a=R(n,e[s],r&&s===e.length-1);if(!a)return;if(a.overflow)return a;if(!a.match){if(a.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(a,null,2)))}if(0===(n=n.slice(a.matchedChars.length)).length)return s===e.length-1?{match:!0,matchedChars:t}:{partialMatch:!0};s++}return r?{overflow:!0}:{match:!0,matchedChars:t.slice(0,t.length-n.length)}}switch(e.op){case"|":for(var o,l,d=A(e.args);!(l=d()).done;){var u=R(t,l.value,r);if(u){if(u.overflow)return u;if(u.match)return{match:!0,matchedChars:u.matchedChars};if(!u.partialMatch)throw new Error("Unsupported match result:\n".concat(JSON.stringify(u,null,2)));o=!0}}return o?{partialMatch:!0}:void 0;case"[]":for(var c,h=A(e.args);!(c=h()).done;){var f=c.value;if(t[0]===f)return 1===t.length?{match:!0,matchedChars:t}:r?{overflow:!0}:{match:!0,matchedChars:[f]}}return;default:throw new Error("Unsupported instruction tree: ".concat(e))}}var k=r(36128),D=r(71135);function I(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function _(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var O=h("9",15),M=/[- ]/,N=function(){return/\[([^\[\]])*\]/g},F=function(){return/\d(?=[^,}][^,}])/g},B=new RegExp("["+k.uD+"]*\\$1["+k.uD+"]*(\\$\\d["+k.uD+"]*)*$"),U=function(){function t(e){e.state;var r=e.metadata;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metadata=r,this.resetFormat()}var e,r,i;return e=t,(r=[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(t,e){this.resetFormat(),t?(this.isNANP="1"===t.callingCode(),this.matchingFormats=t.formats(),e.nationalSignificantNumber&&this.narrowDownMatchingFormats(e)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(t,e){var r,i,n=this;if(r=e.nationalSignificantNumber,i=this.metadata,"IS_POSSIBLE"===(0,g.A)(r,i))for(var s,a=I(this.matchingFormats);!(s=a()).done;){var o=s.value,l=v(e,o,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(t){return n.shouldTryNationalPrefixFormattingRule(t,{international:e.international,nationalPrefix:e.nationalPrefix})},getSeparatorAfterNationalPrefix:function(t){return n.getSeparatorAfterNationalPrefix(t)}});if(l)return this.resetFormat(),this.chosenFormat=o,this.setNationalNumberTemplate(l.replace(/\d/g,u),e),this.populatedNationalNumberTemplate=l,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(u),l}return this.formatNationalNumberWithNextDigits(t,e)}},{key:"formatNationalNumberWithNextDigits",value:function(t,e){var r=this.chosenFormat,i=this.chooseFormat(e);if(i)return i===r?this.formatNextNationalNumberDigits(t):this.formatNextNationalNumberDigits(e.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(t){var e=this,r=t.nationalSignificantNumber,i=t.nationalPrefix,n=t.international,s=r,a=s.length-3;a<0&&(a=0),this.matchingFormats=this.matchingFormats.filter((function(t){return e.formatSuits(t,n,i)&&e.formatMatches(t,s,a)})),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(t,e,r){return!(r&&!t.usesNationalPrefix()&&!t.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!e&&!r&&t.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(t,e,r){var i=t.leadingDigitsPatterns().length;if(0===i)return!0;r=Math.min(r,i-1);var n=t.leadingDigitsPatterns()[r];if(e.length<3)try{return void 0!==new x(n).match(e,{allowOverflow:!0})}catch(t){return console.error(t),!0}return new RegExp("^(".concat(n,")")).test(e)}},{key:"getFormatFormat",value:function(t,e){return e?t.internationalFormat():t.format()}},{key:"chooseFormat",value:function(t){for(var e,r=this,i=function(){var i=e.value;return r.chosenFormat===i?"break":B.test(r.getFormatFormat(i,t.international))?r.createTemplateForFormat(i,t)?(r.chosenFormat=i,"break"):(r.matchingFormats=r.matchingFormats.filter((function(t){return t!==i})),"continue"):"continue"},n=I(this.matchingFormats.slice());!(e=n()).done;){var s=i();if("break"===s)break}return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(t,e){if(!(t.pattern().indexOf("|")>=0)){var r=this.getTemplateForFormat(t,e);return r?(this.setNationalNumberTemplate(r,e),!0):void 0}}},{key:"getSeparatorAfterNationalPrefix",value:function(t){return this.isNANP||t&&t.nationalPrefixFormattingRule()&&M.test(t.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(t,e){var r=t.IDDPrefix,i=t.missingPlus;return r?e&&!1===e.spacing?r:r+" ":i?"":"+"}},{key:"getTemplate",value:function(t){if(this.template){for(var e=-1,r=0,i=t.international?this.getInternationalPrefixBeforeCountryCallingCode(t,{spacing:!1}):"";r<i.length+t.getDigitsWithoutInternationalPrefix().length;)e=this.template.indexOf(u,e+1),r++;return f(this.template,e+1)}}},{key:"setNationalNumberTemplate",value:function(t,e){this.nationalNumberTemplate=t,this.populatedNationalNumberTemplate=t,this.populatedNationalNumberTemplatePosition=-1,e.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(e).replace(/[\d\+]/g,u)+h(u,e.callingCode.length)+" "+t:this.template=t}},{key:"getTemplateForFormat",value:function(t,e){var r=e.nationalSignificantNumber,i=e.international,n=e.nationalPrefix,s=e.complexPrefixBeforeNationalSignificantNumber,a=t.pattern();a=a.replace(N(),"\\d").replace(F(),"\\d");var o=O.match(a)[0];if(!(r.length>o.length)){var l=new RegExp("^"+a+"$"),d=r.replace(/\d/g,"9");l.test(d)&&(o=d);var c,f=this.getFormatFormat(t,i);if(this.shouldTryNationalPrefixFormattingRule(t,{international:i,nationalPrefix:n})){var g=f.replace(m._,t.nationalPrefixFormattingRule());if((0,p.Ay)(t.nationalPrefixFormattingRule())===(n||"")+(0,p.Ay)("$1")&&(f=g,c=!0,n))for(var v=n.length;v>0;)f=f.replace(/\d/,u),v--}var y=o.replace(new RegExp(a),f).replace(new RegExp("9","g"),u);return c||(s?y=h(u,s.length)+" "+y:n&&(y=h(u,n.length)+this.getSeparatorAfterNationalPrefix(t)+y)),i&&(y=(0,D.A)(y)),y}}},{key:"formatNextNationalNumberDigits",value:function(t){var e=function(t,e,r){for(var i,n=l(r.split(""));!(i=n()).done;){var s=i.value;if(t.slice(e+1).search(c)<0)return;e=t.search(c),t=t.replace(c,s)}return[t,e]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,t);if(e)return this.populatedNationalNumberTemplate=e[0],this.populatedNationalNumberTemplatePosition=e[1],f(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat()}},{key:"shouldTryNationalPrefixFormattingRule",value:function(t,e){var r=e.international,i=e.nationalPrefix;if(t.nationalPrefixFormattingRule()){var n=t.usesNationalPrefix();if(n&&i||!n&&!r)return!0}}}])&&_(e.prototype,r),i&&_(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}(),G=r(19713),j=r(10283),V=r(81459),H=r(46890);function K(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,n,s=[],a=!0,o=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(s.push(i.value),!e||s.length!==e);a=!0);}catch(t){o=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw n}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function q(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var W="["+k.uD+k.OA+"]+",Y=new RegExp("^"+W+"$","i"),X="(?:["+k.tz+"]["+k.uD+k.OA+"]*|["+k.uD+k.OA+"]+)",Z=new RegExp("[^"+k.uD+k.OA+"]+.*$"),Q=/[^\d\[\]]/,J=function(){function t(e){var r=e.defaultCountry,i=e.defaultCallingCode,n=e.metadata,s=e.onNationalSignificantNumberChange;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultCountry=r,this.defaultCallingCode=i,this.metadata=n,this.onNationalSignificantNumberChange=s}var e,r,i;return e=t,(r=[{key:"input",value:function(t,e){var r,i=function(t){var e=function(t){var e=function(t){var e,r=t.search(X);if(!(r<0))return"+"===(t=t.slice(r))[0]&&(e=!0,t=t.slice(1)),t=t.replace(Z,""),e&&(t="+"+t),t}(t)||"";return"+"===e[0]?[e.slice(1),!0]:[e]}(t),r=K(e,2),i=r[0],n=r[1];return Y.test(i)||(i=""),[i,n]}(t),n=K(i,2),s=n[0],a=n[1],o=(0,p.Ay)(s);return a&&(e.digits||(e.startInternationalNumber(),o||(r=!0))),o&&this.inputDigits(o,e),{digits:o,justLeadingPlus:r}}},{key:"inputDigits",value:function(t,e){var r=e.digits,i=r.length<3&&r.length+t.length>=3;if(e.appendDigits(t),i&&this.extractIddPrefix(e),this.isWaitingForCountryCallingCode(e)){if(!this.extractCountryCallingCode(e))return}else e.appendNationalSignificantNumberDigits(t);e.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(e.getNationalDigits(),(function(t){return e.update(t)}))}},{key:"isWaitingForCountryCallingCode",value:function(t){var e=t.international,r=t.callingCode;return e&&!r}},{key:"extractCountryCallingCode",value:function(t){var e=(0,G.A)("+"+t.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=e.countryCallingCode,i=e.number;if(r)return t.setCallingCode(r),t.update({nationalSignificantNumber:i}),!0}},{key:"reset",value:function(t){if(t){this.hasSelectedNumberingPlan=!0;var e=t._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=e&&Q.test(e)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(t,e){if(this.hasSelectedNumberingPlan){var r=(0,V.A)(t,this.metadata),i=r.nationalPrefix,n=r.nationalNumber,s=r.carrierCode;if(n!==t)return this.onExtractedNationalNumber(i,s,n,t,e),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(t,e,r){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(t,r);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var i=(0,V.A)(t,this.metadata),n=i.nationalPrefix,s=i.nationalNumber,a=i.carrierCode;if(s!==e)return this.onExtractedNationalNumber(n,a,s,t,r),!0}}},{key:"onExtractedNationalNumber",value:function(t,e,r,i,n){var s,a,o=i.lastIndexOf(r);if(o>=0&&o===i.length-r.length){a=!0;var l=i.slice(0,o);l!==t&&(s=l)}n({nationalPrefix:t,carrierCode:e,nationalSignificantNumber:r,nationalSignificantNumberMatchesInput:a,complexPrefixBeforeNationalSignificantNumber:s}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(t){return!!this.extractAnotherNationalSignificantNumber(t.getNationalDigits(),t.nationalSignificantNumber,(function(e){return t.update(e)}))||(this.extractIddPrefix(t)||this.fixMissingPlus(t)?(this.extractCallingCodeAndNationalSignificantNumber(t),!0):void 0)}},{key:"extractIddPrefix",value:function(t){var e=t.international,r=t.IDDPrefix,i=t.digits;if(t.nationalSignificantNumber,!e&&!r){var n=(0,H.A)(i,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==n&&n!==i?(t.update({IDDPrefix:i.slice(0,i.length-n.length)}),this.startInternationalNumber(t,{country:void 0,callingCode:void 0}),!0):void 0}}},{key:"fixMissingPlus",value:function(t){if(!t.international){var e=(0,j.A)(t.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),r=e.countryCallingCode;if(e.number,r)return t.update({missingPlus:!0}),this.startInternationalNumber(t,{country:t.country,callingCode:r}),!0}}},{key:"startInternationalNumber",value:function(t,e){var r=e.country,i=e.callingCode;t.startInternationalNumber(r,i),t.nationalSignificantNumber&&(t.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(t){this.extractCountryCallingCode(t)&&this.extractNationalSignificantNumber(t.getNationalDigits(),(function(e){return t.update(e)}))}}])&&q(e.prototype,r),i&&q(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var tt=r(39495),et=r(56111),rt=r(40284);function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,n,s=[],a=!0,o=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(s.push(i.value),!e||s.length!==e);a=!0);}catch(t){o=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(o)throw n}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function st(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var at=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metadata=new n.Ay(r);var i=it(this.getCountryAndCallingCode(e),2),s=i[0],a=i[1];this.defaultCountry=s,this.defaultCallingCode=a,this.reset()}var e,r,i;return e=t,(r=[{key:"getCountryAndCallingCode",value:function(t){var e,r;return t&&((0,rt.A)(t)?(e=t.defaultCountry,r=t.defaultCallingCode):e=t),e&&!this.metadata.hasCountry(e)&&(e=void 0),[e,r]}},{key:"input",value:function(t){var e=this.parser.input(t,this.state),r=e.digits;if(e.justLeadingPlus)this.formattedOutput="+";else if(r){var i;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(i=this.formatter.format(r,this.state)),void 0===i&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var n=this.state.getNationalDigits();n&&(i=this.formatter.format(n,this.state))}this.formattedOutput=i?this.getFullNumber(i):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var t=this;return this.state=new o({onCountryChange:function(e){t.country=e},onCallingCodeChange:function(e,r){t.metadata.selectNumberingPlan(r,e),t.formatter.reset(t.metadata.numberingPlan,t.state),t.parser.reset(t.metadata.numberingPlan)}}),this.formatter=new U({state:this.state,metadata:this.metadata}),this.parser=new J({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){t.determineTheCountryIfNeeded(),t.formatter.reset(t.metadata.numberingPlan,t.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){if(this.state.digits)return this._getCountry()}},{key:"_getCountry",value:function(){var t=this.state.country;return t}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(t){var e=this;if(this.isInternational()){var r=function(t){return e.formatter.getInternationalPrefixBeforeCountryCallingCode(e.state,{spacing:!!t})+t},i=this.state.callingCode;return r(i?t?"".concat(i," ").concat(t):i:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return t}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var t=this.state,e=t.nationalSignificantNumber,r=t.complexPrefixBeforeNationalSignificantNumber,i=t.nationalPrefix,n=e,s=r||i;return s&&(n=s+n),n}},{key:"getNonFormattedNumber",value:function(){var t=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(t?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var t=this.getNonFormattedNumber();if(t)return t.replace(/[\+\d]/g,u)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var t=this.state.callingCode,e=this.metadata.getCountryCodesForCallingCode(t);return e&&e.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry((0,tt.A)(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,defaultCountry:this.defaultCountry,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var t=this.state,e=t.digits,r=t.callingCode,i=t.country,n=t.nationalSignificantNumber;if(e)return this.isInternational()?r?"+"+r+n:"+"+e:i||r?"+"+(i?this.metadata.countryCallingCode():r)+n:void 0}},{key:"getNumber",value:function(){var t=this.state,e=t.nationalSignificantNumber,r=t.carrierCode,i=t.callingCode,a=this._getCountry();if(e&&(a||i)){if(a&&a===this.defaultCountry){var o=new n.Ay(this.metadata.metadata);o.selectNumberingPlan(a);var l=o.numberingPlan.callingCode(),d=this.metadata.getCountryCodesForCallingCode(l);if(d.length>1){var u=(0,et.A)(e,{countries:d,defaultCountry:this.defaultCountry,metadata:this.metadata.metadata});u&&(a=u)}}var c=new s.A(a||i,e,this.metadata.metadata);return r&&(c.carrierCode=r),c}}},{key:"isPossible",value:function(){var t=this.getNumber();return!!t&&t.isPossible()}},{key:"isValid",value:function(){var t=this.getNumber();return!!t&&t.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])&&st(e.prototype,r),i&&st(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ot(t){return at.call(this,t,i.A)}ot.prototype=Object.create(at.prototype,{}),ot.prototype.constructor=ot},80032:function(t,e,r){"use strict";r.d(e,{Y:function(){return wt}});var i=r(797),n=r(36128),s=r(15512);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=o((function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,t),this.key=e,this.value=r,this.next=i,this.prev=n})),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;l(this,t),this.size=0,this.limit=e,this.head=null,this.tail=null,this.cache={}}return o(t,[{key:"put",value:function(t,e){if(this.ensureLimit(),this.head){var r=new d(t,e,this.head);this.head.prev=r,this.head=r}else this.head=this.tail=new d(t,e);this.cache[t]=this.head,this.size++}},{key:"get",value:function(t){if(this.cache[t]){var e=this.cache[t].value;return this.remove(t),this.put(t,e),e}console.log("Item not available in cache for key ".concat(t))}},{key:"ensureLimit",value:function(){this.size===this.limit&&this.remove(this.tail.key)}},{key:"remove",value:function(t){var e=this.cache[t];null!==e.prev?e.prev.next=e.next:this.head=e.next,null!==e.next?e.next.prev=e.prev:this.tail=e.prev,delete this.cache[t],this.size--}},{key:"clear",value:function(){this.head=null,this.tail=null,this.size=0,this.cache={}}}]),t}();function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cache=new u(e)}var e,r,i;return e=t,(r=[{key:"getPatternForRegExp",value:function(t){var e=this.cache.get(t);return e||(e=new RegExp("^"+t),this.cache.put(t,e)),e}}])&&c(e.prototype,r),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t,e){if(t<0||e<=0||e<t)throw new TypeError;return"{".concat(t,",").concat(e,"}")}function g(t,e){var r=e.search(t);return r>=0?e.slice(0,r):e}var p="   ᠎ - \u2028\u2029  　",m="[".concat(p,"]"),v="[^".concat(p,"]"),y="[".concat("0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９","]"),b="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",T="[".concat(b,"]"),E=new RegExp(T),S="[".concat("$¢-¥֏؋৲৳৻૱௹฿៛₠-₹꠸﷼﹩＄￠￡￥￦","]"),w=new RegExp(S),$="[".concat("̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣤ-ࣾऀ-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣଁ଼ିୁ-ୄ୍ୖୢୣஂீ்ా-ీె-ైొ-్ౕౖౢౣ಼ಿೆೌ್ೢೣു-ൄ്ൢൣ්ි-ුූัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᯦᮫ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᷀-ᷦ᷼-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꨩ-ꨮꨱꨲꨵꨶꩃꩌꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︦","]"),A=new RegExp($),C=new RegExp("[\0--ÿĀ-ſḀ-ỿƀ-ɏ̀-ͯ]");function L(t){return!(!E.test(t)&&!A.test(t))&&C.test(t)}function x(t){return"%"===t||w.test(t)}var R=r(3578),k=r(63696),D=r(38121);function I(){var t=(0,k.A)(arguments),e=t.text,r=t.options,i=t.metadata;return(0,D.A)(e,r,i)}function P(t,e,r){var i=!0,n=I(t,r);if(n||(i=!1,n=I(t,{defaultCallingCode:e.countryCallingCode},r)),!n)return"INVALID_NUMBER";if(e.ext){if(n.ext!==e.ext)return"NO_MATCH"}else if(n.ext)return"NO_MATCH";return i&&e.countryCallingCode!==n.countryCallingCode?"NO_MATCH":e.number===n.number?i?"EXACT_MATCH":"NSN_MATCH":0===e.nationalNumber.indexOf(n.nationalNumber)||0===n.nationalNumber.indexOf(e.nationalNumber)?"SHORT_NSN_MATCH":"NO_MATCH"}var _=r(53247),O=r(39495),M=r(89177);var N={POSSIBLE:function(t,e){e.candidate,e.metadata;return!0},VALID:function(t,e){var r=e.candidate,i=(e.defaultCountry,e.metadata);return!(!t.isValid()||!F(t,r,i))},STRICT_GROUPING:function(t,e){var r=e.candidate,i=e.defaultCountry,n=e.metadata,s=e.regExpCache;return!(!t.isValid()||!F(t,r,n)||U(t,r)||!B(t,{defaultCountry:i,metadata:n}))&&G(t,r,n,V,s)},EXACT_GROUPING:function(t,e){var r=e.candidate,i=e.defaultCountry,n=e.metadata,s=e.regExpCache;return!(!t.isValid()||!F(t,r,n)||U(t,r)||!B(t,{defaultCountry:i,metadata:n}))&&G(t,r,n,j,s)}};function F(t,e,r){for(var i=0;i<e.length-1;i++){var n=e.charAt(i);if("x"===n||"X"===n){var s=e.charAt(i+1);if("x"===s||"X"===s){if(i++,"NSN_MATCH"!==P(e.substring(i),t,r))return!1}else{var a=(0,R.Ay)(e.substring(i));if(a){if(t.ext!==a)return!1}else if(t.ext)return!1}}}return!0}function B(t,e){var r=e.defaultCountry,i=e.metadata;if("FROM_DEFAULT_COUNTRY"!==t.__countryCallingCodeSource)return!0;var n=new _.Ay(i);n.selectNumberingPlan(t.countryCallingCode);t.country||(0,O.A)(t.countryCallingCode,{nationalNumber:t.nationalNumber,defaultCountry:r,metadata:n});var s=t.nationalNumber,a=(0,M.x)(n.numberingPlan.formats(),s);return!a.nationalPrefixFormattingRule()||(!!n.numberingPlan.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||(!a.usesNationalPrefix()||Boolean(t.nationalPrefix)))}function U(t,e){var r=e.indexOf("/");if(r<0)return!1;var i=e.indexOf("/",r+1);return!(i<0)&&(!("FROM_NUMBER_WITH_PLUS_SIGN"===t.__countryCallingCodeSource||"FROM_NUMBER_WITHOUT_PLUS_SIGN"===t.__countryCallingCodeSource)||(0,R.Ay)(e.substring(0,r))!==t.countryCallingCode||e.slice(i+1).indexOf("/")>=0)}function G(t,e,r,i,n){throw new Error("This part of code hasn't been ported")}function j(t,e,r,i){throw new Error("This part of code hasn't been ported")}function V(t,e,r,i){throw new Error("This part of code hasn't been ported")}var H=/[\\/] *x/;function K(t){return g(H,t)}var z=/(?:(?:[0-3]?\d\/[01]?\d)|(?:[01]?\d\/[0-3]?\d))\/(?:[12]\d)?\d{2}/,q=/[12]\d{3}[-/]?[01]\d[-/]?[0-3]\d +[0-2]\d$/,W=/^:[0-5]\d/;function Y(t,e,r){if(z.test(t))return!1;if(q.test(t)){var i=r.slice(e+t.length);if(W.test(i))return!1}return!0}var X="(\\[（［",Z=")\\]）］",Q="[^".concat(X).concat(Z,"]"),J="[".concat(X).concat(n.tz,"]"),tt=new RegExp("^"+J),et=f(0,3),rt=new RegExp("^(?:[(\\[（［])?(?:"+Q+"+["+Z+"])?"+Q+"+(?:["+X+"]"+Q+"+["+Z+"])"+et+Q+"*$"),it=/\d{1,5}-+\d{1,5}\s{0,4}\(\d{1,4}/;function nt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return st(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function at(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ot=(0,s.A)("matching"),lt=["\\/+(.*)/","(\\([^(]*)","(?:".concat(m,"-|-").concat(m,")").concat(m,"*(.+)"),"[‒-―－]".concat(m,"*(.+)"),"\\.+".concat(m,"*([^.]+)"),"".concat(m,"+(").concat(v,"+)")],dt=f(0,2),ut=f(0,4),ct=n.Cb+n.Jq,ht=f(0,ct),ft="[".concat(n.uD,"]")+ut,gt=y+f(1,ct),pt="(?:"+J+ft+")"+dt+gt+"(?:"+ft+gt+")"+ht+"(?:"+ot+")?",mt=new RegExp("[^".concat("0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൦-൵๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹０-９").concat(b,"#]+$")),vt=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,yt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(r={v2:r.v2,defaultCallingCode:r.defaultCallingCode,defaultCountry:r.defaultCountry&&(0,_.J_)(r.defaultCountry,i)?r.defaultCountry:void 0,leniency:r.leniency||(r.extended?"POSSIBLE":"VALID"),maxTries:r.maxTries||vt}).leniency)throw new TypeError("`leniency` is required");if("POSSIBLE"!==r.leniency&&"VALID"!==r.leniency)throw new TypeError('Invalid `leniency`: "'.concat(r.leniency,'". Supported values: "POSSIBLE", "VALID".'));if(r.maxTries<0)throw new TypeError("`maxTries` must be `>= 0`");if(this.text=e,this.options=r,this.metadata=i,this.leniency=N[r.leniency],!this.leniency)throw new TypeError('Unknown leniency: "'.concat(r.leniency,'"'));this.maxTries=r.maxTries,this.PATTERN=new RegExp(pt,"ig"),this.state="NOT_READY",this.searchIndex=0,this.regExpCache=new h(32)}var e,r,i;return e=t,(r=[{key:"find",value:function(){for(var t;this.maxTries>0&&null!==(t=this.PATTERN.exec(this.text));){var e=t[0],r=t.index;if(Y(e=K(e),r,this.text)){var i=this.parseAndVerify(e,r,this.text)||this.extractInnerMatch(e,r,this.text);if(i){if(this.options.v2)return{startsAt:i.startsAt,endsAt:i.endsAt,number:i.phoneNumber};var n=i.phoneNumber,s={startsAt:i.startsAt,endsAt:i.endsAt,phone:n.nationalNumber};return n.country?s.country=n.country:s.countryCallingCode=n.countryCallingCode,n.ext&&(s.ext=n.ext),s}}this.maxTries--}}},{key:"extractInnerMatch",value:function(t,e,r){for(var i,n=nt(lt);!(i=n()).done;)for(var s=i.value,a=!0,o=void 0,l=new RegExp(s,"g");this.maxTries>0&&null!==(o=l.exec(t));){if(a){var d=g(mt,t.slice(0,o.index)),u=this.parseAndVerify(d,e,r);if(u)return u;this.maxTries--,a=!1}var c=g(mt,o[1]),h=t.indexOf(c,o.index),f=this.parseAndVerify(c,e+h,r);if(f)return f;this.maxTries--}}},{key:"parseAndVerify",value:function(t,e,r){if(function(t,e,r,i){if(rt.test(t)&&!it.test(t)){if("POSSIBLE"!==i){if(e>0&&!tt.test(t)){var n=r[e-1];if(x(n)||L(n))return!1}var s=e+t.length;if(s<r.length){var a=r[s];if(x(a)||L(a))return!1}}return!0}}(t,e,r,this.options.leniency)){var i=I(t,{extended:!0,defaultCountry:this.options.defaultCountry,defaultCallingCode:this.options.defaultCallingCode},this.metadata);if(i&&i.isPossible())return this.leniency(i,{candidate:t,defaultCountry:this.options.defaultCountry,metadata:this.metadata,regExpCache:this.regExpCache})?{startsAt:e,endsAt:e+t.length,phoneNumber:i}:void 0}}},{key:"hasNext",value:function(){return"NOT_READY"===this.state&&(this.lastMatch=this.find(),this.lastMatch?this.state="READY":this.state="DONE"),"READY"===this.state}},{key:"next",value:function(){if(!this.hasNext())throw new Error("No next element");var t=this.lastMatch;return this.lastMatch=null,this.state="NOT_READY",t}}])&&at(e.prototype,r),i&&at(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(r),!0).forEach((function(e){Et(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Et(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function St(){for(var t=(0,k.A)(arguments),e=t.text,r=t.options,i=t.metadata,n=new yt(e,Tt(Tt({},r),{},{v2:!0}),i),s=[];n.hasNext();)s.push(n.next());return s}function wt(){return(0,i.A)(St,arguments)}},47783:function(t,e,r){"use strict";r.d(e,{g:function(){return u}});var i=r(797),n=r(63696),s=r(38121);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(){var t=(0,n.A)(arguments),e=t.text,r=t.options,i=t.metadata;r=o(o({},r),{},{extract:!1});var a=(0,s.A)(e,r,i);return a&&a.isValid()||!1}function u(){return(0,i.A)(d,arguments)}},797:function(t,e,r){"use strict";r.d(e,{A:function(){return n}});var i=r(58097);function n(t,e){var r=Array.prototype.slice.call(e);return r.push(i.A),t.apply(this,r)}},90150:function(t,e,r){"use strict";r.d(e,{cx:function(){return f},dK:function(){return o},AV:function(){return s}});var i=r(12375),n=r(17044);function s(t){let e,{swiper:r,extendParams:s,on:a,emit:o}=t;s({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});const l=(0,i.g)();r.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const d=l.createElement("div");function u(t,e){const i=r.params.virtual;if(i.cache&&r.virtual.cache[e])return r.virtual.cache[e];let s;return i.renderSlide?(s=i.renderSlide.call(r,t,e),"string"==typeof s&&(d.innerHTML=s,s=d.children[0])):s=r.isElement?(0,n.c)("swiper-slide"):(0,n.c)("div",r.params.slideClass),s.setAttribute("data-swiper-slide-index",e),i.renderSlide||(s.innerHTML=t),i.cache&&(r.virtual.cache[e]=s),s}function c(t){const{slidesPerView:e,slidesPerGroup:i,centeredSlides:s,loop:a}=r.params,{addSlidesBefore:l,addSlidesAfter:d}=r.params.virtual,{from:c,to:h,slides:f,slidesGrid:g,offset:p}=r.virtual;r.params.cssMode||r.updateActiveIndex();const m=r.activeIndex||0;let v,y,b;v=r.rtlTranslate?"right":r.isHorizontal()?"left":"top",s?(y=Math.floor(e/2)+i+d,b=Math.floor(e/2)+i+l):(y=e+(i-1)+d,b=(a?e:i)+l);let T=m-b,E=m+y;a||(T=Math.max(T,0),E=Math.min(E,f.length-1));let S=(r.slidesGrid[T]||0)-(r.slidesGrid[0]||0);function w(){r.updateSlides(),r.updateProgress(),r.updateSlidesClasses(),o("virtualUpdate")}if(a&&m>=b?(T-=b,s||(S+=r.slidesGrid[0])):a&&m<b&&(T=-b,s&&(S+=r.slidesGrid[0])),Object.assign(r.virtual,{from:T,to:E,offset:S,slidesGrid:r.slidesGrid,slidesBefore:b,slidesAfter:y}),c===T&&h===E&&!t)return r.slidesGrid!==g&&S!==p&&r.slides.forEach((t=>{t.style[v]=S-Math.abs(r.cssOverflowAdjustment())+"px"})),r.updateProgress(),void o("virtualUpdate");if(r.params.virtual.renderExternal)return r.params.virtual.renderExternal.call(r,{offset:S,from:T,to:E,slides:function(){const t=[];for(let e=T;e<=E;e+=1)t.push(f[e]);return t}()}),void(r.params.virtual.renderExternalUpdate?w():o("virtualUpdate"));const $=[],A=[],C=t=>{let e=t;return t<0?e=f.length+t:e>=f.length&&(e-=f.length),e};if(t)r.slides.filter((t=>t.matches(`.${r.params.slideClass}, swiper-slide`))).forEach((t=>{t.remove()}));else for(let t=c;t<=h;t+=1)if(t<T||t>E){const e=C(t);r.slides.filter((t=>t.matches(`.${r.params.slideClass}[data-swiper-slide-index="${e}"], swiper-slide[data-swiper-slide-index="${e}"]`))).forEach((t=>{t.remove()}))}const L=a?-f.length:0,x=a?2*f.length:f.length;for(let e=L;e<x;e+=1)if(e>=T&&e<=E){const r=C(e);void 0===h||t?A.push(r):(e>h&&A.push(r),e<c&&$.push(r))}if(A.forEach((t=>{r.slidesEl.append(u(f[t],t))})),a)for(let t=$.length-1;t>=0;t-=1){const e=$[t];r.slidesEl.prepend(u(f[e],e))}else $.sort(((t,e)=>e-t)),$.forEach((t=>{r.slidesEl.prepend(u(f[t],t))}));(0,n.e)(r.slidesEl,".swiper-slide, swiper-slide").forEach((t=>{t.style[v]=S-Math.abs(r.cssOverflowAdjustment())+"px"})),w()}a("beforeInit",(()=>{if(!r.params.virtual.enabled)return;let t;if(void 0===r.passedParams.virtual.slides){const e=[...r.slidesEl.children].filter((t=>t.matches(`.${r.params.slideClass}, swiper-slide`)));e&&e.length&&(r.virtual.slides=[...e],t=!0,e.forEach(((t,e)=>{t.setAttribute("data-swiper-slide-index",e),r.virtual.cache[e]=t,t.remove()})))}t||(r.virtual.slides=r.params.virtual.slides),r.classNames.push(`${r.params.containerModifierClass}virtual`),r.params.watchSlidesProgress=!0,r.originalParams.watchSlidesProgress=!0,c()})),a("setTranslate",(()=>{r.params.virtual.enabled&&(r.params.cssMode&&!r._immediateVirtual?(clearTimeout(e),e=setTimeout((()=>{c()}),100)):c())})),a("init update resize",(()=>{r.params.virtual.enabled&&r.params.cssMode&&(0,n.s)(r.wrapperEl,"--swiper-virtual-size",`${r.virtualSize}px`)})),Object.assign(r.virtual,{appendSlide:function(t){if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&r.virtual.slides.push(t[e]);else r.virtual.slides.push(t);c(!0)},prependSlide:function(t){const e=r.activeIndex;let i=e+1,n=1;if(Array.isArray(t)){for(let e=0;e<t.length;e+=1)t[e]&&r.virtual.slides.unshift(t[e]);i=e+t.length,n=t.length}else r.virtual.slides.unshift(t);if(r.params.virtual.cache){const t=r.virtual.cache,e={};Object.keys(t).forEach((r=>{const i=t[r],s=i.getAttribute("data-swiper-slide-index");s&&i.setAttribute("data-swiper-slide-index",parseInt(s,10)+n),e[parseInt(r,10)+n]=i})),r.virtual.cache=e}c(!0),r.slideTo(i,0)},removeSlide:function(t){if(null==t)return;let e=r.activeIndex;if(Array.isArray(t))for(let i=t.length-1;i>=0;i-=1)r.params.virtual.cache&&(delete r.virtual.cache[t[i]],Object.keys(r.virtual.cache).forEach((e=>{e>t&&(r.virtual.cache[e-1]=r.virtual.cache[e],r.virtual.cache[e-1].setAttribute("data-swiper-slide-index",e-1),delete r.virtual.cache[e])}))),r.virtual.slides.splice(t[i],1),t[i]<e&&(e-=1),e=Math.max(e,0);else r.params.virtual.cache&&(delete r.virtual.cache[t],Object.keys(r.virtual.cache).forEach((e=>{e>t&&(r.virtual.cache[e-1]=r.virtual.cache[e],r.virtual.cache[e-1].setAttribute("data-swiper-slide-index",e-1),delete r.virtual.cache[e])}))),r.virtual.slides.splice(t,1),t<e&&(e-=1),e=Math.max(e,0);c(!0),r.slideTo(e,0)},removeAllSlides:function(){r.virtual.slides=[],r.params.virtual.cache&&(r.virtual.cache={}),c(!0),r.slideTo(0,0)},update:c})}function a(t){return void 0===t&&(t=""),`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function o(t){let{swiper:e,extendParams:r,on:i,emit:s}=t;const o="swiper-pagination";let l;r({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),e.pagination={el:null,bullets:[]};let d=0;function u(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&0===e.pagination.el.length}function c(t,r){const{bulletActiveClass:i}=e.params.pagination;t&&(t=t[("prev"===r?"previous":"next")+"ElementSibling"])&&(t.classList.add(`${i}-${r}`),(t=t[("prev"===r?"previous":"next")+"ElementSibling"])&&t.classList.add(`${i}-${r}-${r}`))}function h(t){const r=t.target.closest(a(e.params.pagination.bulletClass));if(!r)return;t.preventDefault();const i=(0,n.g)(r)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===i)return;e.slideToLoop(i)}else e.slideTo(i)}function f(){const t=e.rtl,r=e.params.pagination;if(u())return;let i,o,h=e.pagination.el;h=(0,n.m)(h);const f=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,g=e.params.loop?Math.ceil(f/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(o=e.previousRealIndex||0,i=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):void 0!==e.snapIndex?(i=e.snapIndex,o=e.previousSnapIndex):(o=e.previousIndex||0,i=e.activeIndex||0),"bullets"===r.type&&e.pagination.bullets&&e.pagination.bullets.length>0){const s=e.pagination.bullets;let a,u,f;if(r.dynamicBullets&&(l=(0,n.f)(s[0],e.isHorizontal()?"width":"height",!0),h.forEach((t=>{t.style[e.isHorizontal()?"width":"height"]=l*(r.dynamicMainBullets+4)+"px"})),r.dynamicMainBullets>1&&void 0!==o&&(d+=i-(o||0),d>r.dynamicMainBullets-1?d=r.dynamicMainBullets-1:d<0&&(d=0)),a=Math.max(i-d,0),u=a+(Math.min(s.length,r.dynamicMainBullets)-1),f=(u+a)/2),s.forEach((t=>{const e=[...["","-next","-next-next","-prev","-prev-prev","-main"].map((t=>`${r.bulletActiveClass}${t}`))].map((t=>"string"==typeof t&&t.includes(" ")?t.split(" "):t)).flat();t.classList.remove(...e)})),h.length>1)s.forEach((t=>{const s=(0,n.g)(t);s===i?t.classList.add(...r.bulletActiveClass.split(" ")):e.isElement&&t.setAttribute("part","bullet"),r.dynamicBullets&&(s>=a&&s<=u&&t.classList.add(...`${r.bulletActiveClass}-main`.split(" ")),s===a&&c(t,"prev"),s===u&&c(t,"next"))}));else{const t=s[i];if(t&&t.classList.add(...r.bulletActiveClass.split(" ")),e.isElement&&s.forEach(((t,e)=>{t.setAttribute("part",e===i?"bullet-active":"bullet")})),r.dynamicBullets){const t=s[a],e=s[u];for(let t=a;t<=u;t+=1)s[t]&&s[t].classList.add(...`${r.bulletActiveClass}-main`.split(" "));c(t,"prev"),c(e,"next")}}if(r.dynamicBullets){const i=Math.min(s.length,r.dynamicMainBullets+4),n=(l*i-l)/2-f*l,a=t?"right":"left";s.forEach((t=>{t.style[e.isHorizontal()?a:"top"]=`${n}px`}))}}h.forEach(((t,n)=>{if("fraction"===r.type&&(t.querySelectorAll(a(r.currentClass)).forEach((t=>{t.textContent=r.formatFractionCurrent(i+1)})),t.querySelectorAll(a(r.totalClass)).forEach((t=>{t.textContent=r.formatFractionTotal(g)}))),"progressbar"===r.type){let n;n=r.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";const s=(i+1)/g;let o=1,l=1;"horizontal"===n?o=s:l=s,t.querySelectorAll(a(r.progressbarFillClass)).forEach((t=>{t.style.transform=`translate3d(0,0,0) scaleX(${o}) scaleY(${l})`,t.style.transitionDuration=`${e.params.speed}ms`}))}"custom"===r.type&&r.renderCustom?(t.innerHTML=r.renderCustom(e,i+1,g),0===n&&s("paginationRender",t)):(0===n&&s("paginationRender",t),s("paginationUpdate",t)),e.params.watchOverflow&&e.enabled&&t.classList[e.isLocked?"add":"remove"](r.lockClass)}))}function g(){const t=e.params.pagination;if(u())return;const r=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let i=e.pagination.el;i=(0,n.m)(i);let o="";if("bullets"===t.type){let i=e.params.loop?Math.ceil(r/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&i>r&&(i=r);for(let r=0;r<i;r+=1)t.renderBullet?o+=t.renderBullet.call(e,r,t.bulletClass):o+=`<${t.bulletElement} ${e.isElement?'part="bullet"':""} class="${t.bulletClass}"></${t.bulletElement}>`}"fraction"===t.type&&(o=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),"progressbar"===t.type&&(o=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],i.forEach((r=>{"custom"!==t.type&&(r.innerHTML=o||""),"bullets"===t.type&&e.pagination.bullets.push(...r.querySelectorAll(a(t.bulletClass)))})),"custom"!==t.type&&s("paginationRender",i[0])}function p(){e.params.pagination=function(t,e,r,i){return t.params.createElements&&Object.keys(i).forEach((s=>{if(!r[s]&&!0===r.auto){let a=(0,n.e)(t.el,`.${i[s]}`)[0];a||(a=(0,n.c)("div",i[s]),a.className=i[s],t.el.append(a)),r[s]=a,e[s]=a}})),r}(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let r;"string"==typeof t.el&&e.isElement&&(r=e.el.querySelector(t.el)),r||"string"!=typeof t.el||(r=[...document.querySelectorAll(t.el)]),r||(r=t.el),r&&0!==r.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&Array.isArray(r)&&r.length>1&&(r=[...e.el.querySelectorAll(t.el)],r.length>1&&(r=r.filter((t=>(0,n.a)(t,".swiper")[0]===e.el))[0])),Array.isArray(r)&&1===r.length&&(r=r[0]),Object.assign(e.pagination,{el:r}),r=(0,n.m)(r),r.forEach((r=>{"bullets"===t.type&&t.clickable&&r.classList.add(...(t.clickableClass||"").split(" ")),r.classList.add(t.modifierClass+t.type),r.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),"bullets"===t.type&&t.dynamicBullets&&(r.classList.add(`${t.modifierClass}${t.type}-dynamic`),d=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&r.classList.add(t.progressbarOppositeClass),t.clickable&&r.addEventListener("click",h),e.enabled||r.classList.add(t.lockClass)})))}function m(){const t=e.params.pagination;if(u())return;let r=e.pagination.el;r&&(r=(0,n.m)(r),r.forEach((r=>{r.classList.remove(t.hiddenClass),r.classList.remove(t.modifierClass+t.type),r.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&(r.classList.remove(...(t.clickableClass||"").split(" ")),r.removeEventListener("click",h))}))),e.pagination.bullets&&e.pagination.bullets.forEach((e=>e.classList.remove(...t.bulletActiveClass.split(" "))))}i("changeDirection",(()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:r}=e.pagination;r=(0,n.m)(r),r.forEach((r=>{r.classList.remove(t.horizontalClass,t.verticalClass),r.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)}))})),i("init",(()=>{!1===e.params.pagination.enabled?v():(p(),g(),f())})),i("activeIndexChange",(()=>{void 0===e.snapIndex&&f()})),i("snapIndexChange",(()=>{f()})),i("snapGridLengthChange",(()=>{g(),f()})),i("destroy",(()=>{m()})),i("enable disable",(()=>{let{el:t}=e.pagination;t&&(t=(0,n.m)(t),t.forEach((t=>t.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass))))})),i("lock unlock",(()=>{f()})),i("click",((t,r)=>{const i=r.target,a=(0,n.m)(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&a&&a.length>0&&!i.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&i===e.navigation.nextEl||e.navigation.prevEl&&i===e.navigation.prevEl))return;const t=a[0].classList.contains(e.params.pagination.hiddenClass);s(!0===t?"paginationShow":"paginationHide"),a.forEach((t=>t.classList.toggle(e.params.pagination.hiddenClass)))}}));const v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=(0,n.m)(t),t.forEach((t=>t.classList.add(e.params.pagination.paginationDisabledClass)))),m()};Object.assign(e.pagination,{enable:()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=(0,n.m)(t),t.forEach((t=>t.classList.remove(e.params.pagination.paginationDisabledClass)))),p(),g(),f()},disable:v,render:g,update:f,init:p,destroy:m})}function l(t){const e=this,{params:r,slidesEl:i}=e;r.loop&&e.loopDestroy();const n=t=>{if("string"==typeof t){const e=document.createElement("div");e.innerHTML=t,i.append(e.children[0]),e.innerHTML=""}else i.append(t)};if("object"==typeof t&&"length"in t)for(let e=0;e<t.length;e+=1)t[e]&&n(t[e]);else n(t);e.recalcSlides(),r.loop&&e.loopCreate(),r.observer&&!e.isElement||e.update()}function d(t){const e=this,{params:r,activeIndex:i,slidesEl:n}=e;r.loop&&e.loopDestroy();let s=i+1;const a=t=>{if("string"==typeof t){const e=document.createElement("div");e.innerHTML=t,n.prepend(e.children[0]),e.innerHTML=""}else n.prepend(t)};if("object"==typeof t&&"length"in t){for(let e=0;e<t.length;e+=1)t[e]&&a(t[e]);s=i+t.length}else a(t);e.recalcSlides(),r.loop&&e.loopCreate(),r.observer&&!e.isElement||e.update(),e.slideTo(s,0,!1)}function u(t,e){const r=this,{params:i,activeIndex:n,slidesEl:s}=r;let a=n;i.loop&&(a-=r.loopedSlides,r.loopDestroy(),r.recalcSlides());const o=r.slides.length;if(t<=0)return void r.prependSlide(e);if(t>=o)return void r.appendSlide(e);let l=a>t?a+1:a;const d=[];for(let e=o-1;e>=t;e-=1){const t=r.slides[e];t.remove(),d.unshift(t)}if("object"==typeof e&&"length"in e){for(let t=0;t<e.length;t+=1)e[t]&&s.append(e[t]);l=a>t?a+e.length:a}else s.append(e);for(let t=0;t<d.length;t+=1)s.append(d[t]);r.recalcSlides(),i.loop&&r.loopCreate(),i.observer&&!r.isElement||r.update(),i.loop?r.slideTo(l+r.loopedSlides,0,!1):r.slideTo(l,0,!1)}function c(t){const e=this,{params:r,activeIndex:i}=e;let n=i;r.loop&&(n-=e.loopedSlides,e.loopDestroy());let s,a=n;if("object"==typeof t&&"length"in t){for(let r=0;r<t.length;r+=1)s=t[r],e.slides[s]&&e.slides[s].remove(),s<a&&(a-=1);a=Math.max(a,0)}else s=t,e.slides[s]&&e.slides[s].remove(),s<a&&(a-=1),a=Math.max(a,0);e.recalcSlides(),r.loop&&e.loopCreate(),r.observer&&!e.isElement||e.update(),r.loop?e.slideTo(a+e.loopedSlides,0,!1):e.slideTo(a,0,!1)}function h(){const t=this,e=[];for(let r=0;r<t.slides.length;r+=1)e.push(r);t.removeSlide(e)}function f(t){let{swiper:e}=t;Object.assign(e,{appendSlide:l.bind(e),prependSlide:d.bind(e),addSlide:u.bind(e),removeSlide:c.bind(e),removeAllSlides:h.bind(e)})}},12375:function(t,e,r){"use strict";function i(t){return null!==t&&"object"==typeof t&&"constructor"in t&&t.constructor===Object}function n(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(e).forEach((r=>{void 0===t[r]?t[r]=e[r]:i(e[r])&&i(t[r])&&Object.keys(e[r]).length>0&&n(t[r],e[r])}))}r.d(e,{a:function(){return l},g:function(){return a}});const s={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function a(){const t="undefined"!=typeof document?document:{};return n(t,s),t}const o={document:s,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return"undefined"==typeof setTimeout?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){"undefined"!=typeof setTimeout&&clearTimeout(t)}};function l(){const t="undefined"!=typeof window?window:{};return n(t,o),t}},17044:function(t,e,r){"use strict";r.d(e,{a:function(){return b},c:function(){return g},d:function(){return a},e:function(){return h},f:function(){return T},g:function(){return y},i:function(){return o},m:function(){return E},n:function(){return s},o:function(){return v},p:function(){return m},q:function(){return p},r:function(){return c},s:function(){return u},t:function(){return f},u:function(){return d},v:function(){return n}});var i=r(12375);function n(t){const e=t;Object.keys(e).forEach((t=>{try{e[t]=null}catch(t){}try{delete e[t]}catch(t){}}))}function s(t,e){return void 0===e&&(e=0),setTimeout(t,e)}function a(){return Date.now()}function o(t,e){void 0===e&&(e="x");const r=(0,i.a)();let n,s,a;const o=function(t){const e=(0,i.a)();let r;return e.getComputedStyle&&(r=e.getComputedStyle(t,null)),!r&&t.currentStyle&&(r=t.currentStyle),r||(r=t.style),r}(t);return r.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map((t=>t.replace(",","."))).join(", ")),a=new r.WebKitCSSMatrix("none"===s?"":s)):(a=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=a.toString().split(",")),"x"===e&&(s=r.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===e&&(s=r.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),s||0}function l(t){return"object"==typeof t&&null!==t&&t.constructor&&"Object"===Object.prototype.toString.call(t).slice(8,-1)}function d(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let i=1;i<arguments.length;i+=1){const n=i<0||arguments.length<=i?void 0:arguments[i];if(null!=n&&(r=n,!("undefined"!=typeof window&&void 0!==window.HTMLElement?r instanceof HTMLElement:r&&(1===r.nodeType||11===r.nodeType)))){const r=Object.keys(Object(n)).filter((t=>e.indexOf(t)<0));for(let e=0,i=r.length;e<i;e+=1){const i=r[e],s=Object.getOwnPropertyDescriptor(n,i);void 0!==s&&s.enumerable&&(l(t[i])&&l(n[i])?n[i].__swiper__?t[i]=n[i]:d(t[i],n[i]):!l(t[i])&&l(n[i])?(t[i]={},n[i].__swiper__?t[i]=n[i]:d(t[i],n[i])):t[i]=n[i])}}}var r;return t}function u(t,e,r){t.style.setProperty(e,r)}function c(t){let{swiper:e,targetPosition:r,side:n}=t;const s=(0,i.a)(),a=-e.translate;let o,l=null;const d=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const u=r>a?"next":"prev",c=(t,e)=>"next"===u&&t>=e||"prev"===u&&t<=e,h=()=>{o=(new Date).getTime(),null===l&&(l=o);const t=Math.max(Math.min((o-l)/d,1),0),i=.5-Math.cos(t*Math.PI)/2;let u=a+i*(r-a);if(c(u,r)&&(u=r),e.wrapperEl.scrollTo({[n]:u}),c(u,r))return e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout((()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:u})})),void s.cancelAnimationFrame(e.cssModeFrameID);e.cssModeFrameID=s.requestAnimationFrame(h)};h()}function h(t,e){return void 0===e&&(e=""),[...t.children].filter((t=>t.matches(e)))}function f(t){try{return void console.warn(t)}catch(t){}}function g(t,e){void 0===e&&(e=[]);const r=document.createElement(t);return r.classList.add(...Array.isArray(e)?e:function(t){return void 0===t&&(t=""),t.trim().split(" ").filter((t=>!!t.trim()))}(e)),r}function p(t,e){const r=[];for(;t.previousElementSibling;){const i=t.previousElementSibling;e?i.matches(e)&&r.push(i):r.push(i),t=i}return r}function m(t,e){const r=[];for(;t.nextElementSibling;){const i=t.nextElementSibling;e?i.matches(e)&&r.push(i):r.push(i),t=i}return r}function v(t,e){return(0,i.a)().getComputedStyle(t,null).getPropertyValue(e)}function y(t){let e,r=t;if(r){for(e=0;null!==(r=r.previousSibling);)1===r.nodeType&&(e+=1);return e}}function b(t,e){const r=[];let i=t.parentElement;for(;i;)e?i.matches(e)&&r.push(i):r.push(i),i=i.parentElement;return r}function T(t,e,r){const n=(0,i.a)();return r?t["width"===e?"offsetWidth":"offsetHeight"]+parseFloat(n.getComputedStyle(t,null).getPropertyValue("width"===e?"margin-right":"margin-top"))+parseFloat(n.getComputedStyle(t,null).getPropertyValue("width"===e?"margin-left":"margin-bottom")):t.offsetWidth}function E(t){return(Array.isArray(t)?t:[t]).filter((t=>!!t))}},51236:function(t,e,r){"use strict";r.d(e,{A:function(){return O}});var i=r(12375),n=r(17044);let s,a,o;function l(){return s||(s=function(){const t=(0,i.a)(),e=(0,i.g)();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}()),s}function d(t){return void 0===t&&(t={}),a||(a=function(t){let{userAgent:e}=void 0===t?{}:t;const r=l(),n=(0,i.a)(),s=n.navigator.platform,a=e||n.navigator.userAgent,o={ios:!1,android:!1},d=n.screen.width,u=n.screen.height,c=a.match(/(Android);?[\s\/]+([\d.]+)?/);let h=a.match(/(iPad).*OS\s([\d_]+)/);const f=a.match(/(iPod)(.*OS\s([\d_]+))?/),g=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===s;let m="MacIntel"===s;return!h&&m&&r.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${d}x${u}`)>=0&&(h=a.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),m=!1),c&&!p&&(o.os="android",o.android=!0),(h||g||f)&&(o.os="ios",o.ios=!0),o}(t)),a}function u(){return o||(o=function(){const t=(0,i.a)(),e=d();let r=!1;function n(){const e=t.navigator.userAgent.toLowerCase();return e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0}if(n()){const e=String(t.navigator.userAgent);if(e.includes("Version/")){const[t,i]=e.split("Version/")[1].split(" ")[0].split(".").map((t=>Number(t)));r=t<16||16===t&&i<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent),a=n();return{isSafari:r||a,needPerspectiveFix:r,need3dFix:a||s&&e.ios,isWebView:s}}()),o}var c={on(t,e,r){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof e)return i;const n=r?"unshift":"push";return t.split(" ").forEach((t=>{i.eventsListeners[t]||(i.eventsListeners[t]=[]),i.eventsListeners[t][n](e)})),i},once(t,e,r){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof e)return i;function n(){i.off(t,n),n.__emitterProxy&&delete n.__emitterProxy;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];e.apply(i,s)}return n.__emitterProxy=e,i.on(t,n,r)},onAny(t,e){const r=this;if(!r.eventsListeners||r.destroyed)return r;if("function"!=typeof t)return r;const i=e?"unshift":"push";return r.eventsAnyListeners.indexOf(t)<0&&r.eventsAnyListeners[i](t),r},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsAnyListeners)return e;const r=e.eventsAnyListeners.indexOf(t);return r>=0&&e.eventsAnyListeners.splice(r,1),e},off(t,e){const r=this;return!r.eventsListeners||r.destroyed?r:r.eventsListeners?(t.split(" ").forEach((t=>{void 0===e?r.eventsListeners[t]=[]:r.eventsListeners[t]&&r.eventsListeners[t].forEach(((i,n)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&r.eventsListeners[t].splice(n,1)}))})),r):r},emit(){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsListeners)return t;let e,r,i;for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];"string"==typeof s[0]||Array.isArray(s[0])?(e=s[0],r=s.slice(1,s.length),i=t):(e=s[0].events,r=s[0].data,i=s[0].context||t),r.unshift(i);return(Array.isArray(e)?e:e.split(" ")).forEach((e=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach((t=>{t.apply(i,[e,...r])})),t.eventsListeners&&t.eventsListeners[e]&&t.eventsListeners[e].forEach((t=>{t.apply(i,r)}))})),t}};const h=(t,e)=>{if(!t||t.destroyed||!t.params)return;const r=e.closest(t.isElement?"swiper-slide":`.${t.params.slideClass}`);if(r){let e=r.querySelector(`.${t.params.lazyPreloaderClass}`);!e&&t.isElement&&(r.shadowRoot?e=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`):requestAnimationFrame((()=>{r.shadowRoot&&(e=r.shadowRoot.querySelector(`.${t.params.lazyPreloaderClass}`),e&&e.remove())}))),e&&e.remove()}},f=(t,e)=>{if(!t.slides[e])return;const r=t.slides[e].querySelector('[loading="lazy"]');r&&r.removeAttribute("loading")},g=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const r=t.slides.length;if(!r||!e||e<0)return;e=Math.min(e,r);const i="auto"===t.params.slidesPerView?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),n=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const r=n,s=[r-e];return s.push(...Array.from({length:e}).map(((t,e)=>r+i+e))),void t.slides.forEach(((e,r)=>{s.includes(e.column)&&f(t,r)}))}const s=n+i-1;if(t.params.rewind||t.params.loop)for(let i=n-e;i<=s+e;i+=1){const e=(i%r+r)%r;(e<n||e>s)&&f(t,e)}else for(let i=Math.max(n-e,0);i<=Math.min(s+e,r-1);i+=1)i!==n&&(i>s||i<n)&&f(t,i)};var p={updateSize:function(){const t=this;let e,r;const i=t.el;e=void 0!==t.params.width&&null!==t.params.width?t.params.width:i.clientWidth,r=void 0!==t.params.height&&null!==t.params.height?t.params.height:i.clientHeight,0===e&&t.isHorizontal()||0===r&&t.isVertical()||(e=e-parseInt((0,n.o)(i,"padding-left")||0,10)-parseInt((0,n.o)(i,"padding-right")||0,10),r=r-parseInt((0,n.o)(i,"padding-top")||0,10)-parseInt((0,n.o)(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(r)&&(r=0),Object.assign(t,{width:e,height:r,size:t.isHorizontal()?e:r}))},updateSlides:function(){const t=this;function e(e,r){return parseFloat(e.getPropertyValue(t.getDirectionLabel(r))||0)}const r=t.params,{wrapperEl:i,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=t,d=t.virtual&&r.virtual.enabled,u=d?t.virtual.slides.length:t.slides.length,c=(0,n.e)(s,`.${t.params.slideClass}, swiper-slide`),h=d?t.virtual.slides.length:c.length;let f=[];const g=[],p=[];let m=r.slidesOffsetBefore;"function"==typeof m&&(m=r.slidesOffsetBefore.call(t));let v=r.slidesOffsetAfter;"function"==typeof v&&(v=r.slidesOffsetAfter.call(t));const y=t.snapGrid.length,b=t.slidesGrid.length;let T=r.spaceBetween,E=-m,S=0,w=0;if(void 0===a)return;"string"==typeof T&&T.indexOf("%")>=0?T=parseFloat(T.replace("%",""))/100*a:"string"==typeof T&&(T=parseFloat(T)),t.virtualSize=-T,c.forEach((t=>{o?t.style.marginLeft="":t.style.marginRight="",t.style.marginBottom="",t.style.marginTop=""})),r.centeredSlides&&r.cssMode&&((0,n.s)(i,"--swiper-centered-offset-before",""),(0,n.s)(i,"--swiper-centered-offset-after",""));const $=r.grid&&r.grid.rows>1&&t.grid;let A;$?t.grid.initSlides(c):t.grid&&t.grid.unsetSlides();const C="auto"===r.slidesPerView&&r.breakpoints&&Object.keys(r.breakpoints).filter((t=>void 0!==r.breakpoints[t].slidesPerView)).length>0;for(let i=0;i<h;i+=1){let s;if(A=0,c[i]&&(s=c[i]),$&&t.grid.updateSlide(i,s,c),!c[i]||"none"!==(0,n.o)(s,"display")){if("auto"===r.slidesPerView){C&&(c[i].style[t.getDirectionLabel("width")]="");const a=getComputedStyle(s),o=s.style.transform,l=s.style.webkitTransform;if(o&&(s.style.transform="none"),l&&(s.style.webkitTransform="none"),r.roundLengths)A=t.isHorizontal()?(0,n.f)(s,"width",!0):(0,n.f)(s,"height",!0);else{const t=e(a,"width"),r=e(a,"padding-left"),i=e(a,"padding-right"),n=e(a,"margin-left"),o=e(a,"margin-right"),l=a.getPropertyValue("box-sizing");if(l&&"border-box"===l)A=t+n+o;else{const{clientWidth:e,offsetWidth:a}=s;A=t+r+i+n+o+(a-e)}}o&&(s.style.transform=o),l&&(s.style.webkitTransform=l),r.roundLengths&&(A=Math.floor(A))}else A=(a-(r.slidesPerView-1)*T)/r.slidesPerView,r.roundLengths&&(A=Math.floor(A)),c[i]&&(c[i].style[t.getDirectionLabel("width")]=`${A}px`);c[i]&&(c[i].swiperSlideSize=A),p.push(A),r.centeredSlides?(E=E+A/2+S/2+T,0===S&&0!==i&&(E=E-a/2-T),0===i&&(E=E-a/2-T),Math.abs(E)<.001&&(E=0),r.roundLengths&&(E=Math.floor(E)),w%r.slidesPerGroup==0&&f.push(E),g.push(E)):(r.roundLengths&&(E=Math.floor(E)),(w-Math.min(t.params.slidesPerGroupSkip,w))%t.params.slidesPerGroup==0&&f.push(E),g.push(E),E=E+A+T),t.virtualSize+=A+T,S=A,w+=1}}if(t.virtualSize=Math.max(t.virtualSize,a)+v,o&&l&&("slide"===r.effect||"coverflow"===r.effect)&&(i.style.width=`${t.virtualSize+T}px`),r.setWrapperSize&&(i.style[t.getDirectionLabel("width")]=`${t.virtualSize+T}px`),$&&t.grid.updateWrapperSize(A,f),!r.centeredSlides){const e=[];for(let i=0;i<f.length;i+=1){let n=f[i];r.roundLengths&&(n=Math.floor(n)),f[i]<=t.virtualSize-a&&e.push(n)}f=e,Math.floor(t.virtualSize-a)-Math.floor(f[f.length-1])>1&&f.push(t.virtualSize-a)}if(d&&r.loop){const e=p[0]+T;if(r.slidesPerGroup>1){const i=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/r.slidesPerGroup),n=e*r.slidesPerGroup;for(let t=0;t<i;t+=1)f.push(f[f.length-1]+n)}for(let i=0;i<t.virtual.slidesBefore+t.virtual.slidesAfter;i+=1)1===r.slidesPerGroup&&f.push(f[f.length-1]+e),g.push(g[g.length-1]+e),t.virtualSize+=e}if(0===f.length&&(f=[0]),0!==T){const e=t.isHorizontal()&&o?"marginLeft":t.getDirectionLabel("marginRight");c.filter(((t,e)=>!(r.cssMode&&!r.loop)||e!==c.length-1)).forEach((t=>{t.style[e]=`${T}px`}))}if(r.centeredSlides&&r.centeredSlidesBounds){let t=0;p.forEach((e=>{t+=e+(T||0)})),t-=T;const e=t-a;f=f.map((t=>t<=0?-m:t>e?e+v:t))}if(r.centerInsufficientSlides){let t=0;if(p.forEach((e=>{t+=e+(T||0)})),t-=T,t<a){const e=(a-t)/2;f.forEach(((t,r)=>{f[r]=t-e})),g.forEach(((t,r)=>{g[r]=t+e}))}}if(Object.assign(t,{slides:c,snapGrid:f,slidesGrid:g,slidesSizesGrid:p}),r.centeredSlides&&r.cssMode&&!r.centeredSlidesBounds){(0,n.s)(i,"--swiper-centered-offset-before",-f[0]+"px"),(0,n.s)(i,"--swiper-centered-offset-after",t.size/2-p[p.length-1]/2+"px");const e=-t.snapGrid[0],r=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map((t=>t+e)),t.slidesGrid=t.slidesGrid.map((t=>t+r))}if(h!==u&&t.emit("slidesLengthChange"),f.length!==y&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),g.length!==b&&t.emit("slidesGridLengthChange"),r.watchSlidesProgress&&t.updateSlidesOffset(),t.emit("slidesUpdated"),!(d||r.cssMode||"slide"!==r.effect&&"fade"!==r.effect)){const e=`${r.containerModifierClass}backface-hidden`,i=t.el.classList.contains(e);h<=r.maxBackfaceHiddenSlides?i||t.el.classList.add(e):i&&t.el.classList.remove(e)}},updateAutoHeight:function(t){const e=this,r=[],i=e.virtual&&e.params.virtual.enabled;let n,s=0;"number"==typeof t?e.setTransition(t):!0===t&&e.setTransition(e.params.speed);const a=t=>i?e.slides[e.getSlideIndexByData(t)]:e.slides[t];if("auto"!==e.params.slidesPerView&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach((t=>{r.push(t)}));else for(n=0;n<Math.ceil(e.params.slidesPerView);n+=1){const t=e.activeIndex+n;if(t>e.slides.length&&!i)break;r.push(a(t))}else r.push(a(e.activeIndex));for(n=0;n<r.length;n+=1)if(void 0!==r[n]){const t=r[n].offsetHeight;s=t>s?t:s}(s||0===s)&&(e.wrapperEl.style.height=`${s}px`)},updateSlidesOffset:function(){const t=this,e=t.slides,r=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(t.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-r-t.cssOverflowAdjustment()},updateSlidesProgress:function(t){void 0===t&&(t=this&&this.translate||0);const e=this,r=e.params,{slides:i,rtlTranslate:n,snapGrid:s}=e;if(0===i.length)return;void 0===i[0].swiperSlideOffset&&e.updateSlidesOffset();let a=-t;n&&(a=t),i.forEach((t=>{t.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass)})),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=r.spaceBetween;"string"==typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:"string"==typeof o&&(o=parseFloat(o));for(let t=0;t<i.length;t+=1){const l=i[t];let d=l.swiperSlideOffset;r.cssMode&&r.centeredSlides&&(d-=i[0].swiperSlideOffset);const u=(a+(r.centeredSlides?e.minTranslate():0)-d)/(l.swiperSlideSize+o),c=(a-s[0]+(r.centeredSlides?e.minTranslate():0)-d)/(l.swiperSlideSize+o),h=-(a-d),f=h+e.slidesSizesGrid[t],g=h>=0&&h<=e.size-e.slidesSizesGrid[t];(h>=0&&h<e.size-1||f>1&&f<=e.size||h<=0&&f>=e.size)&&(e.visibleSlides.push(l),e.visibleSlidesIndexes.push(t),i[t].classList.add(r.slideVisibleClass)),g&&i[t].classList.add(r.slideFullyVisibleClass),l.progress=n?-u:u,l.originalProgress=n?-c:c}},updateProgress:function(t){const e=this;if(void 0===t){const r=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*r||0}const r=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:n,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,d=a;if(0===i)n=0,s=!0,a=!0;else{n=(t-e.minTranslate())/i;const r=Math.abs(t-e.minTranslate())<1,o=Math.abs(t-e.maxTranslate())<1;s=r||n<=0,a=o||n>=1,r&&(n=0),o&&(n=1)}if(r.loop){const r=e.getSlideIndexByData(0),i=e.getSlideIndexByData(e.slides.length-1),n=e.slidesGrid[r],s=e.slidesGrid[i],a=e.slidesGrid[e.slidesGrid.length-1],l=Math.abs(t);o=l>=n?(l-n)/a:(l+a-s)/a,o>1&&(o-=1)}Object.assign(e,{progress:n,progressLoop:o,isBeginning:s,isEnd:a}),(r.watchSlidesProgress||r.centeredSlides&&r.autoHeight)&&e.updateSlidesProgress(t),s&&!l&&e.emit("reachBeginning toEdge"),a&&!d&&e.emit("reachEnd toEdge"),(l&&!s||d&&!a)&&e.emit("fromEdge"),e.emit("progress",n)},updateSlidesClasses:function(){const t=this,{slides:e,params:r,slidesEl:i,activeIndex:s}=t,a=t.virtual&&r.virtual.enabled,o=t.grid&&r.grid&&r.grid.rows>1,l=t=>(0,n.e)(i,`.${r.slideClass}${t}, swiper-slide${t}`)[0];let d,u,c;if(e.forEach((t=>{t.classList.remove(r.slideActiveClass,r.slideNextClass,r.slidePrevClass)})),a)if(r.loop){let e=s-t.virtual.slidesBefore;e<0&&(e=t.virtual.slides.length+e),e>=t.virtual.slides.length&&(e-=t.virtual.slides.length),d=l(`[data-swiper-slide-index="${e}"]`)}else d=l(`[data-swiper-slide-index="${s}"]`);else o?(d=e.filter((t=>t.column===s))[0],c=e.filter((t=>t.column===s+1))[0],u=e.filter((t=>t.column===s-1))[0]):d=e[s];d&&(d.classList.add(r.slideActiveClass),o?(c&&c.classList.add(r.slideNextClass),u&&u.classList.add(r.slidePrevClass)):(c=(0,n.p)(d,`.${r.slideClass}, swiper-slide`)[0],r.loop&&!c&&(c=e[0]),c&&c.classList.add(r.slideNextClass),u=(0,n.q)(d,`.${r.slideClass}, swiper-slide`)[0],r.loop&&0===!u&&(u=e[e.length-1]),u&&u.classList.add(r.slidePrevClass))),t.emitSlidesClasses()},updateActiveIndex:function(t){const e=this,r=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:n,activeIndex:s,realIndex:a,snapIndex:o}=e;let l,d=t;const u=t=>{let r=t-e.virtual.slidesBefore;return r<0&&(r=e.virtual.slides.length+r),r>=e.virtual.slides.length&&(r-=e.virtual.slides.length),r};if(void 0===d&&(d=function(t){const{slidesGrid:e,params:r}=t,i=t.rtlTranslate?t.translate:-t.translate;let n;for(let t=0;t<e.length;t+=1)void 0!==e[t+1]?i>=e[t]&&i<e[t+1]-(e[t+1]-e[t])/2?n=t:i>=e[t]&&i<e[t+1]&&(n=t+1):i>=e[t]&&(n=t);return r.normalizeSlideIndex&&(n<0||void 0===n)&&(n=0),n}(e)),i.indexOf(r)>=0)l=i.indexOf(r);else{const t=Math.min(n.slidesPerGroupSkip,d);l=t+Math.floor((d-t)/n.slidesPerGroup)}if(l>=i.length&&(l=i.length-1),d===s&&!e.params.loop)return void(l!==o&&(e.snapIndex=l,e.emit("snapIndexChange")));if(d===s&&e.params.loop&&e.virtual&&e.params.virtual.enabled)return void(e.realIndex=u(d));const c=e.grid&&n.grid&&n.grid.rows>1;let h;if(e.virtual&&n.virtual.enabled&&n.loop)h=u(d);else if(c){const t=e.slides.filter((t=>t.column===d))[0];let r=parseInt(t.getAttribute("data-swiper-slide-index"),10);Number.isNaN(r)&&(r=Math.max(e.slides.indexOf(t),0)),h=Math.floor(r/n.grid.rows)}else if(e.slides[d]){const t=e.slides[d].getAttribute("data-swiper-slide-index");h=t?parseInt(t,10):d}else h=d;Object.assign(e,{previousSnapIndex:o,snapIndex:l,previousRealIndex:a,realIndex:h,previousIndex:s,activeIndex:d}),e.initialized&&g(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==h&&e.emit("realIndexChange"),e.emit("slideChange"))},updateClickedSlide:function(t,e){const r=this,i=r.params;let n=t.closest(`.${i.slideClass}, swiper-slide`);!n&&r.isElement&&e&&e.length>1&&e.includes(t)&&[...e.slice(e.indexOf(t)+1,e.length)].forEach((t=>{!n&&t.matches&&t.matches(`.${i.slideClass}, swiper-slide`)&&(n=t)}));let s,a=!1;if(n)for(let t=0;t<r.slides.length;t+=1)if(r.slides[t]===n){a=!0,s=t;break}if(!n||!a)return r.clickedSlide=void 0,void(r.clickedIndex=void 0);r.clickedSlide=n,r.virtual&&r.params.virtual.enabled?r.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):r.clickedIndex=s,i.slideToClickedSlide&&void 0!==r.clickedIndex&&r.clickedIndex!==r.activeIndex&&r.slideToClickedSlide()}};var m={getTranslate:function(t){void 0===t&&(t=this.isHorizontal()?"x":"y");const{params:e,rtlTranslate:r,translate:i,wrapperEl:s}=this;if(e.virtualTranslate)return r?-i:i;if(e.cssMode)return i;let a=(0,n.i)(s,t);return a+=this.cssOverflowAdjustment(),r&&(a=-a),a||0},setTranslate:function(t,e){const r=this,{rtlTranslate:i,params:n,wrapperEl:s,progress:a}=r;let o,l=0,d=0;r.isHorizontal()?l=i?-t:t:d=t,n.roundLengths&&(l=Math.floor(l),d=Math.floor(d)),r.previousTranslate=r.translate,r.translate=r.isHorizontal()?l:d,n.cssMode?s[r.isHorizontal()?"scrollLeft":"scrollTop"]=r.isHorizontal()?-l:-d:n.virtualTranslate||(r.isHorizontal()?l-=r.cssOverflowAdjustment():d-=r.cssOverflowAdjustment(),s.style.transform=`translate3d(${l}px, ${d}px, 0px)`);const u=r.maxTranslate()-r.minTranslate();o=0===u?0:(t-r.minTranslate())/u,o!==a&&r.updateProgress(t),r.emit("setTranslate",r.translate,e)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(t,e,r,i,s){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0),void 0===i&&(i=!0);const a=this,{params:o,wrapperEl:l}=a;if(a.animating&&o.preventInteractionOnTransition)return!1;const d=a.minTranslate(),u=a.maxTranslate();let c;if(c=i&&t>d?d:i&&t<u?u:t,a.updateProgress(c),o.cssMode){const t=a.isHorizontal();if(0===e)l[t?"scrollLeft":"scrollTop"]=-c;else{if(!a.support.smoothScroll)return(0,n.r)({swiper:a,targetPosition:-c,side:t?"left":"top"}),!0;l.scrollTo({[t?"left":"top"]:-c,behavior:"smooth"})}return!0}return 0===e?(a.setTransition(0),a.setTranslate(c),r&&(a.emit("beforeTransitionStart",e,s),a.emit("transitionEnd"))):(a.setTransition(e),a.setTranslate(c),r&&(a.emit("beforeTransitionStart",e,s),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,r&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}};function v(t){let{swiper:e,runCallbacks:r,direction:i,step:n}=t;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(o=s>a?"next":s<a?"prev":"reset"),e.emit(`transition${n}`),r&&s!==a){if("reset"===o)return void e.emit(`slideResetTransition${n}`);e.emit(`slideChangeTransition${n}`),"next"===o?e.emit(`slideNextTransition${n}`):e.emit(`slidePrevTransition${n}`)}}var y={slideTo:function(t,e,r,i,s){void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0),"string"==typeof t&&(t=parseInt(t,10));const a=this;let o=t;o<0&&(o=0);const{params:l,snapGrid:d,slidesGrid:u,previousIndex:c,activeIndex:h,rtlTranslate:f,wrapperEl:g,enabled:p}=a;if(a.animating&&l.preventInteractionOnTransition||!p&&!i&&!s||a.destroyed)return!1;const m=Math.min(a.params.slidesPerGroupSkip,o);let v=m+Math.floor((o-m)/a.params.slidesPerGroup);v>=d.length&&(v=d.length-1);const y=-d[v];if(l.normalizeSlideIndex)for(let t=0;t<u.length;t+=1){const e=-Math.floor(100*y),r=Math.floor(100*u[t]),i=Math.floor(100*u[t+1]);void 0!==u[t+1]?e>=r&&e<i-(i-r)/2?o=t:e>=r&&e<i&&(o=t+1):e>=r&&(o=t)}if(a.initialized&&o!==h){if(!a.allowSlideNext&&(f?y>a.translate&&y>a.minTranslate():y<a.translate&&y<a.minTranslate()))return!1;if(!a.allowSlidePrev&&y>a.translate&&y>a.maxTranslate()&&(h||0)!==o)return!1}let b;if(o!==(c||0)&&r&&a.emit("beforeSlideChangeStart"),a.updateProgress(y),b=o>h?"next":o<h?"prev":"reset",f&&-y===a.translate||!f&&y===a.translate)return a.updateActiveIndex(o),l.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),"slide"!==l.effect&&a.setTranslate(y),"reset"!==b&&(a.transitionStart(r,b),a.transitionEnd(r,b)),!1;if(l.cssMode){const t=a.isHorizontal(),r=f?y:-y;if(0===e){const e=a.virtual&&a.params.virtual.enabled;e&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),e&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame((()=>{g[t?"scrollLeft":"scrollTop"]=r}))):g[t?"scrollLeft":"scrollTop"]=r,e&&requestAnimationFrame((()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1}))}else{if(!a.support.smoothScroll)return(0,n.r)({swiper:a,targetPosition:r,side:t?"left":"top"}),!0;g.scrollTo({[t?"left":"top"]:r,behavior:"smooth"})}return!0}return a.setTransition(e),a.setTranslate(y),a.updateActiveIndex(o),a.updateSlidesClasses(),a.emit("beforeTransitionStart",e,i),a.transitionStart(r,b),0===e?a.transitionEnd(r,b):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(t){a&&!a.destroyed&&t.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(r,b))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(t,e,r,i){if(void 0===t&&(t=0),void 0===e&&(e=this.params.speed),void 0===r&&(r=!0),"string"==typeof t){t=parseInt(t,10)}const n=this;if(n.destroyed)return;const s=n.grid&&n.params.grid&&n.params.grid.rows>1;let a=t;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)a+=n.virtual.slidesBefore;else{let t;if(s){const e=a*n.params.grid.rows;t=n.slides.filter((t=>1*t.getAttribute("data-swiper-slide-index")===e))[0].column}else t=n.getSlideIndexByData(a);const e=s?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:r}=n.params;let i=n.params.slidesPerView;"auto"===i?i=n.slidesPerViewDynamic():(i=Math.ceil(parseFloat(n.params.slidesPerView,10)),r&&i%2==0&&(i+=1));let o=e-t<i;if(r&&(o=o||t<Math.ceil(i/2)),o){const i=r?t<n.activeIndex?"prev":"next":t-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:i,slideTo:!0,activeSlideIndex:"next"===i?t+1:t-e+1,slideRealIndex:"next"===i?n.realIndex:void 0})}if(s){const t=a*n.params.grid.rows;a=n.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0].column}else a=n.getSlideIndexByData(a)}return requestAnimationFrame((()=>{n.slideTo(a,e,r,i)})),n},slideNext:function(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this,{enabled:n,params:s,animating:a}=i;if(!n||i.destroyed)return i;let o=s.slidesPerGroup;"auto"===s.slidesPerView&&1===s.slidesPerGroup&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,d=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!d&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame((()=>{i.slideTo(i.activeIndex+l,t,e,r)})),!0}return s.rewind&&i.isEnd?i.slideTo(0,t,e,r):i.slideTo(i.activeIndex+l,t,e,r)},slidePrev:function(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this,{params:n,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:d}=i;if(!l||i.destroyed)return i;const u=i.virtual&&n.virtual.enabled;if(n.loop){if(d&&!u&&n.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}function c(t){return t<0?-Math.floor(Math.abs(t)):Math.floor(t)}const h=c(o?i.translate:-i.translate),f=s.map((t=>c(t)));let g=s[f.indexOf(h)-1];if(void 0===g&&n.cssMode){let t;s.forEach(((e,r)=>{h>=e&&(t=r)})),void 0!==t&&(g=s[t>0?t-1:t])}let p=0;if(void 0!==g&&(p=a.indexOf(g),p<0&&(p=i.activeIndex-1),"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(p=p-i.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),n.rewind&&i.isBeginning){const n=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(n,t,e,r)}return n.loop&&0===i.activeIndex&&n.cssMode?(requestAnimationFrame((()=>{i.slideTo(p,t,e,r)})),!0):i.slideTo(p,t,e,r)},slideReset:function(t,e,r){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0);const i=this;if(!i.destroyed)return i.slideTo(i.activeIndex,t,e,r)},slideToClosest:function(t,e,r,i){void 0===t&&(t=this.params.speed),void 0===e&&(e=!0),void 0===i&&(i=.5);const n=this;if(n.destroyed)return;let s=n.activeIndex;const a=Math.min(n.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[o]){const t=n.snapGrid[o];l-t>(n.snapGrid[o+1]-t)*i&&(s+=n.params.slidesPerGroup)}else{const t=n.snapGrid[o-1];l-t<=(n.snapGrid[o]-t)*i&&(s-=n.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,n.slidesGrid.length-1),n.slideTo(s,t,e,r)},slideToClickedSlide:function(){const t=this;if(t.destroyed)return;const{params:e,slidesEl:r}=t,i="auto"===e.slidesPerView?t.slidesPerViewDynamic():e.slidesPerView;let s,a=t.clickedIndex;const o=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;s=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?a<t.loopedSlides-i/2||a>t.slides.length-t.loopedSlides+i/2?(t.loopFix(),a=t.getSlideIndex((0,n.e)(r,`${o}[data-swiper-slide-index="${s}"]`)[0]),(0,n.n)((()=>{t.slideTo(a)}))):t.slideTo(a):a>t.slides.length-i?(t.loopFix(),a=t.getSlideIndex((0,n.e)(r,`${o}[data-swiper-slide-index="${s}"]`)[0]),(0,n.n)((()=>{t.slideTo(a)}))):t.slideTo(a)}else t.slideTo(a)}};var b={loopCreate:function(t){const e=this,{params:r,slidesEl:i}=e;if(!r.loop||e.virtual&&e.params.virtual.enabled)return;const s=()=>{(0,n.e)(i,`.${r.slideClass}, swiper-slide`).forEach(((t,e)=>{t.setAttribute("data-swiper-slide-index",e)}))},a=e.grid&&r.grid&&r.grid.rows>1,o=r.slidesPerGroup*(a?r.grid.rows:1),l=e.slides.length%o!=0,d=a&&e.slides.length%r.grid.rows!=0,u=t=>{for(let i=0;i<t;i+=1){const t=e.isElement?(0,n.c)("swiper-slide",[r.slideBlankClass]):(0,n.c)("div",[r.slideClass,r.slideBlankClass]);e.slidesEl.append(t)}};if(l){if(r.loopAddBlankSlides){u(o-e.slides.length%o),e.recalcSlides(),e.updateSlides()}else(0,n.t)("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(d){if(r.loopAddBlankSlides){u(r.grid.rows-e.slides.length%r.grid.rows),e.recalcSlides(),e.updateSlides()}else(0,n.t)("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:t,direction:r.centeredSlides?void 0:"next"})},loopFix:function(t){let{slideRealIndex:e,slideTo:r=!0,direction:i,setTranslate:s,activeSlideIndex:a,byController:o,byMousewheel:l}=void 0===t?{}:t;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:h,slidesEl:f,params:g}=d,{centeredSlides:p}=g;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&g.virtual.enabled)return r&&(g.centeredSlides||0!==d.snapIndex?g.centeredSlides&&d.snapIndex<g.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0):d.slideTo(d.virtual.slides.length,0,!1,!0)),d.allowSlidePrev=c,d.allowSlideNext=h,void d.emit("loopFix");let m=g.slidesPerView;"auto"===m?m=d.slidesPerViewDynamic():(m=Math.ceil(parseFloat(g.slidesPerView,10)),p&&m%2==0&&(m+=1));const v=g.slidesPerGroupAuto?m:g.slidesPerGroup;let y=v;y%v!=0&&(y+=v-y%v),y+=g.loopAdditionalSlides,d.loopedSlides=y;const b=d.grid&&g.grid&&g.grid.rows>1;u.length<m+y?(0,n.t)("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):b&&"row"===g.grid.fill&&(0,n.t)("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const T=[],E=[];let S=d.activeIndex;void 0===a?a=d.getSlideIndex(u.filter((t=>t.classList.contains(g.slideActiveClass)))[0]):S=a;const w="next"===i||!i,$="prev"===i||!i;let A=0,C=0;const L=b?Math.ceil(u.length/g.grid.rows):u.length,x=(b?u[a].column:a)+(p&&void 0===s?-m/2+.5:0);if(x<y){A=Math.max(y-x,v);for(let t=0;t<y-x;t+=1){const e=t-Math.floor(t/L)*L;if(b){const t=L-e-1;for(let e=u.length-1;e>=0;e-=1)u[e].column===t&&T.push(e)}else T.push(L-e-1)}}else if(x+m>L-y){C=Math.max(x-(L-2*y),v);for(let t=0;t<C;t+=1){const e=t-Math.floor(t/L)*L;b?u.forEach(((t,r)=>{t.column===e&&E.push(r)})):E.push(e)}}if(d.__preventObserver__=!0,requestAnimationFrame((()=>{d.__preventObserver__=!1})),$&&T.forEach((t=>{u[t].swiperLoopMoveDOM=!0,f.prepend(u[t]),u[t].swiperLoopMoveDOM=!1})),w&&E.forEach((t=>{u[t].swiperLoopMoveDOM=!0,f.append(u[t]),u[t].swiperLoopMoveDOM=!1})),d.recalcSlides(),"auto"===g.slidesPerView?d.updateSlides():b&&(T.length>0&&$||E.length>0&&w)&&d.slides.forEach(((t,e)=>{d.grid.updateSlide(e,t,d.slides)})),g.watchSlidesProgress&&d.updateSlidesOffset(),r)if(T.length>0&&$){if(void 0===e){const t=d.slidesGrid[S],e=d.slidesGrid[S+A]-t;l?d.setTranslate(d.translate-e):(d.slideTo(S+A,0,!1,!0),s&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-e,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-e))}else if(s){const t=b?T.length/g.grid.rows:T.length;d.slideTo(d.activeIndex+t,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(E.length>0&&w)if(void 0===e){const t=d.slidesGrid[S],e=d.slidesGrid[S-C]-t;l?d.setTranslate(d.translate-e):(d.slideTo(S-C,0,!1,!0),s&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-e,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-e))}else{const t=b?E.length/g.grid.rows:E.length;d.slideTo(d.activeIndex-t,0,!1,!0)}if(d.allowSlidePrev=c,d.allowSlideNext=h,d.controller&&d.controller.control&&!o){const t={slideRealIndex:e,direction:i,setTranslate:s,activeSlideIndex:a,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach((e=>{!e.destroyed&&e.params.loop&&e.loopFix({...t,slideTo:e.params.slidesPerView===g.slidesPerView&&r})})):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...t,slideTo:d.controller.control.params.slidesPerView===g.slidesPerView&&r})}d.emit("loopFix")},loopDestroy:function(){const t=this,{params:e,slidesEl:r}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const i=[];t.slides.forEach((t=>{const e=void 0===t.swiperSlideIndex?1*t.getAttribute("data-swiper-slide-index"):t.swiperSlideIndex;i[e]=t})),t.slides.forEach((t=>{t.removeAttribute("data-swiper-slide-index")})),i.forEach((t=>{r.append(t)})),t.recalcSlides(),t.slideTo(t.realIndex,0)}};function T(t,e,r){const n=(0,i.a)(),{params:s}=t,a=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return!a||!(r<=o||r>=n.innerWidth-o)||"prevent"===a&&(e.preventDefault(),!0)}function E(t){const e=this,r=(0,i.g)();let s=t;s.originalEvent&&(s=s.originalEvent);const a=e.touchEventsData;if("pointerdown"===s.type){if(null!==a.pointerId&&a.pointerId!==s.pointerId)return;a.pointerId=s.pointerId}else"touchstart"===s.type&&1===s.targetTouches.length&&(a.touchId=s.targetTouches[0].identifier);if("touchstart"===s.type)return void T(e,s,s.targetTouches[0].pageX);const{params:o,touches:l,enabled:d}=e;if(!d)return;if(!o.simulateTouch&&"mouse"===s.pointerType)return;if(e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let u=s.target;if("wrapper"===o.touchEventsTarget&&!e.wrapperEl.contains(u))return;if("which"in s&&3===s.which)return;if("button"in s&&s.button>0)return;if(a.isTouched&&a.isMoved)return;const c=!!o.noSwipingClass&&""!==o.noSwipingClass,h=s.composedPath?s.composedPath():s.path;c&&s.target&&s.target.shadowRoot&&h&&(u=h[0]);const f=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,g=!(!s.target||!s.target.shadowRoot);if(o.noSwiping&&(g?function(t,e){return void 0===e&&(e=this),function e(r){if(!r||r===(0,i.g)()||r===(0,i.a)())return null;r.assignedSlot&&(r=r.assignedSlot);const n=r.closest(t);return n||r.getRootNode?n||e(r.getRootNode().host):null}(e)}(f,u):u.closest(f)))return void(e.allowClick=!0);if(o.swipeHandler&&!u.closest(o.swipeHandler))return;l.currentX=s.pageX,l.currentY=s.pageY;const p=l.currentX,m=l.currentY;if(!T(e,s,p))return;Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),l.startX=p,l.startY=m,a.touchStartTime=(0,n.d)(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(a.allowThresholdMove=!1);let v=!0;u.matches(a.focusableElements)&&(v=!1,"SELECT"===u.nodeName&&(a.isTouched=!1)),r.activeElement&&r.activeElement.matches(a.focusableElements)&&r.activeElement!==u&&r.activeElement.blur();const y=v&&e.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!y||u.isContentEditable||s.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",s)}function S(t){const e=(0,i.g)(),r=this,s=r.touchEventsData,{params:a,touches:o,rtlTranslate:l,enabled:d}=r;if(!d)return;if(!a.simulateTouch&&"mouse"===t.pointerType)return;let u,c=t;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==s.touchId)return;if(c.pointerId!==s.pointerId)return}if("touchmove"===c.type){if(u=[...c.changedTouches].filter((t=>t.identifier===s.touchId))[0],!u||u.identifier!==s.touchId)return}else u=c;if(!s.isTouched)return void(s.startMoving&&s.isScrolling&&r.emit("touchMoveOpposite",c));const h=u.pageX,f=u.pageY;if(c.preventedByNestedSwiper)return o.startX=h,void(o.startY=f);if(!r.allowTouchMove)return c.target.matches(s.focusableElements)||(r.allowClick=!1),void(s.isTouched&&(Object.assign(o,{startX:h,startY:f,currentX:h,currentY:f}),s.touchStartTime=(0,n.d)()));if(a.touchReleaseOnEdges&&!a.loop)if(r.isVertical()){if(f<o.startY&&r.translate<=r.maxTranslate()||f>o.startY&&r.translate>=r.minTranslate())return s.isTouched=!1,void(s.isMoved=!1)}else if(h<o.startX&&r.translate<=r.maxTranslate()||h>o.startX&&r.translate>=r.minTranslate())return;if(e.activeElement&&c.target===e.activeElement&&c.target.matches(s.focusableElements))return s.isMoved=!0,void(r.allowClick=!1);s.allowTouchCallbacks&&r.emit("touchMove",c),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=h,o.currentY=f;const g=o.currentX-o.startX,p=o.currentY-o.startY;if(r.params.threshold&&Math.sqrt(g**2+p**2)<r.params.threshold)return;if(void 0===s.isScrolling){let t;r.isHorizontal()&&o.currentY===o.startY||r.isVertical()&&o.currentX===o.startX?s.isScrolling=!1:g*g+p*p>=25&&(t=180*Math.atan2(Math.abs(p),Math.abs(g))/Math.PI,s.isScrolling=r.isHorizontal()?t>a.touchAngle:90-t>a.touchAngle)}if(s.isScrolling&&r.emit("touchMoveOpposite",c),void 0===s.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(s.startMoving=!0)),s.isScrolling)return void(s.isTouched=!1);if(!s.startMoving)return;r.allowClick=!1,!a.cssMode&&c.cancelable&&c.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&c.stopPropagation();let m=r.isHorizontal()?g:p,v=r.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;a.oneWayMovement&&(m=Math.abs(m)*(l?1:-1),v=Math.abs(v)*(l?1:-1)),o.diff=m,m*=a.touchRatio,l&&(m=-m,v=-v);const y=r.touchesDirection;r.swipeDirection=m>0?"prev":"next",r.touchesDirection=v>0?"prev":"next";const b=r.params.loop&&!a.cssMode,T="next"===r.touchesDirection&&r.allowSlideNext||"prev"===r.touchesDirection&&r.allowSlidePrev;if(!s.isMoved){if(b&&T&&r.loopFix({direction:r.swipeDirection}),s.startTranslate=r.getTranslate(),r.setTransition(0),r.animating){const t=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});r.wrapperEl.dispatchEvent(t)}s.allowMomentumBounce=!1,!a.grabCursor||!0!==r.allowSlideNext&&!0!==r.allowSlidePrev||r.setGrabCursor(!0),r.emit("sliderFirstMove",c)}if((new Date).getTime(),s.isMoved&&s.allowThresholdMove&&y!==r.touchesDirection&&b&&T&&Math.abs(m)>=1)return Object.assign(o,{startX:h,startY:f,currentX:h,currentY:f,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,void(s.startTranslate=s.currentTranslate);r.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=m+s.startTranslate;let E=!0,S=a.resistanceRatio;if(a.touchReleaseOnEdges&&(S=0),m>0?(b&&T&&s.allowThresholdMove&&s.currentTranslate>(a.centeredSlides?r.minTranslate()-r.slidesSizesGrid[r.activeIndex+1]:r.minTranslate())&&r.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>r.minTranslate()&&(E=!1,a.resistance&&(s.currentTranslate=r.minTranslate()-1+(-r.minTranslate()+s.startTranslate+m)**S))):m<0&&(b&&T&&s.allowThresholdMove&&s.currentTranslate<(a.centeredSlides?r.maxTranslate()+r.slidesSizesGrid[r.slidesSizesGrid.length-1]:r.maxTranslate())&&r.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:r.slides.length-("auto"===a.slidesPerView?r.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),s.currentTranslate<r.maxTranslate()&&(E=!1,a.resistance&&(s.currentTranslate=r.maxTranslate()+1-(r.maxTranslate()-s.startTranslate-m)**S))),E&&(c.preventedByNestedSwiper=!0),!r.allowSlideNext&&"next"===r.swipeDirection&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!r.allowSlidePrev&&"prev"===r.swipeDirection&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),r.allowSlidePrev||r.allowSlideNext||(s.currentTranslate=s.startTranslate),a.threshold>0){if(!(Math.abs(m)>a.threshold||s.allowThresholdMove))return void(s.currentTranslate=s.startTranslate);if(!s.allowThresholdMove)return s.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,s.currentTranslate=s.startTranslate,void(o.diff=r.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}a.followFinger&&!a.cssMode&&((a.freeMode&&a.freeMode.enabled&&r.freeMode||a.watchSlidesProgress)&&(r.updateActiveIndex(),r.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&r.freeMode&&r.freeMode.onTouchMove(),r.updateProgress(s.currentTranslate),r.setTranslate(s.currentTranslate))}function w(t){const e=this,r=e.touchEventsData;let i,s=t;s.originalEvent&&(s=s.originalEvent);if("touchend"===s.type||"touchcancel"===s.type){if(i=[...s.changedTouches].filter((t=>t.identifier===r.touchId))[0],!i||i.identifier!==r.touchId)return}else{if(null!==r.touchId)return;if(s.pointerId!==r.pointerId)return;i=s}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(s.type)){if(!(["pointercancel","contextmenu"].includes(s.type)&&(e.browser.isSafari||e.browser.isWebView)))return}r.pointerId=null,r.touchId=null;const{params:a,touches:o,rtlTranslate:l,slidesGrid:d,enabled:u}=e;if(!u)return;if(!a.simulateTouch&&"mouse"===s.pointerType)return;if(r.allowTouchCallbacks&&e.emit("touchEnd",s),r.allowTouchCallbacks=!1,!r.isTouched)return r.isMoved&&a.grabCursor&&e.setGrabCursor(!1),r.isMoved=!1,void(r.startMoving=!1);a.grabCursor&&r.isMoved&&r.isTouched&&(!0===e.allowSlideNext||!0===e.allowSlidePrev)&&e.setGrabCursor(!1);const c=(0,n.d)(),h=c-r.touchStartTime;if(e.allowClick){const t=s.path||s.composedPath&&s.composedPath();e.updateClickedSlide(t&&t[0]||s.target,t),e.emit("tap click",s),h<300&&c-r.lastClickTime<300&&e.emit("doubleTap doubleClick",s)}if(r.lastClickTime=(0,n.d)(),(0,n.n)((()=>{e.destroyed||(e.allowClick=!0)})),!r.isTouched||!r.isMoved||!e.swipeDirection||0===o.diff&&!r.loopSwapReset||r.currentTranslate===r.startTranslate&&!r.loopSwapReset)return r.isTouched=!1,r.isMoved=!1,void(r.startMoving=!1);let f;if(r.isTouched=!1,r.isMoved=!1,r.startMoving=!1,f=a.followFinger?l?e.translate:-e.translate:-r.currentTranslate,a.cssMode)return;if(a.freeMode&&a.freeMode.enabled)return void e.freeMode.onTouchEnd({currentPos:f});const g=f>=-e.maxTranslate()&&!e.params.loop;let p=0,m=e.slidesSizesGrid[0];for(let t=0;t<d.length;t+=t<a.slidesPerGroupSkip?1:a.slidesPerGroup){const e=t<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==d[t+e]?(g||f>=d[t]&&f<d[t+e])&&(p=t,m=d[t+e]-d[t]):(g||f>=d[t])&&(p=t,m=d[d.length-1]-d[d.length-2])}let v=null,y=null;a.rewind&&(e.isBeginning?y=a.virtual&&a.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(v=0));const b=(f-d[p])/m,T=p<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(h>a.longSwipesMs){if(!a.longSwipes)return void e.slideTo(e.activeIndex);"next"===e.swipeDirection&&(b>=a.longSwipesRatio?e.slideTo(a.rewind&&e.isEnd?v:p+T):e.slideTo(p)),"prev"===e.swipeDirection&&(b>1-a.longSwipesRatio?e.slideTo(p+T):null!==y&&b<0&&Math.abs(b)>a.longSwipesRatio?e.slideTo(y):e.slideTo(p))}else{if(!a.shortSwipes)return void e.slideTo(e.activeIndex);e.navigation&&(s.target===e.navigation.nextEl||s.target===e.navigation.prevEl)?s.target===e.navigation.nextEl?e.slideTo(p+T):e.slideTo(p):("next"===e.swipeDirection&&e.slideTo(null!==v?v:p+T),"prev"===e.swipeDirection&&e.slideTo(null!==y?y:p))}}function $(){const t=this,{params:e,el:r}=t;if(r&&0===r.offsetWidth)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:n,snapGrid:s}=t,a=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const o=a&&e.loop;!("auto"===e.slidesPerView||e.slidesPerView>1)||!t.isEnd||t.isBeginning||t.params.centeredSlides||o?t.params.loop&&!a?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0):t.slideTo(t.slides.length-1,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout((()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()}),500)),t.allowSlidePrev=n,t.allowSlideNext=i,t.params.watchOverflow&&s!==t.snapGrid&&t.checkOverflow()}function A(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function C(){const t=this,{wrapperEl:e,rtlTranslate:r,enabled:i}=t;if(!i)return;let n;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,0===t.translate&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();const s=t.maxTranslate()-t.minTranslate();n=0===s?0:(t.translate-t.minTranslate())/s,n!==t.progress&&t.updateProgress(r?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function L(t){const e=this;h(e,t.target),e.params.cssMode||"auto"!==e.params.slidesPerView&&!e.params.autoHeight||e.update()}function x(){const t=this;t.documentTouchHandlerProceeded||(t.documentTouchHandlerProceeded=!0,t.params.touchReleaseOnEdges&&(t.el.style.touchAction="auto"))}const R=(t,e)=>{const r=(0,i.g)(),{params:n,el:s,wrapperEl:a,device:o}=t,l=!!n.nested,d="on"===e?"addEventListener":"removeEventListener",u=e;r[d]("touchstart",t.onDocumentTouchStart,{passive:!1,capture:l}),s[d]("touchstart",t.onTouchStart,{passive:!1}),s[d]("pointerdown",t.onTouchStart,{passive:!1}),r[d]("touchmove",t.onTouchMove,{passive:!1,capture:l}),r[d]("pointermove",t.onTouchMove,{passive:!1,capture:l}),r[d]("touchend",t.onTouchEnd,{passive:!0}),r[d]("pointerup",t.onTouchEnd,{passive:!0}),r[d]("pointercancel",t.onTouchEnd,{passive:!0}),r[d]("touchcancel",t.onTouchEnd,{passive:!0}),r[d]("pointerout",t.onTouchEnd,{passive:!0}),r[d]("pointerleave",t.onTouchEnd,{passive:!0}),r[d]("contextmenu",t.onTouchEnd,{passive:!0}),(n.preventClicks||n.preventClicksPropagation)&&s[d]("click",t.onClick,!0),n.cssMode&&a[d]("scroll",t.onScroll),n.updateOnWindowResize?t[u](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",$,!0):t[u]("observerUpdate",$,!0),s[d]("load",t.onLoad,{capture:!0})};const k=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;var D={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function I(t,e){return function(r){void 0===r&&(r={});const i=Object.keys(r)[0],s=r[i];"object"==typeof s&&null!==s?(!0===t[i]&&(t[i]={enabled:!0}),"navigation"===i&&t[i]&&t[i].enabled&&!t[i].prevEl&&!t[i].nextEl&&(t[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&t[i]&&t[i].enabled&&!t[i].el&&(t[i].auto=!0),i in t&&"enabled"in s?("object"!=typeof t[i]||"enabled"in t[i]||(t[i].enabled=!0),t[i]||(t[i]={enabled:!1}),(0,n.u)(e,r)):(0,n.u)(e,r)):(0,n.u)(e,r)}}const P={eventsEmitter:c,update:p,translate:m,transition:{setTransition:function(t,e){const r=this;r.params.cssMode||(r.wrapperEl.style.transitionDuration=`${t}ms`,r.wrapperEl.style.transitionDelay=0===t?"0ms":""),r.emit("setTransition",t,e)},transitionStart:function(t,e){void 0===t&&(t=!0);const r=this,{params:i}=r;i.cssMode||(i.autoHeight&&r.updateAutoHeight(),v({swiper:r,runCallbacks:t,direction:e,step:"Start"}))},transitionEnd:function(t,e){void 0===t&&(t=!0);const r=this,{params:i}=r;r.animating=!1,i.cssMode||(r.setTransition(0),v({swiper:r,runCallbacks:t,direction:e,step:"End"}))}},slide:y,loop:b,grabCursor:{setGrabCursor:function(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const r="container"===e.params.touchEventsTarget?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),r.style.cursor="move",r.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame((()=>{e.__preventObserver__=!1}))},unsetGrabCursor:function(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t["container"===t.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame((()=>{t.__preventObserver__=!1})))}},events:{attachEvents:function(){const t=this,{params:e}=t;t.onTouchStart=E.bind(t),t.onTouchMove=S.bind(t),t.onTouchEnd=w.bind(t),t.onDocumentTouchStart=x.bind(t),e.cssMode&&(t.onScroll=C.bind(t)),t.onClick=A.bind(t),t.onLoad=L.bind(t),R(t,"on")},detachEvents:function(){R(this,"off")}},breakpoints:{setBreakpoint:function(){const t=this,{realIndex:e,initialized:r,params:i,el:s}=t,a=i.breakpoints;if(!a||a&&0===Object.keys(a).length)return;const o=t.getBreakpoint(a,t.params.breakpointsBase,t.el);if(!o||t.currentBreakpoint===o)return;const l=(o in a?a[o]:void 0)||t.originalParams,d=k(t,i),u=k(t,l),c=i.enabled;d&&!u?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),t.emitContainerClasses()):!d&&u&&(s.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&"column"===l.grid.fill||!l.grid.fill&&"column"===i.grid.fill)&&s.classList.add(`${i.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((e=>{if(void 0===l[e])return;const r=i[e]&&i[e].enabled,n=l[e]&&l[e].enabled;r&&!n&&t[e].disable(),!r&&n&&t[e].enable()}));const h=l.direction&&l.direction!==i.direction,f=i.loop&&(l.slidesPerView!==i.slidesPerView||h),g=i.loop;h&&r&&t.changeDirection(),(0,n.u)(t.params,l);const p=t.params.enabled,m=t.params.loop;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),c&&!p?t.disable():!c&&p&&t.enable(),t.currentBreakpoint=o,t.emit("_beforeBreakpoint",l),r&&(f?(t.loopDestroy(),t.loopCreate(e),t.updateSlides()):!g&&m?(t.loopCreate(e),t.updateSlides()):g&&!m&&t.loopDestroy()),t.emit("breakpoint",l)},getBreakpoint:function(t,e,r){if(void 0===e&&(e="window"),!t||"container"===e&&!r)return;let n=!1;const s=(0,i.a)(),a="window"===e?s.innerHeight:r.clientHeight,o=Object.keys(t).map((t=>{if("string"==typeof t&&0===t.indexOf("@")){const e=parseFloat(t.substr(1));return{value:a*e,point:t}}return{value:t,point:t}}));o.sort(((t,e)=>parseInt(t.value,10)-parseInt(e.value,10)));for(let t=0;t<o.length;t+=1){const{point:i,value:a}=o[t];"window"===e?s.matchMedia(`(min-width: ${a}px)`).matches&&(n=i):a<=r.clientWidth&&(n=i)}return n||"max"}},checkOverflow:{checkOverflow:function(){const t=this,{isLocked:e,params:r}=t,{slidesOffsetBefore:i}=r;if(i){const e=t.slides.length-1,r=t.slidesGrid[e]+t.slidesSizesGrid[e]+2*i;t.isLocked=t.size>r}else t.isLocked=1===t.snapGrid.length;!0===r.allowSlideNext&&(t.allowSlideNext=!t.isLocked),!0===r.allowSlidePrev&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const t=this,{classNames:e,params:r,rtl:i,el:n,device:s}=t,a=function(t,e){const r=[];return t.forEach((t=>{"object"==typeof t?Object.keys(t).forEach((i=>{t[i]&&r.push(e+i)})):"string"==typeof t&&r.push(e+t)})),r}(["initialized",r.direction,{"free-mode":t.params.freeMode&&r.freeMode.enabled},{autoheight:r.autoHeight},{rtl:i},{grid:r.grid&&r.grid.rows>1},{"grid-column":r.grid&&r.grid.rows>1&&"column"===r.grid.fill},{android:s.android},{ios:s.ios},{"css-mode":r.cssMode},{centered:r.cssMode&&r.centeredSlides},{"watch-progress":r.watchSlidesProgress}],r.containerModifierClass);e.push(...a),n.classList.add(...e),t.emitContainerClasses()},removeClasses:function(){const{el:t,classNames:e}=this;t.classList.remove(...e),this.emitContainerClasses()}}},_={};class O{constructor(){let t,e;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];1===s.length&&s[0].constructor&&"Object"===Object.prototype.toString.call(s[0]).slice(8,-1)?e=s[0]:[t,e]=s,e||(e={}),e=(0,n.u)({},e),t&&!e.el&&(e.el=t);const o=(0,i.g)();if(e.el&&"string"==typeof e.el&&o.querySelectorAll(e.el).length>1){const t=[];return o.querySelectorAll(e.el).forEach((r=>{const i=(0,n.u)({},e,{el:r});t.push(new O(i))})),t}const c=this;c.__swiper__=!0,c.support=l(),c.device=d({userAgent:e.userAgent}),c.browser=u(),c.eventsListeners={},c.eventsAnyListeners=[],c.modules=[...c.__modules__],e.modules&&Array.isArray(e.modules)&&c.modules.push(...e.modules);const h={};c.modules.forEach((t=>{t({params:e,swiper:c,extendParams:I(e,h),on:c.on.bind(c),once:c.once.bind(c),off:c.off.bind(c),emit:c.emit.bind(c)})}));const f=(0,n.u)({},D,h);return c.params=(0,n.u)({},f,_,e),c.originalParams=(0,n.u)({},c.params),c.passedParams=(0,n.u)({},e),c.params&&c.params.on&&Object.keys(c.params.on).forEach((t=>{c.on(t,c.params.on[t])})),c.params&&c.params.onAny&&c.onAny(c.params.onAny),Object.assign(c,{enabled:c.params.enabled,el:t,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return"horizontal"===c.params.direction},isVertical(){return"vertical"===c.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:c.params.allowSlideNext,allowSlidePrev:c.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:c.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:c.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),c.emit("_swiper"),c.params.init&&c.init(),c}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:e,params:r}=this,i=(0,n.e)(e,`.${r.slideClass}, swiper-slide`),s=(0,n.g)(i[0]);return(0,n.g)(t)-s}getSlideIndexByData(t){return this.getSlideIndex(this.slides.filter((e=>1*e.getAttribute("data-swiper-slide-index")===t))[0])}recalcSlides(){const{slidesEl:t,params:e}=this;this.slides=(0,n.e)(t,`.${e.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,e){const r=this;t=Math.min(Math.max(t,0),1);const i=r.minTranslate(),n=(r.maxTranslate()-i)*t+i;r.translateTo(n,void 0===e?0:e),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=t.el.className.split(" ").filter((e=>0===e.indexOf("swiper")||0===e.indexOf(t.params.containerModifierClass)));t.emit("_containerClasses",e.join(" "))}getSlideClasses(t){const e=this;return e.destroyed?"":t.className.split(" ").filter((t=>0===t.indexOf("swiper-slide")||0===t.indexOf(e.params.slideClass))).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const e=[];t.slides.forEach((r=>{const i=t.getSlideClasses(r);e.push({slideEl:r,classNames:i}),t.emit("_slideClass",r,i)})),t.emit("_slideClasses",e)}slidesPerViewDynamic(t,e){void 0===t&&(t="current"),void 0===e&&(e=!1);const{params:r,slides:i,slidesGrid:n,slidesSizesGrid:s,size:a,activeIndex:o}=this;let l=1;if("number"==typeof r.slidesPerView)return r.slidesPerView;if(r.centeredSlides){let t,e=i[o]?Math.ceil(i[o].swiperSlideSize):0;for(let r=o+1;r<i.length;r+=1)i[r]&&!t&&(e+=Math.ceil(i[r].swiperSlideSize),l+=1,e>a&&(t=!0));for(let r=o-1;r>=0;r-=1)i[r]&&!t&&(e+=i[r].swiperSlideSize,l+=1,e>a&&(t=!0))}else if("current"===t)for(let t=o+1;t<i.length;t+=1){(e?n[t]+s[t]-n[o]<a:n[t]-n[o]<a)&&(l+=1)}else for(let t=o-1;t>=0;t-=1){n[o]-n[t]<a&&(l+=1)}return l}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:e,params:r}=t;function i(){const e=t.rtlTranslate?-1*t.translate:t.translate,r=Math.min(Math.max(e,t.maxTranslate()),t.minTranslate());t.setTranslate(r),t.updateActiveIndex(),t.updateSlidesClasses()}let n;if(r.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach((e=>{e.complete&&h(t,e)})),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&t.updateAutoHeight();else{if(("auto"===r.slidesPerView||r.slidesPerView>1)&&t.isEnd&&!r.centeredSlides){const e=t.virtual&&r.virtual.enabled?t.virtual.slides:t.slides;n=t.slideTo(e.length-1,0,!1,!0)}else n=t.slideTo(t.activeIndex,0,!1,!0);n||i()}r.watchOverflow&&e!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,e){void 0===e&&(e=!0);const r=this,i=r.params.direction;return t||(t="horizontal"===i?"vertical":"horizontal"),t===i||"horizontal"!==t&&"vertical"!==t||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${t}`),r.emitContainerClasses(),r.params.direction=t,r.slides.forEach((e=>{"vertical"===t?e.style.width="":e.style.height=""})),r.emit("changeDirection"),e&&r.update()),r}changeLanguageDirection(t){const e=this;e.rtl&&"rtl"===t||!e.rtl&&"ltr"===t||(e.rtl="rtl"===t,e.rtlTranslate="horizontal"===e.params.direction&&e.rtl,e.rtl?(e.el.classList.add(`${e.params.containerModifierClass}rtl`),e.el.dir="rtl"):(e.el.classList.remove(`${e.params.containerModifierClass}rtl`),e.el.dir="ltr"),e.update())}mount(t){const e=this;if(e.mounted)return!0;let r=t||e.params.el;if("string"==typeof r&&(r=document.querySelector(r)),!r)return!1;r.swiper=e,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===e.params.swiperElementNodeName.toUpperCase()&&(e.isElement=!0);const i=()=>`.${(e.params.wrapperClass||"").trim().split(" ").join(".")}`;let s=(()=>{if(r&&r.shadowRoot&&r.shadowRoot.querySelector){return r.shadowRoot.querySelector(i())}return(0,n.e)(r,i())[0]})();return!s&&e.params.createElements&&(s=(0,n.c)("div",e.params.wrapperClass),r.append(s),(0,n.e)(r,`.${e.params.slideClass}`).forEach((t=>{s.append(t)}))),Object.assign(e,{el:r,wrapperEl:s,slidesEl:e.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:s,hostEl:e.isElement?r.parentNode.host:r,mounted:!0,rtl:"rtl"===r.dir.toLowerCase()||"rtl"===(0,n.o)(r,"direction"),rtlTranslate:"horizontal"===e.params.direction&&("rtl"===r.dir.toLowerCase()||"rtl"===(0,n.o)(r,"direction")),wrongRTL:"-webkit-box"===(0,n.o)(s,"display")}),!0}init(t){const e=this;if(e.initialized)return e;if(!1===e.mount(t))return e;e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.enabled&&e.setGrabCursor(),e.params.loop&&e.virtual&&e.params.virtual.enabled?e.slideTo(e.params.initialSlide+e.virtual.slidesBefore,0,e.params.runCallbacksOnInit,!1,!0):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit,!1,!0),e.params.loop&&e.loopCreate(),e.attachEvents();const r=[...e.el.querySelectorAll('[loading="lazy"]')];return e.isElement&&r.push(...e.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach((t=>{t.complete?h(e,t):t.addEventListener("load",(t=>{h(e,t.target)}))})),g(e),e.initialized=!0,g(e),e.emit("init"),e.emit("afterInit"),e}destroy(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);const r=this,{params:i,el:s,wrapperEl:a,slides:o}=r;return void 0===r.params||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),e&&(r.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach((t=>{t.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),t.removeAttribute("style"),t.removeAttribute("data-swiper-slide-index")}))),r.emit("destroy"),Object.keys(r.eventsListeners).forEach((t=>{r.off(t)})),!1!==t&&(r.el.swiper=null,(0,n.v)(r)),r.destroyed=!0),null}static extendDefaults(t){(0,n.u)(_,t)}static get extendedDefaults(){return _}static get defaults(){return D}static installModule(t){O.prototype.__modules__||(O.prototype.__modules__=[]);const e=O.prototype.__modules__;"function"==typeof t&&e.indexOf(t)<0&&e.push(t)}static use(t){return Array.isArray(t)?(t.forEach((t=>O.installModule(t))),O):(O.installModule(t),O)}}Object.keys(P).forEach((t=>{Object.keys(P[t]).forEach((e=>{O.prototype[e]=P[t][e]}))})),O.use([function(t){let{swiper:e,on:r,emit:n}=t;const s=(0,i.a)();let a=null,o=null;const l=()=>{e&&!e.destroyed&&e.initialized&&(n("beforeResize"),n("resize"))},d=()=>{e&&!e.destroyed&&e.initialized&&n("orientationchange")};r("init",(()=>{e.params.resizeObserver&&void 0!==s.ResizeObserver?e&&!e.destroyed&&e.initialized&&(a=new ResizeObserver((t=>{o=s.requestAnimationFrame((()=>{const{width:r,height:i}=e;let n=r,s=i;t.forEach((t=>{let{contentBoxSize:r,contentRect:i,target:a}=t;a&&a!==e.el||(n=i?i.width:(r[0]||r).inlineSize,s=i?i.height:(r[0]||r).blockSize)})),n===r&&s===i||l()}))})),a.observe(e.el)):(s.addEventListener("resize",l),s.addEventListener("orientationchange",d))})),r("destroy",(()=>{o&&s.cancelAnimationFrame(o),a&&a.unobserve&&e.el&&(a.unobserve(e.el),a=null),s.removeEventListener("resize",l),s.removeEventListener("orientationchange",d)}))},function(t){let{swiper:e,extendParams:r,on:s,emit:a}=t;const o=[],l=(0,i.a)(),d=function(t,r){void 0===r&&(r={});const i=new(l.MutationObserver||l.WebkitMutationObserver)((t=>{if(e.__preventObserver__)return;if(1===t.length)return void a("observerUpdate",t[0]);const r=function(){a("observerUpdate",t[0])};l.requestAnimationFrame?l.requestAnimationFrame(r):l.setTimeout(r,0)}));i.observe(t,{attributes:void 0===r.attributes||r.attributes,childList:void 0===r.childList||r.childList,characterData:void 0===r.characterData||r.characterData}),o.push(i)};r({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",(()=>{if(e.params.observer){if(e.params.observeParents){const t=(0,n.a)(e.hostEl);for(let e=0;e<t.length;e+=1)d(t[e])}d(e.hostEl,{childList:e.params.observeSlideChildren}),d(e.wrapperEl,{attributes:!1})}})),s("destroy",(()=>{o.forEach((t=>{t.disconnect()})),o.splice(0,o.length)}))}])}}]);